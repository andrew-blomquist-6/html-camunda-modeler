!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).CamundaCockpitUi=e()}}(function(){var define,module,exports;return function o(a,s,c){function l(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return l(a[t][1][e]||e)},r,r.exports,o,a,s,c)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=p(e),n=t[0],i=t[1];return 3*(n+i)/4-i},n.toByteArray=function(e){for(var t,n=p(e),i=n[0],r=n[1],o=new u(function(e,t,n){return 3*(t+n)/4-n}(0,i,r)),a=0,s=0<r?i-4:i,c=0;c<s;c+=4)t=l[e.charCodeAt(c)]<<18|l[e.charCodeAt(c+1)]<<12|l[e.charCodeAt(c+2)]<<6|l[e.charCodeAt(c+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;2===r&&(t=l[e.charCodeAt(c)]<<2|l[e.charCodeAt(c+1)]>>4,o[a++]=255&t);1===r&&(t=l[e.charCodeAt(c)]<<10|l[e.charCodeAt(c+1)]<<4|l[e.charCodeAt(c+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t);return o},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,r=[],o=0,a=n-i;o<a;o+=16383)r.push(c(e,o,a<o+16383?a:o+16383));1==i?(t=e[n-1],r.push(s[t>>2]+s[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],r.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return r.join("")};for(var s=[],l=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=i.length;r<o;++r)s[r]=i[r],l[i.charCodeAt(r)]=r;function p(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,r,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(s[(r=i)>>18&63]+s[r>>12&63]+s[r>>6&63]+s[63&r]);return o.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){var c=Object.create||function(e){var t=function(){};return t.prototype=e,new t},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=c(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0;var r,s=10;try{var l={};Object.defineProperty&&Object.defineProperty(l,"x",{value:0}),r=0===l.x}catch(e){r=!1}function u(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function p(e,t,n,i){var r,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=c(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),!a.warned&&(r=u(e))&&0<r&&a.length>r){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=o[t]=n,++e._eventsCount;return e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function f(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=o.call(d,i);return r.listener=n,i.wrapFn=r}function h(e,t,n){var i=e._events;if(!i)return[];var r=i[t];return r?"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):v(r,r.length):[]}function m(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}r?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');s=e}}):i.defaultMaxListeners=s,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(e){var t,n,i,r,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(i=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var i=e.length,r=v(e,i),o=0;o<i;++o)r[o].call(n)}(n,l,this);break;case 2:!function(e,t,n,i){if(t)e.call(n,i);else for(var r=e.length,o=v(e,r),a=0;a<r;++a)o[a].call(n,i)}(n,l,this,arguments[1]);break;case 3:!function(e,t,n,i,r){if(t)e.call(n,i,r);else for(var o=e.length,a=v(e,o),s=0;s<o;++s)a[s].call(n,i,r)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,i,r,o){if(t)e.call(n,i,r,o);else for(var a=e.length,s=v(e,a),c=0;c<a;++c)s[c].call(n,i,r,o)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),o=1;o<i;o++)r[o-1]=arguments[o];!function(e,t,n,i){if(t)e.apply(n,i);else for(var r=e.length,o=v(e,r),a=0;a<r;++a)o[a].apply(n,i)}(n,l,this,r)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){return p(this,e,t,!1)},i.prototype.prependListener=function(e,t){return p(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,i,r,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=c(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.removeAllListeners=function(e){var t,n,i;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=c(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=c(null):delete n[e]),this;if(0===arguments.length){var r,o=a(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=c(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},i.prototype.listeners=function(e){return h(this,e,!0)},i.prototype.rawListeners=function(e){return h(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},i.prototype.listenerCount=m,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],3:[function(e,t,j){(function(p){"use strict";var i=e("base64-js"),o=e("ieee754");j.Buffer=p,j.SlowBuffer=function(e){+e!=e&&(e=0);return p.alloc(+e)},j.INSPECT_MAX_BYTES=50;var n=2147483647;function a(e){if(n<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=p.prototype,t}function p(e,t,n){if("number"!=typeof e)return r(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}function r(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!p.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|d(e,t),i=a(n),r=i.write(e,t);r!==n&&(i=i.slice(0,r));return i}(e,t);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return i.__proto__=p.prototype,i}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return p.from(i,t,n);var r=function(e){if(p.isBuffer(e)){var t=0|u(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||M(e.length)?a(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return p.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return s(e),a(e<0?0:0|u(e))}function l(e){for(var t=e.length<0?0:0|u(e.length),n=a(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function u(e){if(n<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function d(e,t){if(p.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return P(e).length;default:if(r)return i?-1:D(e).length;t=(""+t).toLowerCase(),r=!0}}function f(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function h(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),M(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=p.from(t,i)),p.isBuffer(t))return 0===t.length?-1:m(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,i,r){var o,a=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s/=a=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(r){var u=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(s<n+c&&(n=s-c),o=n;0<=o;o--){for(var p=!0,d=0;d<c;d++)if(l(e,o+d)!==l(t,d)){p=!1;break}if(p)return o}return-1}function v(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?r<(i=Number(i))&&(i=r):i=r;var o=t.length;o/2<i&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(M(s))return a;e[n+a]=s}return a}function g(e,t,n,i){return R(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function y(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function b(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o,a,s,c,l=e[r],u=null,p=239<l?4:223<l?3:191<l?2:1;if(r+p<=n)switch(p){case 1:l<128&&(u=l);break;case 2:128!=(192&(o=e[r+1]))||127<(c=(31&l)<<6|63&o)&&(u=c);break;case 3:o=e[r+1],a=e[r+2],128!=(192&o)||128!=(192&a)||2047<(c=(15&l)<<12|(63&o)<<6|63&a)&&(c<55296||57343<c)&&(u=c);break;case 4:o=e[r+1],a=e[r+2],s=e[r+3],128!=(192&o)||128!=(192&a)||128!=(192&s)||65535<(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)&&c<1114112&&(u=c)}null===u?(u=65533,p=1):65535<u&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=p}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=_));return n}(i)}j.kMaxLength=n,(p.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),p.poolSize=8192,p.from=function(e,t,n){return r(e,t,n)},p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,p.alloc=function(e,t,n){return function(e,t,n){return s(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},p.allocUnsafe=function(e){return c(e)},p.allocUnsafeSlow=function(e){return c(e)},p.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==p.prototype},p.compare=function(e,t){if(N(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),N(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var i=p.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(N(o,Uint8Array)&&(o=p.from(o)),!p.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},p.byteLength=d,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},p.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},p.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?b(this,0,e):function(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return b(this,t,n);case"ascii":return w(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return y(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},p.prototype.equals=function(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===p.compare(this,e)},p.prototype.inspect=function(){var e="",t=j.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},p.prototype.compare=function(e,t,n,i,r){if(N(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(r<=i&&n<=t)return 0;if(r<=i)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(i,r),l=e.slice(t,n),u=0;u<s;++u)if(c[u]!==l[u]){o=c[u],a=l[u];break}return o<a?-1:a<o?1:0},p.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},p.prototype.indexOf=function(e,t,n){return h(this,e,t,n,!0)},p.prototype.lastIndexOf=function(e,t,n){return h(this,e,t,n,!1)},p.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||r<n)&&(n=r),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o,a,s,c,l,u,p,d,f,h=!1;;)switch(i){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return d=t,f=n,R(D(e,(p=this).length-d),p,d,f);case"ascii":return g(this,e,t,n);case"latin1":case"binary":return g(this,e,t,n);case"base64":return c=this,l=t,u=n,R(P(e),c,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,s=n,R(function(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,(o=this).length-a),o,a,s);default:if(h)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),h=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function w(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function x(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function E(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||i<n)&&(n=i);for(var r="",o=t;o<n;++o)r+=I(e[o]);return r}function C(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,n,i,r,o){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function T(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(e,t,n,i,r){return t=+t,n>>>=0,r||T(e,0,n,4),o.write(e,t,n,i,23,4),n+4}function A(e,t,n,i,r){return t=+t,n>>>=0,r||T(e,0,n,8),o.write(e,t,n,i,52,8),n+8}p.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=p.prototype,i},p.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},p.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var i=this[e+--t],r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i},p.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},p.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return(r*=128)<=i&&(i-=Math.pow(2,8*t)),i},p.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var i=t,r=1,o=this[e+--i];0<i&&(r*=256);)o+=this[e+--i]*r;return(r*=128)<=o&&(o-=Math.pow(2,8*t)),o},p.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),o.read(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),o.read(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),o.read(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),o.read(this,e,!1,52,8)},p.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t>>>=0,n>>>=0,i)||S(this,e,t,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[t]=255&e;++o<n&&(r*=256);)this[t+o]=e/r&255;return t+n},p.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t>>>=0,n>>>=0,i)||S(this,e,t,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[t+r]=255&e;0<=--r&&(o*=256);)this[t+r]=e/o&255;return t+n},p.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,255,0),this[t]=255&e,t+1},p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);S(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},p.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=Math.pow(2,8*n-1);S(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},p.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},p.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},p.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},p.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},p.prototype.writeDoubleLE=function(e,t,n){return A(this,e,t,!0,n)},p.prototype.writeDoubleBE=function(e,t,n){return A(this,e,t,!1,n)},p.prototype.copy=function(e,t,n,i){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),0<i&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var o=r-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return r},p.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!p.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var r=e.charCodeAt(0);("utf8"===i&&r<128||"latin1"===i)&&(e=r)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=p.isBuffer(e)?e:p.from(e,i),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var t=/[^+/0-9A-Za-z-_]/g;function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e,t){var n;t=t||1/0;for(var i=e.length,r=null,o=[],a=0;a<i;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!r){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===i){-1<(t-=3)&&o.push(239,191,189);continue}r=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else!r||-1<(t-=3)&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function P(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(t,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function R(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function M(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:136}],4:[function(e,t,n){t.exports=e("./lib/index")},{"./lib/index":51}],5:[function(require,module,exports){"use strict";var CamundaForm=require("./../../forms/camunda-form"),angular=require("angular"),$=CamundaForm.$,constants=require("./../../forms/constants"),CamundaFormAngular=CamundaForm.extend({renderForm:function(){var t=this;function e(e,t){var n=$(t);if(!n.attr("ng-model")){var i=n.attr(constants.DIRECTIVE_CAM_VARIABLE_NAME);i&&n.attr("ng-model",i)}}this.formElement=angular.element(this.formElement),CamundaForm.prototype.renderForm.apply(this,arguments);for(var n=0;n<this.formFieldHandlers.length;n++){var i=this.formFieldHandlers[n].selector;$(i,t.formElement).each(e)}this.formElement=angular.element(this.formElement);var r=t.formElement.injector();if(r){var o=t.formElement.scope();r.invoke(["$compile",function(e){e(t.formElement)(o)}]),o.camForm=this}},executeFormScript:function(script){this.formElement=angular.element(this.formElement);var moment=require("moment"),injector=this.formElement.injector(),scope=this.formElement.scope();!function(camForm,$scope,moment){var inject=function(e){if(!angular.isFunction(e)&&!angular.isArray(e))throw new Error("Must call inject(array|fn)");injector.instantiate(e,{$scope:scope})};eval(script)}(this,scope,moment)},fireEvent:function(){this.formElement=angular.element(this.formElement);function n(){CamundaForm.prototype.fireEvent.apply(e,t)}var e=this,t=arguments,i=this.formElement.scope(),r=e.formElement.injector();r&&r.invoke(["$rootScope",function(e){var t=e.$$phase;"$apply"!==t&&"$digest"!==t?i.$apply(function(){n()}):n()}])}});module.exports=CamundaFormAngular},{"./../../forms/camunda-form":42,"./../../forms/constants":43,angular:"angular",moment:"moment"}],6:[function(e,t,n){"use strict";var i=e("angular"),r=e("./camunda-form-angular"),o=e("./../../forms/type-util").isType,a=i.module("cam.embedded.forms",[]);a.directive("camVariableName",["$rootScope",function(o){return{require:"ngModel",link:function(i,e,t,r){e.on("camFormVariableApplied",function(e,t){var n=o.$$phase;"$apply"!==n&&"$digest"!==n?i.$apply(function(){r.$setViewValue(t)}):r.$setViewValue(t)})}}}]),a.directive("camVariableType",[function(){return{require:"ngModel",link:function(e,n,i,r){function t(e){var t=i.camVariableType;return r.$setValidity("camVariableType",!0),!e&&!1!==e&&"Bytes"!==t||(r.$pristine&&(r.$pristine=!1,r.$dirty=!0,n.addClass("ng-dirty"),n.removeClass("ng-pristine")),-1!==["Boolean","String","Bytes"].indexOf(t)||o(e,t)||r.$setValidity("camVariableType",!1),"file"===i.type&&"Bytes"===t&&n[0].files&&n[0].files[0]&&n[0].files[0].size>(i.camMaxFilesize||5e6)&&r.$setValidity("camVariableType",!1)),e}r.$parsers.unshift(t),r.$formatters.push(t),i.$observe("camVariableType",function(){return t(r.$viewValue)}),n.bind("change",function(){t(r.$viewValue),e.$apply()})}}}]),t.exports=r},{"./../../forms/type-util":49,"./camunda-form-angular":5,angular:"angular"}],7:[function(e,t,n){t.exports={Client:e("./../api-client"),Form:e("./forms"),utils:e("./../utils")}},{"./../api-client":11,"./../utils":52,"./forms":6}],8:[function(e,t,n){"use strict";var u=e("q"),i=e("./../events");function p(){}var r=e("./../base-class").extend({initialize:function(){this.http=this.constructor.http}},{path:"",http:{},create:function(){},list:function(n,i){"function"==typeof n&&(i=n,n={}),n=n||{},i=i||p;function r(){l&&c&&(o.trigger("loaded",a),s.resolve(a),i(null,a))}var o=this,a={count:0,items:[]},s=u.defer(),c=!1,l=!1;return o.count(n,function(e,t){e?(o.trigger("error",e),s.reject(e),i(e)):(a.count=t,c=!0,r())}),o.http.get(o.path,{data:n,done:function(e,t){e?(o.trigger("error",e),s.reject(e),i(e)):(a.items=t,a.firstResult=parseInt(n.firstResult||0,10),a.maxResults=a.firstResult+parseInt(n.maxResults||10,10),l=!0,r())}}),s.promise},count:function(e,n){"function"==typeof e&&(n=e,e={}),e=e||{},n=n||p;var i=this,r=u.defer();return this.http.get(this.path+"/count",{data:e,done:function(e,t){e?(i.trigger("error",e),r.reject(e),n(e)):(r.resolve(t.count),n(null,t.count))}}),r.promise},update:function(){},delete:function(){}});i.attach(r),t.exports=r},{"./../base-class":40,"./../events":41,q:"q"}],9:[function(e,t,n){n.createSimpleGetQueryFunction=function(i){return function(e,t){var n=this.path+i;return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})}}},{}],10:[function(n,i,e){(function(l){"use strict";var u=n("./../../vendor/superagent").default,p=n("q"),t=n("./../events"),o=n("./../utils");function d(){}function e(e){if((e=e||{}).headers=e.headers||{},e.headers.Accept||(e.headers.Accept="application/hal+json, application/json; q=0.5"),!e.baseUrl)throw new Error("HttpClient needs a `baseUrl` configuration property.");t.attach(this),this.config=e}function f(n,i,r){return i=i||d,function(e,t){if(e||!t.ok&&!t.noContent)return e=e||t.error||new Error("The "+t.req.method+" request on "+t.req.url+" failed"),t&&t.body&&t.body.message&&(e.message=t.body.message),n.trigger("error",e),r&&r.reject(e),i(e);"application/hal+json"===t.type&&(t.body&&0!==Object.keys(t.body).length||(t.body=JSON.parse(t.text)),t.body=o.solveHALEmbedded(t.body)),r&&r.resolve(t.body?t.body:t.text?t.text:""),i(null,t.body?t.body:t.text?t.text:"")}}e.prototype.post=function(e,t){var n=(t=t||{}).done||d,i=p.defer(),r=this.config.baseUrl+(e?"/"+e:""),o=u.post(r),a=t.headers||this.config.headers;a.Accept=a.Accept||this.config.headers.Accept;var s=!1;if(void 0!==l)Object.keys(t.fields||{}).forEach(function(e){o.field(e,t.fields[e]),s=!0}),(t.attachments||[]).forEach(function(e,t){o.attach("data_"+t,new l(e.content),e.name),s=!0});else if(t.fields||t.attachments){var c=new Error("Multipart request is only supported in node.js environement.");return n(c),i.reject(c)}return s||o.send(t.data||{}),o.set(a).query(t.query||{}),o.end(f(this,n,i)),i.promise},e.prototype.get=function(e,t){var n=this.config.baseUrl+(e?"/"+e:"");return this.load(n,t)},e.prototype.load=function(e,t){var n=(t=t||{}).done||d,i=p.defer(),r=t.headers||this.config.headers,o=t.accept||r.Accept||this.config.headers.Accept;return u.get(e).set(r).set("Accept",o).query(t.data||{}).end(f(this,n,i)),i.promise},e.prototype.put=function(e,t){var n=(t=t||{}).done||d,i=p.defer(),r=this.config.baseUrl+(e?"/"+e:""),o=t.headers||this.config.headers;return o.Accept=o.Accept||this.config.headers.Accept,u.put(r).set(o).send(t.data||{}).end(f(this,n,i)),i.promise},e.prototype.del=function(e,t){var n=(t=t||{}).done||d,i=p.defer(),r=this.config.baseUrl+(e?"/"+e:""),o=t.headers||this.config.headers;return o.Accept=o.Accept||this.config.headers.Accept,u.del(r).set(o).send(t.data||{}).end(f(this,n,i)),i.promise},e.prototype.options=function(e,t){var n=(t=t||{}).done||d,i=p.defer(),r=this.config.baseUrl+(e?"/"+e:""),o=t.headers||this.config.headers;return o.Accept=o.Accept||this.config.headers.Accept,u("OPTIONS",r).set(o).end(f(this,n,i)),i.promise},i.exports=e}).call(this,n("buffer").Buffer)},{"./../../vendor/superagent":56,"./../events":41,"./../utils":52,buffer:3,q:"q"}],11:[function(s,e,t){"use strict";var n=s("./../events");function i(e){if(!e)throw new Error("Needs configuration");if(!e.apiUri)throw new Error("An apiUri is required");n.attach(this),e.engine=void 0!==e.engine?e.engine:"default",e.mock=void 0===e.mock||e.mock,e.resources=e.resources||{},this.HttpClient=e.HttpClient||i.HttpClient,this.baseUrl=e.apiUri,e.engine&&(this.baseUrl+="/"!==this.baseUrl.slice(-1)?"/":"",this.baseUrl+="engine/"+e.engine),this.config=e,this.initialize()}i.HttpClient=s("./http-client"),function(e){e.config={};var a={};e.initialize=function(){a.authorization=s("./resources/authorization"),a.batch=s("./resources/batch"),a.deployment=s("./resources/deployment"),a["external-task"]=s("./resources/external-task"),a.filter=s("./resources/filter"),a.history=s("./resources/history"),a["process-definition"]=s("./resources/process-definition"),a["process-instance"]=s("./resources/process-instance"),a.task=s("./resources/task"),a["task-report"]=s("./resources/task-report"),a.variable=s("./resources/variable"),a["case-execution"]=s("./resources/case-execution"),a["case-instance"]=s("./resources/case-instance"),a["case-definition"]=s("./resources/case-definition"),a.user=s("./resources/user"),a.group=s("./resources/group"),a.tenant=s("./resources/tenant"),a.incident=s("./resources/incident"),a["job-definition"]=s("./resources/job-definition"),a.job=s("./resources/job"),a.metrics=s("./resources/metrics"),a["decision-definition"]=s("./resources/decision-definition"),a.execution=s("./resources/execution"),a.migration=s("./resources/migration"),a.drd=s("./resources/drd"),a.modification=s("./resources/modification"),a.message=s("./resources/message"),a["password-policy"]=s("./resources/password-policy");var e,t,n,i,r=this;function o(e){r.trigger("error",e)}for(e in this.http=new this.HttpClient({baseUrl:this.baseUrl,headers:this.config.headers}),a){for(i in t={name:e,mock:this.config.mock,baseUrl:this.baseUrl,headers:this.config.headers},n=this.config.resources[e]||{})t[i]=n[i];a[e].http=new this.HttpClient(t),a[e].http.on("error",o)}},e.resource=function(e){return a[e]}}(i.prototype),e.exports=i},{"./../events":41,"./http-client":10,"./resources/authorization":12,"./resources/batch":13,"./resources/case-definition":14,"./resources/case-execution":15,"./resources/case-instance":16,"./resources/decision-definition":17,"./resources/deployment":18,"./resources/drd":19,"./resources/execution":20,"./resources/external-task":21,"./resources/filter":22,"./resources/group":23,"./resources/history":24,"./resources/incident":25,"./resources/job":27,"./resources/job-definition":26,"./resources/message":28,"./resources/metrics":29,"./resources/migration":30,"./resources/modification":31,"./resources/password-policy":32,"./resources/process-definition":33,"./resources/process-instance":34,"./resources/task":36,"./resources/task-report":35,"./resources/tenant":37,"./resources/user":38,"./resources/variable":39}],12:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="authorization",i.list=function(e,t){return this.http.get(this.path,{data:e,done:t})},i.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},i.create=function(e,t){return this.http.post(this.path+"/create",{data:e,done:t})},i.update=function(e,t){return this.http.put(this.path+"/"+e.id,{data:e,done:t})},i.save=function(e,t){return i[e.id?"update":"create"](e,t)},i.delete=function(e,t){return this.http.del(this.path+"/"+e,{done:t})},i.check=function(e,t){return this.http.get(this.path+"/check",{data:e,done:t})},t.exports=i},{"./../abstract-client-resource":8}],13:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="batch",i.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},i.suspended=function(e,t){return this.http.put(this.path+"/"+e.id+"/suspended",{data:{suspended:!!e.suspended},done:t})},i.statistics=function(e,t){return this.http.get(this.path+"/statistics/",{data:e,done:t})},i.statisticsCount=function(e,t){return this.http.get(this.path+"/statistics/count",{data:e,done:t})},i.delete=function(e,t){var n=this.path+"/"+e.id;return e.cascade&&(n+="?cascade=true"),this.http.del(n,{done:t})},t.exports=i},{"./../abstract-client-resource":8}],14:[function(e,t,n){"use strict";function i(){}var r=e("./../abstract-client-resource").extend();r.path="case-definition",r.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},r.getByKey=function(e,t){return this.http.get(this.path+"/key/"+e,{done:t})},r.list=function(e,t){return this.http.get(this.path,{data:e,done:t})},r.create=function(e,t){var n=this.path+"/";return e.id?n+=e.id:(n=n+"key/"+e.key,e.tenantId&&(n=n+"/tenant-id/"+e.tenantId)),this.http.post(n+"/create",{data:e,done:t})},r.xml=function(e,t){var n=this.path+"/"+(e.id?e.id:"key/"+e.key)+"/xml";return this.http.get(n,{done:t||i})},r.updateHistoryTimeToLive=function(e,t,n){var i=this.path+"/"+e+"/history-time-to-live";return this.http.put(i,{data:t,done:n})},t.exports=r},{"./../abstract-client-resource":8}],15:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource"),r=e("../../utils");function o(){}var a=i.extend();a.path="case-execution",a.list=function(e,t){return t=t||o,this.http.get(this.path,{data:e,done:t})},a.disable=function(e,t,n){return this.http.post(this.path+"/"+e+"/disable",{data:t,done:n})},a.reenable=function(e,t,n){return this.http.post(this.path+"/"+e+"/reenable",{data:t,done:n})},a.manualStart=function(e,t,n){return this.http.post(this.path+"/"+e+"/manual-start",{data:t,done:n})},a.complete=function(e,t,n){return this.http.post(this.path+"/"+e+"/complete",{data:t,done:n})},a.deleteVariable=function(e,t){return this.http.del(this.path+"/"+e.id+"/localVariables/"+r.escapeUrl(e.varId),{done:t})},a.modifyVariables=function(e,t){return this.http.post(this.path+"/"+e.id+"/localVariables",{data:e,done:t})},t.exports=a},{"../../utils":52,"./../abstract-client-resource":8}],16:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource"),r=e("../../utils"),o=i.extend();o.path="case-instance",o.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},o.list=function(e,t){return this.http.get(this.path,{data:e,done:t})},o.close=function(e,t,n){return this.http.post(this.path+"/"+e+"/close",{data:t,done:n})},o.terminate=function(e,t,n){return this.http.post(this.path+"/"+e+"/terminate",{data:t,done:n})},o.setVariable=function(e,t,n){var i=this.path+"/"+e+"/variables/"+r.escapeUrl(t.name);return this.http.put(i,{data:t,done:n})},t.exports=o},{"../../utils":52,"./../abstract-client-resource":8}],17:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="decision-definition",i.list=function(e,t){return this.http.get(this.path,{data:e,done:t})},i.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},i.getXml=function(e,t){return this.http.get(this.path+"/"+e+"/xml",{done:t})},i.evaluate=function(e,t){return this.http.post(this.path+"/"+(e.id?e.id:"key/"+e.key)+"/evaluate",{data:e,done:t})},i.updateHistoryTimeToLive=function(e,t,n){var i=this.path+"/"+e+"/history-time-to-live";return this.http.put(i,{data:t,done:n})},t.exports=i},{"./../abstract-client-resource":8}],18:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource"),r=i.extend();r.path="deployment",r.create=function(e,t){var n={"deployment-name":e.deploymentName},i=Array.isArray(e.files)?e.files:[e.files];return e.deploymentSource&&(n["deployment-source"]=e.deploymentSource),e.enableDuplicateFiltering&&(n["enable-duplicate-filtering"]="true"),e.deployChangedOnly&&(n["deploy-changed-only"]="true"),e.tenantId&&(n["tenant-id"]=e.tenantId),this.http.post(this.path+"/create",{data:{},fields:n,attachments:i,done:t})},r.delete=function(e,t,n){var i=this.path+"/"+e;if(t){var r=[];for(var o in t){var a=t[o];r.push(o+"="+a)}r.length&&(i+="?"+r.join("&"))}return this.http.del(i,{done:n})},r.list=function(){return i.list.apply(this,arguments)},r.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},r.getResources=function(e,t){return this.http.get(this.path+"/"+e+"/resources",{done:t})},r.getResource=function(e,t,n){return this.http.get(this.path+"/"+e+"/resources/"+t,{done:n})},r.getResourceData=function(e,t,n){return this.http.get(this.path+"/"+e+"/resources/"+t+"/data",{accept:"*/*",done:n})},r.redeploy=function(e,t){var n=e.id;return delete e.id,this.http.post(this.path+"/"+n+"/redeploy",{data:e,done:t||function(){}})},t.exports=r},{"./../abstract-client-resource":8}],19:[function(e,t,n){"use strict";var i=e("../abstract-client-resource"),r=e("../../utils"),o=i.extend();function a(e,t){return e+"/"+r.escapeUrl(t)}function s(e,t,n){var i=e+"/key/"+r.escapeUrl(t);return"function"!=typeof n&&(i+="/tenant-id/"+r.escapeUrl(n)),i}o.path="decision-requirements-definition",o.count=function(e,t){return"function"==typeof e&&(t=e,e={}),this.http.get(this.path+"/count",{data:e,done:t})},o.list=function(e,t){return"function"==typeof e&&(t=e,e={}),this.http.get(this.path,{data:e,done:t})},o.get=function(e,t){return this.http.get(a(this.path,e),{done:t})},o.getByKey=function(e,t,n){var i=s(this.path,e,t);return"function"==typeof t&&(n=t),this.http.get(i,{done:n})},o.getXML=function(e,t){return this.http.get(a(this.path,e)+"/xml",{done:t})},o.getXMLByKey=function(e,t,n){var i=s(this.path,e,t)+"/xml";return"function"==typeof t&&(n=t),this.http.get(i,{done:n})},t.exports=o},{"../../utils":52,"../abstract-client-resource":8}],20:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource"),r=e("../../utils"),o=i.extend();o.path="execution",o.deleteVariable=function(e,t){return this.http.del(this.path+"/"+e.id+"/localVariables/"+r.escapeUrl(e.varId),{done:t})},o.modifyVariables=function(e,t){return this.http.post(this.path+"/"+e.id+"/localVariables",{data:e,done:t})},t.exports=o},{"../../utils":52,"./../abstract-client-resource":8}],21:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="external-task",i.get=function(e,t){return this.http.get(this.path+"/"+e.id,{data:e,done:t})},i.list=function(e,t){var n=this.path+"/";return n+="?firstResult="+(e.firstResult||0),n+="&maxResults="+(e.maxResults||15),this.http.post(n,{data:e,done:t})},i.count=function(e,t){return this.http.post(this.path+"/count",{data:e,done:t})},i.fetchAndLock=function(e,t){return this.http.post(this.path+"/fetchAndLock",{data:e,done:t})},i.complete=function(e,t){return this.http.post(this.path+"/"+e.id+"/complete",{data:e,done:t})},i.failure=function(e,t){return this.http.post(this.path+"/"+e.id+"/failure",{data:e,done:t})},i.unlock=function(e,t){return this.http.post(this.path+"/"+e.id+"/unlock",{data:e,done:t})},i.retries=function(e,t){return this.http.put(this.path+"/"+e.id+"/retries",{data:e,done:t})},i.retriesAsync=function(e,t){return this.http.post(this.path+"/retries-async",{data:e,done:t})},t.exports=i},{"./../abstract-client-resource":8}],22:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="filter",i.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},i.list=function(e,t){return this.http.get(this.path,{data:e,done:t})},i.getTasks=function(e,t){var n=this.path+"/";return"string"==typeof e?(n=n+e+"/list",e={}):(n=n+e.id+"/list",delete e.id),n+="?firstResult="+(e.firstResult||0),n+="&maxResults="+(e.maxResults||15),this.http.post(n,{data:e,done:t})},i.create=function(e,t){return this.http.post(this.path+"/create",{data:e,done:t})},i.update=function(e,t){return this.http.put(this.path+"/"+e.id,{data:e,done:t})},i.save=function(e,t){return i[e.id?"update":"create"](e,t)},i.delete=function(e,t){return this.http.del(this.path+"/"+e,{done:t})},i.authorizations=function(e,t){return 1===arguments.length?this.http.options(this.path,{done:e,headers:{Accept:"application/json"}}):this.http.options(this.path+"/"+e,{done:t,headers:{Accept:"application/json"}})},t.exports=i},{"./../abstract-client-resource":8}],23:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource"),r=e("../../utils");function o(){}var a=i.extend();a.path="group",a.options=function(e,t){var n;return 1===arguments.length?(t=e,n=""):void 0===(n="string"==typeof e?e:e.id)&&(n=""),this.http.options(this.path+"/"+r.escapeUrl(n),{done:t||o,headers:{Accept:"application/json"}})},a.create=function(e,t){return this.http.post(this.path+"/create",{data:e,done:t||o})},a.count=function(e,t){return e=1===arguments.length?(t=e,{}):e||{},this.http.get(this.path+"/count",{data:e,done:t||o})},a.get=function(e,t){var n="string"==typeof e?e:e.id;return this.http.get(this.path+"/"+r.escapeUrl(n),{data:e,done:t||o})},a.list=function(e,t){return e=1===arguments.length?(t=e,{}):e||{},this.http.get(this.path,{data:e,done:t||o})},a.createMember=function(e,t){return this.http.put(this.path+"/"+r.escapeUrl(e.id)+"/members/"+r.escapeUrl(e.userId),{data:e,done:t||o})},a.deleteMember=function(e,t){return this.http.del(this.path+"/"+r.escapeUrl(e.id)+"/members/"+r.escapeUrl(e.userId),{data:e,done:t||o})},a.update=function(e,t){return this.http.put(this.path+"/"+r.escapeUrl(e.id),{data:e,done:t||o})},a.delete=function(e,t){return this.http.del(this.path+"/"+r.escapeUrl(e.id),{data:e,done:t||o})},t.exports=a},{"../../utils":52,"./../abstract-client-resource":8}],24:[function(e,t,n){"use strict";var i=e("../abstract-client-resource"),r=e("../helpers"),o=i.extend();o.path="history",o.userOperationCount=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.get(this.path+"/user-operation/count",{data:e,done:t})},o.userOperation=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.get(this.path+"/user-operation",{data:e,done:t})},o.processInstance=function(e,t){"function"==typeof e&&(t=arguments[0],e={});var n={},i={},r=["firstResult","maxResults"];for(var o in e)-1<r.indexOf(o)?i[o]=e[o]:n[o]=e[o];return this.http.post(this.path+"/process-instance",{data:n,query:i,done:t})},o.processInstanceCount=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.post(this.path+"/process-instance/count",{data:e,done:t})},o.deleteProcessInstancesAsync=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.post(this.path+"/process-instance/delete",{data:e,done:t})},o.setRemovalTimeToHistoricProcessInstancesAsync=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.post(this.path+"/process-instance/set-removal-time",{data:e,done:t})},o.setRemovalTimeToHistoricDecisionInstancesAsync=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.post(this.path+"/decision-instance/set-removal-time",{data:e,done:t})},o.setRemovalTimeToHistoricBatchesAsync=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.post(this.path+"/batch/set-removal-time",{data:e,done:t})},o.decisionInstance=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.get(this.path+"/decision-instance",{data:e,done:t})},o.decisionInstanceCount=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.get(this.path+"/decision-instance/count",{data:e,done:t})},o.deleteDecisionInstancesAsync=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.post(this.path+"/decision-instance/delete",{data:e,done:t})},o.batch=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.get(this.path+"/batch",{data:e,done:t})},o.singleBatch=function(e,t){return this.http.get(this.path+"/batch/"+e,{done:t})},o.batchCount=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.get(this.path+"/batch/count",{data:e,done:t})},o.batchDelete=function(e,t){var n=this.path+"/batch/"+e;return this.http.del(n,{done:t})},o.report=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),e.reportType=e.reportType||"duration",e.periodUnit=e.periodUnit||"month",this.http.get(this.path+"/process-instance/report",{data:e,done:t})},o.reportAsCsv=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),e.reportType=e.reportType||"duration",e.periodUnit=e.periodUnit||"month",this.http.get(this.path+"/process-instance/report",{data:e,accept:"text/csv",done:t})},o.task=function(e,t){"function"==typeof e&&(t=arguments[0],e={});var n={},i={},r=["firstResult","maxResults"];for(var o in e)-1<r.indexOf(o)?i[o]=e[o]:n[o]=e[o];return this.http.post(this.path+"/task",{data:n,query:i,done:t})},o.taskCount=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.post(this.path+"/task/count",{data:e,done:t})},o.taskDurationReport=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),e.reportType=e.reportType||"duration",e.periodUnit=e.periodUnit||"month",this.http.get(this.path+"/task/report",{data:e,done:t})},o.taskReport=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),e.reportType=e.reportType||"count",this.http.get(this.path+"/task/report",{data:e,done:t})},o.caseInstance=function(e,t){"function"==typeof e&&(t=arguments[0],e={});var n={},i={},r=["firstResult","maxResults"];for(var o in e)-1<r.indexOf(o)?i[o]=e[o]:n[o]=e[o];return this.http.post(this.path+"/case-instance",{data:n,query:i,done:t})},o.caseInstanceCount=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.post(this.path+"/case-instance/count",{data:e,done:t})},o.caseActivityInstance=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.get(this.path+"/case-activity-instance",{data:e,done:t})},o.caseActivityInstanceCount=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.get(this.path+"/case-activity-instance/count",{data:e,done:t})},o.variableInstance=function(e,t){"function"==typeof e&&(t=arguments[0],e={});var n={},i={},r=["firstResult","maxResults","deserializeValues"];for(var o in e)-1<r.indexOf(o)?i[o]=e[o]:n[o]=e[o];return this.http.post(this.path+"/variable-instance",{data:n,query:i,done:t})},o.variableInstanceCount=function(e,t){return"function"==typeof e&&(t=arguments[0],e={}),this.http.post(this.path+"/variable-instance/count",{data:e,done:t})},o.caseActivityStatistics=function(e,t){var n=e.id||e;return this.http.get(this.path+"/case-definition/"+n+"/statistics",{done:t})},o.drdStatistics=function(e,t,n){var i=this.path+"/decision-requirements-definition/"+e+"/statistics";return"function"==typeof t&&(n=t,t={}),this.http.get(i,{data:t,done:n})},o.cleanupConfiguration=function(e,t){var n=this.path+"/cleanup/configuration";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.deleteVariable=function(e,t){var n=this.path+"/variable-instance/"+e;return this.http.del(n,{done:t})},o.deleteAllVariables=function(e,t){var n=this.path+"/process-instance/"+e+"/variable-instances";return this.http.del(n,{done:t})},o.cleanupJobs=function(e,t){var n=this.path+"/cleanup/jobs";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.cleanup=function(e,t){var n=this.path+"/cleanup";return"function"==typeof e&&(t=e,e={}),this.http.post(n,{data:e,done:t})},o.cleanableProcessCount=function(e,t){var n=this.path+"/process-definition/cleanable-process-instance-report/count";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.cleanableProcess=function(e,t){var n=this.path+"/process-definition/cleanable-process-instance-report";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.cleanableCaseCount=function(e,t){var n=this.path+"/case-definition/cleanable-case-instance-report/count";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.cleanableCase=function(e,t){var n=this.path+"/case-definition/cleanable-case-instance-report";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.cleanableDecisionCount=function(e,t){var n=this.path+"/decision-definition/cleanable-decision-instance-report/count";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.cleanableDecision=function(e,t){var n=this.path+"/decision-definition/cleanable-decision-instance-report";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.cleanableBatchCount=function(e,t){var n=this.path+"/batch/cleanable-batch-report/count";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.cleanableBatch=function(e,t){var n=this.path+"/batch/cleanable-batch-report";return"function"==typeof e&&(t=e,e={}),this.http.get(n,{data:e,done:t})},o.externalTaskLogList=r.createSimpleGetQueryFunction("/external-task-log"),o.externalTaskLogCount=r.createSimpleGetQueryFunction("/external-task-log/count"),t.exports=o},{"../abstract-client-resource":8,"../helpers":9}],25:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="incident",i.get=function(e,t){return this.http.get(this.path,{data:e,done:t})},i.count=function(e,t){return this.http.get(this.path+"/count",{data:e,done:t})},t.exports=i},{"./../abstract-client-resource":8}],26:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="job-definition",i.setRetries=function(e,t){return this.http.put(this.path+"/"+e.id+"/retries",{data:e,done:t})},i.list=function(e,t){return this.http.get(this.path,{data:e,done:t})},i.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},t.exports=i},{"./../abstract-client-resource":8}],27:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="job",i.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},i.list=function(e,t){var n=this.path;return n+="?firstResult="+(e.firstResult||0),e.maxResults&&(n+="&maxResults="+e.maxResults),this.http.post(n,{data:e,done:t})},i.setRetries=function(e,t){return this.http.put(this.path+"/"+e.id+"/retries",{data:e,done:t})},i.delete=function(e,t){return this.http.del(this.path+"/"+e,{done:t})},i.stacktrace=function(e,t){var n=this.path+"/"+e+"/stacktrace";return this.http.get(n,{accept:"text/plain",done:t})},i.recalculateDuedate=function(e,t){var n=this.path+"/"+e.id+"/duedate/recalculate";return 0==e.creationDateBased&&(n+="?creationDateBased="+e.creationDateBased),this.http.post(n,{done:t})},i.setDuedate=function(e,t){var n=this.path+"/"+e.id+"/duedate";return this.http.put(n,{data:e,done:t})},i.suspended=function(e,t){return this.http.put(this.path+"/"+e.id+"/suspended",{data:{suspended:!!e.suspended},done:t})},t.exports=i},{"./../abstract-client-resource":8}],28:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="message",i.correlate=function(e,t){var n=this.path+"/";return this.http.post(n,{data:e,done:t})},t.exports=i},{"./../abstract-client-resource":8}],29:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="metrics",i.sum=function(e,t){var n=this.path+"/"+e.name+"/sum";return delete e.name,this.http.get(n,{data:e,done:t})},i.byInterval=function(e,t){return this.http.get(this.path,{data:e,done:t})},t.exports=i},{"./../abstract-client-resource":8}],30:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="migration",i.generate=function(e,t){var n=this.path+"/generate";return this.http.post(n,{data:e,done:t})},i.execute=function(e,t){var n=this.path+"/execute";return this.http.post(n,{data:e,done:t})},i.executeAsync=function(e,t){var n=this.path+"/executeAsync";return this.http.post(n,{data:e,done:t})},i.validate=function(e,t){var n=this.path+"/validate";return this.http.post(n,{data:e,done:t})},t.exports=i},{"./../abstract-client-resource":8}],31:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="modification",i.execute=function(e,t){var n=this.path+"/execute";return this.http.post(n,{data:e,done:t})},i.executeAsync=function(e,t){var n=this.path+"/executeAsync";return this.http.post(n,{data:e,done:t})},t.exports=i},{"./../abstract-client-resource":8}],32:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="identity/password-policy",i.get=function(e){return this.http.get(this.path,{done:e})},i.validate=function(e,t){return"string"==typeof e&&(e={password:e}),this.http.post(this.path,{data:e,done:t})},t.exports=i},{"./../abstract-client-resource":8}],33:[function(e,t,n){"use strict";var o=e("q"),i=e("./../abstract-client-resource");function a(){}var r=i.extend({suspend:function(e,t){return"function"==typeof e&&(t=e,e={}),e=e||{},t=t||a,this.http.post(this.path,{done:t})},stats:function(e){return this.http.post(this.path,{done:e||a})},start:function(e){return this.http.post(this.path,{data:{},done:e})}},{path:"process-definition",get:function(e,t){return this.http.get(this.path+"/"+e,{done:t})},getByKey:function(e,t){return this.http.get(this.path+"/key/"+e,{done:t})},list:function(){return i.list.apply(this,arguments)},count:function(){return i.count.apply(this,arguments)},formVariables:function(e,t){var n="";if(t=t||a,e.key)n="key/"+e.key;else{if(!e.id){var i=new Error("Process definition task variables needs either a key or an id.");return t(i),o.reject(i)}n=e.id}var r={deserializeValues:e.deserializeValues};return e.names&&(r.variableNames=(e.names||[]).join(",")),this.http.get(this.path+"/"+n+"/form-variables",{data:r,done:t})},submitForm:function(e,t){var n="";if(t=t||a,e.key)n="key/"+e.key,e.tenantId&&(n+="/tenant-id/"+e.tenantId);else{if(!e.id)return t(new Error("Process definition task variables needs either a key or an id."));n=e.id}return this.http.post(this.path+"/"+n+"/submit-form",{data:{businessKey:e.businessKey,variables:e.variables},done:t})},delete:function(e,t){t=t||a;var n="";if(e.key)n="key/"+e.key,e.tenantId&&(n+="/tenant-id/"+e.tenantId),n+="/delete";else{if(!e.id)return t(new Error("Process definition deletion needs either a key or an id."));n=e.id}var i="?",r="cascade";return"boolean"==typeof e[r]&&(i+=r+"="+e[r]),"boolean"==typeof e[r="skipCustomListeners"]&&(1<i.length&&(i+="&"),i+=r+"="+e[r]),"boolean"==typeof e[r="skipIoMappings"]&&(1<i.length&&(i+="&"),i+=r+"="+e[r]),this.http.del(this.path+"/"+n+i,{done:t})},startForm:function(e,t){var n=this.path+"/"+(e.key?"key/"+e.key:e.id)+"/startForm";return this.http.get(n,{done:t||a})},xml:function(e,t){var n=this.path+"/"+(e.id?e.id:"key/"+e.key)+"/xml";return this.http.get(n,{done:t||a})},statistics:function(e,t){var n=this.path;return e.id?n+="/"+e.id:e.key&&(n+="/key/"+e.key),n+="/statistics",this.http.get(n,{data:e,done:t||a})},submit:function(e,t){var n=this.path;return e.key?n+="/key/"+e.key:n+="/"+e.id,n+="/submit-form",this.http.post(n,{data:e,done:t})},suspend:function(e,t,n){return"function"==typeof t&&(n=t,t={}),t=t||{},n=n||a,e=Array.isArray(e)?e:[e],this.http.post(this.path,{done:n})},start:function(e,t){var n=this.path+"/";return e.id?n+=e.id:(n=n+"key/"+e.key,e.tenantId&&(n=n+"/tenant-id/"+e.tenantId)),this.http.post(n+"/start",{data:e,done:t})},updateHistoryTimeToLive:function(e,t,n){var i=this.path+"/"+e+"/history-time-to-live";return this.http.put(i,{data:t,done:n})},restart:function(e,t,n){var i=this.path+"/"+e+"/restart";return this.http.post(i,{data:t,done:n})},restartAsync:function(e,t,n){var i=this.path+"/"+e+"/restart-async";return this.http.post(i,{data:t,done:n})}});t.exports=r},{"./../abstract-client-resource":8,q:"q"}],34:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource"),r=e("../../utils"),o=i.extend({},{path:"process-instance",get:function(e,t){return this.http.get(this.path+"/"+e,{done:t})},create:function(e,t){return this.http.post(e,t)},list:function(e,t){var n=this.path;return n+="?firstResult="+(e.firstResult||0),n+="&maxResults="+(e.maxResults||15),this.http.post(n,{data:e,done:t})},count:function(e,t){var n=this.path+"/count";return this.http.post(n,{data:e,done:t})},modify:function(e,t){return this.http.post(this.path+"/"+e.id+"/modification",{data:{instructions:e.instructions,skipCustomListeners:e.skipCustomListeners,skipIoMappings:e.skipIoMappings},done:t})},modifyAsync:function(e,t){return this.http.post(this.path+"/"+e.id+"/modification-async",{data:{instructions:e.instructions,skipCustomListeners:e.skipCustomListeners,skipIoMappings:e.skipIoMappings},done:t})},deleteAsync:function(e,t){return this.http.post(this.path+"/delete",{data:e,done:t})},deleteAsyncHistoricQueryBased:function(e,t){return this.http.post(this.path+"/delete-historic-query-based",{data:e,done:t})},setJobsRetriesAsync:function(e,t){return this.http.post(this.path+"/job-retries",{data:e,done:t})},setJobsRetriesAsyncHistoricQueryBased:function(e,t){return this.http.post(this.path+"/job-retries-historic-query-based",{data:e,done:t})},suspendAsync:function(e,t){return this.http.post(this.path+"/suspended-async",{data:e,done:t})},setVariable:function(e,t,n){var i=this.path+"/"+e+"/variables/"+r.escapeUrl(t.name);return this.http.put(i,{data:t,done:n})}});t.exports=o},{"../../utils":52,"./../abstract-client-resource":8}],35:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="task/report",i.countByCandidateGroup=function(e){return this.http.get(this.path+"/candidate-group-count",{done:e})},i.countByCandidateGroupAsCsv=function(e){return this.http.get(this.path+"/candidate-group-count",{accept:"text/csv",done:e})},t.exports=i},{"./../abstract-client-resource":8}],36:[function(e,t,n){"use strict";var o=e("q"),i=e("./../abstract-client-resource"),r=e("../../utils");function a(){}var s=i.extend();s.path="task",s.list=function(e,s){s=s||a;var c=o.defer();return this.http.get(this.path,{data:e,done:function(e,t){if(e)return s(e),c.reject(e);if(t._embedded){var n=t._embedded.task||t._embedded.tasks,i=t._embedded.processDefinition;for(var r in n){var o=n[r];for(var a in o._embedded=o._embedded||{},i)if(i[a].id===o.processDefinitionId){o._embedded.processDefinition=[i[a]];break}}}s(null,t),c.resolve(t)}}),c.promise},s.get=function(e,t){return this.http.get(this.path+"/"+e,{done:t})},s.comments=function(e,t){return this.http.get(this.path+"/"+e+"/comment",{done:t})},s.identityLinks=function(e,t){return this.http.get(this.path+"/"+e+"/identity-links",{done:t})},s.identityLinksAdd=function(e,t,n){return 2===arguments.length&&(n=arguments[1],e=(t=arguments[0]).id),this.http.post(this.path+"/"+e+"/identity-links",{data:t,done:n})},s.identityLinksDelete=function(e,t,n){return 2===arguments.length&&(n=arguments[1],e=(t=arguments[0]).id),this.http.post(this.path+"/"+e+"/identity-links/delete",{data:t,done:n})},s.createComment=function(e,t,n){return this.http.post(this.path+"/"+e+"/comment/create",{data:{message:t},done:n})},s.create=function(e,t){return this.http.post(this.path+"/create",{data:e,done:t})},s.update=function(e,t){return this.http.put(this.path+"/"+e.id,{data:e,done:t})},s.assignee=function(e,t,n){var i={userId:t};return 2===arguments.length&&(e=arguments[0].taskId,i.userId=arguments[0].userId,n=t),this.http.post(this.path+"/"+e+"/assignee",{data:i,done:n})},s.delegate=function(e,t,n){var i={userId:t};return 2===arguments.length&&(e=arguments[0].taskId,i.userId=arguments[0].userId,n=t),this.http.post(this.path+"/"+e+"/delegate",{data:i,done:n})},s.claim=function(e,t,n){var i={userId:t};return 2===arguments.length&&(e=arguments[0].taskId,i.userId=arguments[0].userId,n=t),this.http.post(this.path+"/"+e+"/claim",{data:i,done:n})},s.unclaim=function(e,t){return"string"!=typeof e&&(e=e.taskId),this.http.post(this.path+"/"+e+"/unclaim",{done:t})},s.submitForm=function(e,t){if(t=t||a,e.id)return this.http.post(this.path+"/"+e.id+"/submit-form",{data:{variables:e.variables},done:t});var n=new Error("Task submitForm needs a task id.");return t(n),o.reject(n)},s.complete=function(e,t){if(t=t||a,e.id)return this.http.post(this.path+"/"+e.id+"/complete",{data:{variables:e.variables},done:t});var n=new Error("Task complete needs a task id.");return t(n),o.reject(n)},s.formVariables=function(e,t){t=t||a;var n="";if(e.key)n="key/"+e.key;else{if(!e.id){var i=new Error("Task variables needs either a key or an id.");return t(i),o.reject(i)}n=e.id}var r={deserializeValues:e.deserializeValues};return e.names&&(r.variableNames=e.names.join(",")),this.http.get(this.path+"/"+n+"/form-variables",{data:r,done:t})},s.form=function(e,t){return this.http.get(this.path+"/"+e+"/form",{done:t})},s.localVariable=function(e,t){return this.http.put(this.path+"/"+e.id+"/localVariables/"+e.varId,{data:e,done:t})},s.localVariables=function(e,t){return this.http.get(this.path+"/"+e+"/localVariables",{done:t})},s.modifyVariables=function(e,t){return this.http.post(this.path+"/"+e.id+"/localVariables",{data:e,done:t})},s.deleteVariable=function(e,t){return this.http.del(this.path+"/"+e.id+"/localVariables/"+r.escapeUrl(e.varId),{done:t})},t.exports=s},{"../../utils":52,"./../abstract-client-resource":8,q:"q"}],37:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource"),r=e("../../utils");function o(){}var a=i.extend();a.path="tenant",a.create=function(e,t){return this.http.post(this.path+"/create",{data:e,done:t||o})},a.count=function(e,t){return e=1===arguments.length?(t=e,{}):e||{},this.http.get(this.path+"/count",{data:e,done:t||o})},a.get=function(e,t){var n;return"string"==typeof e?(n=e,e={}):(n=e.id,delete e.id),this.http.get(this.path+"/"+r.escapeUrl(n),{data:e,done:t||o})},a.list=function(e,t){return e=1===arguments.length?(t=e,{}):e||{},this.http.get(this.path,{data:e,done:t||o})},a.createUserMember=function(e,t){return this.http.put(this.path+"/"+r.escapeUrl(e.id)+"/user-members/"+r.escapeUrl(e.userId),{data:e,done:t||o})},a.createGroupMember=function(e,t){return this.http.put(this.path+"/"+r.escapeUrl(e.id)+"/group-members/"+r.escapeUrl(e.groupId),{data:e,done:t||o})},a.deleteUserMember=function(e,t){return this.http.del(this.path+"/"+r.escapeUrl(e.id)+"/user-members/"+r.escapeUrl(e.userId),{data:e,done:t||o})},a.deleteGroupMember=function(e,t){return this.http.del(this.path+"/"+r.escapeUrl(e.id)+"/group-members/"+r.escapeUrl(e.groupId),{data:e,done:t||o})},a.update=function(e,t){return this.http.put(this.path+"/"+r.escapeUrl(e.id),{data:e,done:t||o})},a.delete=function(e,t){return this.http.del(this.path+"/"+r.escapeUrl(e.id),{data:e,done:t||o})},a.options=function(e,t){var n;return 1===arguments.length?(t=e,n=""):void 0===(n="string"==typeof e?e:e.id)&&(n=""),this.http.options(this.path+"/"+r.escapeUrl(n),{done:t||o,headers:{Accept:"application/json"}})},t.exports=a},{"../../utils":52,"./../abstract-client-resource":8}],38:[function(e,t,n){"use strict";var s=e("q"),i=e("./../abstract-client-resource"),r=e("../../utils");function c(){}var o=i.extend();o.path="user",o.options=function(e,t){var n;return 1===arguments.length?(t=e,n=""):void 0===(n="string"==typeof e?e:e.id)&&(n=""),this.http.options(this.path+"/"+r.escapeUrl(n),{done:t||c,headers:{Accept:"application/json"}})},o.create=function(e,t){e=e||{},t=t||c;var n=["id","firstName","lastName","password"];for(var i in n){var r=n[i];if(!e[r]){var o=new Error("Missing "+r+" option to create user");return t(o),s.reject(o)}}var a={profile:{id:e.id,firstName:e.firstName,lastName:e.lastName},credentials:{password:e.password}};return e.email&&(a.profile.email=e.email),this.http.post(this.path+"/create",{data:a,done:t})},o.list=function(e,t){return e="function"==typeof e?(t=e,{}):e||{},this.http.get(this.path,{data:e,done:t||c})},o.count=function(e,t){return e=1===arguments.length?(t=e,{}):e||{},this.http.get(this.path+"/count",{data:e,done:t||c})},o.profile=function(e,t){var n="string"==typeof e?e:e.id;return this.http.get(this.path+"/"+r.escapeUrl(n)+"/profile",{done:t||c})},o.updateProfile=function(e,t){if(t=t||c,(e=e||{}).id)return this.http.put(this.path+"/"+r.escapeUrl(e.id)+"/profile",{data:e,done:t});var n=new Error("Missing id option to update user profile");return t(n),s.reject(n)},o.updateCredentials=function(e,t){var n;if(t=t||c,!(e=e||{}).id)return t(n=new Error("Missing id option to update user credentials")),s.reject(n);if(!e.password)return t(n=new Error("Missing password option to update user credentials")),s.reject(n);var i={password:e.password};return e.authenticatedUserPassword&&(i.authenticatedUserPassword=e.authenticatedUserPassword),this.http.put(this.path+"/"+r.escapeUrl(e.id)+"/credentials",{data:i,done:t})},o.delete=function(e,t){var n="string"==typeof e?e:e.id;return this.http.del(this.path+"/"+r.escapeUrl(n),{done:t||c})},o.unlock=function(e,t){var n="string"==typeof e?e:e.id;return this.http.post(this.path+"/"+r.escapeUrl(n)+"/unlock",{done:t||c})},t.exports=o},{"../../utils":52,"./../abstract-client-resource":8,q:"q"}],39:[function(e,t,n){"use strict";var i=e("./../abstract-client-resource").extend();i.path="variable-instance",i.instances=function(e,t){var n={},i={},r=["firstResult","maxResults","deserializeValues"];for(var o in e)-1<r.indexOf(o)?i[o]=e[o]:n[o]=e[o];return this.http.post(this.path,{data:n,query:i,done:t})},i.count=function(e,t){var n=this.path+"/count";return this.http.post(n,{data:e,done:t})},t.exports=i},{"./../abstract-client-resource":8}],40:[function(e,t,n){"use strict";var i=e("./events");function r(){this.initialize()}r.extend=function(e,t){e=e||{},t=t||{};var n,i,r,o,a=this;for(r in n=e&&Object.hasOwnProperty.call(a,"constructor")?e.constructor:function(){return a.apply(this,arguments)},a)n[r]=a[r];for(r in t)n[r]=t[r];for(o in(i=function(){this.constructor=n}).prototype=a.prototype,n.prototype=new i,e)n.prototype[o]=e[o];return n},r.prototype.initialize=function(){},i.attach(r),t.exports=r},{"./events":41}],41:[function(e,t,n){"use strict";var i={};function r(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(this,arguments),e=null),t}}function o(e,t){e._events=e._events||{},e._events[t]=e._events[t]||[]}i.attach=function(e){e.on=this.on,e.once=this.once,e.off=this.off,e.trigger=this.trigger,e._events={}},i.on=function(e,t){return o(this,e),this._events[e].push(t),this},i.once=function(e,t){var n=this,i=r(function(){n.off(e,r),t.apply(this,arguments)});return i._callback=t,this.on(e,i)},i.off=function(e,t){if(o(this,e),!t)return delete this._events[e],this;var n,i=[];for(n in this._events[e])this._events[e][n]!==t&&i.push(this._events[e][n]);return this._events[e]=i,this},i.trigger=function(){var e,t=function(e){var t,n=[];for(t in e)n.push(e[t]);return n}(arguments),n=t.shift();for(e in o(this,n),this._events[n])this._events[n][e](this,t);return this},t.exports=i},{}],42:[function(require,module,exports){"use strict";var moment=require("moment"),$=require("./dom-lib"),VariableManager=require("./variable-manager"),InputFieldHandler=require("./controls/input-field-handler"),ChoicesFieldHandler=require("./controls/choices-field-handler"),FileDownloadHandler=require("./controls/file-download-handler"),BaseClass=require("./../base-class"),constants=require("./constants"),Events=require("./../events");function extend(e,t){for(var n in t)e[n]=t[n];return e}function CamundaForm(e){if(!e)throw new Error("CamundaForm need to be initialized with options.");var t=e.done=e.done||function(e){if(e)throw e};return e.client?this.client=e.client:this.client=new CamSDK.Client(e.clientConfig||{}),e.taskId||e.processDefinitionId||e.processDefinitionKey?(this.taskId=e.taskId,this.taskId&&(this.taskBasePath=this.client.baseUrl+"/task/"+this.taskId),this.processDefinitionId=e.processDefinitionId,this.processDefinitionKey=e.processDefinitionKey,this.formElement=e.formElement,this.containerElement=e.containerElement,this.formUrl=e.formUrl,this.formElement||this.containerElement?this.formElement||this.formUrl?(this.variableManager=new VariableManager({client:this.client}),this.formFieldHandlers=e.formFieldHandlers||[InputFieldHandler,ChoicesFieldHandler,FileDownloadHandler],this.businessKey=null,this.fields=[],this.scripts=[],this.options=e,Events.attach(this),void this.initialize(t)):t(new Error("Camunda form needs to be intialized with either 'formElement' or 'formUrl'")):t(new Error("CamundaForm needs to be initilized with either 'formElement' or 'containerElement'"))):t(new Error("Cannot initialize Taskform: either 'taskId' or 'processDefinitionId' or 'processDefinitionKey' must be provided"))}CamundaForm.prototype.initializeHandler=function(e){var t=this,n=e.selector;$(n,t.formElement).each(function(){t.fields.push(new e(this,t.variableManager))})},CamundaForm.prototype.initialize=function(n){n=n||function(e){if(e)throw e};var i=this;if(this.formUrl)this.client.http.load(this.formUrl,{accept:"*/*",done:function(e,t){if(e)return n(e);try{i.renderForm(t),i.initializeForm(n)}catch(e){n(e)}},data:extend({noCache:Date.now()},this.options.urlParams||{})});else try{this.initializeForm(n)}catch(e){n(e)}},CamundaForm.prototype.renderForm=function(e){$(this.containerElement).html("").append('<div class="injected-form-wrapper">'+e+"</div>");var t=this.formElement=$("form",this.containerElement);if(1!==t.length)throw new Error("Form must provide exaclty one element <form ..>");t.attr("name")||t.attr("name","$$camForm")},CamundaForm.prototype.initializeForm=function(n){var i=this;this.initializeFormScripts(),this.initializeFieldHandlers(),this.executeFormScripts(),this.fireEvent("form-loaded"),this.fetchVariables(function(e,t){if(e)throw e;i.mergeVariables(t),i.storeOriginalValues(t),i.fireEvent("variables-fetched"),i.restore(),i.fireEvent("variables-restored"),i.applyVariables(),i.fireEvent("variables-applied"),n(null,i)})},CamundaForm.prototype.initializeFieldHandlers=function(){for(var e in this.formFieldHandlers)this.initializeHandler(this.formFieldHandlers[e])},CamundaForm.prototype.initializeFormScripts=function(){for(var e=$("script["+constants.DIRECTIVE_CAM_SCRIPT+"]",this.formElement),t=0;t<e.length;t++)this.scripts.push(e[t].text)},CamundaForm.prototype.executeFormScripts=function(){for(var e=0;e<this.scripts.length;e++)this.executeFormScript(this.scripts[e])},CamundaForm.prototype.executeFormScript=function(script){!function(camForm){eval(script)}(this)},CamundaForm.prototype.store=function(t){var e=this.taskId||this.processDefinitionId||this.caseInstanceId;if(!e){if("function"==typeof t)return t(new Error("Cannot determine the storage ID"));throw new Error("Cannot determine the storage ID")}if(this.storePrevented=!1,this.fireEvent("store"),!this.storePrevented){try{this.retrieveVariables();var n={date:Date.now(),vars:{}};for(var i in this.variableManager.variables)"Bytes"!==this.variableManager.variables[i].type&&(n.vars[i]=this.variableManager.variables[i].value);localStorage.setItem("camForm:"+e,JSON.stringify(n))}catch(e){if("function"==typeof t)return t(e);throw e}this.fireEvent("variables-stored"),"function"==typeof t&&t()}},CamundaForm.prototype.isRestorable=function(){var e=this.taskId||this.processDefinitionId||this.caseInstanceId;if(!e)throw new Error("Cannot determine the storage ID");if(!localStorage.getItem("camForm:"+e))return!1;var t=localStorage.getItem("camForm:"+e);try{t=JSON.parse(t)}catch(e){return!1}return!(!t||!Object.keys(t).length)},CamundaForm.prototype.restore=function(t){var e,n=this.variableManager.variables,i=this.taskId||this.processDefinitionId||this.caseDefinitionId;if(!i){if("function"==typeof t)return t(new Error("Cannot determine the storage ID"));throw new Error("Cannot determine the storage ID")}if(!this.isRestorable())return"function"==typeof t?t():void 0;try{e=localStorage.getItem("camForm:"+i),e=JSON.parse(e).vars}catch(e){if("function"==typeof t)return t(e);throw e}for(var r in e)n[r]?n[r].value=e[r]:n[r]={name:r,value:e[r]};"function"==typeof t&&t()},CamundaForm.prototype.submit=function(n){var i=this.taskId||this.processDefinitionId;if(this.submitPrevented=!1,this.fireEvent("submit"),this.submitPrevented){var e=new Error("camForm submission prevented");return this.fireEvent("submit-failed",e),n&&n(e)}try{this.retrieveVariables()}catch(e){return n&&n(e)}var r=this;this.transformFiles(function(){r.submitVariables(function(e,t){return e?(r.fireEvent("submit-failed",e),n&&n(e)):(localStorage.removeItem("camForm:"+i),r.fireEvent("submit-success"),n&&n(null,t))})})},CamundaForm.prototype.transformFiles=function(e){function s(){0==--n&&e()}function t(e){if(0===e)return"0 Byte";var t=Math.floor(Math.log(e)/Math.log(1e3));return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}var n=1;for(var i in this.fields){var r=this.fields[i].element[0];if("file"===r.getAttribute("type")){var o=this.variableManager.variables[this.fields[i].variableName];if("function"==typeof FileReader&&0<r.files.length){if(r.files[0].size>(parseInt(r.getAttribute("cam-max-filesize"),10)||5e6))throw new Error("Maximum file size of "+t(parseInt(r.getAttribute("cam-max-filesize"),10)||5e6)+" exceeded.");var a=new FileReader;a.onloadend=function(e,o,a){return function(e){for(var t="",n=new Uint8Array(e.target.result),i=n.byteLength,r=0;r<i;r++)t+=String.fromCharCode(n[r]);a.value=btoa(t),"file"===a.type.toLowerCase()&&(a.valueInfo={filename:o.files[0].name,mimeType:o.files[0].type}),s()}}(0,r,o),a.readAsArrayBuffer(r.files[0]),n++}else o.value="",o.valueInfo={filename:""}}}s()},CamundaForm.prototype.fetchVariables=function(e){e=e||function(){};var t=this.variableManager.variableNames();if(t.length){var n={names:t,deserializeValues:!1};this.taskId?(n.id=this.taskId,this.client.resource("task").formVariables(n,e)):(n.id=this.processDefinitionId,n.key=this.processDefinitionKey,this.client.resource("process-definition").formVariables(n,e))}else e()},CamundaForm.prototype.submitVariables=function(e){e=e||function(){};var t=this.variableManager,n=t.variables,i={};for(var r in n)if(t.isDirty(r)){var o=n[r].value;t.isJsonVariable(r)&&(o=JSON.stringify(o)),o&&t.isDateVariable(r)&&(o=moment(o,moment.ISO_8601).format("YYYY-MM-DDTHH:mm:ss.SSSZZ")),i[r]={value:o,type:n[r].type,valueInfo:n[r].valueInfo}}var a={variables:i};if(this.taskId)a.id=this.taskId,this.client.resource("task").submitForm(a,e);else{var s=this.businessKey||this.formElement.find('input[type="text"][cam-business-key]').val();s&&(a.businessKey=s),a.id=this.processDefinitionId,a.key=this.processDefinitionKey,this.client.resource("process-definition").submitForm(a,e)}},CamundaForm.prototype.storeOriginalValues=function(e){for(var t in e)this.variableManager.setOriginalValue(t,e[t].value)},CamundaForm.prototype.mergeVariables=function(e){var t=this.variableManager.variables;for(var n in e){if(t[n])for(var i in e[n])t[n][i]=t[n][i]||e[n][i];else t[n]=e[n];this.variableManager.isJsonVariable(n)&&(t[n].value=JSON.parse(e[n].value));var r=t[n].type;!this.taskBasePath||"Bytes"!==r&&"File"!==r||(t[n].contentUrl=this.taskBasePath+"/variables/"+t[n].name+"/data"),this.variableManager.isVariablesFetched=!0}},CamundaForm.prototype.applyVariables=function(){for(var e in this.fields)this.fields[e].applyValue()},CamundaForm.prototype.retrieveVariables=function(){for(var e in this.fields)this.fields[e].getValue()},CamundaForm.prototype.fireEvent=function(e,t){this.trigger(e,t)},CamundaForm.$=$,CamundaForm.VariableManager=VariableManager,CamundaForm.fields={},CamundaForm.fields.InputFieldHandler=InputFieldHandler,CamundaForm.fields.ChoicesFieldHandler=ChoicesFieldHandler,CamundaForm.cleanLocalStorage=function(e){for(var t=0;t<localStorage.length;t++){var n=localStorage.key(t);if(0===n.indexOf("camForm:"))JSON.parse(localStorage.getItem(n)).date<e&&(localStorage.removeItem(n),t--)}},CamundaForm.extend=BaseClass.extend,module.exports=CamundaForm},{"./../base-class":40,"./../events":41,"./constants":43,"./controls/choices-field-handler":45,"./controls/file-download-handler":46,"./controls/input-field-handler":47,"./dom-lib":48,"./variable-manager":50,moment:"moment"}],43:[function(e,t,n){"use strict";t.exports={DIRECTIVE_CAM_FORM:"cam-form",DIRECTIVE_CAM_VARIABLE_NAME:"cam-variable-name",DIRECTIVE_CAM_VARIABLE_TYPE:"cam-variable-type",DIRECTIVE_CAM_FILE_DOWNLOAD:"cam-file-download",DIRECTIVE_CAM_CHOICES:"cam-choices",DIRECTIVE_CAM_SCRIPT:"cam-script"}},{}],44:[function(e,t,n){"use strict";var i=e("../../base-class"),r=e("./../dom-lib");function o(){}function a(e,t){this.element=r(e),this.variableManager=t,this.variableName=null,this.initialize()}a.selector=null,a.extend=i.extend,a.prototype.initialize=o,a.prototype.applyValue=o,a.prototype.getValue=o,t.exports=a},{"../../base-class":40,"./../dom-lib":48}],45:[function(e,t,n){"use strict";var i=e("./../constants"),r=e("./abstract-form-field"),a=e("./../dom-lib"),o=r.extend({initialize:function(){var e=this.variableName=this.element.attr(i.DIRECTIVE_CAM_VARIABLE_NAME),t=this.variableType=this.element.attr(i.DIRECTIVE_CAM_VARIABLE_TYPE),n=this.choicesVariableName=this.element.attr(i.DIRECTIVE_CAM_CHOICES);this.variableManager.createVariable({name:e,type:t,value:this.element.val()||null}),n&&this.variableManager.fetchVariable(n),this.originalValue=this.element.val()||null,this.previousValue=this.originalValue,this.variableName=e},applyValue:function(){var e=this.element[0].selectedIndex;if(this.choicesVariableName){var t=this.variableManager.variableValue(this.choicesVariableName);if(t)if(t instanceof Array)for(var n=0;n<t.length;n++){var i=t[n];this.element.find('option[text="'+i+'"]').length||this.element.append(a("<option>",{value:i,text:i}))}else for(var r in t)this.element.find('option[value="'+r+'"]').length||this.element.append(a("<option>",{value:r,text:t[r]}))}this.element[0].selectedIndex=e,this.previousValue=this.element.val()||"";var o=this.variableManager.variableValue(this.variableName);return o!==this.previousValue&&(this.element.val(o),this.element.trigger("camFormVariableApplied",o)),this},getValue:function(){var e;return this.element.prop("multiple")?(e=[],this.element.find("option:selected").each(function(){e.push(a(this).val())})):e=this.element.find("option:selected").attr("value"),this.variableManager.variableValue(this.variableName,e),e}},{selector:"select["+i.DIRECTIVE_CAM_VARIABLE_NAME+"]"});t.exports=o},{"./../constants":43,"./../dom-lib":48,"./abstract-form-field":44}],46:[function(e,t,n){"use strict";var i=e("./../constants"),r=e("./abstract-form-field").extend({initialize:function(){this.variableName=this.element.attr(i.DIRECTIVE_CAM_FILE_DOWNLOAD),this.variableManager.fetchVariable(this.variableName)},applyValue:function(){var e=this.variableManager.variable(this.variableName);return this.element.attr("href",e.contentUrl),0===this.element.text().trim().length&&this.element.text(e.valueInfo.filename),this}},{selector:"a["+i.DIRECTIVE_CAM_FILE_DOWNLOAD+"]"});t.exports=r},{"./../constants":43,"./abstract-form-field":44}],47:[function(e,t,n){"use strict";function i(e){return"checkbox"===e.attr("type")&&"Boolean"===e.attr(r.DIRECTIVE_CAM_VARIABLE_TYPE)}var r=e("./../constants"),o=e("./abstract-form-field"),a=e("../type-util").convertToType,s=o.extend({initialize:function(){var e=this.element.attr(r.DIRECTIVE_CAM_VARIABLE_NAME),t=this.element.attr(r.DIRECTIVE_CAM_VARIABLE_TYPE);this.variableManager.createVariable({name:e,type:t}),this.originalValue=this.element.val(),this.previousValue=this.originalValue,this.variableName=e,this.getValue()},applyValue:function(){this.previousValue=this.getValueFromHtmlControl()||"";var e=this.variableManager.variableValue(this.variableName);if(e&&this.variableManager.isDateVariable(this.variableName)){var t=new Date(e);e=a(t,"Date")}return e!==this.previousValue&&(this.applyValueToHtmlControl(e),this.element.trigger("camFormVariableApplied",e)),this},getValue:function(){var e=this.getValueFromHtmlControl();return this.variableManager.variableValue(this.variableName,e),e},getValueFromHtmlControl:function(){return i(this.element)?this.element.prop("checked"):this.element.val()},applyValueToHtmlControl:function(e){i(this.element)?this.element.prop("checked",e):"file"!==this.element[0].type&&this.element.val(e)}},{selector:"input["+r.DIRECTIVE_CAM_VARIABLE_NAME+"],textarea["+r.DIRECTIVE_CAM_VARIABLE_NAME+"]"});t.exports=s},{"../type-util":49,"./../constants":43,"./abstract-form-field":44}],48:[function(e,n,t){(function(e){"use strict";var t;t=(t="undefined"!=typeof window?window:e)||{},n.exports=t.jQuery||!!t.angular&&t.angular.element||t.Zepto}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,n){"use strict";function i(e,t){switch(t){case"Integer":case"Long":case"Short":return o.test(e);case"Float":case"Double":return a.test(e);case"Boolean":return s.test(e);case"Date":return c.test(u(e));case"Xml":return function(e){return!!e&&l.validate(e)}(e);case"Json":return function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(e)}}function r(e){return e<10?"0"+e:e}var o=/^-?[\d]+$/,a=/^(0|(-?(((0|[1-9]\d*)\.\d+)|([1-9]\d*))))([eE][-+]?[0-9]+)?$/,s=/^(true|false)$/,c=/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(|\.[0-9]{0,4})$/,l=e("../../vendor/fast-xml-parser"),u=function(e){return"object"!=typeof e||"function"!=typeof e.getFullYear?e:e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())};t.exports={convertToType:function(e,t){if("string"==typeof e&&(e=e.trim()),"String"===t||"Bytes"===t||"File"===t)return e;if(!i(e,t))throw new Error("Value '"+e+"' is not of type "+t);switch(t){case"Integer":case"Long":case"Short":return parseInt(e,10);case"Float":case"Double":return parseFloat(e);case"Boolean":return"true"===e;case"Date":return u(e)}},isType:i,dateToString:u}},{"../../vendor/fast-xml-parser":54}],50:[function(e,t,n){"use strict";var i=e("moment"),r=e("./type-util").convertToType;function o(){this.variables={},this.isVariablesFetched=!1}o.prototype.fetchVariable=function(e){if(this.isVariablesFetched)throw new Error("Illegal State: cannot call fetchVariable(), variables already fetched.");this.createVariable({name:e})},o.prototype.createVariable=function(e){if(this.variables[e.name])throw new Error("Cannot add variable with name "+e.name+": already exists.");this.variables[e.name]=e},o.prototype.destroyVariable=function(e){if(!this.variables[e])throw new Error("Cannot remove variable with name "+e+": variable does not exist.");delete this.variables[e]},o.prototype.setOriginalValue=function(e,t){if(!this.variables[e])throw new Error("Cannot set original value of variable with name "+e+": variable does not exist.");this.variables[e].originalValue=t},o.prototype.variable=function(e){return this.variables[e]},o.prototype.variableValue=function(e,t){var n=this.variable(e);return null==t?t=null:""===t&&"String"!==n.type?t=null:"string"==typeof t&&"String"!==n.type&&(t=r(t,n.type)),2===arguments.length&&(n.value=t),n.value},o.prototype.isDirty=function(e){var t=this.variable(e);return this.isJsonVariable(e)?t.originalValue!==JSON.stringify(t.value):this.isDateVariable(e)&&t.originalValue&&t.value?!i(t.originalValue,i.ISO_8601).isSame(t.value):t.originalValue!==t.value||"Object"===t.type},o.prototype.isJsonVariable=function(e){var t=this.variable(e),n=t.type,i=["Object","json","Json"].indexOf(n);return 0===i?-1!==t.valueInfo.serializationDataFormat.indexOf("application/json"):-1!==i},o.prototype.isDateVariable=function(e){return"Date"===this.variable(e).type},o.prototype.variableNames=function(){return Object.keys(this.variables)},t.exports=o},{"./type-util":49,moment:"moment"}],51:[function(e,t,n){t.exports={Client:e("./api-client"),utils:e("./utils")}},{"./api-client":11,"./utils":52}],52:[function(e,t,n){"use strict";var i=t.exports={typeUtils:e("./forms/type-util")};i.solveHALEmbedded=function(i){function r(e){if("Id"!==e.slice(-2))return!1;var t=e.slice(0,-2),n=i._embedded;return!(!n[t]||!n[t].length)}function e(e){var t=Object.keys(e);for(var n in t)"_"!==t[n][0]&&r(t[n])||t.splice(n,1);return t}var t=Object.keys(i._embedded||{});for(var n in t){var o=t[n];for(var a in i._embedded[o]){i._embedded[o][a]._embedded=i._embedded[o][a]._embedded||{};var s=e(i._embedded[o][a]);for(var c in s){var l=s[c];if(i._embedded[o][a][l]){var u=i._embedded[l.slice(0,-2)];for(var p in u)u[p].id===i._embedded[o][a][l]&&(i._embedded[o][a]._embedded[l.slice(0,-2)]=[u[p]])}}}}return i},i.series=function(e,t){t=t||function(){};var r={};!function(t,e,n){if(n=n||function(){},!t.length)return n();var i=0,r=function(){e(t[i],function(e){e?(n(e),n=function(){}):(i+=1)>=t.length?n():r()})};r()}(Object.keys(e),function(n,i){e[n](function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),r[n]=t,i(e)})},function(e){t(e,r)})},i.escapeUrl=function(e){return encodeURIComponent(e).replace(/\//g,"%2F").replace(/%2F/g,"%252F").replace(/\*/g,"%2A").replace(/%5C/g,"%255C")}},{"./forms/type-util":49}],53:[function(e,t,n){"use strict";t.exports=e("angular")},{angular:"angular"}],54:[function(e,t,n){"use strict";function i(e,t){return e(t={exports:{}},t.exports),t.exports}Object.defineProperty(n,"__esModule",{value:!0});function d(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}}var v=i(function(e,t){function n(e,t){var n=t.exec(e);return!(null==n)}t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t){if(t)for(var n=Object.keys(t),i=n.length,r=0;r<i;r++)e[n[r]]=t[n[r]]},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){var i={};if(!e)return t;for(var r=0;r<n.length;r++)void 0!==e[n[r]]?i[n[r]]=e[n[r]]:i[n[r]]=t[n[r]];return i},t.doesMatch=n,t.doesNotMatch=function(e,t){return!n(e,t)},t.getAllMatches=function(e,t){for(var n=[],i=t.exec(e);i;){for(var r=[],o=i.length,a=0;a<o;a++)r.push(i[a]);n.push(r),i=t.exec(e)}return n}}),o=(v.isExist,v.isEmptyObject,v.merge,v.getValue,v.buildOptions,v.doesMatch,v.doesNotMatch,v.getAllMatches,{convertToJson:function e(t,n){var i={};if(!(t.child&&!v.isEmptyObject(t.child)||t.attrsMap&&!v.isEmptyObject(t.attrsMap)))return v.isExist(t.val)?t.val:"";!v.isExist(t.val)||("string"!=typeof t.val||""!==t.val&&t.val!==n.cdataPositionChar)&&(i[n.textNodeName]=t.val),v.merge(i,t.attrsMap);for(var r=Object.keys(t.child),o=0;o<r.length;o++){var a=r[o];if(t.child[a]&&1<t.child[a].length)for(var s in i[a]=[],t.child[a])i[a].push(e(t.child[a][s],n));else i[a]=e(t.child[a][0],n)}return i}}),f=v.buildOptions,h={OPENING:1,CLOSING:2,SELF:3,CDATA:4},m="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|(([\\w:\\-._]*:)?([\\w:\\-._]+))([^>]*)>|((\\/)(([\\w:\\-._]*:)?([\\w:\\-._]+))\\s*>))([^<]*)";!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var g={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",localeRange:"",tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},r=g,y=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","localeRange","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly"],a=y;function b(e,t){return e&&(t.trimValues&&(e=e.trim()),e=l(e=t.tagValueProcessor(e),t.parseNodeValue,t.parseTrueNumberOnly)),e}function c(e,t){if(t.ignoreNameSpace){var n=e.split(":"),i="/"===e.charAt(0)?"/":"";if("xmlns"===n[0])return"";2===n.length&&(e=i+n[1])}return e}function l(e,t,n){var i;return t&&"string"==typeof e?(""===e.trim()||isNaN(e)?i="true"===e||"false"!==e&&e:(i=-1!==e.indexOf("0x")?Number.parseInt(e,16):-1!==e.indexOf(".")?Number.parseFloat(e):Number.parseInt(e,10),n&&(i=String(i)===e?i:e)),i):v.isExist(e)?e:""}var u=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function _(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");for(var n=v.getAllMatches(e,u),i=n.length,r={},o=0;o<i;o++){var a=c(n[o][1],t);a.length&&(void 0!==n[o][4]?(t.trimValues&&(n[o][4]=n[o][4].trim()),n[o][4]=t.attrValueProcessor(n[o][4]),r[t.attributeNamePrefix+a]=l(n[o][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(r[t.attributeNamePrefix+a]=!0))}if(!Object.keys(r).length)return;if(t.attrNodeName){var s={};return s[t.attrNodeName]=r,s}return r}}function s(e){return String.fromCharCode(e)}function w(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?C(e[0].val,t):C(e,t);var i=function(e){return void 0===e?x.missingChar:null===e?x.nilChar:!(e.child&&0===Object.keys(e.child).length&&(!e.attrsMap||0===Object.keys(e.attrsMap).length))||x.emptyChar}(e);if(!0!==i)return i;var r="";if(Array.isArray(t)){r+=x.arrStart;var o=t[0],a=e.length;if("string"==typeof o)for(var s=0;s<a;s++){var c=C(e[s].val,o);r=k(r,c)}else for(var l=0;l<a;l++){var u=w(e[l],o,n);r=k(r,u)}r+=x.arrayEnd}else{r+=x.objStart;var p=Object.keys(t);for(var d in Array.isArray(e)&&(e=e[0]),p){var f=p[d],h=void 0;h=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[f]?w(e.attrsMap[f],t[f],n):f===n.textNodeName?w(e.val,t[f],n):w(e.child[f],t[f],n),r=k(r,h)}}return r}var p={defaultOptions:r,props:a,getTraversalObj:function(e,t){t=f(t,g,y),e=e.replace(/<!--[\s\S]*?-->/g,"");var n=new d("!xml"),i=n;m=m.replace(/\[\\w/g,"["+t.localeRange+"\\w");for(var r=new RegExp(m,"g"),o=r.exec(e),a=r.exec(e);o;){var s="]]>"===(p=o)[4]?h.CDATA:"/"===p[10]?h.CLOSING:void 0!==p[8]&&"/"===p[8].substr(p[8].length-1)?h.SELF:h.OPENING;if(s===h.CLOSING)i.parent&&o[14]&&(i.parent.val=v.getValue(i.parent.val)+""+b(o[14],t)),i=i.parent;else if(s===h.CDATA)if(t.cdataTagName){var c=new d(t.cdataTagName,i,o[3]);c.attrsMap=_(o[8],t),i.addChild(c),i.val=v.getValue(i.val)+t.cdataPositionChar,o[14]&&(i.val+=b(o[14],t))}else i.val=(i.val||"")+(o[3]||"")+b(o[14],t);else if(s===h.SELF){i&&o[14]&&(i.val=v.getValue(i.val)+""+b(o[14],t));var l=new d(t.ignoreNameSpace?o[7]:o[5],i,"");o[8]&&0<o[8].length&&(o[8]=o[8].substr(0,o[8].length-1)),l.attrsMap=_(o[8],t),i.addChild(l)}else{var u=new d(t.ignoreNameSpace?o[7]:o[5],i,b(o[14],t));u.attrsMap=_(o[8],t),i.addChild(u),i=u}o=a,a=r.exec(e)}var p;return n}},x={nilChar:s(176),missingChar:s(201),nilPremitive:s(175),missingPremitive:s(200),emptyChar:s(178),emptyValue:s(177),boundryChar:s(179),objStart:s(198),arrStart:s(204),arrayEnd:s(185)},E=[x.nilChar,x.nilPremitive,x.missingChar,x.missingPremitive,x.boundryChar,x.emptyChar,x.emptyValue,x.arrayEnd,x.objStart,x.arrStart],C=function(e){switch(e){case void 0:return x.missingPremitive;case null:return x.nilPremitive;case"":return x.emptyValue;default:return e}},k=function(e,t){return S(t[0])||S(e[e.length-1])||(e+=x.boundryChar),e+t},S=function(e){return-1!==E.indexOf(e)};var T=v.buildOptions,O={convert2nimn:function(e,t,n){return n=T(n,p.defaultOptions,p.props),w(e,t,n)}},A=v.buildOptions,I=function e(t,n,i){for(var r="{",o=Object.keys(t.child),a=0;a<o.length;a++){var s=o[a];if(t.child[s]&&1<t.child[s].length){for(var c in r+='"'+s+'" : [ ',t.child[s])r+=e(t.child[s][c],n)+" , ";r=r.substr(0,r.length-1)+" ] "}else r+='"'+s+'" : '+e(t.child[s][0],n)+" ,"}return v.merge(r,t.attrsMap),v.isEmptyObject(r)?v.isExist(t.val)?t.val:"":(!v.isExist(t.val)||("string"!=typeof t.val||""!==t.val&&t.val!==n.cdataPositionChar)&&(r+='"'+n.textNodeName+'" : '+function(e){return!0!==e&&!1!==e&&isNaN(e)?'"'+e+'"':e}(t.val)),","===r[r.length-1]&&(r=r.substr(0,r.length-2)),r+"}")};var D={convertToJsonString:function(e,t){return(t=A(t,p.defaultOptions,p.props)).indentBy=t.indentBy||"",I(e,t,0)}},P={allowBooleanAttributes:!1,localeRange:"a-zA-Z"},R=["allowBooleanAttributes","localeRange"];function N(e,t){for(var n=t;t<e.length;t++)if("?"==e[t]||" "==e[t]){var i=e.substr(n,t-n);if(5<t&&"xml"===i)return{err:{code:"InvalidXml",msg:"XML declaration allowed only at the start of the document."}};if("?"!=e[t]||">"!=e[t+1])continue;t++;break}return t}function M(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){var n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&0===--n)break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}var j='"',$="'";function L(e,t){for(var n="",i="";t<e.length;t++){if(e[t]===j||e[t]===$)if(""===i)i=e[t];else{if(i!==e[t])continue;i=""}else if(">"===e[t]&&""===i)break;n+=e[t]}return""===i&&{value:n,index:t}}var B=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function V(e,t,n){for(var i,r,o=v.getAllMatches(e,B),a={},s=0;s<o.length;s++){if(0===o[s][1].length)return{err:{code:"InvalidAttr",msg:"attribute "+o[s][2]+" has no space in starting."}};if(void 0===o[s][3]&&!t.allowBooleanAttributes)return{err:{code:"InvalidAttr",msg:"boolean attribute "+o[s][2]+" is not allowed."}};var c=o[s][2];if(i=c,r=n,!v.doesMatch(i,r))return{err:{code:"InvalidAttr",msg:"attribute "+c+" is an invalid name."}};if(a.hasOwnProperty(c))return{err:{code:"InvalidAttr",msg:"attribute "+c+" is repeated."}};a[c]=1}return!0}var F=function(e,t){t=v.buildOptions(t,P,R);var n=[],i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(var r,o,a=new RegExp("^[_w][\\w\\-.:]*$".replace("_w","_"+t.localeRange)),s=new RegExp("^([w]|_)[\\w.\\-_:]*".replace("([w","(["+t.localeRange)),c=0;c<e.length;c++){if("<"!==e[c]){if(" "===e[c]||"\t"===e[c]||"\n"===e[c]||"\r"===e[c])continue;return{err:{code:"InvalidChar",msg:"char "+e[c]+" is not expected ."}}}if("?"===e[++c]){if((c=N(e,++c)).err)return c}else{if("!"===e[c]){c=M(e,c);continue}var l=!1;"/"===e[c]&&(l=!0,c++);for(var u="";c<e.length&&">"!==e[c]&&" "!==e[c]&&"\t"!==e[c];c++)u+=e[c];if("/"===(u=u.trim())[u.length-1]){u=u.substring(0,u.length-1);continue}if(r=u,o=s,v.doesNotMatch(r,o))return{err:{code:"InvalidTag",msg:"Tag "+u+" is an invalid name."}};var p=L(e,c);if(!1===p)return{err:{code:"InvalidAttr",msg:"Attributes for "+u+" have open quote"}};var d=p.value;if(c=p.index,"/"===d[d.length-1]){var f=V(d=d.substring(0,d.length-1),t,a);if(!0!==f)return f;i=!0}else if(l){if(0<d.trim().length)return{err:{code:"InvalidTag",msg:"closing tag "+u+" can't have attributes or invalid starting."}};var h=n.pop();if(u!==h)return{err:{code:"InvalidTag",msg:"closing tag "+h+" is expected inplace of "+u+"."}}}else{var m=V(d,t,a);if(!0!==m)return m;n.push(u),i=!0}for(c++;c<e.length;c++)if("<"!==e[c]);else{if("!"!==e[c+1])break;c=M(e,++c)}"<"===e[c]&&c--}}return i?!(0<n.length)||{err:{code:"InvalidXml",msg:"Invalid "+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+" found."}}:{err:{code:"InvalidXml",msg:"Start tag expected."}}};function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var H=v.buildOptions,z={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},q=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function W(e){this.options=H(e,z,q),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=ee),this.options.cdataTagName?this.isCDATA=te:this.isCDATA=function(){return!1},this.replaceCDATAstr=G,this.replaceCDATAarr=Y,this.options.format?(this.indentate=Z,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=Q,this.buildObjNode=X):(this.buildTextNode=J,this.buildObjNode=K),this.buildTextValNode=J,this.buildObjectNode=K}function G(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function Y(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(var n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function K(e,t,n,i){return n&&!e.includes("<")?this.indentate(i)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(i)+"<"+t+n+this.tagEndChar+e+this.indentate(i)+"</"+t+this.tagEndChar}function X(e,t,n,i){return""!==e?this.buildObjectNode(e,t,n,i):this.indentate(i)+"<"+t+n+"/"+this.tagEndChar}function J(e,t,n,i){return this.indentate(i)+"<"+t+n+">"+this.options.tagValueProcessor(""+e)+"</"+t+this.tagEndChar}function Q(e,t,n,i){return""!==e?this.buildTextValNode(e,t,n,i):this.indentate(i)+"<"+t+n+"/"+this.tagEndChar}function Z(e){return this.options.indentBy.repeat(e)}function ee(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function te(e){return e===this.options.cdataTagName}W.prototype.parse=function(e){return this.j2x(e,0).val},W.prototype.j2x=function(e,t){for(var n="",i="",r=Object.keys(e),o=r.length,a=0;a<o;a++){var s=r[a];if(void 0===e[s]);else if(null===e[s])i+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if("object"!==U(e[s])){var c=this.isAttribute(s);c?n+=" "+c+'="'+this.options.attrValueProcessor(""+e[s])+'"':this.isCDATA(s)?e[this.options.textNodeName]?i+=this.replaceCDATAstr(e[this.options.textNodeName],e[s]):i+=this.replaceCDATAstr("",e[s]):s===this.options.textNodeName?e[this.options.cdataTagName]||(i+=this.options.tagValueProcessor(""+e[s])):i+=this.buildTextNode(e[s],s,"",t)}else if(Array.isArray(e[s]))if(this.isCDATA(s))i+=this.indentate(t),e[this.options.textNodeName]?i+=this.replaceCDATAarr(e[this.options.textNodeName],e[s]):i+=this.replaceCDATAarr("",e[s]);else for(var l=e[s].length,u=0;u<l;u++){var p=e[s][u];if(void 0===p);else if(null===p)i+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if("object"===U(p)){var d=this.j2x(p,t+1);i+=this.buildObjNode(d.val,s,d.attrStr,t)}else i+=this.buildTextNode(p,s,"",t)}else if(this.options.attrNodeName&&s===this.options.attrNodeName)for(var f=Object.keys(e[s]),h=f.length,m=0;m<h;m++)n+=" "+f[m]+'="'+this.options.attrValueProcessor(""+e[s][f[m]])+'"';else{var v=this.j2x(e[s],t+1);i+=this.buildObjNode(v.val,s,v.attrStr,t)}}return{attrStr:n,val:i}};var ne=W,ie=i(function(e,i){var n=p,r=v.buildOptions;i.parse=function(e,t){return t=r(t,n.defaultOptions,n.props),o.convertToJson(p.getTraversalObj(e,t),t)},i.convertTonimn=O.convert2nimn,i.getTraversalObj=p.getTraversalObj,i.convertToJson=o.convertToJson,i.convertToJsonString=D.convertToJsonString,i.validate=F,i.j2xParser=ne,i.parseToNimn=function(e,t,n){return i.convertTonimn(i.getTraversalObj(e,n),t,n)}}),re=ie.parse,oe=ie.convertTonimn,ae=ie.getTraversalObj,se=ie.convertToJson,ce=ie.convertToJsonString,le=ie.validate,ue=ie.j2xParser,pe=ie.parseToNimn;n.convertToJson=se,n.convertToJsonString=ce,n.convertTonimn=oe,n.default=ie,n.getTraversalObj=ae,n.j2xParser=ue,n.parse=re,n.parseToNimn=pe,n.validate=le},{}],55:[function(e,t,n){"use strict";t.exports=e("moment")},{moment:"moment"}],56:[function(e,t,p){(function(e){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(p,"__esModule",{value:!0});var h="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var m=t(function(e){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}(e.exports=n).prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}});var v=function(e){return null!==e&&"object"===f(e)},g=n;function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}n.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},n.prototype.parse=function(e){return this._parser=e,this},n.prototype.responseType=function(e){return this._responseType=e,this},n.prototype.serialize=function(e){return this._serializer=e,this},n.prototype.timeout=function(e){if(!e||"object"!==f(e))return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},n.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var i=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];n.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&500<=t.status&&501!=t.status)return!0;if(e){if(e.code&&~i.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},n.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},n.prototype.then=function(e,t){var r=this;if(!this._fullfilledPromise){var o=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(n,i){o.on("error",i),o.on("abort",function(){var e=new Error("Aborted");e.code="ABORTED",e.status=r.status,e.method=r.method,e.url=r.url,i(e)}),o.end(function(e,t){e?i(e):n(t)})})}return this._fullfilledPromise.then(e,t)},n.prototype.catch=function(e){return this.then(void 0,e)},n.prototype.use=function(e){return e(this),this},n.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},n.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):200<=e.status&&e.status<300)},n.prototype.getHeader=n.prototype.get=function(e){return this._header[e.toLowerCase()]},n.prototype.set=function(e,t){if(v(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(v(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var i in t)this.field(e,t[i]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},n.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},n.prototype._auth=function(e,t,n,i){switch(n.type){case"basic":this.set("Authorization","Basic ".concat(i("".concat(e,":").concat(t))));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer ".concat(e))}return this},n.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},n.prototype.redirects=function(e){return this._maxRedirects=e,this},n.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},n.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n.prototype.send=function(e){var t=v(e),n=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&v(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?"".concat(this._data,"&").concat(e):e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||n||this.type("json"),this},n.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},n.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(0<=this.url.indexOf("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(0<=t){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},n.prototype._appendQueryString=function(){console.trace("Unsupported")},n.prototype._timeoutError=function(e,t,n){if(!this._aborted){var i=new Error("".concat(e+t,"ms exceeded"));i.timeout=t,i.code="ECONNABORTED",i.errno=n,this.timedout=!0,this.abort(),this.callback(i)}},n.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};var r=function(e){return e.split(/ *; */).shift()},o=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),i=n.shift(),r=n.shift();return i&&r&&(e[i]=r),e},{})},a=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),i=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=i,e},{})},y=s;function s(e){if(e)return function(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}(e)}function c(){this._defaults=[]}s.prototype.get=function(e){return this.header[e.toLowerCase()]},s.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r(t);var n=o(t);for(var i in n)this[i]=n[i];this.links={};try{e.link&&(this.links=a(e.link))}catch(e){}},s.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e},["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(i){c.prototype[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._defaults.push({fn:i,args:t}),this}}),c.prototype._setDefaults=function(t){this._defaults.forEach(function(e){t[e.fn].apply(t,e.args)})};var b=c,l=t(function(e,n){var t;function i(){}t="undefined"!=typeof window?window:"undefined"!=typeof self?self:(console.warn("Using browser-only version of superagent in non-browser environment"),h);var s=n=e.exports=function(e,t){return"function"==typeof t?new n.Request("GET",e).end(t):1==arguments.length?new n.Request("GET",e):new n.Request(e,t)};n.Request=p,s.getXHR=function(){if(!(!t.XMLHttpRequest||t.location&&"file:"==t.location.protocol&&t.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var l="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function r(e){if(!v(e))return e;var t=[];for(var n in e)o(t,n,e[n]);return t.join("&")}function o(t,n,e){if(null!=e)if(Array.isArray(e))e.forEach(function(e){o(t,n,e)});else if(v(e))for(var i in e)o(t,"".concat(n,"[").concat(i,"]"),e[i]);else t.push(encodeURIComponent(n)+"="+encodeURIComponent(e));else null===e&&t.push(encodeURIComponent(n))}function a(e){for(var t,n,i={},r=e.split("&"),o=0,a=r.length;o<a;++o)-1==(n=(t=r[o]).indexOf("="))?i[decodeURIComponent(t)]="":i[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return i}function c(e){return/[\/+]json($|[^-\w])/.test(e)}function u(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,i,r,o=e.split(/\r?\n/),a={},s=0,c=o.length;s<c;++s)-1!==(t=(n=o[s]).indexOf(":"))&&(i=n.slice(0,t).toLowerCase(),r=l(n.slice(t+1)),a[i]=r);return a}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function p(e,t){var i=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var t,n=null,e=null;try{e=new u(i)}catch(e){return(n=new Error("Parser is unable to parse the response")).parse=!0,n.original=e,i.xhr?(n.rawResponse=void 0===i.xhr.responseType?i.xhr.responseText:i.xhr.response,n.status=i.xhr.status?i.xhr.status:null,n.statusCode=n.status):(n.rawResponse=null,n.status=null),i.callback(n)}i.emit("response",e);try{i._isResponseOK(e)||(t=new Error(e.statusText||"Unsuccessful HTTP response"))}catch(e){t=e}t?(t.original=n,t.response=e,t.status=e.status,i.callback(t,e)):i.callback(null,e)})}function d(e,t,n){var i=s("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&i.send(t),n&&i.end(n),i}s.serializeObject=r,s.parseString=a,s.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},s.serialize={"application/x-www-form-urlencoded":r,"application/json":JSON.stringify},s.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},y(u.prototype),u.prototype._parseBody=function(e){var t=s.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&c(this.type)&&(t=s.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},u.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,i="cannot ".concat(t," ").concat(n," (").concat(this.status,")"),r=new Error(i);return r.status=this.status,r.method=t,r.url=n,r},s.Response=u,m(p.prototype),g(p.prototype),p.prototype.type=function(e){return this.set("Content-Type",s.types[e]||e),this},p.prototype.accept=function(e){return this.set("Accept",s.types[e]||e),this},p.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"===f(t)&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});return this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},p.prototype.query=function(e){return"string"!=typeof e&&(e=r(e)),e&&this._query.push(e),this},p.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},p.prototype._getFormData=function(){return this._formData||(this._formData=new t.FormData),this._formData},p.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},p.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},p.prototype.buffer=p.prototype.ca=p.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},p.prototype.pipe=p.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},p.prototype._isHost=function(e){return e&&"object"===f(e)&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},p.prototype.end=function(e){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||i,this._finalizeQueryString(),this._end()},p.prototype._end=function(){if(this._aborted)return this.callback(Error("The request has been aborted even before .end() was called"));var n=this,i=this.xhr=s.getXHR(),e=this._formData||this._data;this._setTimeouts(),i.onreadystatechange=function(){var e=i.readyState;if(2<=e&&n._responseTimeoutTimer&&clearTimeout(n._responseTimeoutTimer),4==e){var t;try{t=i.status}catch(e){t=0}if(!t){if(n.timedout||n._aborted)return;return n.crossDomainError()}n.emit("end")}};function t(e,t){0<t.total&&(t.percent=t.loaded/t.total*100),t.direction=e,n.emit("progress",t)}if(this.hasListeners("progress"))try{i.onprogress=t.bind(null,"download"),i.upload&&(i.upload.onprogress=t.bind(null,"upload"))}catch(e){}try{this.username&&this.password?i.open(this.method,this.url,!0,this.username,this.password):i.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(i.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof e&&!this._isHost(e)){var r=this._header["content-type"],o=this._serializer||s.serialize[r?r.split(";")[0]:""];!o&&c(r)&&(o=s.serialize["application/json"]),o&&(e=o(e))}for(var a in this.header)null==this.header[a]||this.header.hasOwnProperty(a)&&i.setRequestHeader(a,this.header[a]);this._responseType&&(i.responseType=this._responseType),this.emit("request",this),i.send(void 0!==e?e:null)},s.agent=function(){return new b},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(i){b.prototype[i.toLowerCase()]=function(e,t){var n=new s.Request(i,e);return this._setDefaults(n),t&&n.end(t),n}}),b.prototype.del=b.prototype.delete,s.get=function(e,t,n){var i=s("GET",e);return"function"==typeof t&&(n=t,t=null),t&&i.query(t),n&&i.end(n),i},s.head=function(e,t,n){var i=s("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&i.query(t),n&&i.end(n),i},s.options=function(e,t,n){var i=s("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&i.send(t),n&&i.end(n),i},s.del=d,s.delete=d,s.patch=function(e,t,n){var i=s("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&i.send(t),n&&i.end(n),i},s.post=function(e,t,n){var i=s("POST",e);return"function"==typeof t&&(n=t,t=null),t&&i.send(t),n&&i.end(n),i},s.put=function(e,t,n){var i=s("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&i.send(t),n&&i.end(n),i}}),u=l.Request;p.Request=u,p.default=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(e,t,n){"use strict";function i(e,t){return e(t={exports:{}},t.exports),t.exports}var r=i(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),o=Object.prototype.toString,s=Object.prototype.hasOwnProperty;function c(e){return void 0!==e}function p(e){return"[object Array]"===o.call(e)}function O(e){return"[object Object]"===o.call(e)}function a(e){return"[object Number]"===o.call(e)}function l(e){var t=o.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function u(e){return"[object String]"===o.call(e)}function T(e,n){var i;return n=function(t){return l(t)?t:function(e){return e===t}}(n),I(e,function(e,t){if(n(e,t))return i=e,!1}),i}function A(e,n){var i=[];return I(e,function(e,t){n(e,t)&&i.push(e)}),i}function I(e,t){var n;if(!function(e){return void 0===e}(e)){var i,r,o=p(e)?g:m;for(var a in e)if(i=e,r=a,s.call(i,r)&&!1===t(n=e[a],o(a)))return n}}function v(e,n,i){return I(e,function(e,t){i=n(i,e,t)}),i}function d(e,i){return v(e,function(e,t,n){return e&&i(t,n)},!0)}function f(e,n){var i=[];return I(e,function(e,t){i.push(n(e,t))}),i}function h(e){return function(n){return d(e,function(e,t){return n[t]===e})}}function m(e){return e}function g(e){return Number(e)}function y(e,t){return e.bind(t)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function D(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return b.apply(void 0,[e].concat(n))}function _(e,t){if(w)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var w=[].indexOf,x=/\s+/,E=Object.prototype.toString;function C(e){return new k(e)}function k(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function S(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}k.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~_(t,e)||t.push(e),this.el.className=t.join(" "),this},k.prototype.remove=function(e){if("[object RegExp]"==E.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=_(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},k.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},k.prototype.toggle=function(e,t){return this.list?void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},k.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(x);return""===e[0]&&e.shift(),e},k.prototype.has=k.prototype.contains=function(e){return this.list?this.list.contains(e):!!~_(this.array(),e)};var P=Element.prototype,R=P.matchesSelector||P.webkitMatchesSelector||P.mozMatchesSelector||P.msMatchesSelector||P.oMatchesSelector,N=function(e,t){if(R)return R.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1};function M(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(N(i,t))return i;i=i.parentNode}}var j,$=window.addEventListener?"addEventListener":"attachEvent",L=window.removeEventListener?"removeEventListener":"detachEvent",B="addEventListener"!=$?"on":"",V={bind:function(e,t,n,i){return e[$](B+t,n,i||!1),n},unbind:function(e,t,n,i){return e[L](B+t,n,i||!1),n}},F=["focus","blur"],U={bind:function(n,i,e,r,t){return-1!==F.indexOf(e)&&(t=!0),V.bind(n,e,function(e){var t=e.target||e.srcElement;e.delegateTarget=M(t,i,!0),e.delegateTarget&&r.call(n,e)},t)},unbind:function(e,t,n,i){-1!==F.indexOf(t)&&(i=!0),V.unbind(e,t,n,i)}},H=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){var r=t.createElement("html");return r.innerHTML=e,r.removeChild(r.lastChild)}var o=q[i]||q._default,a=o[0],s=o[1],c=o[2];(r=t.createElement("div")).innerHTML=s+e+c;for(;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);var l=t.createDocumentFragment();for(;r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l},z=!1;"undefined"!=typeof document&&((j=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',z=!j.getElementsByTagName("link").length,j=void 0);var q={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:z?[1,"X<div>","</div>"]:[0,"",""]};q.td=q.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],q.option=q.optgroup=[1,'<select multiple="multiple">',"</select>"],q.thead=q.tbody=q.colgroup=q.caption=q.tfoot=[1,"<table>","</table>"],q.polyline=q.ellipse=q.polygon=q.circle=q.text=q.line=q.path=q.rect=q.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var W="undefined"!=typeof Element?Element.prototype:{},G=W.matches||W.matchesSelector||W.webkitMatchesSelector||W.mozMatchesSelector||W.msMatchesSelector||W.oMatchesSelector,Y=function(e,t){if(!e||1!==e.nodeType)return!1;if(G)return G.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;i++)if(n[i]==e)return!0;return!1};function K(e,t){return(t=t||document).querySelector(e)}function X(e){e.parentNode&&e.parentNode.removeChild(e)}function J(e,t){return t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}function Q(e,t){return J(t,e),e}var Z=2,ee={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Z,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Z,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function te(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=ee[i];r?(r===Z&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function ne(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return ee[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);te(e,t,n)}else!function(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)te(e,i,t[i])}(e,t);return e}function ie(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var re=/\s+/,oe=Object.prototype.toString;function ae(e){return void 0!==e}function se(e){return new ce(e)}function ce(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function le(e){var t=e.parentNode;return t&&t.removeChild(e),e}ce.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~ie(t,e)||t.push(e),ae(this.el.className.baseVal)?this.el.className.baseVal=t.join(" "):this.el.className=t.join(" "),this},ce.prototype.remove=function(e){if("[object RegExp]"===oe.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=ie(t,e);return~n&&t.splice(n,1),this.el.className.baseVal=t.join(" "),this},ce.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},ce.prototype.toggle=function(e,t){return this.list?ae(t)?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):ae(t)?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},ce.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(re);return""===e[0]&&e.shift(),e},ce.prototype.has=ce.prototype.contains=function(e){return this.list?this.list.contains(e):!!~ie(this.array(),e)};var ue={svg:"http://www.w3.org/2000/svg"},pe='<svg xmlns="'+ue.svg+'"';function de(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(ue.svg)&&(e=pe+e.substring(4)):(e=pe+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function fe(e,t){var n;return n="<"===e.charAt(0)?(n=de(e).firstChild,document.importNode(n,!0)):document.createElementNS(ue.svg,e),t&&ne(n,t),n}var he=fe("svg");function me(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function ve(e){return e?he.createSVGTransformFromMatrix(e):he.createSVGTransform()}var ge=/([&<>]{1})/g,ye=/([\n\r"]{1})/g,be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function _e(e,t){return e.replace(t,function(e,t){return be[t]||t})}function we(e,t){var n,i,r,o,a;switch(e.nodeType){case 3:t.push(_e(e.textContent,ge));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(n=0,i=(r=e.attributes).length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',_e(o.value,ye),'"');if(e.hasChildNodes()){for(t.push(">"),n=0,i=(a=e.childNodes).length;n<i;++n)we(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("\x3c!--",_e(e.nodeValue,ge),"--\x3e");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function xe(e,t){var n=de(t);if(function(e){for(var t;t=e.firstChild;)le(t)}(e),t){!function(e){return"#document-fragment"===e.nodeName}(n)&&(n=n.documentElement);for(var i=function(e){return Array.prototype.slice.call(e)}(n.childNodes),r=0;r<i.length;r++)J(i[r],e)}}function Ee(e,t){if(void 0===t)return function(e){for(var t=e.firstChild,n=[];t;)we(t,n),t=t.nextSibling;return n.join("")}(e);try{xe(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}function Ce(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),function(e,t){var n,i,r,o;for(e.clear(),n=0;i=t[n];n++)e.appendItem((r=e,(o=i)instanceof SVGMatrix?r.createSVGTransformFromMatrix(o):o))}(n,t)),n.consolidate()}function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Se=/^class /;function Te(e){return"[object Array]"===Object.prototype.toString.call(e)}function Oe(){var e=Array.prototype.slice.call(arguments);1===e.length&&Te(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t}var Ae=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Ie=/^function\s*[^(]*\(\s*([^)]*)\)/m,De=/\/\*([^*]*)\*\//m;function Pe(e){if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(function(e){return Se.test(e.toString())}(e)?Ae:Ie);return t&&t[1]&&t[1].split(",").map(function(e){return(t=e.match(De))?t[1].trim():e.trim()})||[]}var Re="function"==typeof Symbol&&"symbol"===ke(Symbol.iterator)?function(e){return ke(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":ke(e)};function Ne(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Me(e,r){r=r||{get:function(e,t){if(s.push(e),!1===t)return null;throw l('No provider for "'+e+'"!')}};function o(e,t){if(!f[e]&&-1!==e.indexOf(".")){for(var n=e.split("."),i=o(n.shift());n.length;)i=i[n.shift()];return i}if(je(c,e))return c[e];if(je(f,e)){if(-1!==s.indexOf(e))throw s.push(e),l("Cannot resolve circular dependency!");return s.push(e),c[e]=f[e][0](f[e][1]),s.pop(),c[e]}return r.get(e,t)}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof e){if(!Te(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=Oe(e.slice())}return{fn:e,dependencies:(e.$inject||Pe(e)).map(function(e){return je(t,e)?t[e]:o(e)})}}function t(e){var t=a(e),n=t.dependencies,i=t.fn;return new(Function.prototype.bind.apply(i,[null].concat(Ne(n))))}function n(e,t,n){var i=a(e,n),r=i.dependencies,o=i.fn;return o.call.apply(o,[t].concat(Ne(r)))}function d(t){return Oe(function(e){return t.get(e)})}var s=[],f=this._providers=Object.create(r._providers||null),c=this._instances=Object.create(null),h=c.injector=this,l=function(e){var t=s.join(" -> ");return s.length=0,new Error(t?e+" (Resolving: "+t+")":e)},u={factory:n,type:t,value:function(e){return e}};e.forEach(function(i){function r(e,t){return"value"!==e&&Te(t)&&(t=Oe(t.slice())),t}if(i instanceof function(){var n=[];this.factory=function(e,t){return n.push([e,"factory",t]),this},this.value=function(e,t){return n.push([e,"value",t]),this},this.type=function(e,t){return n.push([e,"type",t]),this},this.forEach=function(e){n.forEach(e)}})i.forEach(function(e){var t=e[0],n=e[1],i=e[2];f[t]=[u[n],r(n,i),n]});else if("object"===(void 0===i?"undefined":Re(i)))if(i.__exports__){var e=Object.keys(i).reduce(function(e,t){return"__"!==t.substring(0,2)&&(e[t]=i[t]),e},Object.create(null)),t=new Me((i.__modules__||[]).concat([e]),h),n=Oe(function(e){return t.get(e)});i.__exports__.forEach(function(e){f[e]=[n,e,"private",t]})}else Object.keys(i).forEach(function(e){if("private"!==i[e][2]){var t=i[e][0],n=i[e][1];f[e]=[u[t],r(t,n),t]}else f[e]=i[e]})}),this.get=o,this.invoke=n,this.instantiate=t,this.createChild=function(e,t){if(t&&t.length){var n,i,r,o,a=Object.create(null),s=Object.create(null),c=[],l=[],u=[];for(var p in f)n=f[p],-1!==t.indexOf(p)&&("private"===n[2]?-1===(i=c.indexOf(n[3]))?(r=n[3].createChild([],t),o=d(r),c.push(n[3]),l.push(r),u.push(o),a[p]=[o,p,"private",r]):a[p]=[u[i],p,"private",l[i]]:a[p]=[n[2],n[1]],s[p]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||t.forEach(function(e){-1!==n[1].$scope.indexOf(e)&&(a[p]=[n[2],n[1]],s[e]=!0)});t.forEach(function(e){if(!s[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(a)}return new Me(e,h)}}function je(e,t){return Object.hasOwnProperty.call(e,t)}var $e=1e3;function Le(e,t){var o=this;t=t||$e,e.on(["render.shape","render.connection"],t,function(e,t){var n=e.type,i=t.element,r=t.gfx;if(o.canRender(i))return"render.shape"===n?o.drawShape(r,i):o.drawConnection(r,i)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(o.canRender(t))return"render.getShapePath"===e.type?o.getShapePath(t):o.getConnectionPath(t)})}function Be(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")}function Ve(e){for(var t,n="",i=0;t=e[i];i++)n+=t.x+","+t.y+" ";return n}function Fe(e,t){var n=fe("polyline");return ne(n,{points:Ve(e)}),t&&ne(n,t),n}Le.prototype.canRender=function(){},Le.prototype.drawShape=function(){},Le.prototype.drawConnection=function(){},Le.prototype.getShapePath=function(){},Le.prototype.getConnectionPath=function(){};function Ue(e,t){Le.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}r(Ue,Le),Ue.prototype.canRender=function(){return!0},Ue.prototype.drawShape=function(e,t){var n=fe("rect");return ne(n,{x:0,y:0,width:t.width||0,height:t.height||0}),ne(n,this.SHAPE_STYLE),Q(e,n),n},Ue.prototype.drawConnection=function(e,t){var n=Fe(t.waypoints,this.CONNECTION_STYLE);return Q(e,n),n},Ue.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width;return Be([["M",t,n],["l",i,0],["l",0,e.height],["l",-i,0],["z"]])},Ue.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,r=[];for(t=0;n=i[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return Be(r)},Ue.$inject=["eventBus","styles"];var He={__init__:["defaultRenderer"],defaultRenderer:["type",Ue],styles:["type",function(){var i={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},r=this;this.cls=function(e,t,n){return D(this.style(t,n),{class:e})},this.style=function(e,t){p(e)||t||(t=e,e=[]);var n=v(e,function(e,t){return D(e,i[t]||{})},{});return t?D(n,t):n},this.computeStyle=function(e,t,n){return p(t)||(n=t,t=[]),r.style(t||[],D({},n,e||{}))}}]};function ze(e,a){var s,c,l,u;return a=!!a,p(e)||(e=[e]),I(e,function(e){var t=e;e.waypoints&&!a&&(t=ze(e.waypoints,!0));var n=t.x,i=t.y,r=t.height||0,o=t.width||0;(n<s||void 0===s)&&(s=n),(i<c||void 0===c)&&(c=i),(l<n+o||void 0===l)&&(l=n+o),(u<i+r||void 0===u)&&(u=i+r)}),{x:s,y:c,height:u-c,width:l-s}}function qe(e,t){return Math.round(e*t)/t}function We(e){return a(e)?e+"px":e}function Ge(e,t,n){var i=fe("g");se(i).add(t);var r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}var Ye={shape:["x","y","width","height"],connection:["waypoints"]};function Ke(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._init(e||{})}function Xe(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Ke.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],Ke.prototype._init=function(e){var t=this._eventBus,n=this._container=function(e){var t=(e=D({},{width:"100%",height:"100%"},e)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),D(n.style,{position:"relative",overflow:"hidden",width:We(e.width),height:We(e.height)}),t.appendChild(n),n}(e),i=this._svg=fe("svg");ne(i,{width:"100%",height:"100%"}),Q(n,i);var r=this._viewport=Ge(i,"viewport");!(this._layers={})!==e.deferUpdate&&(this._viewboxChanged=function(n,i){var r,o,a,s;function t(){var e=Date.now(),t=s+i-e;if(0<t)return c(t);n.apply(a,o),r=s=o=a=void 0}function c(e){r=setTimeout(t,e)}return function(){s=Date.now();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o=t,a=this,r||c(i)}}(y(this._viewboxChanged,this),300)),t.on("diagram.init",function(){t.fire("canvas.init",{svg:i,viewport:r})},this),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],function(){delete this._cachedViewbox},this),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},Ke.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},Ke.prototype._clear=function(){var n=this;this._elementRegistry.getAll().forEach(function(e){var t=function(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}(e);"root"===t?n.setRootElement(null,!0):n._removeElement(e,t)}),delete this._cachedViewbox},Ke.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},Ke.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},Ke.prototype._createLayer=function(e,n){n||(n=0);var t=v(this._layers,function(e,t){return n>=t.index&&e++,e},0);return{group:Ge(this._viewport,"layer-"+e,t),index:n}},Ke.prototype.getContainer=function(){return this._container},Ke.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),(i=this._elementRegistry._elements[e.id])&&(I([i.gfx,i.secondaryGfx],function(e){e&&(n?se(e).add(t):se(e).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},Ke.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},Ke.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},Ke.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),se(this.getGraphics(e)).has(t)},Ke.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},Ke.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},Ke.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootElement,i=this._elementRegistry,r=this._eventBus;if(n){if(!t)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:n}),r.fire("root.removed",{element:n}),i.remove(n)}if(e){var o=this.getDefaultLayer();r.fire("root.add",{element:e}),i.add(e,o,this._svg),r.fire("root.added",{element:e,gfx:o})}return this._rootElement=e},Ke.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=Ye[e];if(!d(n,function(e){return void 0!==t[e]}))throw new Error("must supply { "+n.join(", ")+" } with "+e)},Ke.prototype._setParent=function(e,t,n){!function(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}}(t.children,e,n),e.parent=t},Ke.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);var a=o.create(e,t,i);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t},Ke.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},Ke.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},Ke.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),i.remove(e),function(e,t){if(!e||!t)return;var n=e.indexOf(t);-1!==n&&e.splice(n,1)}(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},Ke.prototype.removeShape=function(e){return this._removeElement(e,"shape")},Ke.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},Ke.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},Ke.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},Ke.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},Ke.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,i,r,o,a,s=this._viewport,c=this.getSize();return t?(this._changeViewbox(function(){r=Math.min(c.width/t.width,c.height/t.height);var e=this._svg.createSVGMatrix().scale(r).translate(-t.x,-t.y);Ce(s,e)}),t):(e=this.getDefaultLayer().getBBox(),n=(i=Ce(s))?i.matrix:function(e,t,n,i,r,o){var a=he.createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return me(a,e);case 6:return me(a,{a:e,b:t,c:n,d:i,e:r,f:o})}}(),r=qe(n.a,1e3),o=qe(-n.e||0,1e3),a=qe(-n.f||0,1e3),t=this._cachedViewbox={x:o?o/r:0,y:a?a/r:0,width:c.width/r,height:c.height/r,scale:r,inner:{width:e.width,height:e.height,x:e.x,y:e.y},outer:c})},Ke.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=D({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Xe(t,n)}),{x:n.e,y:n.f}},Ke.prototype.zoom=function(e,t){return e?"fit-viewport"===e?this._fitViewport(t):(this._changeViewbox(function(){"object"!==ke(t)&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),qe(i.a,1e3)):this.viewbox(e).scale;var n,i},Ke.prototype._fitViewport=function(e){var t,n,i=this.viewbox(),r=i.outer,o=i.inner;return n=0<=o.x&&0<=o.y&&o.x+o.width<=r.width&&o.y+o.height<=r.height&&!e?{x:0,y:0,width:Math.max(o.width+o.x,r.width),height:Math.max(o.height+o.y,r.height)}:(t=Math.min(1,r.width/o.width,r.height/o.height),{x:o.x+(e?o.width/2-r.width/t/2:0),y:o.y+(e?o.height/2-r.height/t/2:0),width:r.width/t,height:r.height/t}),this.viewbox(n),this.viewbox(!1).scale},Ke.prototype._setZoom=function(e,t){var n,i,r,o,a=this._svg,s=this._viewport,c=a.createSVGMatrix(),l=a.createSVGPoint(),u=(i=s.getCTM()).a;return o=t?(n=D(l,t).matrixTransform(i.inverse()),r=c.translate(n.x,n.y).scale(1/u*e).translate(-n.x,-n.y),i.multiply(r)):c.scale(e),Xe(this._viewport,o),o},Ke.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},Ke.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();e.waypoints?t=this.getGraphics(e).getBBox():t=e;return{x:t.x*n.scale-n.x*n.scale,y:t.y*n.scale-n.y*n.scale,width:t.width*n.scale,height:t.height*n.scale}},Ke.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Je="data-element-id";function Qe(e){this._elements={},this._eventBus=e}Qe.$inject=["eventBus"],Qe.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),ne(t,Je,i),n&&ne(n,Je,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},Qe.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(ne(i.gfx,Je,""),i.secondaryGfx&&ne(i.secondaryGfx,Je,""),delete t[n])},Qe.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},Qe.prototype.get=function(e){var t;t="string"==typeof e?e:e&&ne(e,Je);var n=this._elements[t];return n&&n.element},Qe.prototype.filter=function(n){var i=[];return this.forEach(function(e,t){n(e,t)&&i.push(e)}),i},Qe.prototype.getAll=function(){return this.filter(function(e){return e})},Qe.prototype.forEach=function(r){var o=this._elements;Object.keys(o).forEach(function(e){var t=o[e],n=t.element,i=t.gfx;return r(n,i)})},Qe.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},Qe.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var Ze={extend:function(e,i,t,r){var o=t.inverse;return Object.defineProperty(e,"remove",{value:function(e){var t=this.indexOf(e);return-1!==t&&(this.splice(t,1),i.unset(e,o,r)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,t){var n=this.indexOf(e);if(void 0===t){if(-1!==n)return;t=this.length}-1!==n&&this.splice(n,1),this.splice(t,0,e),-1===n&&i.set(e,o,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e},isExtended:function(e){return!0===e.__refs_collection}};function et(t,n,i){var e=Ze.extend(i[n.name]||[],t,n,i);Object.defineProperty(i,n.name,{enumerable:n.enumerable,value:e}),e.length&&e.forEach(function(e){t.set(e,n.inverse,i)})}function tt(e,t){if(!(this instanceof tt))return new tt(e,t);(e.inverse=t).inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}tt.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?et(this,t,e):function(n,e,i){var r=e.inverse,o=i[e.name];Object.defineProperty(i,e.name,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return o},set:function(e){if(e!==o){var t=o;o=null,t&&n.unset(t,r,i),o=e,n.set(o,r,i)}}})}(this,t,e)},tt.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return Ze.isExtended(n)||et(this,t,e),n},tt.prototype.ensureBound=function(e,t){!function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}(e,t)&&this.bind(e,t)},tt.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},tt.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var nt=tt,it=Ze;nt.Collection=it;var rt=new nt({name:"children",enumerable:!0,collection:!0},{name:"parent"}),ot=new nt({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),at=new nt({name:"attachers",collection:!0},{name:"host"}),st=new nt({name:"outgoing",collection:!0},{name:"source"}),ct=new nt({name:"incoming",collection:!0},{name:"target"});function lt(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),rt.bind(this,"parent"),ot.bind(this,"labels"),st.bind(this,"outgoing"),ct.bind(this,"incoming")}function ut(){lt.call(this),rt.bind(this,"children"),at.bind(this,"host"),at.bind(this,"attachers")}function pt(){ut.call(this)}function dt(){ut.call(this),ot.bind(this,"labelTarget")}function ft(){lt.call(this),st.bind(this,"source"),ct.bind(this,"target")}r(ut,lt),r(pt,ut),r(dt,ut),r(ft,lt);var ht={connection:ft,shape:ut,label:dt,root:pt};function mt(){this._uid=12}mt.prototype.createRoot=function(e){return this.create("root",e)},mt.prototype.createLabel=function(e){return this.create("label",e)},mt.prototype.createShape=function(e){return this.create("shape",e)},mt.prototype.createConnection=function(e){return this.create("connection",e)},mt.prototype.create=function(e,t){return(t=D({},t||{})).id||(t.id=e+"_"+this._uid++),function(e,t){var n=ht[e];if(!n)throw new Error("unknown type: <"+e+">");return D(new n,t)}(e,t)};var vt="__fn",gt=Array.prototype.slice;function yt(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function bt(){}function _t(e,t,n){var i=ve();i.setTranslate(t,n),Ce(e,i)}function wt(e,t){this._eventBus=e,this._elementRegistry=t}function xt(e,t,n){t.insertBefore(e,n||t.firstChild)}yt.prototype.on=function(e,t,n,i){if(e=p(e)?e:[e],l(t)&&(i=n,n=t,t=1e3),!a(t))throw new Error("priority must be a number");var r=n;i&&((r=y(n,i))[vt]=n[vt]||n);var o=this;e.forEach(function(e){o._addListener(e,{priority:t,callback:r,next:null})})},yt.prototype.once=function(t,e,n,i){var r=this;if(l(e)&&(i=n,n=e,e=1e3),!a(e))throw new Error("priority must be a number");function o(){var e=n.apply(i,arguments);return r.off(t,o),e}o[vt]=n,this.on(t,e,o)},yt.prototype.off=function(e,t){e=p(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},yt.prototype.createEvent=function(e){var t=new bt;return t.init(e),t},yt.prototype.fire=function(e,t){var n,i,r,o;if(o=gt.call(arguments),"object"===ke(e)&&(e=(n=e).type),!e)throw new Error("no event type specified");if(i=this._listeners[e]){n=t instanceof bt?t:this.createEvent(t);var a=(o[0]=n).type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==a&&(n.type=a)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},yt.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},yt.prototype._destroy=function(){this._listeners={}},yt.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i},yt.prototype._invokeListener=function(e,t,n){var i;try{void 0!==(i=function(e,t){return e.apply(null,t)}(n.callback,t))&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return i},yt.prototype._addListener=function(e,t){var n,i=this._getListeners(e);if(i){for(;i;){if(i.priority<t.priority)return t.next=i,void(n?n.next=t:this._setListeners(e,t));i=(n=i).next}n.next=t}else this._setListeners(e,t)},yt.prototype._getListeners=function(e){return this._listeners[e]},yt.prototype._setListeners=function(e,t){this._listeners[e]=t},yt.prototype._removeListener=function(e,t){var n,i,r,o=this._getListeners(e);if(t)for(;o;)n=o.next,(r=o.callback)!==t&&r[vt]!==t||(i?i.next=n:this._setListeners(e,n)),i=o,o=n;else this._setListeners(e,null)},bt.prototype.stopPropagation=function(){this.cancelBubble=!0},bt.prototype.preventDefault=function(){this.defaultPrevented=!0},bt.prototype.init=function(e){D(this,e||{})},wt.$inject=["eventBus","elementRegistry"],wt.prototype._getChildren=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=function(e){return e.parentNode.childNodes[1]}(n))||(se(t=fe("g")).add("djs-children"),Q(n.parentNode,t)):t=n,t},wt.prototype._clear=function(e){var t=function(e){return K(".djs-visual",e)}(e);return S(t),t},wt.prototype._createContainer=function(e,t,n){var i=fe("g");se(i).add("djs-group"),void 0!==n?xt(i,t,t.childNodes[n]):Q(t,i);var r=fe("g");se(r).add("djs-element"),se(r).add("djs-"+e),Q(i,r);var o=fe("g");return se(o).add("djs-visual"),Q(r,o),r},wt.prototype.create=function(e,t,n){var i=this._getChildren(t.parent);return this._createContainer(e,i,n)},wt.prototype.updateContainments=function(e){var i=this,r=this._elementRegistry;I(v(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),function(e){var t=e.children;if(t){var n=i._getChildren(e);I(t.slice().reverse(),function(e){xt(r.getGraphics(e).parentNode,n)})}})},wt.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},wt.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},wt.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},wt.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},wt.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if("shape"===e)this.drawShape(i,t),_t(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(i,t)}t.hidden?ne(n,"display","none"):ne(n,"display","block")}},wt.prototype.remove=function(e){le(this._elementRegistry.getGraphics(e).parentNode)};var Et={__depends__:[He],__init__:["canvas"],canvas:["type",Ke],elementRegistry:["type",Qe],elementFactory:["type",mt],eventBus:["type",yt],graphicsFactory:["type",wt]};function Ct(e){var n=[],i=[];function r(e){return 0<=n.indexOf(e)}e.forEach(function e(t){r(t)||((t.__depends__||[]).forEach(e),r(t)||(function(e){n.push(e)}(t),(t.__init__||[]).forEach(function(e){i.push(e)})))});var t=new Me(n);return i.forEach(function(e){try{t["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),t}function kt(e,t){this.injector=t=t||function(e){return Ct([{config:["value",e=e||{}]},Et].concat(e.modules||[]))}(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}function St(){}function Tt(e,t){this.model=e,this.properties=t}kt.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},kt.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},St.prototype.get=function(e){return this.$model.properties.get(this,e)},St.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},Tt.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(St.prototype);I(e.properties,function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(e){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),I(e,y(function(e,t){this.set(t,e)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var Ot={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},At={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};function It(e,t){var n=At[e];return n?n(t):t}function Dt(e){return!!Ot[e]}function Pt(e){return!!At[e]}function Rt(e,t){var n,i,r=e.split(/:/);if(1===r.length)n=e,i=t;else{if(2!==r.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=r[1],i=r[0]}return{name:e=(i?i+":":"")+n,prefix:i,localName:n}}function Nt(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Mt(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,I(e,y(this.registerPackage,this))}function jt(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function $t(e){this.model=e}function Lt(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Bt(e){this.properties=new $t(this),this.factory=new Tt(this,this.properties),this.registry=new Mt(e,this.properties),this.typeCache={}}Nt.prototype.build=function(){return function(t,e){var n={},i=Object(t);return I(e,function(e){e in i&&(n[e]=t[e])}),n}(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},Nt.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},Nt.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(-1===s)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t},Nt.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=Rt(r[0],i),a=Rt(r[1],o.prefix).name,s=this.propertiesByName[a];if(!s)throw new Error("refined property <"+a+"> not found");this.replaceProperty(s,e,n),delete e.redefines},Nt.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},Nt.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},Nt.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},Nt.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},Nt.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},Nt.prototype.hasProperty=function(e){return this.propertiesByName[e]},Nt.prototype.addTrait=function(i,r){var e=this.allTypesByName,t=this.allTypes,n=i.name;n in e||(I(i.properties,y(function(e){e=D({},e,{name:e.ns.localName,inherited:r}),Object.defineProperty(e,"definedBy",{value:i});var t=e.replaces,n=e.redefines;t||n?this.redefineProperty(e,t||n,t):(e.isBody&&this.setBodyProperty(e),e.isId&&this.setIdProperty(e),this.addProperty(e))},this)),t.push(i),e[n]=i)},Mt.prototype.getPackage=function(e){return this.packageMap[e]},Mt.prototype.getPackages=function(){return this.packages},Mt.prototype.registerPackage=function(t){t=D({},t);var e=this.packageMap;jt(e,t,"prefix"),jt(e,t,"uri"),I(t.types,y(function(e){this.registerType(e,t)},this)),e[t.uri]=e[t.prefix]=t,this.packages.push(t)},Mt.prototype.registerType=function(e,t){var i=Rt((e=D({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:D(e.meta||{})})).name,t.prefix),n=i.name,r={};I(e.properties,y(function(e){var t=Rt(e.name,i.prefix),n=t.name;Dt(e.type)||(e.type=Rt(e.type,t.prefix).name),D(e,{ns:t,name:n}),r[n]=e},this)),D(e,{ns:i,name:n,propertiesByName:r}),I(e.extends,y(function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(n)},this)),this.definePackage(e,t),this.typeMap[n]=e},Mt.prototype.mapTypes=function(i,r,e){var t=Dt(i.name)?{name:i.name}:this.typeMap[i.name],o=this;function n(e){return a(e,!0)}function a(e,t){var n=Rt(e,Dt(e)?"":i.prefix);o.mapTypes(n,r,t)}if(!t)throw new Error("unknown type <"+i.name+">");I(t.superClass,e?n:a),r(t,!e),I(t.traits,n)},Mt.prototype.getEffectiveDescriptor=function(e){var t=Rt(e),n=new Nt(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},Mt.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},$t.prototype.set=function(e,t,n){var i=this.model.getPropertyDescriptor(e,t),r=i&&i.name;!function(e){return void 0===e}(n)?i?r in e?e[r]=n:Lt(e,i,n):e.$attrs[t]=n:i?delete e[r]:delete e.$attrs[t]},$t.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var i=n.name;return!e[i]&&n.isMany&&Lt(e,n,[]),e[i]},$t.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},$t.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},$t.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},Bt.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},Bt.prototype.getType=function(e){var t=this.typeCache,n=u(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},Bt.prototype.createAny=function(e,t,n){var i=Rt(e),r={$type:e,$instanceOf:function(e){return e===this.$type}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),I(n,function(e,t){O(e)&&void 0!==e.value?r[e.name]=e.value:r[t]=e}),r},Bt.prototype.getPackage=function(e){return this.registry.getPackage(e)},Bt.prototype.getPackages=function(){return this.registry.getPackages()},Bt.prototype.getElementDescriptor=function(e){return e.$descriptor},Bt.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},Bt.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},Bt.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Vt=String.fromCharCode,Ft=Object.prototype.hasOwnProperty,Ut=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,Ht={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function zt(e,t,n,i){return i?Ft.call(Ht,i)?Ht[i]:"&"+i+";":Vt(t||parseInt(n,16))}function qt(e){return 3<e.length&&-1!==e.indexOf("&")?e.replace(Ut,zt):e}Object.keys(Ht).forEach(function(e){Ht[e.toUpperCase()]=Ht[e]});var Wt="http://www.w3.org/2001/XMLSchema-instance",Gt="xsi",Yt="xsi:type",Kt="non-whitespace outside of root node";function Xt(e){return new Error(e)}function Jt(e){return"missing namespace for prefix <"+e+">"}function Qt(e){return{get:e,enumerable:!0}}function Zt(e){var t,n={};for(t in e)n[t]=e[t];return n}function en(e){return e+"$uri"}function tn(){return{line:0,column:0}}function nn(e){throw e}function rn(e){if(!this)return new rn(e);var g,E,C,k,n,S,T,O,A,I=e&&e.proxy,i=nn,D=tn,P=!1,R=!1,t=null,N=!1;function M(e){e instanceof Error||(e=Xt(e)),i(t=e,D)}function j(e){n&&(e instanceof Error||(e=Xt(e)),n(e,D))}this.on=function(e,t){if("function"!=typeof t)throw Xt("required args <name, cb>");switch(e){case"openTag":E=t;break;case"text":g=t;break;case"closeTag":C=t;break;case"error":i=t;break;case"warn":n=t;break;case"cdata":k=t;break;case"attention":O=t;break;case"question":T=t;break;case"comment":S=t;break;default:throw Xt("unsupported event: "+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),"object"!==ke(e))throw Xt("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return n[Wt]=Gt,R=!0,A=n,this},this.parse=function(e){if("string"!=typeof e)throw Xt("required args <xml=string>");return t=null,function(a){var e,t,n,i,r,o,s,c,l,y,u=R?[]:null,b=R?function(e){var t,n,i={};for(t in e)i[n=e[t]]=n,i[en(n)]=t;return i}(A):null,p=[],_=0,d=!1,f=!1,h=0,m=0,w="",x=0;function v(){if(null!==y)return y;var e,t,n,i,r,o,a,s,c,l,u,p=R&&b.xmlns,d=R&&P?[]:null,f=x,h=w,m=h.length,v={},g={};e:for(;f<m;f++)if(c=!1,!(32===(l=h.charCodeAt(f))||l<14&&8<l)){for(!(l<65||122<l||90<l&&l<97)||95!==l&&58!==l&&(j("illegal first char attribute name"),c=!0),u=f+1;u<m;u++)if(!(96<(l=h.charCodeAt(u))&&l<123||64<l&&l<91||47<l&&l<59||46===l||45===l||95===l)){if(32===l||l<14&&8<l){j("missing attribute value"),f=u;continue e}if(61===l)break;j("illegal attribute name char"),c=!0}if("xmlns:xmlns"===(s=h.substring(f,u))&&(j("illegal declaration of xmlns"),c=!0),34===(l=h.charCodeAt(u+1)))-1!==(u=h.indexOf('"',f=u+2))||-1!==(u=h.indexOf("'",f))&&(j("attribute value quote missmatch"),c=!0);else if(39===l)-1!==(u=h.indexOf("'",f=u+2))||-1!==(u=h.indexOf('"',f))&&(j("attribute value quote missmatch"),c=!0);else for(j("missing attribute value quotes"),c=!0,u+=1;u<m&&!(32===(l=h.charCodeAt(u+1))||l<14&&8<l);u++);for(-1===u&&(j("missing closing quotes"),u=m,c=!0),c||(o=h.substring(f,u)),f=u;u+1<m&&!(32===(l=h.charCodeAt(u+1))||l<14&&8<l);u++)f===u&&(j("illegal character after attribute end"),c=!0);if(f=u+1,!c)if(s in g)j("attribute <"+s+"> already defined");else if(g[s]=!0,R)if(P){if(null!==(r="xmlns"===s?"xmlns":120===s.charCodeAt(0)&&"xmlns:"===s.substr(0,6)?s.substr(6):null)){if(e=qt(o),t=en(r),!(a=A[e])){if("xmlns"===r||t in b&&b[t]!==e)for(;a="ns"+_++,void 0!==b[a];);else a=r;A[e]=a}b[r]!==a&&(i||(b=Zt(b),i=!0),b[r]=a,"xmlns"===r&&(b[en(a)]=e,p=a),b[t]=e),v[s]=o;continue}d.push(s,o)}else-1!==(l=s.indexOf(":"))?(n=b[s.substring(0,l)])?((s=p===n?s.substr(l+1):n+s.substr(l))===Yt&&(o=-1!==(l=o.indexOf(":"))?(n=o.substring(0,l),(n=b[n]||n)+o.substring(l)):p+":"+o),v[s]=o):j(Jt(s.substring(0,l))):v[s]=o;else v[s]=o}if(P)for(f=0,m=d.length;f<m;f++){if(s=d[f++],o=d[f],-1!==(l=s.indexOf(":"))){if(!(n=b[s.substring(0,l)])){j(Jt(s.substring(0,l)));continue}(s=p===n?s.substr(l+1):n+s.substr(l))===Yt&&(o=-1!==(l=o.indexOf(":"))?(n=o.substring(0,l),(n=b[n]||n)+o.substring(l)):p+":"+o)}v[s]=o}return y=v}D=function(){for(var e,t=/(\r\n|\r|\n)/g,n=0,i=0,r=0,o=m;r<=h&&(e=t.exec(a))&&(o=e[0].length+e.index,!(h<o));)n+=1,r=o;return{data:-1==h?(i=o,a.substring(m)):0===m?(console.log(h-r),a.substring(m,h)):(i=h-r,-1==m?a.substring(h):a.substring(h,m+1)),line:n,column:i}},I&&(l=Object.create({},{name:Qt(function(){return s}),originalName:Qt(function(){return c}),attrs:Qt(v),ns:Qt(function(){return b})}));for(;-1!==m;){if(-1===(h=60===a.charCodeAt(m)?m:a.indexOf("<",m)))return p.length?M("unexpected end of file"):0===m?M("missing start tag"):m<a.length&&a.substring(m).trim()&&j(Kt);if(m!==h)if(p.length){if(g&&(g(a.substring(m,h),qt,D),N))return}else if(a.substring(m,h).trim()&&(j(Kt),N))return;if(33!==(r=a.charCodeAt(h+1)))if(63!==r){if(-1==(m=a.indexOf(">",h+1)))return M("unclosed tag");if(y={},47===r){if(f=!(d=!1),!p.length)return M("missing open tag");if(t=s=p.pop(),i=h+2+t.length,a.substring(h+2,i)!==t)return M("closing tag mismatch");for(;i<m;i++)if(!(32===(r=a.charCodeAt(i))||8<r&&r<14))return M("close tag")}else{if(f=47===a.charCodeAt(m-1)?(t=s=a.substring(h+1,m-1),d=!0):(t=s=a.substring(h+1,m),!(d=!0)),!(96<r&&r<123||64<r&&r<91||95===r||58===r))return M("illegal first char nodeName");for(i=1,n=t.length;i<n;i++)if(!(96<(r=t.charCodeAt(i))&&r<123||64<r&&r<91||47<r&&r<59||45===r||95===r||46==r)){if(32===r||r<14&&8<r){s=t.substring(0,i),y=null;break}return M("invalid nodeName")}f||p.push(s)}if(R){if(e=b,d&&(f||u.push(e),null!==y||(P=-1!==t.indexOf("xmlns",i))&&(x=i,w=t,v(),P=!1)),-1!==(r=(c=s).indexOf(":"))){if(!(o=b[s.substring(0,r)]))return M("missing namespace on <"+c+">");s=s.substr(r+1)}else o=b.xmlns;o&&(s=o+":"+s)}if(d&&(x=i,w=t,E&&(I?E(l,qt,f,D):E(s,v,qt,f,D),N)))return;if(f){if(C&&(C(I?l:s,qt,d,D),N))return;R&&(b=d?e:u.pop())}m+=1}else{if(-1===(m=a.indexOf("?>",h)))return M("unclosed question");if(T&&(T(a.substring(h,m+2),D),N))return;m+=2}else{if(91===(r=a.charCodeAt(h+2))&&"CDATA["===a.substr(h+3,6)){if(-1===(m=a.indexOf("]]>",h)))return M("unclosed cdata");if(k&&(k(a.substring(h+9,m),D),N))return;m+=3;continue}if(45===r&&45===a.charCodeAt(h+3)){if(-1===(m=a.indexOf("--\x3e",h)))return M("unclosed comment");if(S&&(S(a.substring(h+4,m),qt,D),N))return;m+=3;continue}if(-1===(m=a.indexOf(">",h+1)))return M("unclosed tag");if(O&&(O(a.substring(h,m+1),qt,D),N))return;m+=1}}}(e),D=tn,N=!1,t},this.stop=function(){N=!0}}function on(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var an={xsi:"http://www.w3.org/2001/XMLSchema-instance"},sn="xsi:type";function cn(e){return e.xml&&e.xml.serialize}function ln(e){return cn(e)===sn}function un(e,t){return on(t)?e.prefix+":"+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e.localName):e.name}function pn(e){return new Error(e)}function dn(e){return e.$descriptor}function fn(e){D(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw pn("expected element");var t,n=this.elementsById,i=dn(e).idProperty;if(i&&(t=e.get(i.name))){if(n[t])throw pn("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function hn(){}function mn(){}function vn(){}function gn(e,t){this.property=e,this.context=t}function yn(e,t){this.element=t,this.propertyDesc=e}function bn(){}function _n(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function wn(e,t,n){_n.call(this,e,t,n)}function xn(e,t,n){this.model=e,this.context=n}function En(e){e instanceof Bt&&(e={model:e}),D(this,{lax:!1},e)}hn.prototype.handleEnd=function(){},hn.prototype.handleText=function(){},hn.prototype.handleNode=function(){},(mn.prototype=Object.create(hn.prototype)).handleNode=function(){return this},(vn.prototype=Object.create(hn.prototype)).handleText=function(e){this.body=(this.body||"")+e},(gn.prototype=Object.create(vn.prototype)).handleNode=function(e){if(this.element)throw pn("expected no sub nodes");return this.element=this.createReference(e),this},gn.prototype.handleEnd=function(){this.element.id=this.body},gn.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},(yn.prototype=Object.create(vn.prototype)).handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=It(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},(bn.prototype=Object.create(vn.prototype)).handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},(_n.prototype=Object.create(bn.prototype)).addReference=function(e){this.context.addReference(e)},_n.prototype.handleText=function(e){if(!dn(this.element).bodyProperty)throw pn("unexpected body text <"+e+">");vn.prototype.handleText.call(this,e)},_n.prototype.handleEnd=function(){var e=this.body,t=this.element,n=dn(t).bodyProperty;n&&void 0!==e&&(e=It(n.type,e),t.set(n.name,e))},_n.prototype.createElement=function(e){var i,t=e.attributes,n=this.type,r=dn(n),o=this.context,a=new n({}),s=this.model;return I(t,function(e,t){var n=r.propertiesByName[t];n&&n.isReference?n.isMany?I(e.split(" "),function(e){o.addReference({element:a,property:n.ns.name,id:e})}):o.addReference({element:a,property:n.ns.name,id:e}):(n?e=It(n.type,e):"xmlns"!==t&&(i=Rt(t,r.ns.prefix),s.getPackage(i.prefix)&&o.addWarning({message:"unknown attribute <"+t+">",element:a,property:t,value:e})),a.set(t,e))}),a},_n.prototype.getPropertyForNode=function(e){var t,n,i=Rt(e.name),r=this.type,o=this.model,a=dn(r),s=i.name,c=a.propertiesByName[s];if(c)return ln(c)&&(t=e.attributes[sn])?(t=function(e,t){var n=Rt(e);return function(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&0===i.indexOf(r)?e.prefix+":"+i.slice(r.length):n}(n,t.getPackage(n.prefix))}(t,o),D({},c,{effectiveType:dn(n=o.getType(t)).name})):c;var l=o.getPackage(i.prefix);if(l){if(t=un(i,l),n=o.getType(t),c=T(a.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return D({},c,{effectiveType:dn(n).name})}else if(c=T(a.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return c;throw pn("unrecognized element <"+i.name+">")},_n.prototype.toString=function(){return"ElementDescriptor["+dn(this.type).name+"]"},_n.prototype.valueHandler=function(e,t){return new yn(e,t)},_n.prototype.referenceHandler=function(e){return new gn(e,this.context)},_n.prototype.handler=function(e){return"Element"===e?new xn(this.model,e,this.context):new _n(this.model,e,this.context)},_n.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,Pt(n=t.effectiveType||t.type))return this.valueHandler(t,i);var o=(r=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==o&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(D(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},(wn.prototype=Object.create(_n.prototype)).createElement=function(e){var t=e.name,n=Rt(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&un(n,o)||t;if(!r.hasType(a))throw pn("unexpected element <"+e.originalName+">");return _n.prototype.createElement.call(this,e)},(xn.prototype=Object.create(bn.prototype)).createElement=function(e){var t=e.name,n=Rt(t).prefix,i=e.ns[n+"$uri"],r=e.attributes;return this.model.createAny(t,i,r)},xn.prototype.handleChild=function(e){var t=new xn(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},xn.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},En.prototype.fromXML=function(n,e,i){var r=e.rootHandler;e instanceof _n?(r=e,e={}):"string"==typeof e?(r=this.handler(e),e={}):"string"==typeof r&&(r=this.handler(r));var t=this.model,a=this.lax,l=new fn(D({},e,{rootHandler:r})),o=new rn({proxy:!0}),s=function(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}();function c(e,t,n){var i=t(),r=i.line,o=i.column,a=i.data;"<"===a.charAt(0)&&-1!==a.indexOf(" ")&&(a=a.slice(0,a.indexOf(" "))+">");var s="unparsable content "+(a?a+" ":"")+"detected\n\tline: "+r+"\n\tcolumn: "+o+"\n\tnested error: "+e.message;if(n)return l.addWarning({message:s,error:e}),!0;throw pn(s)}function u(e,t){return c(e,t,!0)}r.context=l,s.push(r);var p=/^<\?xml /i,d=/ encoding="([^"]+)"/i,f=/^utf-8$/i;function h(e,t){try{s.peek().handleText(e)}catch(e){u(e,t)}}var m=t.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},{});o.ns(m).on("openTag",function(e,i,t,n){var r=e.attrs||{},o=Object.keys(r).reduce(function(e,t){var n=i(r[t]);return e[t]=n,e},{});!function(e,t){var n=s.peek();try{s.push(n.handleNode(e))}catch(e){c(e,t,a)&&s.push(new mn)}}({name:e.name,originalName:e.originalName,attributes:o,ns:e.ns},n)}).on("question",function(e){if(p.test(e)){var t=d.exec(e),n=t&&t[1];n&&!f.test(n)&&l.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}}).on("closeTag",function(){s.pop().handleEnd()}).on("cdata",h).on("text",function(e,t,n){!function(e,t){(e=e.trim())&&h(e,t)}(t(e),n)}).on("error",c).on("warn",u),function(e){setTimeout(e,0)}(function(){var t;try{o.parse(n),function(){var e,t,n=l.elementsById,i=l.references;for(e=0;t=i[e];e++){var r=t.element,o=n[t.id],a=dn(r).propertiesByName[t.property];if(o||l.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),a.isMany){var s=r.get(a.name),c=s.indexOf(t);-1===c&&(c=s.length),o?s[c]=o:s.splice(c,1)}else r.set(a.name,o)}}()}catch(e){t=e}var e=r.element;t||e||(t=pn("failed to parse document as <"+r.type.$descriptor.name+">")),i(t,t?void 0:e,l)})},En.prototype.handler=function(e){return new wn(this.model,e)};var Cn=/<|>|'|"|&|\n\r|\n/g,kn=/<|>|&/g;function Sn(t){var n={},i={},r={},o=[],a=[];this.byUri=function(e){return i[e]||t&&t.byUri(e)},this.add=function(e,t){i[e.uri]=e,t?o.push(e):a.push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return n[e||"xmlns"]},this.mapPrefix=function(e,t){n[e||"xmlns"]=t},this.logUsed=function(e){var t=e.uri;r[t]=this.byUri(t)},this.getUsed=function(e){return[].concat(o,a).filter(function(e){return r[e.uri]})}}function Tn(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function On(e){return u(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function An(e,t){return t.isGeneric?D({localName:t.ns.localName},e):D({localName:function(e,t){return on(t)?function(e){return e.charAt(0).toLowerCase()+e.slice(1)}(e):e}(t.ns.localName,t.$pkg)},e)}var In={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Dn={"<":"lt",">":"gt","&":"amp"};function Pn(e,t,n){return(e=u(e)?e:""+e).replace(t,function(e){return"&"+n[e]+";"})}function Rn(e){this.tagName=e}function Nn(){}function Mn(e){this.tagName=e}function jn(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function $n(e,t){jn.call(this,e,t)}function Ln(){this.value="",this.write=function(e){this.value+=e}}function Bn(t,e){var n=[""];this.append=function(e){return t.write(e),this},this.appendNewLine=function(){return e&&t.write("\n"),this},this.appendIndent=function(){return e&&t.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Vn(r){return r=D({format:!1,preamble:!0},r||{}),{toXML:function(e,t){var n=t||new Ln,i=new Bn(n,r.format);if(r.preamble&&i.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new jn).build(e).serializeTo(i),!t)return n.value}}}function Fn(e,t){Bt.call(this,e,t)}Rn.prototype.build=function(e){return this.element=e,this},Rn.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Nn.prototype.serializeValue=Nn.prototype.serializeTo=function(e){e.append(this.escape?function(e){return Pn(e,kn,Dn)}(this.value):this.value)},Nn.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(kn)&&(this.escape=!0),this},Tn(Mn,Nn),Mn.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},jn.prototype.build=function(e){var t,n,i=(this.element=e).$descriptor,r=this.propertyDescriptor,o=i.isGeneric;return t=o?this.parseGeneric(e):this.parseNsAttributes(e),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(i),this.tagName=this.addTagName(this.ns),o||(n=function(i){return A(i.$descriptor.properties,function(e){var t=e.name;if(e.isVirtual)return!1;if(!i.hasOwnProperty(t))return!1;var n=i[t];return n!==e.default&&null!==n&&(!e.isMany||n.length)})}(e),this.parseAttributes(function(e){return A(e,function(e){return e.isAttr})}(n)),this.parseContainments(function(e){return A(e,function(e){return!e.isAttr})}(n))),this.parseGenericAttributes(e,t),this},jn.prototype.nsTagName=function(e){return An(this.logNamespaceUsed(e.ns),e)},jn.prototype.nsPropertyTagName=function(e){return function(e,t){return D({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},jn.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},jn.prototype.nsAttributeName=function(e){var t;if(t=u(e)?Rt(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:D({localName:t.localName},n)},jn.prototype.parseGeneric=function(n){var i=this,r=this.body,o=[];return I(n,function(e,t){"$body"===t?r.push((new Nn).build({type:"String"},e)):"$children"===t?I(e,function(e){r.push(new jn(i).build(e))}):0===t.indexOf("$")||i.parseNsAttribute(n,t,e)&&o.push({name:t,value:e})}),o},jn.prototype.parseNsAttribute=function(e,t,n){var i,r=e.$model,o=Rt(t);if("xmlns"===o.prefix&&(i={prefix:o.localName,uri:n}),o.prefix||"xmlns"!==o.localName||(i={uri:n}),!i)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},jn.prototype.parseNsAttributes=function(i,e){var r=this,t=i.$attrs,o=[];return I(t,function(e,t){var n=r.parseNsAttribute(i,t,e);n&&o.push(n)}),o},jn.prototype.parseGenericAttributes=function(n,e){var i=this;I(e,function(t){if(t.name!==sn)try{i.addAttribute(i.nsAttributeName(t.name),t.value)}catch(e){console.warn("missing namespace information for ",t.name,"=",t.value,"on",n,e)}})},jn.prototype.parseContainments=function(e){var o=this,a=this.body,s=this.element;I(e,function(n){var e=s.get(n.name),t=n.isReference;if(n.isMany||(e=[e]),n.isBody)a.push((new Nn).build(n,e[0]));else if(Pt(n.type))I(e,function(e){a.push(new Mn(o.addTagName(o.nsPropertyTagName(n))).build(n,e))});else if(t)I(e,function(e){a.push(new Rn(o.addTagName(o.nsPropertyTagName(n))).build(e))});else{var i=ln(n),r=function(e){return"property"===cn(e)}(n);I(e,function(e){var t;t=i?new $n(o,n):r?new jn(o,n):new jn(o),a.push(t.build(e))})}})},jn.prototype.getNamespaces=function(e){var t,n=this.namespaces,i=this.parent;return n||(t=i&&i.getNamespaces(),e||!t?this.namespaces=n=new Sn(t):n=t),n},jn.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix;return i.byUri(r)||i.add(e,t),i.mapPrefix(o,r),e},jn.prototype.logNamespaceUsed=function(e,t){var n,i,r,o=this.element.$model,a=this.getNamespaces(t),s=e.prefix,c=e.uri;if(!s&&!c)return{localName:e.localName};if(r=an[s]||o&&(o.getPackage(s)||{}).uri,!(c=c||r||a.uriByPrefix(s)))throw new Error("no namespace uri given for prefix <"+s+">");if(!(e=a.byUri(c))){for(n=s,i=1;a.uriByPrefix(n);)n=s+"_"+i++;e=this.logNamespace({prefix:n,uri:c},r===c)}return s&&a.mapPrefix(s,c),e},jn.prototype.parseAttributes=function(e){var i=this,r=this.element;I(e,function(e){var t=r.get(e.name);if(e.isReference)if(e.isMany){var n=[];I(t,function(e){n.push(e.id)}),t=n.join(" ")}else t=t.id;i.addAttribute(i.nsAttributeName(e),t)})},jn.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),On(e)},jn.prototype.addAttribute=function(e,t){var n=this.attrs;u(t)&&(t=function(e){return Pn(e,Cn,In)}(t)),n.push({name:e,value:t})},jn.prototype.serializeAttributes=function(t){var e=this.attrs,n=this.namespaces;n&&(e=function(e){return f(e.getUsed(),function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}})}(n).concat(e)),I(e,function(e){t.append(" ").append(On(e.name)).append('="').append(e.value).append('"')})},jn.prototype.serializeTo=function(t){var e=this.body[0],n=e&&e.constructor!==Nn;t.appendIndent().append("<"+this.tagName),this.serializeAttributes(t),t.append(e?">":" />"),e&&(n&&t.appendNewLine().indent(),I(this.body,function(e){e.serializeTo(t)}),n&&t.unindent().appendIndent(),t.append("</"+this.tagName+">")),t.appendNewLine()},Tn($n,jn),$n.prototype.parseNsAttributes=function(e){var t=jn.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(sn),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t},$n.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},(Fn.prototype=Object.create(Bt.prototype)).fromXML=function(e,t,n,i){u(t)||(i=n,n=t,t="bpmn:Definitions"),l(n)&&(i=n,n={});var r=new En(D({model:this,lax:!0},n)),o=r.handler(t);r.fromXML(e,o,i)};Fn.prototype.toXML=function(e,t,n){l(t)&&(n=t,t={});var i,r,o=new Vn(t);try{i=o.toXML(e)}catch(e){r=e}return n(r,i)};var Un={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",type:"LaneSet",isMany:!0,replaces:"FlowElementsContainer#laneSets"},{name:"flowElements",type:"FlowElement",isMany:!0,replaces:"FlowElementsContainer#flowElements"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"assignment",type:"Assignment",isMany:!0},{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",type:"String",isBody:!0}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",type:"String",isAttr:!0},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isVirtual:!0,isMany:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],prefix:"bpmn",xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[],prefix:"bpmndi"},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Extension",properties:[{name:"values",type:"Element",isMany:!0}]}],associations:[],prefix:"di",xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function Hn(e,t){return new Fn(D({},Un,e),t)}function zn(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var qn=new nt({name:"bpmnElement",enumerable:!0},{name:"di",configurable:!0});function Wn(e,t){return e.$instanceOf(t)}function Gn(a,s){var c={},l=[];function u(t,n){return function(e){t(e,n)}}function i(e){c[e.id]=e}function r(t,e){try{var n=t.di&&function(e,t){if(e.gfx)throw new Error(s("already rendered {element}",{element:zn(e)}));return a.element(e,t)}(t,e);return i(t),n}catch(e){p(e.message,{element:t,error:e}),console.error(s("failed to import {element}",{element:zn(t)})),console.error(e)}}function p(e,t){a.error(e,t)}function d(e){var t=e.bpmnElement;t?t.di?p(s("multiple DI elements defined for {element}",{element:zn(t)}),{element:t}):(qn.bind(t,"di"),t.di=e):p(s("no bpmnElement referenced in {element}",{element:zn(e)}),{element:e})}function f(e){!function(e){d(e),I(e.planeElement,t)}(e.plane)}function t(e){d(e)}function h(){for(;l.length;)l.shift()()}function m(e,t){k(e,t),_(e.ioSpecification,t),b(e.artifacts,t),i(e)}function v(e,t){r(e,t)}function o(e,t){r(e,t)}function n(e,t){r(e,t)}function g(e,t){r(e,t)}function y(e,t){r(e,t)}function b(e,t){I(e,function(e){Wn(e,"bpmn:Association")?l.push(function(){y(e,t)}):y(e,t)})}function _(e,t){e&&(I(e.dataInputs,u(n,t)),I(e.dataOutputs,u(g,t)))}function w(e,t){k(e,t),b(e.artifacts,t)}function x(e,t){r(e,t)}function E(t,n){l.push(function(){var e=r(t,n);t.childLaneSet&&C(t.childLaneSet,e||n),function(n){I(n.flowNodeRef,function(e){var t=e.get("lanes");t&&t.push(n)})}(t)})}function C(e,t){I(e.lanes,u(E,t))}function k(e,t){!function(e,t){I(e,function(e){Wn(e,"bpmn:SequenceFlow")?l.push(function(){!function(e,t){r(e,t)}(e,t)}):Wn(e,"bpmn:BoundaryEvent")?l.unshift(function(){!function(e,t){r(e,t)}(e,t)}):Wn(e,"bpmn:FlowNode")?function(e,t){var n=r(e,t);Wn(e,"bpmn:SubProcess")&&w(e,n||t),Wn(e,"bpmn:Activity")&&_(e.ioSpecification,t),l.push(function(){I(e.dataInputAssociations,u(o,t)),I(e.dataOutputAssociations,u(o,t))})}(e,t):Wn(e,"bpmn:DataObject")||(Wn(e,"bpmn:DataStoreReference")?x(e,t):Wn(e,"bpmn:DataObjectReference")?x(e,t):p(s("unrecognized flowElement {element} in context {context}",{element:zn(e),context:t?zn(t.businessObject):"null"}),{element:e,context:t}))})}(e.flowElements,t),e.laneSets&&function(e,t){I(e,u(C,t))}(e.laneSets,t)}function S(e,t){var n=r(e,t),i=e.processRef;i&&m(i,n||t)}return{handleDeferred:h,handleDefinitions:function(e,t){var n=e.diagrams;if(t&&-1===n.indexOf(t))throw new Error(s("diagram not part of bpmn:Definitions"));if(!t&&n&&n.length&&(t=n[0]),!t)throw new Error(s("no diagram to display"));f(t);var i=t.plane;if(!i)throw new Error(s("no plane for {element}",{element:zn(t)}));var r=i.bpmnElement;if(!r){if(!(r=function(e){return T(e.rootElements,function(e){return Wn(e,"bpmn:Process")||Wn(e,"bpmn:Collaboration")})}(e)))throw new Error(s("no process or collaboration to display"));p(s("correcting missing bpmnElement on {plane} to {rootElement}",{plane:zn(i),rootElement:zn(r)})),i.bpmnElement=r,d(i)}var o=function(e,t){return a.root(e,t)}(r,i);if(Wn(r,"bpmn:Process"))m(r,o);else{if(!Wn(r,"bpmn:Collaboration"))throw new Error(s("unsupported bpmnElement for {plane}: {rootElement}",{plane:zn(i),rootElement:zn(r)}));!function(e){I(e.participants,u(S)),b(e.artifacts),l.push(function(){!function(e,t){I(e,u(v,t))}(e.messageFlows)})}(r),function(e){A(e,function(e){return!function(e){return c[e.id]}(e)&&Wn(e,"bpmn:Process")&&e.laneSets}).forEach(u(m))}(e.rootElements)}h()},handleSubProcess:w,registerDi:d}}function Yn(e,t){var n=Kn(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function Kn(e){return e&&e.businessObject||e}function Xn(e){return!Yn(e,"bpmn:CallActivity")&&(Yn(e,"bpmn:SubProcess")?!!Kn(e).di.isExpanded:!Yn(e,"bpmn:Participant")||!!Kn(e).processRef)}function Jn(t,n,i){return function(e,t){return!!T(e,t)}(t.eventDefinitions,function(e){return e.$type===n&&function(n,e){return d(e,function(e,t){return n[t]==e})}(t,i)})}function Qn(e){return e.businessObject.di}function Zn(e){return e.businessObject}function ei(e,t){return Qn(e).get("bioc:fill")||t||"white"}function ti(e,t){return Qn(e).get("bioc:stroke")||t||"black"}var ni=i(function(e){var c=e.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;var r=n-Math.floor(n),o="";for(i=0;i<Math.floor(n);i++){o=Math.floor(Math.random()*t).toString(t)+o}if(r){var a=Math.pow(t,r);o=Math.floor(Math.random()*a).toString(t)+o}var s=parseInt(o,t);return s!==1/0&&s>=Math.pow(2,e)?c(e,t):o};c.rack=function(i,r,o){function n(e){var t=0;do{if(10<t++){if(!o)throw new Error("too many ID collisions, use more bits");i+=o}var n=c(i,r)}while(Object.hasOwnProperty.call(a,n));return a[n]=e,n}var a=n.hats={};return n.get=function(e){return n.hats[e]},n.set=function(e,t){return n.hats[e]=t,n},n.bits=i||128,n.base=r||16,n}});function ii(e){if(!(this instanceof ii))return new ii(e);e=e||[128,36,1],this._seed=e.length?ni.rack(e[0],e[1],e[2]):e}var ri=ii;ii.prototype.next=function(e){return this._seed(e||!0)},ii.prototype.nextPrefixed=function(e,t){for(var n;n=e+this.next(!0),this.assigned(n););return this.claim(n,t),n},ii.prototype.claim=function(e,t){this._seed.set(e,t||!0)},ii.prototype.assigned=function(e){return this._seed.get(e)||!1},ii.prototype.unclaim=function(e){delete this._seed.hats[e]},ii.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)};var oi=new ri;function ai(e,t,r,u,s,o,n){Le.call(this,t,n);var p=e&&e.defaultFillColor,d=e&&e.defaultStrokeColor,f=oi.next(),c={},l=r.computeStyle;function h(e,t){var n=D({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},r=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var o=fe("marker");ne(t.element,n),Q(o,t.element),ne(o,{id:e,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*r,markerHeight:20*r,orient:"auto"});var a=K("defs",s._svg);a||(a=fe("defs"),Q(s._svg,a)),Q(a,o),c[e]=o}function m(e,t,n){var i=e+"-"+t+"-"+n+"-"+f;return c[i]||function(e,t,n){var i=e+"-"+t+"-"+n+"-"+f;if("sequenceflow-end"===e){var r=fe("path");ne(r,{d:"M 1 5 L 11 10 L 1 15 Z"}),h(i,{element:r,ref:{x:11,y:10},scale:.5,attrs:{fill:n,stroke:n}})}if("messageflow-start"===e){var o=fe("circle");ne(o,{cx:6,cy:6,r:3.5}),h(i,{element:o,attrs:{fill:t,stroke:n},ref:{x:6,y:6}})}if("messageflow-end"===e){var a=fe("path");ne(a,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),h(i,{element:a,attrs:{fill:t,stroke:n,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===e){var s=fe("path");ne(s,{d:"M 11 5 L 1 10 L 11 15"}),h(i,{element:s,attrs:{fill:"none",stroke:n,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===e){var c=fe("path");ne(c,{d:"M 1 5 L 11 10 L 1 15"}),h(i,{element:c,attrs:{fill:"none",stroke:n,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===e){var l=fe("path");ne(l,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),h(i,{element:l,attrs:{fill:t,stroke:n},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===e){var u=fe("path");ne(u,{d:"M 6 4 L 10 16"}),h(i,{element:u,attrs:{stroke:n},ref:{x:0,y:10},scale:.5})}}(e,t,n),"url(#"+i+")"}function v(e,t,n,i,r){O(i)&&(r=i,i=0),i=i||0,"none"===(r=l(r,{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete r.fillOpacity;var o=t/2,a=n/2,s=fe("circle");return ne(s,{cx:o,cy:a,r:Math.round((t+n)/4-i)}),ne(s,r),Q(e,s),s}function g(e,t,n,i,r,o){O(r)&&(o=r,r=0),r=r||0,o=l(o,{stroke:"black",strokeWidth:2,fill:"white"});var a=fe("rect");return ne(a,{x:r,y:r,width:t-2*r,height:n-2*r,rx:i,ry:i}),ne(a,o),Q(e,a),a}function a(e,t,n){var i=Fe(t,n=l(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}));return Q(e,i),i}function y(e,t,n){n=l(n,["no-fill"],{strokeWidth:2,stroke:"black"});var i=fe("path");return ne(i,{d:t}),ne(i,n),Q(e,i),i}function i(e,t,n,i){return y(t,n,D({"data-marker":e},i))}function b(n){return function(e,t){return S[n](e,t)}}function _(e){return S[e]}function w(e,t){var n=Zn(e),i=function(e){return"bpmn:IntermediateThrowEvent"===e.$type||"bpmn:EndEvent"===e.$type}(n);return Jn(n,"bpmn:MessageEventDefinition")?_("bpmn:MessageEventDefinition")(t,e,i):Jn(n,"bpmn:TimerEventDefinition")?_("bpmn:TimerEventDefinition")(t,e,i):Jn(n,"bpmn:ConditionalEventDefinition")?_("bpmn:ConditionalEventDefinition")(t,e):Jn(n,"bpmn:SignalEventDefinition")?_("bpmn:SignalEventDefinition")(t,e,i):Jn(n,"bpmn:CancelEventDefinition")&&Jn(n,"bpmn:TerminateEventDefinition",{parallelMultiple:!1})?_("bpmn:MultipleEventDefinition")(t,e,i):Jn(n,"bpmn:CancelEventDefinition")&&Jn(n,"bpmn:TerminateEventDefinition",{parallelMultiple:!0})?_("bpmn:ParallelMultipleEventDefinition")(t,e,i):Jn(n,"bpmn:EscalationEventDefinition")?_("bpmn:EscalationEventDefinition")(t,e,i):Jn(n,"bpmn:LinkEventDefinition")?_("bpmn:LinkEventDefinition")(t,e,i):Jn(n,"bpmn:ErrorEventDefinition")?_("bpmn:ErrorEventDefinition")(t,e,i):Jn(n,"bpmn:CancelEventDefinition")?_("bpmn:CancelEventDefinition")(t,e,i):Jn(n,"bpmn:CompensateEventDefinition")?_("bpmn:CompensateEventDefinition")(t,e,i):Jn(n,"bpmn:TerminateEventDefinition")?_("bpmn:TerminateEventDefinition")(t,e,i):null}function x(e,t,n){n=D({size:{width:100}},n);var i=o.createText(t||"",n);return se(i).add("djs-label"),Q(e,i),i}function E(e,t,n){return x(e,Zn(t).name,{box:t,align:n,padding:5,style:{fill:ti(t,d)}})}function C(e,t,n){!function(e,t,n,i,r){var o=ve();o.setTranslate(t,n);var a=ve();a.setRotate(i,0,0);var s=ve();s.setScale(r||1,r||1),Ce(e,[o,a,s])}(x(e,t,{box:{height:30,width:n.height},align:"center-middle",style:{fill:ti(n,d)}}),0,-(-1*n.height),270)}function k(e){for(var t=e.waypoints,n="m  "+t[0].x+","+t[0].y,i=1;i<t.length;i++)n+="L"+t[i].x+","+t[i].y+" ";return n}var S=this.handlers={"bpmn:Event":function(e,t,n){return"fillOpacity"in n||(n.fillOpacity=.95),v(e,t.width,t.height,n)},"bpmn:StartEvent":function(e,t){var n={fill:ei(t,p),stroke:ti(t,d)};Zn(t).isInterrupting||(n={strokeDasharray:"6",strokeLinecap:"round",fill:ei(t,p),stroke:ti(t,d)});var i=_("bpmn:Event")(e,t,n);return w(t,e),i},"bpmn:MessageEventDefinition":function(e,t,n){return y(e,u.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:n?ti(t,d):ei(t,p),stroke:n?ei(t,p):ti(t,d)})},"bpmn:TimerEventDefinition":function(e,t){var n=v(e,t.width,t.height,.2*t.height,{strokeWidth:2,fill:ei(t,p),stroke:ti(t,d)});y(e,u.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:ti(t,d)});for(var i=0;i<12;i++){var r=u.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),o=t.width/2;y(e,r,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*i+","+t.height/2+","+o+")",stroke:ti(t,d)})}return n},"bpmn:EscalationEventDefinition":function(e,t,n){return y(e,u.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?ti(t,d):"none",stroke:ti(t,d)})},"bpmn:ConditionalEventDefinition":function(e,t){return y(e,u.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:ti(t,d)})},"bpmn:LinkEventDefinition":function(e,t,n){return y(e,u.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:n?ti(t,d):"none",stroke:ti(t,d)})},"bpmn:ErrorEventDefinition":function(e,t,n){return y(e,u.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:n?ti(t,d):"none",stroke:ti(t,d)})},"bpmn:CancelEventDefinition":function(e,t,n){var i=y(e,u.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:n?ti(t,d):"none",stroke:ti(t,d)});return function(e,t){var n=ve();n.setRotate(t,0,0),Ce(e,n)}(i,45),i},"bpmn:CompensateEventDefinition":function(e,t,n){return y(e,u.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:n?ti(t,d):"none",stroke:ti(t,d)})},"bpmn:SignalEventDefinition":function(e,t,n){return y(e,u.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?ti(t,d):"none",stroke:ti(t,d)})},"bpmn:MultipleEventDefinition":function(e,t,n){return y(e,u.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:n?ti(t,d):"none"})},"bpmn:ParallelMultipleEventDefinition":function(e,t){return y(e,u.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:ti(t,d),stroke:ti(t,d)})},"bpmn:EndEvent":function(e,t){var n=_("bpmn:Event")(e,t,{strokeWidth:4,fill:ei(t,p),stroke:ti(t,d)});return w(t,e),n},"bpmn:TerminateEventDefinition":function(e,t){return v(e,t.width,t.height,8,{strokeWidth:4,fill:ti(t,d),stroke:ti(t,d)})},"bpmn:IntermediateEvent":function(e,t){var n=_("bpmn:Event")(e,t,{strokeWidth:1,fill:ei(t,p),stroke:ti(t,d)});return v(e,t.width,t.height,3,{strokeWidth:1,fill:ei(t,"none"),stroke:ti(t,d)}),w(t,e),n},"bpmn:IntermediateCatchEvent":b("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":b("bpmn:IntermediateEvent"),"bpmn:Activity":function(e,t,n){return"fillOpacity"in(n=n||{})||(n.fillOpacity=.95),g(e,t.width,t.height,10,n)},"bpmn:Task":function(e,t){var n={fill:ei(t,p),stroke:ti(t,d)},i=_("bpmn:Activity")(e,t,n);return E(e,t,"center-middle"),T(e,t),i},"bpmn:ServiceTask":function(e,t){var n=_("bpmn:Task")(e,t);return y(e,u.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:ei(t,p),stroke:ti(t,d)}),y(e,u.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:ei(t,p)}),y(e,u.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:ei(t,p),stroke:ti(t,d)}),n},"bpmn:UserTask":function(e,t){var n=_("bpmn:Task")(e,t);return y(e,u.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:ei(t,p),stroke:ti(t,d)}),y(e,u.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:ei(t,p),stroke:ti(t,d)}),y(e,u.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:ti(t,d),stroke:ti(t,d)}),n},"bpmn:ManualTask":function(e,t){var n=_("bpmn:Task")(e,t);return y(e,u.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:ei(t,p),stroke:ti(t,d)}),n},"bpmn:SendTask":function(e,t){var n=_("bpmn:Task")(e,t);return y(e,u.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:ti(t,d),stroke:ei(t,p)}),n},"bpmn:ReceiveTask":function(e,t){var n=Zn(t),i=_("bpmn:Task")(e,t);return y(e,n.instantiate?(v(e,28,28,4.4,{strokeWidth:1}),u.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):u.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),{strokeWidth:1,fill:ei(t,p),stroke:ti(t,d)}),i},"bpmn:ScriptTask":function(e,t){var n=_("bpmn:Task")(e,t);return y(e,u.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:ti(t,d)}),n},"bpmn:BusinessRuleTask":function(e,t){var n=_("bpmn:Task")(e,t);return ne(y(e,u.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{strokeWidth:1,fill:ei(t,"#aaaaaa"),stroke:ti(t,d)}),ne(y(e,u.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{strokeWidth:1,stroke:ti(t,d)}),n},"bpmn:SubProcess":function(e,t,n){n=D({fill:ei(t,p),stroke:ti(t,d)},n);var i=_("bpmn:Activity")(e,t,n),r=Xn(t);return function(e){return e&&!!Kn(e).triggeredByEvent}(t)&&ne(i,{strokeDasharray:"1,2"}),E(e,t,r?"center-top":"center-middle"),r?T(e,t):T(e,t,["SubProcessMarker"]),i},"bpmn:AdHocSubProcess":function(e,t){return _("bpmn:SubProcess")(e,t)},"bpmn:Transaction":function(e,t){var n=_("bpmn:SubProcess")(e,t),i=r.style(["no-fill","no-events"],{stroke:ti(t,d)});return g(e,t.width,t.height,8,3,i),n},"bpmn:CallActivity":function(e,t){return _("bpmn:SubProcess")(e,t,{strokeWidth:5})},"bpmn:Participant":function(e,t){var n={fillOpacity:.95,fill:ei(t,p),stroke:ti(t,d)},i=_("bpmn:Lane")(e,t,n);Xn(t)?(a(e,[{x:30,y:0},{x:30,y:t.height}],{stroke:ti(t,d)}),C(e,Zn(t).name,t)):x(e,Zn(t).name,{box:t,align:"center-middle",style:{fill:ti(t,d)}});return!!Zn(t).participantMultiplicity&&_("ParticipantMultiplicityMarker")(e,t),i},"bpmn:Lane":function(e,t,n){var i=g(e,t.width,t.height,0,D({fill:ei(t,p),fillOpacity:.35,stroke:ti(t,d)},n)),r=Zn(t);"bpmn:Lane"===r.$type&&C(e,r.name,t);return i},"bpmn:InclusiveGateway":function(e,t){var n=_("bpmn:Gateway")(e,t);return v(e,t.width,t.height,.24*t.height,{strokeWidth:2.5,fill:ei(t,p),stroke:ti(t,d)}),n},"bpmn:ExclusiveGateway":function(e,t){var n=_("bpmn:Gateway")(e,t),i=u.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return Qn(t).isMarkerVisible&&y(e,i,{strokeWidth:1,fill:ti(t,d),stroke:ti(t,d)}),n},"bpmn:ComplexGateway":function(e,t){var n=_("bpmn:Gateway")(e,t);return y(e,u.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:ti(t,d),stroke:ti(t,d)}),n},"bpmn:ParallelGateway":function(e,t){var n=_("bpmn:Gateway")(e,t);return y(e,u.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:ti(t,d),stroke:ti(t,d)}),n},"bpmn:EventBasedGateway":function(e,t){var n=Zn(t),i=_("bpmn:Gateway")(e,t);v(e,t.width,t.height,.2*t.height,{strokeWidth:1,fill:"none",stroke:ti(t,d)});var r,o,a=n.eventGatewayType,s=!!n.instantiate;if("Parallel"===a){var c=u.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}});ne(y(e,c),{strokeWidth:1,fill:"none"})}else if("Exclusive"===a){if(!s)ne(v(e,t.width,t.height,.26*t.height),{strokeWidth:1,fill:"none",stroke:ti(t,d)});r=u.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}}),o={strokeWidth:2,fill:ei(t,"none"),stroke:ti(t,d)},y(e,r,o)}return i},"bpmn:Gateway":function(e,t){var n={fill:ei(t,p),fillOpacity:.95,stroke:ti(t,d)};return function(e,t,n,i){var r=t/2,o=n/2,a=[{x:r,y:0},{x:t,y:o},{x:r,y:n},{x:0,y:o}].map(function(e){return e.x+","+e.y}).join(" ");i=l(i,{stroke:"black",strokeWidth:2,fill:"white"});var s=fe("polygon");return ne(s,{points:a}),ne(s,i),Q(e,s),s}(e,t.width,t.height,n)},"bpmn:SequenceFlow":function(e,t){var n,i=k(t),r=ei(t,p),o=ti(t,d),a=y(e,i,{strokeLinejoin:"round",markerEnd:m("sequenceflow-end",r,o),stroke:ti(t,d)}),s=Zn(t);return t.source&&(n=t.source.businessObject,s.conditionExpression&&n.$instanceOf("bpmn:Activity")&&ne(a,{markerStart:m("conditional-flow-marker",r,o)}),n.default&&(n.$instanceOf("bpmn:Gateway")||n.$instanceOf("bpmn:Activity"))&&n.default===s&&ne(a,{markerStart:m("conditional-default-flow-marker",r,o)})),a},"bpmn:Association":function(e,t,n){var i=Zn(t),r=ei(t,p),o=ti(t,d);return n=D({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:ti(t,d)},n||{}),"One"!==i.associationDirection&&"Both"!==i.associationDirection||(n.markerEnd=m("association-end",r,o)),"Both"===i.associationDirection&&(n.markerStart=m("association-start",r,o)),a(e,t.waypoints,n)},"bpmn:DataInputAssociation":function(e,t){var n=ei(t,p),i=ti(t,d);return _("bpmn:Association")(e,t,{markerEnd:m("association-end",n,i)})},"bpmn:DataOutputAssociation":function(e,t){var n=ei(t,p),i=ti(t,d);return _("bpmn:Association")(e,t,{markerEnd:m("association-end",n,i)})},"bpmn:MessageFlow":function(e,t){var n=Zn(t),i=Qn(t),r=ei(t,p),o=ti(t,d),a=y(e,k(t),{markerEnd:m("messageflow-end",r,o),markerStart:m("messageflow-start",r,o),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:ti(t,d)});if(n.messageRef){var s=a.getPointAtLength(a.getTotalLength()/2),c=u.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:s.x,y:s.y}}),l={strokeWidth:1};"initiating"===i.messageVisibleKind?(l.fill="white",l.stroke="black"):(l.fill="#888",l.stroke="white"),y(e,c,l)}return a},"bpmn:DataObject":function(e,t){var n=y(e,u.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:ei(t,p),fillOpacity:.95,stroke:ti(t,d)});return function(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}(Zn(t))&&function(e,t){var n=(t.height-16)/t.height,i=u.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.451,my:n}});y(e,i,{strokeWidth:2})}(e,t),n},"bpmn:DataObjectReference":b("bpmn:DataObject"),"bpmn:DataInput":function(e,t){var n=u.getRawPath("DATA_ARROW"),i=_("bpmn:DataObject")(e,t);return y(e,n,{strokeWidth:1}),i},"bpmn:DataOutput":function(e,t){var n=u.getRawPath("DATA_ARROW"),i=_("bpmn:DataObject")(e,t);return y(e,n,{strokeWidth:1,fill:"black"}),i},"bpmn:DataStoreReference":function(e,t){return y(e,u.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:ei(t,p),fillOpacity:.95,stroke:ti(t,d)})},"bpmn:BoundaryEvent":function(e,t){var n=Zn(t).cancelActivity,i={strokeWidth:1,fill:ei(t,p),stroke:ti(t,d)};n||(i.strokeDasharray="6",i.strokeLinecap="round");var r=D({},i,{fillOpacity:1}),o=D({},i,{fill:"none"}),a=_("bpmn:Event")(e,t,r);return v(e,t.width,t.height,3,o),w(t,e),a},"bpmn:Group":function(e,t){var n=Zn(t),i=Qn(t),r=g(e,t.width,t.height,10,{strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"}),o=n.categoryValueRef||{};if(o.value){var a=i.label?i.label.bounds:t;x(e,o.value,{box:a,style:{fill:ti(t,d)}})}return r},label:function(e,t){return function(e,t){var n=Zn(t),i={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return x(e,n.name,{box:i,fitBox:!0,style:D({},o.getExternalStyle(),{fill:ti(t,d)})})}(e,t)},"bpmn:TextAnnotation":function(e,t){var n=g(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return y(e,u.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:ti(t,d)}),x(e,Zn(t).text||"",{box:t,align:"left-top",padding:5,style:{fill:ti(t,d)}}),n},ParticipantMultiplicityMarker:function(e,t){i("participant-multiplicity",e,u.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:t.width/2/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:ei(t,p),stroke:ti(t,d)})},SubProcessMarker:function(e,t){_t(g(e,14,14,0,{strokeWidth:1,fill:ei(t,p),stroke:ti(t,d)}),t.width/2-7.5,t.height-20),i("sub-process",e,u.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}}),{fill:ei(t,p),stroke:ti(t,d)})},ParallelMarker:function(e,t,n){i("parallel",e,u.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.parallel)/t.width,my:(t.height-20)/t.height}}),{fill:ei(t,p),stroke:ti(t,d)})},SequentialMarker:function(e,t,n){i("sequential",e,u.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}}),{fill:ei(t,p),stroke:ti(t,d)})},CompensationMarker:function(e,t,n){i("compensation",e,u.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}}),{strokeWidth:1,fill:ei(t,p),stroke:ti(t,d)})},LoopMarker:function(e,t,n){i("loop",e,u.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.loop)/t.width,my:(t.height-7)/t.height}}),{strokeWidth:1,fill:ei(t,p),stroke:ti(t,d),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){i("adhoc",e,u.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.adhoc)/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:ti(t,d),stroke:ti(t,d)})}};function T(t,n,e){var i,r=Zn(n),o=e&&-1!==e.indexOf("SubProcessMarker");i=o?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},I(e,function(e){_(e)(t,n,i)}),r.isForCompensation&&_("CompensationMarker")(t,n,i),"bpmn:AdHocSubProcess"===r.$type&&_("AdhocMarker")(t,n,i);var a=r.loopCharacteristics,s=a&&a.isSequential;a&&(void 0===s&&_("LoopMarker")(t,n,i),!1===s&&_("ParallelMarker")(t,n,i),!0===s&&_("SequentialMarker")(t,n,i))}this._drawPath=y}r(ai,Le),ai.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],ai.prototype.canRender=function(e){return Yn(e,"bpmn:BaseElement")},ai.prototype.drawShape=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},ai.prototype.drawConnection=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},ai.prototype.getShapePath=function(e){return Yn(e,"bpmn:Event")?function(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2;return Be([["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]])}(e):Yn(e,"bpmn:Activity")?function(e,t){var n=e.x,i=e.y,r=e.width,o=e.height;return Be([["M",n+t,i],["l",r-2*t,0],["a",t,t,0,0,1,t,t],["l",0,o-2*t],["a",t,t,0,0,1,-t,t],["l",2*t-r,0],["a",t,t,0,0,1,-t,-t],["l",0,2*t-o],["a",t,t,0,0,1,t,-t],["z"]])}(e,10):Yn(e,"bpmn:Gateway")?function(e){var t=e.width/2,n=e.height/2;return Be([["M",e.x+t,e.y],["l",t,n],["l",-t,n],["l",-t,-n],["z"]])}(e):function(e){var t=e.x,n=e.y,i=e.width;return Be([["M",t,n],["l",i,0],["l",0,e.height],["l",-i,0],["z"]])}(e)};var si=0,ci={width:150,height:50};function li(e,t){var n;t.textContent=e;try{var i,r=""===e;return t.textContent=r?"dummy":e,i={width:(n=t.getBBox()).width+2*n.x,height:n.height},r&&(i.width=0),i}catch(e){return{width:0,height:0}}}function ui(e,t,n){for(var i,r=e.shift(),o=r;;){if((i=li(o,n)).width=o?i.width:0," "===o||""===o||i.width<Math.round(t)||o.length<2)return pi(e,o,r,i);o=di(o,i.width,t)}}function pi(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}function di(e,t,n){var i=Math.max(e.length*(n/t),1),r=function(e,t){var n,i=e.split(/(\s|-)/g),r=[],o=0;if(1<i.length)for(;n=i.shift();){if(!(n.length+o<t)){"-"===n&&r.pop();break}r.push(n),o+=n.length}return r.join("")}(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function fi(e){this._config=D({},{size:ci,padding:si,style:{},align:"center-top"},e||{})}fi.prototype.createText=function(e,t){return this.layoutText(e,t).element},fi.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},fi.prototype.layoutText=function(e,t){var n=D({},this._config.size,t.box),i=D({},this._config.style,t.style),r=function(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}(t.align||this._config.align),o=function(e){return O(e)?D({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}(void 0!==t.padding?t.padding:this._config.padding),a=t.fitBox||!1,s=function(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}(i),c=e.split(/\r?\n/g),l=[],u=n.width-o.left-o.right,p=fe("text");for(ne(p,{x:0,y:0}),ne(p,i),Q(function(){var e=document.getElementById("helper-svg");return e||(ne(e=fe("svg"),{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(e)),e}(),p);c.length;)l.push(ui(c,u,p));"middle"===r.vertical&&(o.top=o.bottom=0);var d=v(l,function(e,t,n){return e+(s||t.height)},0)+o.top+o.bottom,f=v(l,function(e,t,n){return t.width>e?t.width:e},0),h=o.top;"middle"===r.vertical&&(h+=(n.height-d)/2),h-=(s||l[0].height)/4;var m=fe("text");return ne(m,i),I(l,function(e){var t;switch(h+=s||e.height,r.horizontal){case"left":t=o.left;break;case"right":t=(a?f:u)-o.right-e.width;break;default:t=Math.max(((a?f:u)-e.width)/2+o.left,0)}var n=fe("tspan");ne(n,{x:t,y:h}),n.textContent=e.text,Q(m,n)}),le(p),{dimensions:{width:f,height:d},element:m}};function hi(e){var i=D({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},e&&e.defaultStyle||{}),t=parseInt(i.fontSize,10)-1,r=D({},i,{fontSize:t},e&&e.externalStyle||{}),o=new fi({style:i});this.getExternalLabelBounds=function(e,t){var n=o.getDimensions(t,{box:{width:90,height:30,x:e.width/2+e.x,y:e.height/2+e.y},style:r});return{x:Math.round(e.x+e.width/2-n.width/2),y:Math.round(e.y),width:Math.ceil(n.width),height:Math.ceil(n.height)}},this.getTextAnnotationBounds=function(e,t){var n=o.getDimensions(t,{box:e,style:i,align:"left-top",padding:5});return{x:e.x,y:e.y,width:e.width,height:Math.max(30,Math.round(n.height))}},this.createText=function(e,t){return o.createText(e,t||{})},this.getDefaultStyle=function(){return i},this.getExternalStyle=function(){return r}}hi.$inject=["config.textRenderer"];var mi=/\{([^}]+)\}/g,vi=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;var gi={__init__:["bpmnRenderer"],bpmnRenderer:["type",ai],textRenderer:["type",hi],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m {mx}, {my} m  0 15  l 0 -15 m  4 15  l 0 -15 m  4 15  l 0 -15 ",height:61,width:51,heightElements:[12],widthElements:[1,6,12,15]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,r=this.pathMap[e];i=t.abspos?(n=t.abspos.x,t.abspos.y):(n=t.containerWidth*t.position.mx,t.containerHeight*t.position.my);var o={};if(t.position){for(var a=t.containerHeight/r.height*t.yScaleFactor,s=t.containerWidth/r.width*t.xScaleFactor,c=0;c<r.heightElements.length;c++)o["y"+c]=r.heightElements[c]*a;for(var l=0;l<r.widthElements.length;l++)o["x"+l]=r.widthElements[l]*s}return function(e,n){return String(e).replace(mi,function(e,t){return function(e,t,n){var o=n;return t.replace(vi,function(e,t,n,i,r){t=t||i,o&&(t in o&&(o=o[t]),"function"==typeof o&&r&&(o=o()))}),o=(null==o||o==n?e:o)+""}(e,t,n)})}(r.d,{mx:n,my:i,e:o})}}]};var yi={translate:["value",function(e,n){return n=n||{},e.replace(/{([^}]+)}/g,function(e,t){return n[t]||"{"+t+"}"})}]},bi={width:90,height:20},_i=15;function wi(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(.01+t)],r=function(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(.01+t)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,s=r.y;return Math.abs(o)<Math.PI/2?s-=_i:a+=_i,{x:a,y:s}}function xi(e,t){var n,i,r,o=e.di.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(bi.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=function(e){return e.waypoints?wi(e.waypoints):{x:e.x+e.width/2,y:e.y+e.height+bi.height/2}}(t),i=bi),D({x:n.x-i.width/2,y:n.y-i.height/2},i)}Math.PI;function Ei(e){return function(e){return{x:Math.round(e.x),y:Math.round(e.y)}}({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function Ci(e,t){return D({id:e.id,type:e.$type,businessObject:e},t)}function ki(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:zn(n),referenced:zn(t),property:i}))}function Si(e,t,n,i,r,o){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=o}Si.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],Si.prototype.add=function(e,t){var n,i,r,o=e.di,a=this._translate;if(Yn(o,"bpmndi:BPMNPlane"))n=this._elementFactory.createRoot(Ci(e)),this._canvas.setRootElement(n);else if(Yn(o,"bpmndi:BPMNShape")){var s=!Xn(e);i=t&&(t.hidden||t.collapsed);var c=e.di.bounds;n=this._elementFactory.createShape(Ci(e,{collapsed:s,hidden:i,x:Math.round(c.x),y:Math.round(c.y),width:Math.round(c.width),height:Math.round(c.height)})),Yn(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,n),Yn(e,"bpmn:Lane")&&(r=0),Yn(e,"bpmn:DataStoreReference")&&(function(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}(t,Ei(c))||(t=this._canvas.getRootElement())),this._canvas.addShape(n,t,r)}else{if(!Yn(o,"bpmndi:BPMNEdge"))throw new Error(a("unknown di {di} for element {semantic}",{di:zn(o),semantic:zn(e)}));var l=this._getSource(e),u=this._getTarget(e);i=t&&(t.hidden||t.collapsed),n=this._elementFactory.createConnection(Ci(e,{hidden:i,source:l,target:u,waypoints:function(e){return f(e,function(e){return{x:e.x,y:e.y}})}(e.di.waypoint)})),Yn(e,"bpmn:DataAssociation")&&(t=null),Yn(e,"bpmn:SequenceFlow")&&(r=0),this._canvas.addConnection(n,t,r)}return function(e){return Yn(e,"bpmn:Event")||Yn(e,"bpmn:Gateway")||Yn(e,"bpmn:DataStoreReference")||Yn(e,"bpmn:DataObjectReference")||Yn(e,"bpmn:SequenceFlow")||Yn(e,"bpmn:MessageFlow")}(e)&&e.name&&this.addLabel(e,n),this._eventBus.fire("bpmnElement.added",{element:n}),n},Si.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:zn(e)}));var r=this._elementRegistry.get(i.id),o=r&&r.attachers;if(!r)throw ki(n,e,i,"attachedToRef");t.host=r,o||(r.attachers=o=[]),-1===o.indexOf(t)&&o.push(t)},Si.prototype.addLabel=function(e,t){var n,i,r;return n=xi(e,t),(i=e.name)&&(n=this._textRenderer.getExternalLabelBounds(n,i)),r=this._elementFactory.createLabel(Ci(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden||!e.name,x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)})),this._canvas.addShape(r,t.parent)},Si.prototype._getEnd=function(e,t){var n,i,r=e.$type,o=this._translate;if(i=e[t+"Ref"],"source"===t&&"bpmn:DataInputAssociation"===r&&(i=i&&i[0]),("source"===t&&"bpmn:DataOutputAssociation"===r||"target"===t&&"bpmn:DataInputAssociation"===r)&&(i=e.$parent),n=i&&this._getElement(i))return n;throw i?ki(o,e,i,t+"Ref"):new Error(o("{semantic}#{side} Ref not specified",{semantic:zn(e),side:t}))},Si.prototype._getSource=function(e){return this._getEnd(e,"source")},Si.prototype._getTarget=function(e){return this._getEnd(e,"target")},Si.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};var Ti={__depends__:[gi,{__depends__:[yi],bpmnImporter:["type",Si]}]};function Oi(e){return e.originalEvent||e.srcEvent}function Ai(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Ii(e){return!(Oi(e)||e).button}function Di(e){var t=Oi(e)||e;return!!Ii(e)&&(/mac/i.test(navigator.platform)?t.metaKey:t.ctrlKey)}function Pi(e){return!0}function Ri(o,a,e){var r=e.cls("djs-hit",["no-fill","no-border"],{stroke:"white",strokeWidth:15});function s(e,t,n){var i,r;!function(e,t){return!(p[e]||Ii)(t)}(e,t)&&(n?r=a.getGraphics(n):(i=t.delegateTarget||t.target)&&(r=i,n=a.get(r)),r&&n&&!1===o.fire(e,{element:n,gfx:r,originalEvent:t})&&(t.stopPropagation(),t.preventDefault()))}var c={};function l(e){return c[e]}var u={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup",contextmenu:"element.contextmenu"},p={"element.contextmenu":Pi};var d="svg, .djs-element";function i(e,t,n,i){var r=c[n]=function(e){s(n,e)};i&&(p[n]=i),r.$delegate=U.bind(e,d,t,r)}function f(e,t,n){var i=l(n);i&&U.unbind(e,t,i.$delegate)}o.on("canvas.destroy",function(e){!function(n){I(u,function(e,t){f(n,t,e)})}(e.svg)}),o.on("canvas.init",function(e){!function(n){I(u,function(e,t){i(n,t,e)})}(e.svg)}),o.on(["shape.added","connection.added"],function(e){var t,n=e.element,i=e.gfx;n.waypoints?t=Fe(n.waypoints):ne(t=fe("rect"),{x:0,y:0,width:n.width,height:n.height}),ne(t,r),Q(i,t)}),o.on("shape.changed",500,function(e){var t=e.element;ne(K(".djs-hit",e.gfx),{width:t.width,height:t.height})}),o.on("connection.changed",function(e){var t=e.element;!function(e,t){ne(e,{points:Ve(t)})}(K(".djs-hit",e.gfx),t.waypoints)}),this.fire=s,this.triggerMouseEvent=function(e,t,n){var i=u[e];if(!i)throw new Error("unmapped DOM event name <"+e+">");return s(i,t,n)},this.mouseHandler=l,this.registerEvent=i,this.unregisterEvent=f}Ri.$inject=["eventBus","elementRegistry","styles"];var Ni={__init__:["interactionEvents"],interactionEvents:["type",Ri]};function Mi(e,t,n){this.offset=6;var i=t.cls("djs-outline",["no-fill"]),r=this;function o(e,t){var n=fe("rect");return ne(n,D({x:10,y:10,width:100,height:100},i)),Q(e,n),n}e.on(["shape.added","shape.changed"],500,function(e){var t=e.element,n=e.gfx,i=K(".djs-outline",n);i||(i=o(n)),r.updateShapeOutline(i,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,i=K(".djs-outline",n);i||(i=o(n)),r.updateConnectionOutline(i,t)})}Mi.prototype.updateShapeOutline=function(e,t){ne(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},Mi.prototype.updateConnectionOutline=function(e,t){var n=ze(t);ne(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},Mi.$inject=["eventBus","styles","elementRegistry"];var ji={__init__:["outline"],outline:["type",Mi]};function $i(e){this._eventBus=e,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear"],function(e){n.select(null)})}$i.$inject=["eventBus"],$i.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}},$i.prototype.get=function(){return this._selectedElements},$i.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},$i.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();p(e)||(e=e?[e]:[]),t?I(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Li="selected";function Bi(e,n,t,i){function r(e,t){n.addMarker(e,t)}function o(e,t){n.removeMarker(e,t)}this._multiSelectionBox=null,e.on("element.hover",function(e){r(e.element,"hover")}),e.on("element.out",function(e){o(e.element,"hover")}),e.on("selection.changed",function(e){var t=e.oldSelection,n=e.newSelection;I(t,function(e){-1===n.indexOf(e)&&function(e){o(e,Li)}(e)}),I(n,function(e){-1===t.indexOf(e)&&function(e){r(e,Li)}(e)})})}function Vi(e,o,a,i){e.on("create.end",500,function(e){e.context.canExecute&&o.select(e.context.shape)}),e.on("connect.end",500,function(e){e.context.canExecute&&e.context.target&&o.select(e.context.target)}),e.on("shape.move.end",500,function(e){var t=e.previousSelection||[],n=i.get(e.context.shape.id);T(t,function(e){return n.id===e.id})||o.select(n)}),e.on("element.click",function(e){var t=e.element;t===a.getRootElement()&&(t=null);var n=o.isSelected(t),i=1<o.get().length,r=Di(e);if(n&&i)return r?o.deselect(t):o.select(t);n?o.deselect(t):o.select(t,r)})}Bi.$inject=["eventBus","canvas","selection","styles"],Vi.$inject=["eventBus","selection","canvas","elementRegistry"];var Fi={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Ni,ji],selection:["type",$i],selectionVisuals:["type",Bi],selectionBehavior:["type",Vi]};function Ui(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}Ui.prototype.next=function(){return this._prefix+ ++this._counter};var Hi=new Ui("ov");function zi(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=Hi,this._overlayDefaults=D({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=function(e){var t=H('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}(n.getContainer()),this._init()}function qi(e,t,n){D(e.style,{left:t+"px",top:n+"px"})}function Wi(e,t){e.style.display=!1===t?"none":""}function Gi(t,n){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(e){t.style[e+"transform"]=n})}zi.$inject=["config.overlays","eventBus","canvas","elementRegistry"],zi.prototype.get=function(e){if(u(e)&&(e={id:e}),u(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?A(t.overlays,h({type:e.type})):t.overlays.slice():[]}return e.type?A(this._overlays,h({type:e.type})):e.id?this._overlays[e.id]:null},zi.prototype.add=function(e,t,n){if(O(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=D({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},zi.prototype.remove=function(e){var t=this.get(e)||[];p(t)||(t=[t]);var i=this;I(t,function(e){var t=i._getOverlayContainer(e.element,!0);if(e&&(X(e.html),X(e.htmlContainer),delete e.htmlContainer,delete e.element,delete i._overlays[e.id]),t){var n=t.overlays.indexOf(e);-1!==n&&t.overlays.splice(n,1)}})},zi.prototype.show=function(){Wi(this._overlayRoot)},zi.prototype.hide=function(){Wi(this._overlayRoot,!1)},zi.prototype.clear=function(){this._overlays={},this._overlayContainers=[],S(this._overlayRoot)},zi.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=ze(t);i=o.x,r=o.y}qi(n,i,r),function(e,t,n){2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):e.setAttribute(t,n)}(e.html,"data-container-id",t.id)},zi.prototype._updateOverlay=function(e){var t,n,i=e.position,r=e.htmlContainer,o=e.element,a=i.left,s=i.top;void 0!==i.right&&(t=o.waypoints?ze(o).width:o.width,a=-1*i.right+t);void 0!==i.bottom&&(n=o.waypoints?ze(o).height:o.height,s=-1*i.bottom+n);qi(r,a||0,s||0)},zi.prototype._createOverlayContainer=function(e){var t=H('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},zi.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";Gi(this._overlayRoot,n)},zi.prototype._getOverlayContainer=function(t,e){var n=T(this._overlayContainers,function(e){return e.element===t});return n||e?n:this._createOverlayContainer(t)},zi.prototype._addOverlay=function(e){var t,n,i=e.id,r=e.element,o=e.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),u(o)&&(o=H(o)),n=this._getOverlayContainer(r),(t=H('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">')).appendChild(o),e.type&&C(t).add("djs-overlay-"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},zi.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=n&&n.minZoom,r=n&&n.maxZoom,o=e.htmlContainer,a=!0;n&&((c(i)&&i>t.scale||c(r)&&r<t.scale)&&(a=!1),Wi(o,a)),this._updateOverlayScale(e,t)},zi.prototype._updateOverlayScale=function(e,t){var n,i,r,o=e.scale,a=e.htmlContainer,s="";!0!==o&&(i=!1===o?n=1:(n=o.min,o.max),c(n)&&t.scale<n&&(r=(1/t.scale||1)*n),c(i)&&t.scale>i&&(r=(1/t.scale||1)*i)),c(r)&&(s="scale("+r+","+r+")"),Gi(a,s)},zi.prototype._updateOverlaysVisibilty=function(t){var n=this;I(this._overlays,function(e){n._updateOverlayVisibilty(e,t)})},zi.prototype._init=function(){var e=this._eventBus,r=this;e.on("canvas.viewbox.changing",function(e){r.hide()}),e.on("canvas.viewbox.changed",function(e){!function(e){r._updateRoot(e),r._updateOverlaysVisibilty(e),r.show()}(e.viewbox)}),e.on(["shape.remove","connection.remove"],function(e){var t=e.element;I(r.get({element:t}),function(e){r.remove(e.id)});var n=r._getOverlayContainer(t);if(n){X(n.html);var i=r._overlayContainers.indexOf(n);-1!==i&&r._overlayContainers.splice(i,1)}}),e.on("element.changed",500,function(e){var t=e.element,n=r._getOverlayContainer(t,!0);n&&(I(n.overlays,function(e){r._updateOverlay(e)}),r._updateOverlayContainer(n))}),e.on("element.marker.update",function(e){var t=r._getOverlayContainer(e.element,!0);t&&C(t.html)[e.add?"add":"remove"](e.marker)}),e.on("diagram.clear",this.clear,this)};var Yi={__init__:["overlays"],overlays:["type",zi]},Ki='<img width="52" height="52" src="'+("data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960"><path fill="#fff" d="M960 60v839c0 33-27 61-60 61H60c-33 0-60-27-60-60V60C0 27 27 0 60 0h839c34 0 61 27 61 60z"/><path fill="#52b415" d="M217 548a205 205 0 0 0-144 58 202 202 0 0 0-4 286 202 202 0 0 0 285 3 200 200 0 0 0 48-219 203 203 0 0 0-185-128zM752 6a206 206 0 0 0-192 285 206 206 0 0 0 269 111 207 207 0 0 0 111-260A204 204 0 0 0 752 6zM62 0A62 62 0 0 0 0 62v398l60 46a259 259 0 0 1 89-36c5-28 10-57 14-85l99 2 12 85a246 246 0 0 1 88 38l70-52 69 71-52 68c17 30 29 58 35 90l86 14-2 100-86 12a240 240 0 0 1-38 89l43 58h413c37 0 60-27 60-61V407a220 220 0 0 1-44 40l21 85-93 39-45-76a258 258 0 0 1-98 1l-45 76-94-39 22-85a298 298 0 0 1-70-69l-86 22-38-94 76-45a258 258 0 0 1-1-98l-76-45 40-94 85 22a271 271 0 0 1 41-47z"/></svg>'))+'" />';function Xi(e){return e.join(";")}var Ji,Qi='<div class="bjs-powered-by-lightbox" style="'+Xi(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+Xi(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"])+'"></div><div class="notice" style="'+Xi(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"])+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px">'+Ki+'</a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';var Zi={width:"100%",height:"100%",position:"relative"};function er(e){return e+(a(e)?"px":"")}function tr(e){e=D({},Zi,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),function(e){var t=H('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100">'+Ki+"</a>");e.appendChild(t),V.bind(t,"click",function(e){Ji||(Ji=H(Qi),U.bind(Ji,".backdrop","click",function(e){document.body.removeChild(Ji)})),document.body.appendChild(Ji),e.preventDefault()})}(this._container),this._init(this._container,this._moddle,e)}function nr(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function ir(e,t){return-1<(e=p(e)?e:[e]).indexOf(t.key)}function rr(e){return e.shiftKey}r(tr,kt),tr.prototype.importXML=function(e,r){r=r||function(){};var o=this;e=this._emit("import.parse.start",{xml:e})||e,this._moddle.fromXML(e,"bpmn:Definitions",function(e,t,n){t=o._emit("import.parse.complete",{error:e,definitions:t,context:n})||t;var i=n.warnings;if(e)return e=function(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return t&&(e.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+t[2]),e}(e),o._emit("import.done",{error:e,warnings:i}),r(e,i);o.importDefinitions(t,function(e,t){var n=[].concat(i,t||[]);o._emit("import.done",{error:e,warnings:n}),r(e,n)})})},tr.prototype.saveXML=function(e,n){n||(n=e,e={});var i=this,t=this._definitions;if(!t)return n(new Error("no definitions loaded"));t=this._emit("saveXML.start",{definitions:t})||t,this._moddle.toXML(t,e,function(e,t){try{t=i._emit("saveXML.serialized",{error:e,xml:t})||t,i._emit("saveXML.done",{error:e,xml:t})}catch(e){console.error("error in saveXML life-cycle listener",e)}n(e,t)})},tr.prototype.saveSVG=function(e,t){var n,i;t||(t=e,e={}),this._emit("saveSVG.start");try{var r=this.get("canvas"),o=r.getDefaultLayer(),a=K("defs",r._svg),s=Ee(o),c=a?"<defs>"+Ee(a)+"</defs>":"",l=o.getBBox();n='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+l.width+'" height="'+l.height+'" viewBox="'+l.x+" "+l.y+" "+l.width+" "+l.height+'" version="1.1">'+c+s+"</svg>"}catch(e){i=e}this._emit("saveSVG.done",{error:i,svg:n}),t(i,n)},tr.prototype.importDefinitions=function(e,t){try{this._definitions&&this.clear(),this._definitions=e}catch(e){return t(e)}return function(e,t,n){var i,r,o,a,s,c=[];try{i=e.get("bpmnImporter"),r=e.get("eventBus"),o=e.get("translate"),r.fire("import.render.start",{definitions:t}),s=t,new Gn({root:function(e){return i.add(e)},element:function(e,t){return i.add(e,t)},error:function(e,t){c.push({message:e,context:t})}},o).handleDefinitions(s),r.fire("import.render.complete",{error:a,warnings:c})}catch(e){a=e}n(a,c)}(this,e,t)},tr.prototype.getModules=function(){return this._modules},tr.prototype.destroy=function(){kt.prototype.destroy.call(this),X(this._container)},tr.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},tr.prototype.off=function(e,t){this.get("eventBus").off(e,t)},tr.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=K(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},tr.prototype.getDefinitions=function(){return this._definitions},tr.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},tr.prototype._init=function(e,t,n){var i=n.modules||this.getModules(),r=n.additionalModules||[],o=[].concat([{bpmnjs:["value",this],moddle:["value",t]}],i,r),a=D(function(e,n){var i={};return I(Object(e),function(e,t){-1===n.indexOf(t)&&(i[t]=e)}),i}(n,["additionalModules"]),{canvas:D({},n.canvas,{container:e}),modules:o});kt.call(this,a),n&&n.container&&this.attachTo(n.container)},tr.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},tr.prototype._createContainer=function(e){var t=H('<div class="bjs-container"></div>');return D(t.style,{width:er(e.width),height:er(e.height),position:e.position}),t},tr.prototype._createModdle=function(e){return new Hn(D({},this._moddleExtensions,e.moddleExtensions))},tr.prototype._modules=[Ti,yi,Fi,Yi],tr.prototype._moddleExtensions={};var or="keyboard.keydown";function ar(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keyHandler=this._keyHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}ar.$inject=["config.keyboard","eventBus"],ar.prototype._keyHandler=function(e){if(!function(e){return e&&(Y(e,"input, textarea")||"true"===e.contentEditable)}(e.target)){var t={keyEvent:e};this._eventBus.fire(or,t)&&e.preventDefault()}},ar.prototype.bind=function(e){this.unbind(),this._node=e,V.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")},ar.prototype.getBinding=function(){return this._node},ar.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),V.unbind(e,"keydown",this._keyHandler,!0)),this._node=null},ar.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})},ar.prototype.addListener=function(e,t){l(e)&&(t=e,e=1e3),this._eventBus.on(or,e,t)},ar.prototype.hasModifier=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey},ar.prototype.isCmd=nr,ar.prototype.isShift=rr,ar.prototype.isKey=ir;function sr(e,n){var i=this;e.on("editorActions.init",500,function(e){var t=e.editorActions;i.registerBindings(n,t)})}sr.$inject=["eventBus","keyboard"],sr.prototype.registerBindings=function(n,i){function e(e,t){i.isRegistered(e)&&n.addListener(t)}e("undo",function(e){var t=e.keyEvent;if(nr(t)&&!rr(t)&&ir(["z","Z"],t))return i.trigger("undo"),!0}),e("redo",function(e){var t=e.keyEvent;if(nr(t)&&(ir(["y","Y"],t)||ir(["z","Z"],t)&&rr(t)))return i.trigger("redo"),!0}),e("copy",function(e){var t=e.keyEvent;if(nr(t)&&ir(["c","C"],t))return i.trigger("copy"),!0}),e("paste",function(e){var t=e.keyEvent;if(nr(t)&&ir(["v","V"],t))return i.trigger("paste"),!0}),e("stepZoom",function(e){var t=e.keyEvent;if(ir(["+","Add"],t)&&nr(t))return i.trigger("stepZoom",{value:1}),!0}),e("stepZoom",function(e){var t=e.keyEvent;if(ir(["-","Subtract"],t)&&nr(t))return i.trigger("stepZoom",{value:-1}),!0}),e("zoom",function(e){var t=e.keyEvent;if(ir("0",t)&&nr(t))return i.trigger("zoom",{value:1}),!0}),e("removeSelection",function(e){if(ir(["Delete","Del"],e.keyEvent))return i.trigger("removeSelection"),!0})};var cr={__init__:["keyboard","keyboardBindings"],keyboard:["type",ar],keyboardBindings:["type",sr]},lr={moveSpeed:50,moveSpeedAccelerated:200};function ur(e,o,r){var a=this;this._config=D({},lr,e||{}),o.addListener(function(e){var t=e.keyEvent,n=a._config;if(!o.isCmd(t))return;if(o.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],t)){var i,r=o.isShift(t)?n.moveSpeedAccelerated:n.moveSpeed;switch(t.key){case"ArrowLeft":case"Left":i="left";break;case"ArrowUp":case"Up":i="up";break;case"ArrowRight":case"Right":i="right";break;case"ArrowDown":case"Down":i="down"}return a.moveCanvas({speed:r,direction:i}),!0}}),this.moveCanvas=function(e){var t=0,n=0,i=e.speed/Math.min(Math.sqrt(r.viewbox().scale),1);switch(e.direction){case"left":t=i;break;case"up":n=i;break;case"right":t=-i;break;case"down":n=-i}r.scroll({dx:t,dy:n})}}ur.$inject=["config.keyboardMove","keyboard","canvas"];var pr={__depends__:[cr],__init__:["keyboardMove"],keyboardMove:["type",ur]},dr=/^djs-cursor-.*$/;function fr(e){var t=C(document.body);t.removeMatching(dr),e&&t.add("djs-cursor-"+e)}var hr=5e3;function mr(e,t){return{x:e.x-t.x,y:e.y-t.y}}function vr(r,o){var a;function t(e){var t=a.start,n=Ai(e),i=mr(n,t);(!a.dragging&&15<function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}(i)&&(a.dragging=!0,function(e,t){function n(){return!1}t=t||"element.click",e.once(t,hr,n)}(r),fr("grab")),a.dragging)&&(i=mr(n,a.last||a.start),o.scroll({dx:i.x,dy:i.y}),a.last=n);e.preventDefault()}function n(e){V.unbind(document,"mousemove",t),V.unbind(document,"mouseup",n),fr(a=null)}r.on("element.mousedown",500,function(e){return function(e){if(M(e.target,".djs-draggable"))return;if(e.button||e.ctrlKey||e.shiftKey||e.altKey)return;return a={start:Ai(e)},V.bind(document,"mousemove",t),V.bind(document,"mouseup",n),!0}(e.originalEvent)})}vr.$inject=["eventBus","canvas"];var gr={__init__:["moveCanvas"],moveCanvas:["type",vr]};function yr(e){return Math.log(e)/Math.log(10)}function br(e,t){var n=yr(e.min),i=yr(e.max);return(Math.abs(n)+Math.abs(i))/t}var _r=Math.sign||function(e){return 0<=e?1:-1},wr={min:.2,max:4};function xr(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=y(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||.75;var i=this;e.on("canvas.init",function(e){i._init(!1!==t.enabled)})}xr.$inject=["config.zoomScroll","eventBus","canvas"],xr.prototype.scroll=function(e){this._canvas.scroll(e)},xr.prototype.reset=function(){this._canvas.zoom("fit-viewport")},xr.prototype.zoom=function(e,t){var n=br(wr,20);this._totalDelta+=e,.1<Math.abs(this._totalDelta)&&(this._zoom(e,t,n),this._totalDelta=0)},xr.prototype._handleWheel=function(e){if(!M(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var n,i=e.ctrlKey,r=e.shiftKey,o=-1*this._scale;if(o*=i?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,i){var a=t.getBoundingClientRect(),s={x:e.clientX-a.left,y:e.clientY-a.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*_r(e.deltaY)*o,this.zoom(n,s)}else n=r?{dx:o*e.deltaY,dy:0}:{dx:o*e.deltaX,dy:o*e.deltaY},this.scroll(n)}},xr.prototype.stepZoom=function(e,t){var n=br(wr,10);this._zoom(e,t,n)},xr.prototype._zoom=function(e,t,n){var i=this._canvas,r=0<e?1:-1,o=yr(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var s=Math.pow(10,a);i.zoom(function(e,t){return Math.max(e.min,Math.min(e.max,t))}(wr,s),t)},xr.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return void 0===e&&(e=!i),i!==e&&V[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e},xr.prototype._init=function(e){this.toggle(e)};var Er={__init__:["zoomScroll"],zoomScroll:["type",xr]};function Cr(e){tr.call(this,e)}r(Cr,tr),Cr.prototype._modules=[].concat(Cr.prototype._modules,Cr.prototype._navigationModules=[pr,gr,Er]),t.exports=Cr},{}],58:[function(e,n,i){(function(t){!function(e){if("object"==typeof i&&void 0!==n)n.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).CmmnJS=e()}}(function(){var e={};function n(e,t){return function(e,t){return!(!e||"function"!=typeof e.$instanceOf||!e.$instanceOf(t))}(i(e),t)}function i(e){return e&&e.businessObject?e.businessObject:e}function r(e){return n(e=i(e),"cmmn:Stage")&&e.$parent&&n(e.$parent,"cmmn:Case")}function o(e){var t=i(e);return n(e,"cmmn:PlanItemDefinition")||n(e,"cmmn:CaseFileItemDefinition")?t:t&&t.definitionRef}function a(e){var t=o(e);return t&&t.defaultControl}function s(e){return(e=i(e))&&e.itemControl}function t(e,t){var n=s(e),i=a(e);return n&&n[t]?n[t]:i&&i[t]}function c(e){if(n(e=i(e),"cmmn:CaseFileItem"))return["addChild","addReference","create","delete","removeChild","removeReference","replace","update"];if(n(e,"cmmn:PlanItem")||n(e,"cmmn:DiscretionaryItem")){var t=o(e);return n(t,"cmmn:EventListener")||n(t,"cmmn:Milestone")?["create","occur","resume","suspend","terminate"]:["complete","create","disable","enable","exit","fault","manualStart","parentResume","parentSuspend","reactivate","reenable","resume","start","suspend","terminate"]}return r(e)?["close","complete","create","fault","reactivate","suspend","terminate"]:[]}e.is=n,e.getBusinessObject=i,e.isCasePlanModel=r,e.getDefinition=o,e.getDefaultControl=a,e.getItemControl=s,e.isRequired=function(e){return!!t(e,"requiredRule")},e.isRepeatable=function(e){return!!t(e,"repetitionRule")},e.isManualActivation=function(e){return!!t(e,"manualActivationRule")},e.isAutoComplete=function(e){var t=o(e=i(e));return e.autoComplete||t&&t.autoComplete},e.hasPlanningTable=function(e){return(e=i(e)).planningTable||o(e)&&o(e).planningTable},e.getName=function(e){n(e=i(e),"cmmndi:CMMNEdge")&&e.cmmnElementRef&&(e=e.cmmnElementRef);var t=e.name;return t||e.definitionRef&&(t=e.definitionRef.name),t},e.getSentry=function(e){var t=i(e);return n(t,"cmmn:Sentry")?t:t&&t.sentryRef},e.getStandardEvent=function(e){return(e=i(e)).cmmnElementRef&&e.cmmnElementRef.standardEvent},e.getStandardEvents=function(e){return n(e,"cmmndi:CMMNEdge")&&(e=i(e).cmmnElementRef),n(e,"cmmn:OnPart")?n(e.exitCriterionRef,"cmmn:ExitCriterion")?["exit"]:c(e.sourceRef):[]},e.getTransitions=c;var l={};l="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var g={};Object.defineProperty(g,"__esModule",{value:!0});var u=Object.prototype.toString,p=Object.prototype.hasOwnProperty;function d(e){return void 0===e}function f(e){return"[object Array]"===u.call(e)}function h(e){return"[object Object]"===u.call(e)}function m(e){var t=u.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function v(e){if(!f(e))throw new Error("must supply array")}function y(e,t){return p.call(e,t)}function b(e,n){var i;return n=A(n),_(e,function(e,t){if(n(e,t))return i=e,!1}),i}function _(e,t){var n;if(!d(e)){var i=f(e)?D:I;for(var r in e)if(y(e,r)&&!1===t(n=e[r],i(r)))return n}}function w(e,n,i){return _(e,function(e,t){i=n(i,e,t)}),i}function x(e,i){return w(e,function(e,t,n){return e&&i(t,n)},!0)}function E(e,n){var i=[];return _(e,function(e,t){i.push(n(e,t))}),i}function C(e){return e&&Object.keys(e)||[]}function k(e,i){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return i=O(i),_(e,function(e){var t=i(e)||"_",n=r[t];n||(n=r[t]=[]),n.push(e)}),r}function S(t){t=O(t);for(var n={},e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return _(i,function(e){return k(e,t,n)}),E(n,function(e,t){return e[0]})}var T=S;function O(t){return m(t)?t:function(e){return e[t]}}function A(t){return m(t)?t:function(e){return e===t}}function I(e){return e}function D(e){return Number(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}g.flatten=function(e){return Array.prototype.concat.apply([],e)},g.find=b,g.findIndex=function(e,n){n=A(n);var i=f(e)?-1:void 0;return _(e,function(e,t){if(n(e,t))return i=t,!1}),i},g.filter=function(e,n){var i=[];return _(e,function(e,t){n(e,t)&&i.push(e)}),i},g.forEach=_,g.without=function(e,n){return d(e)?[]:(v(e),n=A(n),e.filter(function(e,t){return!n(e,t)}))},g.reduce=w,g.every=x,g.some=function(e,t){return!!b(e,t)},g.map=E,g.keys=C,g.size=function(e){return C(e).length},g.values=function(e){return E(e,function(e){return e})},g.groupBy=k,g.uniqueBy=S,g.unionBy=T,g.sortBy=function(e,o){o=O(o);var a=[];return _(e,function(e,t){for(var n=o(e,t),i={d:n,v:e},r=0;r<a.length;r++)if(n<a[r].d)return void a.splice(r,0,i);a.push(i)}),E(a,function(e){return e.v})},g.matchPattern=function(e){return function(n){return x(e,function(e,t){return n[t]===e})}},g.debounce=function(n,i){var r,o,a,s;function t(){var e=Date.now(),t=s+i-e;if(0<t)return c(t);n.apply(a,o),r=s=o=a=void 0}function c(e){r=setTimeout(t,e)}return function(){s=Date.now();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o=t,a=this,r||c(i)}},g.throttle=function(e,t){var n=!1;return function(){n||(e.apply(void 0,arguments),n=!0,setTimeout(function(){n=!1},t))}},g.bind=function(e,t){return e.bind(t)},g.isUndefined=d,g.isDefined=function(e){return void 0!==e},g.isNil=function(e){return null==e},g.isArray=f,g.isObject=h,g.isNumber=function(e){return"[object Number]"===u.call(e)},g.isFunction=m,g.isString=function(e){return"[object String]"===u.call(e)},g.ensureArray=v,g.has=y,g.assign=function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return P.apply(void 0,[e].concat(n))},g.pick=function(t,e){var n={},i=Object(t);return _(e,function(e){e in i&&(n[e]=t[e])}),n},g.omit=function(e,n){var i={};return _(Object(e),function(e,t){-1===n.indexOf(t)&&(i[t]=e)}),i},g.merge=function i(r){for(var e=arguments.length,t=new Array(1<e?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return t.length&&_(t,function(e){e&&h(e)&&_(e,function(e,t){var n=r[t];h(e)?(h(n)||(n={}),r[t]=i(n,e)):r[t]=e})}),r};var R={};function N(t,n,i){var e=R.extend(i[n.name]||[],t,n,i);Object.defineProperty(i,n.name,{enumerable:n.enumerable,value:e}),e.length&&e.forEach(function(e){t.set(e,n.inverse,i)})}function M(e,t){if(!(this instanceof M))return new M(e,t);(e.inverse=t).inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}R.extend=function(e,i,t,r){var o=t.inverse;return Object.defineProperty(e,"remove",{value:function(e){var t=this.indexOf(e);return-1!==t&&(this.splice(t,1),i.unset(e,o,r)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,t){var n=this.indexOf(e);if(void 0===t){if(-1!==n)return;t=this.length}-1!==n&&this.splice(n,1),this.splice(t,0,e),-1===n&&i.set(e,o,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e},R.isExtended=function(e){return!0===e.__refs_collection},M.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?N(this,t,e):function(n,e,i){var r=e.inverse,o=i[e.name];Object.defineProperty(i,e.name,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return o},set:function(e){if(e!==o){var t=o;o=null,t&&n.unset(t,r,i),o=e,n.set(o,r,i)}}})}(this,t,e)},M.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return R.isExtended(n)||N(this,t,e),n},M.prototype.ensureBound=function(e,t){!function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}(e,t)&&this.bind(e,t)},M.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},M.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var j={};(j=M).Collection=R;var $={};Object.defineProperty($,"__esModule",{value:!0}),$.Base=W,$.Shape=G,$.Root=Y,$.Label=K,$.Connection=X,$.create=function(e,t){var n=J[e];if(n)return(0,g.assign)(new n,t);throw new Error("unknown type: <"+e+">")};var L=V(l),B=V(j);function V(e){return e&&e.__esModule?e:{default:e}}var F=new B.default({name:"children",enumerable:!0,collection:!0},{name:"parent"}),U=new B.default({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),H=new B.default({name:"attachers",collection:!0},{name:"host"}),z=new B.default({name:"outgoing",collection:!0},{name:"source"}),q=new B.default({name:"incoming",collection:!0},{name:"target"});function W(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),F.bind(this,"parent"),U.bind(this,"labels"),z.bind(this,"outgoing"),q.bind(this,"incoming")}function G(){W.call(this),F.bind(this,"children"),H.bind(this,"host"),H.bind(this,"attachers")}function Y(){G.call(this)}function K(){G.call(this),U.bind(this,"labelTarget")}function X(){W.call(this),z.bind(this,"source"),q.bind(this,"target")}(0,L.default)(G,W),(0,L.default)(Y,G),(0,L.default)(K,G),(0,L.default)(X,W);var J={connection:X,shape:G,label:K,root:Y};var Q={},Z=g.some,ee=e.is,te=e.getBusinessObject;function ne(e,t){return e===t}function ie(e){return re(te(e),"cmmn:Case")}function re(e,t){for("string"==typeof t&&(t=[t]);e=e.$parent||e.parent;){if(!t)return e;if(oe(e,t))return e}return null}function oe(t,e){return Z(e,function(e){return ee(t,e)})}Q.isSame=ne,Q.isSameCase=function(e,t){return ne(ie(e),ie(t))},Q.getCase=ie,Q.getParents=function(e,t){var n=[];for("string"==typeof t&&(t=[t]);e;)(e=e.$parent||e.parent)&&(t?oe(e,t)&&n.push(e):n.push(e));return n},Q.getParent=re,Q.isAny=oe,Q.isLabel=function(e){return e instanceof $.Label};var ae=e.getDefinition,se=e.getSentry,ce=Q.isAny,le=g.forEach,ue=g.isArray;function pe(e,t){this._items={},this._referencedBy={},this._elementRegistry=e,this._eventBus=t,this._init()}pe.$inject=["elementRegistry","eventBus"];var de=pe;function fe(e){return ae(e)||se(e)}function he(e){return ce(e,["cmmn:PlanItemDefinition","cmmn:Sentry","cmmn:CaseFileItemDefinition"])}pe.prototype._init=function(e){var t=this._eventBus;t.on("diagram.destroy",500,this._clear,this),t.on("diagram.clear",500,this._clear,this)},pe.prototype._clear=function(){this._items={},this._referencedBy={}},pe.prototype.add=function(e){var t=this._items,n=e.id,i=this._referencedBy,r=fe(e),o=r&&r.id;t[n]=e,r&&(i[o]=i[o]||[],-1===i[o].indexOf(e)&&i[o].push(e))},pe.prototype.remove=function(e){var t=this._items,n=e.id,i=this._referencedBy,r=fe(e),o=r&&r.id;if(delete t[n],r){var a=i[o]||[],s=a.indexOf(e);-1!==s&&a.splice(s,1),a.length||delete i[o]}},pe.prototype.updateId=function(e,t){var n,i;"string"==typeof e&&(e=this.get(e)),n=he(e)?this._referencedBy:this._items,e&&(i=n[e.id],delete n[e.id],n[t]=i)},pe.prototype.updateReference=function(e,t){var n=this._referencedBy,i=fe(e),r=i&&i.id;if(i){var o=n[r]||[],a=o.indexOf(e);-1!==a&&o.splice(a,1),o.length||delete n[r]}if(t){var s=t.id;s&&(n[s]=n[s]||[],-1===n[s].indexOf(e)&&n[s].push(e))}},pe.prototype.get=function(e){return this._items[e]},pe.prototype.filter=function(n){var i=[];return this.forEach(function(e,t){n(e,t)&&i.push(e)}),i},pe.prototype.getAll=function(){return this.filter(function(e){return e})},pe.prototype.forEach=function(t){var e=this._items;le(e,function(e){return t(e,fe(e))})},pe.prototype.getReferences=function(e){var t=e.id||e;return(this._referencedBy[t]||[]).slice()},pe.prototype.getShape=function(e){var t=e.id||e;return this._elementRegistry&&this._elementRegistry.get(t)},pe.prototype.getShapes=function(e){var t=[],n=this;function i(e){e&&t.push(e)}if(ue(e))le(e,function(e){i(n.getShape(e))});else if(he(e)){var r=n.getReferences(e);le(r,function(e){i(n.getShape(e))})}else i(n.getShape(e));return t};var me={},ve=e.is,ge=e.getBusinessObject,ye=e.isCasePlanModel;me.isCollapsed=function(e){if(!ye(e)){var t=(e=ge(e)).definitionRef;if(ve(t,"cmmn:PlanFragment"))return!!(e&&e.di&&e.di.isCollapsed)}return!1},me.isPlanningTableCollapsed=function(e){return e=ge(e),!!(ve(e,"cmmn:Stage")||e.definitionRef&&(ve(e.definitionRef,"cmmn:Stage")||ve(e.definitionRef,"cmmn:HumanTask")))&&(e.di&&e.di.isPlanningTableCollapsed)},me.isStandardEventVisible=function(e){var t=(e=ge(e)).cmmnElementRef;return!(!ve(t,"cmmn:OnPart")||!e.isStandardEventVisible)};var be={};Object.defineProperty(be,"__esModule",{value:!0}),be.default=we;var _e=1e3;function we(e,t){var o=this;t=t||_e,e.on(["render.shape","render.connection"],t,function(e,t){var n=e.type,i=t.element,r=t.gfx;if(o.canRender(i))return"render.shape"===n?o.drawShape(r,i):o.drawConnection(r,i)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(o.canRender(t))return"render.getShapePath"===e.type?o.getShapePath(t):o.getConnectionPath(t)})}we.prototype.canRender=function(){},we.prototype.drawShape=function(){},we.prototype.drawConnection=function(){},we.prototype.getShapePath=function(){},we.prototype.getConnectionPath=function(){};var xe={};function Ee(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}function Ce(e,t){return t.appendChild(Ee(e,t))}Object.defineProperty(xe,"__esModule",{value:!0});var ke=2,Se={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":ke,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":ke,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Te(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Se[i];r?(r===ke&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function Oe(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return Se[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);Te(e,t,n)}else!function(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)Te(e,i,t[i])}(e,t);return e}function Ae(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var Ie=/\s+/,De=Object.prototype.toString;function Pe(e){return void 0!==e}function Re(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function Ne(e){var t=e.parentNode;return t&&t.removeChild(e),e}function Me(e){for(var t;t=e.firstChild;)Ne(t);return e}Re.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~Ae(t,e)||t.push(e),Pe(this.el.className.baseVal)?this.el.className.baseVal=t.join(" "):this.el.className=t.join(" "),this},Re.prototype.remove=function(e){if("[object RegExp]"===De.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=Ae(t,e);return~n&&t.splice(n,1),this.el.className.baseVal=t.join(" "),this},Re.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Re.prototype.toggle=function(e,t){return this.list?Pe(t)?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):Pe(t)?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},Re.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(Ie);return""===e[0]&&e.shift(),e},Re.prototype.has=Re.prototype.contains=function(e){return this.list?this.list.contains(e):!!~Ae(this.array(),e)};var je={svg:"http://www.w3.org/2000/svg"},$e='<svg xmlns="'+je.svg+'"';function Le(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(je.svg)&&(e=$e+e.substring(4)):(e=$e+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function Be(e,t){var n;return n="<"===e.charAt(0)?(n=Le(e).firstChild,document.importNode(n,!0)):document.createElementNS(je.svg,e),t&&Oe(n,t),n}var Ve=Be("svg");function Fe(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}var Ue=/([&<>]{1})/g,He=/([\n\r"]{1})/g,ze={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function qe(e,t){return e.replace(t,function(e,t){return ze[t]||t})}function We(e,t){var n,i,r,o,a;switch(e.nodeType){case 3:t.push(qe(e.textContent,Ue));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(n=0,i=(r=e.attributes).length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',qe(o.value,He),'"');if(e.hasChildNodes()){for(t.push(">"),n=0,i=(a=e.childNodes).length;n<i;++n)We(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("\x3c!--",qe(e.nodeValue,Ue),"--\x3e");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function Ge(e,t){var n=Le(t);if(Me(e),t){!function(e){return"#document-fragment"===e.nodeName}(n)&&(n=n.documentElement);for(var i=function(e){return Array.prototype.slice.call(e)}(n.childNodes),r=0;r<i.length;r++)Ce(i[r],e)}}function Ye(e,t){return t.insertBefore(Ee(e,t),t.firstChild||null)}xe.append=function(e,t){return Ce(t,e),e},xe.appendTo=Ce,xe.attr=Oe,xe.classes=function(e){return new Re(e)},xe.clear=Me,xe.clone=function(e){return e.cloneNode(!0)},xe.create=Be,xe.innerSVG=function(e,t){if(void 0===t)return function(e){for(var t=e.firstChild,n=[];t;)We(t,n),t=t.nextSibling;return n.join("")}(e);try{Ge(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e},xe.prepend=function(e,t){return Ye(t,e),e},xe.prependTo=Ye,xe.remove=Ne,xe.replace=function(e,t){return e.parentNode.replaceChild(Ee(t,e),e),t},xe.transform=function(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),function(e,t){var n,i,r,o;for(e.clear(),n=0;i=t[n];n++)e.appendItem((r=e,(o=i)instanceof SVGMatrix?r.createSVGTransformFromMatrix(o):o))}(n,t)),n.consolidate()},xe.on=function(e,t,n,i){e.addEventListener(t,n,i)},xe.off=function(e,t,n,i){e.removeEventListener(t,n,i)},xe.createPoint=function(e,t){var n=Ve.createSVGPoint();switch(arguments.length){case 0:return n;case 2:e={x:e,y:t}}return Fe(n,e)},xe.createMatrix=function(e,t,n,i,r,o){var a=Ve.createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return Fe(a,e);case 6:return Fe(a,{a:e,b:t,c:n,d:i,e:r,f:o})}},xe.createTransform=function(e){return e?Ve.createSVGTransformFromMatrix(e):Ve.createSVGTransform()},xe.select=function(e,t){return e.querySelector(t)},xe.selectAll=function(e,t){var n=e.querySelectorAll(t);return[].map.call(n,function(e){return e})};var Ke={};function Xe(e){for(var t,n="",i=0;t=e[i];i++)n+=t.x+","+t.y+" ";return n}Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.componentsToPath=function(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")},Ke.toSVGPoints=Xe,Ke.createLine=function(e,t){var n=(0,xe.create)("polyline");(0,xe.attr)(n,{points:Xe(e)}),t&&(0,xe.attr)(n,t);return n},Ke.updateLine=function(e,t){return(0,xe.attr)(e,{points:Xe(t)}),e};var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.transform=function(e,t,n,i,r){var o=(0,xe.createTransform)();o.setTranslate(t,n);var a=(0,xe.createTransform)();a.setRotate(i,0,0);var s=(0,xe.createTransform)();s.setScale(r||1,r||1),(0,xe.transform)(e,[o,a,s])},Je.translate=function(e,t,n){var i=(0,xe.createTransform)();i.setTranslate(t,n),(0,xe.transform)(e,i)},Je.rotate=function(e,t){var n=(0,xe.createTransform)();n.setRotate(t,0,0),(0,xe.transform)(e,n)},Je.scale=function(e,t){var n=(0,xe.createTransform)();n.setScale(t,t),(0,xe.transform)(e,n)};var Qe={};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=ot;var Ze=0,et={width:150,height:50};function tt(e,t){var n;t.textContent=e;try{var i,r=""===e;return t.textContent=r?"dummy":e,i={width:(n=t.getBBox()).width+2*n.x,height:n.height},r&&(i.width=0),i}catch(e){return{width:0,height:0}}}function nt(e,t,n){for(var i,r=e.shift(),o=r;;){if((i=tt(o,n)).width=o?i.width:0," "===o||""===o||i.width<Math.round(t)||o.length<2)return it(e,o,r,i);o=rt(o,i.width,t)}}function it(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}function rt(e,t,n){var i=Math.max(e.length*(n/t),1),r=function(e,t){var n,i=e.split(/(\s|-)/g),r=[],o=0;if(1<i.length)for(;n=i.shift();){if(!(n.length+o<t)){"-"===n&&r.pop();break}r.push(n),o+=n.length}return r.join("")}(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function ot(e){this._config=(0,g.assign)({},{size:et,padding:Ze,style:{},align:"center-top"},e||{})}ot.prototype.createText=function(e,t){return this.layoutText(e,t).element},ot.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},ot.prototype.layoutText=function(e,t){var n=(0,g.assign)({},this._config.size,t.box),i=(0,g.assign)({},this._config.style,t.style),r=function(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}(t.align||this._config.align),o=function(e){return(0,g.isObject)(e)?(0,g.assign)({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}(void 0!==t.padding?t.padding:this._config.padding),a=t.fitBox||!1,s=function(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}(i),c=e.split(/\r?\n/g),l=[],u=n.width-o.left-o.right,p=(0,xe.create)("text");(0,xe.attr)(p,{x:0,y:0}),(0,xe.attr)(p,i);var d=function(){var e=document.getElementById("helper-svg");return e||(e=(0,xe.create)("svg"),(0,xe.attr)(e,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(e)),e}();for((0,xe.append)(d,p);c.length;)l.push(nt(c,u,p));"middle"===r.vertical&&(o.top=o.bottom=0);var f=(0,g.reduce)(l,function(e,t,n){return e+(s||t.height)},0)+o.top+o.bottom,h=(0,g.reduce)(l,function(e,t,n){return t.width>e?t.width:e},0),m=o.top;"middle"===r.vertical&&(m+=(n.height-f)/2),m-=(s||l[0].height)/4;var v=(0,xe.create)("text");return(0,xe.attr)(v,i),(0,g.forEach)(l,function(e){var t;switch(m+=s||e.height,r.horizontal){case"left":t=o.left;break;case"right":t=(a?h:u)-o.right-e.width;break;default:t=Math.max(((a?h:u)-e.width)/2+o.left,0)}var n=(0,xe.create)("tspan");(0,xe.attr)(n,{x:t,y:m}),n.textContent=e.text,(0,xe.append)(v,n)}),(0,xe.remove)(p),{dimensions:{width:h,height:f},element:v}};var at={};Object.defineProperty(at,"__esModule",{value:!0});function st(e,t){if(ct)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var ct=[].indexOf,lt=/\s+/,ut=Object.prototype.toString;function pt(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}pt.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~st(t,e)||t.push(e),this.el.className=t.join(" "),this},pt.prototype.remove=function(e){if("[object RegExp]"==ut.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=st(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},pt.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},pt.prototype.toggle=function(e,t){return this.list?void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},pt.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(lt);return""===e[0]&&e.shift(),e},pt.prototype.has=pt.prototype.contains=function(e){return this.list?this.list.contains(e):!!~st(this.array(),e)};var dt=Element.prototype,ft=dt.matchesSelector||dt.webkitMatchesSelector||dt.mozMatchesSelector||dt.msMatchesSelector||dt.oMatchesSelector,ht=function(e,t){if(ft)return ft.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1};function mt(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(ht(i,t))return i;i=i.parentNode}}function vt(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){var r=t.createElement("html");return r.innerHTML=e,r.removeChild(r.lastChild)}var o=kt[i]||kt._default,a=o[0],s=o[1],c=o[2];for((r=t.createElement("div")).innerHTML=s+e+c;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var l=t.createDocumentFragment();r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l}var gt,yt=window.addEventListener?"addEventListener":"attachEvent",bt=window.removeEventListener?"removeEventListener":"detachEvent",_t="addEventListener"!=yt?"on":"",wt={bind:function(e,t,n,i){return e[yt](_t+t,n,i||!1),n},unbind:function(e,t,n,i){return e[bt](_t+t,n,i||!1),n}},xt=["focus","blur"],Et={bind:function(n,i,e,r,t){return-1!==xt.indexOf(e)&&(t=!0),wt.bind(n,e,function(e){var t=e.target||e.srcElement;e.delegateTarget=mt(t,i,!0),e.delegateTarget&&r.call(n,e)},t)},unbind:function(e,t,n,i){-1!==xt.indexOf(t)&&(i=!0),wt.unbind(e,t,n,i)}},Ct=!1;"undefined"!=typeof document&&((gt=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Ct=!gt.getElementsByTagName("link").length,gt=void 0);var kt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Ct?[1,"X<div>","</div>"]:[0,"",""]};kt.td=kt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],kt.option=kt.optgroup=[1,'<select multiple="multiple">',"</select>"],kt.thead=kt.tbody=kt.colgroup=kt.caption=kt.tfoot=[1,"<table>","</table>"],kt.polyline=kt.ellipse=kt.polygon=kt.circle=kt.text=kt.line=kt.path=kt.rect=kt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function St(e,t){if(!e||1!==e.nodeType)return!1;if(Ot)return Ot.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;i++)if(n[i]==e)return!0;return!1}var Tt="undefined"!=typeof Element?Element.prototype:{},Ot=Tt.matches||Tt.matchesSelector||Tt.webkitMatchesSelector||Tt.mozMatchesSelector||Tt.msMatchesSelector||Tt.oMatchesSelector;at.attr=function(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)},at.classes=function(e){return new pt(e)},at.clear=function(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e},at.closest=mt,at.delegate=Et,at.domify=vt,at.event=wt,at.matches=St,at.query=function(e,t){return(t=t||document).querySelector(e)},at.queryAll=function(e,t){return(t=t||document).querySelectorAll(e)},at.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var At=g.isArray,It=g.isObject,Dt=g.assign,Pt=be.default,Rt=Qe.default,Nt=me.isStandardEventVisible,Mt=me.isPlanningTableCollapsed,jt=me.isCollapsed,$t=e.isCasePlanModel,Lt=e.getBusinessObject,Bt=e.getDefinition,Vt=e.isRequired,Ft=e.isRepeatable,Ut=e.isManualActivation,Ht=e.isAutoComplete,zt=e.hasPlanningTable,qt=e.getName,Wt=e.is,Gt=e.getStandardEvent,Yt=at.query,Kt=xe.append,Xt=xe.attr,Jt=xe.classes,Qt=xe.create,Zt=Je.translate,en=Ke.createLine;function tn(e,i,s){Pt.call(this,e);var r=20,o=new Rt({style:{fontFamily:"Arial, sans-serif",fontSize:"12px"},size:{width:100}}),c={};function a(e){return c[e]}function t(s){function e(e,t){var n=Dt({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},r=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var o=Qt("marker");Xt(t.element,n),Kt(o,t.element),Xt(o,{id:e,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*r,markerHeight:20*r,orient:"auto"});var a=Yt("defs",s);return a||(a=Qt("defs"),Kt(s,a)),Kt(a,o),function(e,t){c[e]=t}(e,o)}var t=Qt("path");Xt(t,{d:"M 11 5 L 1 10 L 11 15"}),e("association-start",{element:t,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:1,y:10},scale:.5});var n=Qt("path");Xt(n,{d:"M 1 5 L 11 10 L 1 15"}),e("association-end",{element:n,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}function l(e,t,n){return At(t)||(n=t,t=[]),i.style(t||[],Dt(n,e||{}))}function u(e,t,n,i,r){It(i)&&(r=i,i=0),i=i||0,r=l(r,{stroke:"black",strokeWidth:2,fill:"white"});var o=t/2,a=n/2,s=Qt("circle");return Xt(s,{cx:o,cy:a,r:Math.round((t+n)/4-i)}),Xt(s,r),Kt(e,s),s}function p(e,t,n,i,r,o){It(r)&&(o=r,r=0),r=r||0,o=l(o,{stroke:"black",strokeWidth:2,fill:"white"});var a=Qt("rect");return Xt(a,{x:r,y:r,width:t-2*r,height:n-2*r,rx:i,ry:i}),Xt(a,o),Kt(e,a),a}function n(e,t,n,i){var r=t/2,o=n/2,a=[{x:r,y:0},{x:t,y:o},{x:r,y:n},{x:0,y:o}].map(function(e){return e.x+","+e.y}).join(" ");i=l(i,{stroke:"black",strokeWidth:2,fill:"white"});var s=Qt("polygon");return Xt(s,{points:a}),Xt(s,i),Kt(e,s),s}function d(e,t,n){n=l(n,["no-fill"],{strokeWidth:2,stroke:"black"});var i=Qt("path");return Xt(i,{d:t}),Xt(i,n),Kt(e,i),i}function f(e,t,n){var i=t.map(function(e){return e.x+","+e.y}).join(" "),r=Qt("polygon");return Xt(r,{points:i}),Xt(r,n),Kt(e,r),r}function h(e){for(var t=e.waypoints,n="m  "+t[0].x+","+t[0].y,i=1;i<t.length;i++)n+="L"+t[i].x+","+t[i].y+" ";return n}function m(e,t,n){var i=o.createText(t||"",n);return Jt(i).add("djs-label"),Kt(e,i),i}function v(e,t,n){return m(e,qt(t),{box:t,align:n,padding:5})}function g(e){return y[e]}var y={"cmmn:PlanItem":function(e,t){return g(Bt(t).$type)(e,t)},"cmmn:DiscretionaryItem":function(e,t){var n=Bt(t),i={strokeDasharray:"10, 12"};return Wt(n,"cmmn:Task")&&Dt(i,{strokeDasharray:"12, 12.4",strokeDashoffset:13.6}),g(n.$type)(e,t,i)},"cmmn:Stage":function(e,t,n){var i;return n=Dt({fillOpacity:.95},n),$t(t)?y["cmmn:CasePlanModel"](e,t):(i=function(e,t,n,i,r){var o=[{x:i=i||20,y:n},{x:0,y:n-i},{x:0,y:i},{x:i,y:0},{x:t-i,y:0},{x:t,y:i},{x:t,y:n-i},{x:t-i,y:n}];return(r=r||{}).fill="white",r.stroke="black",r.strokeWidth=2,f(e,o,r)}(e,t.width,t.height,r,n),jt(t)?v(e,t,"center-middle"):function(e,t,n){var i=m(e,qt(t),{box:t,align:n,padding:5});Zt(i,r,0)}(e,t,"left-top"),w(e,t),_(e,t),i)},"cmmn:PlanFragment":function(e,t,n){var i=p(e,t.width,t.height,10,{strokeDasharray:"10, 12",fillOpacity:.95});return v(e,t,jt(t)?"center-middle":"left-top"),_(e,t),i},"cmmn:CasePlanModel":function(e,t){var n=p(e,t.width,t.height,0,{fillOpacity:.95});return function(e,t){var n=Lt(t),i=t.width/2-60,r=m(e,n.name,{box:{height:18,width:i},align:"left-top"}),o=r.getBBox().width,a=o+40;o<60&&(a=100);var s=f(e,[{x:10,y:0},{x:20,y:-18},{x:a,y:-18},{x:a+10,y:0}],{fill:"white",stroke:"black",strokeWidth:2,fillOpacity:.95,"pointer-events":"all"});r.parentNode.insertBefore(s,r),Zt(r,25,-13)}(e,t),w(e,t),function(e,t){var n=Lt(t);Ht(n)&&x("AutoCompleteMarker",e,t,-7)}(e,t),n},"cmmn:Milestone":function(e,t,n){var i=p(e,t.width,t.height,24,n);return v(e,t,"center-middle"),b(e,t),i},"cmmn:EventListener":function(e,t,n){var i=u(e,t.width,t.height,n);return(n=n||{}).strokeWidth=2,u(e,t.width,t.height,.1*t.height,n),i},"cmmn:TimerEventListener":function(e,t,n){var i=g("cmmn:EventListener")(e,t,n);d(e,s.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square"});for(var r=0;r<12;r++){var o=s.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),a=t.width/2;d(e,o,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*r+","+t.height/2+","+a+")"})}return i},"cmmn:UserEventListener":function(e,t,n){var i=g("cmmn:EventListener")(e,t,n);return d(e,s.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:20,y:15}}),{strokeWidth:.5,fill:"none"}),d(e,s.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:20,y:15}}),{strokeWidth:.5,fill:"none"}),d(e,s.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:20,y:15}}),{strokeWidth:.5,fill:"black"}),i},"cmmn:Task":function(e,t,n){var i=p(e,t.width,t.height,10,n);return v(e,t,"center-middle"),b(e,t),i},"cmmn:HumanTask":function(e,t,n){var i=g("cmmn:Task")(e,t,n);if(t.businessObject.definitionRef.isBlocking){d(e,s.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:"none"}),d(e,s.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:"none"}),d(e,s.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:"black"})}else{d(e,s.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:1.25,fill:"white",stroke:"black"})}return w(e,t),i},"cmmn:CaseTask":function(e,t,n){var i=g("cmmn:Task")(e,t,n);return d(e,s.getScaledPath("TASK_TYPE_FOLDER",{abspos:{x:7,y:7}}),{strokeWidth:1.25,fill:"white",stroke:"black"}),i},"cmmn:ProcessTask":function(e,t,n){var i=g("cmmn:Task")(e,t,n);return d(e,s.getScaledPath("TASK_TYPE_CHEVRON",{abspos:{x:5,y:5}}),{strokeWidth:1.25,fill:"white",stroke:"black"}),i},"cmmn:DecisionTask":function(e,t,n){var i=g("cmmn:Task")(e,t,n);return d(e,s.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),{strokeWidth:1,fill:"000"}),d(e,s.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),{strokeWidth:1}),i},"cmmn:CaseFileItem":function(e,t,n){return d(e,s.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:"white"})},"cmmn:TextAnnotation":function(e,t){var n=p(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return d(e,s.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}})),m(e,Lt(t).text||"",{box:t,align:"left-middle",padding:5}),n},"cmmn:Association":function(e,t,n){var i=Lt(t);return n=Dt({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round"},n||{}),"One"!==i.associationDirection&&"Both"!==i.associationDirection||(n.markerEnd=a("association-end")),"Both"===i.associationDirection&&(n.markerStart=a("association-start")),function(e,t,n){n=l(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var i=en(t,n);return Kt(e,i),i}(e,t.waypoints,n)},StageMarker:function(e,t){var n=p(e,14,14,0,{strokeWidth:1,stroke:"black"});Zt(n,t.width/2-7,t.height-17);var i=jt(t)?"MARKER_STAGE_COLLAPSED":"MARKER_STAGE_EXPANDED";d(e,s.getScaledPath(i,{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7)/t.width,my:(t.height-17)/t.height}}))},RequiredMarker:function(e,t,n){d(e,s.getScaledPath("MARKER_REQUIRED",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n)/t.width,my:(t.height-17)/t.height}}),{strokeWidth:3})},AutoCompleteMarker:function(e,t,n){var i=p(e,11,14,0,{strokeWidth:1,stroke:"black",fill:"black"});Zt(i,t.width/2+n+2,t.height-17)},ManualActivationMarker:function(e,t,n){d(e,s.getScaledPath("MARKER_MANUAL_ACTIVATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n)/t.width,my:(t.height-17)/t.height}}),{strokeWidth:1})},RepetitionMarker:function(e,t,n){d(e,s.getScaledPath("MARKER_REPEATABLE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n)/t.width,my:(t.height-17)/t.height}}))},PlanningTableMarker:function(e,t,n){var i=p(e,30,24,0,{strokeWidth:1.5,stroke:"black"});Zt(i,t.width/2-15,-17);var r=Mt(t)?"MARKER_PLANNING_TABLE_COLLAPSED":"MARKER_PLANNING_TABLE_EXPANDED";d(e,s.getScaledPath(r,{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-15)/t.width,my:-17/t.height}}),{strokeWidth:1.5})},"cmmn:OnPart":function(e,t){return d(e,h(t),{strokeDasharray:"10, 5, 2, 5, 2, 5",strokeWidth:1.5})},"cmmn:PlanItemOnPart":function(e,t){return g("cmmn:OnPart")(e,t)},"cmmn:CaseFileItemOnPart":function(e,t){return g("cmmn:OnPart")(e,t)},"cmmn:EntryCriterion":function(e,t){return n(e,t.width,t.height,{fill:"white"})},"cmmn:ExitCriterion":function(e,t){return n(e,t.width,t.height,{fill:"black"})},"cmmndi:CMMNEdge":function(e,t){var n=Lt(t);return n.cmmnElementRef?g(n.cmmnElementRef.$type)(e,t):d(e,h(t),{strokeDasharray:"3, 5",strokeWidth:1})},label:function(e,t){var n,i=function(e,t){var n=qt(t),i=!1,r=Gt(t);if(r){var o=Nt(t);r="["+r+"]",n?o&&(n=n+" "+r):(n=r,t.hidden=i=!o)}var a={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return t.hidden=t.labelTarget.hidden||i||!n,m(e,n,{box:a,style:{fontSize:"11px"}})}(e,t);try{n=i.getBBox()}catch(e){n={width:0,height:0,x:0}}return t.x=Math.ceil(t.x+t.width/2)-Math.ceil(n.width/2),t.width=Math.ceil(n.width),t.height=Math.ceil(n.height),Xt(i,{transform:"translate("+-1*n.x+",0)"}),i}};function b(e,t){var n=Lt(t),i=[];Vt(n)&&i.push({marker:"RequiredMarker",width:1}),Ut(n)&&i.push({marker:"ManualActivationMarker",width:14}),Ft(n)&&i.push({marker:"RepetitionMarker",width:14}),i.length&&(1===i.length?x(i[0].marker,e,t,i[0].width/2*-1):2===i.length?(x(i[0].marker,e,t,-1*i[0].width-3),x(i[1].marker,e,t,3)):3===i.length&&(x(i[1].marker,e,t,i[1].width/2*-1),x(i[0].marker,e,t,i[1].width/2*-1-6-i[0].width),x(i[2].marker,e,t,i[1].width/2+6)))}function _(e,t,n){var i=Lt(t);x("StageMarker",e,t,-7);var r=[];Vt(i)&&r.push({marker:"RequiredMarker",width:1}),Ht(i)&&r.push({marker:"AutoCompleteMarker",width:14}),r.length&&(1===r.length?x(r[0].marker,e,t,-1*r[0].width-7-6):2===r.length&&(x(r[0].marker,e,t,-1*r[1].width-7-6- -1*r[0].width-6),x(r[1].marker,e,t,-1*r[1].width-7-6)));var o=[];Ut(i)&&o.push({marker:"ManualActivationMarker",width:14}),Ft(i)&&o.push({marker:"RepetitionMarker",width:14}),o.length&&(1===o.length?x(o[0].marker,e,t,13):2===o.length&&(x(o[0].marker,e,t,13),x(o[1].marker,e,t,13+o[0].width+6)))}function w(e,t){zt(t)&&x("PlanningTableMarker",e,t)}function x(e,t,n,i){g(e)(t,n,i)}this.canRender=function(e){return Wt(e,"cmmn:CMMNElement")||Wt(e,"cmmndi:CMMNEdge")},this.drawShape=function(e,t){var n=y[t.type];return n?n(e,t):Pt.prototype.drawShape.apply(this,[e,t])},this.drawConnection=function(e,t){var n=t.type,i=y[n];return i?i(e,t):Pt.prototype.drawConnection.apply(this,[e,t])},e.on("canvas.init",function(e){t(e.svg)})}l(tn,Pt),tn.$inject=["eventBus","styles","pathMap"];function nn(){var e="m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5",t="m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005",n="m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z";this.pathMap={TASK_TYPE_FOLDER:{d:"m {mx},{my} l18,0 l0,12 l-18,0 l0,-12 m 2,0 l3,-4 l5,0 l3,4"},TASK_TYPE_CHEVRON:{d:"m {mx},{my} l15,0 l6,6 l-6,6 l-15,0 l6,-6 l-6,-6"},TASK_TYPE_USER_1:{d:e},TASK_TYPE_USER_2:{d:t},TASK_TYPE_USER_3:{d:n},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_USER_1:{d:e,height:36,width:36,heightElements:[],widthElements:[]},EVENT_USER_2:{d:t,height:36,width:36,heightElements:[],widthElements:[]},EVENT_USER_3:{d:n,height:36,width:36,heightElements:[],widthElements:[]},MARKER_STAGE_EXPANDED:{d:"m{mx},{my} m 2,7 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_STAGE_COLLAPSED:{d:"m{mx},{my} m 2,7 l 10,0 m -5,-5 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_REQUIRED:{d:"m{mx},{my} l 0,9 m 0,2 l0,3",height:14,width:3,heightElements:[],widthElements:[]},MARKER_MANUAL_ACTIVATION:{d:"m{mx}, {my} l 14,7 l -14,7 l 0,-14 z",height:14,width:14,heightElements:[],widthElements:[]},MARKER_REPEATABLE:{d:"m{mx},{my} m 3,0 l 0,14 m 6,-14 l 0,14 m -10,-10 l 14,0 m -14,6 l 14,0",height:14,width:14,heightElements:[],widthElements:[]},MARKER_PLANNING_TABLE_EXPANDED:{d:"m{mx},{my} m 0,12 l 30,0 m -20,-12 l 0, 24 m 10, -24 l 0, 24 m -10, -6 l 10,0",height:24,width:30,heightElements:[],widthElements:[]},MARKER_PLANNING_TABLE_COLLAPSED:{d:"m{mx},{my} m 0,12 l 30,0 m -20,-12 l 0, 24 m 10, -24 l 0, 24 m -10, -6 l 10,0 m -5, -6 l 0,12",height:10,width:10,heightElements:[],widthElements:[]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,r=this.pathMap[e];i=t.abspos?(n=t.abspos.x,t.abspos.y):(n=t.containerWidth*t.position.mx,t.containerHeight*t.position.my);var o={};if(t.position){for(var a=t.containerHeight/r.height*t.yScaleFactor,s=t.containerWidth/r.width*t.xScaleFactor,c=0;c<r.heightElements.length;c++)o["y"+c]=r.heightElements[c]*a;for(var l=0;l<r.widthElements.length;l++)o["x"+l]=r.widthElements[l]*s}return function(e,n){return String(e).replace(rn,function(e,t){return function(e,t,n){var o=n;return t.replace(on,function(e,t,n,i,r){t=t||i,o&&(t in o&&(o=o[t]),"function"==typeof o&&r&&(o=o()))}),o=(null==o||o==n?e:o)+""}(e,t,n)})}(r.d,{mx:n,my:i,e:o})}}var rn=/\{([^}]+)\}/g,on=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;var an={__init__:["cmmnRenderer"],cmmnRenderer:["type",tn],pathMap:["type",nn]},sn={elementToString:function(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}},cn={},ln=e.is,un=g.assign,pn=cn.DEFAULT_LABEL_SIZE={width:90,height:20};cn.hasExternalLabel=function(e){return(ln(e,"cmmn:PlanItem")||ln(e,"cmmn:DiscretionaryItem"))&&(e=e.definitionRef),ln(e,"cmmndi:CMMNEdge")&&e.cmmnElementRef&&ln(e.cmmnElementRef,"cmmn:OnPart")&&(e=e.cmmnElementRef),ln(e,"cmmn:EventListener")||ln(e,"cmmn:OnPart")||ln(e,"cmmn:CaseFileItem")};var dn=cn.getWaypointsMid=function(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(.01+t)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}},fn=cn.getExternalLabelMid=function(e){var t=e.businessObject,n=t.di;return!n&&ln(t,"cmmndi:CMMNEdge")&&t.cmmnElementRef&&(n=t),t&&n&&n.waypoint?dn(n.waypoint):{x:e.x+e.width/2,y:e.y+e.height+pn.height/2}};cn.getExternalLabelBounds=function(e,t){var n,i,r,o=(e.di||e).label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(pn.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=fn(t),i=pn),un({x:n.x-i.width/2,y:n.y-i.height/2},i)};var hn=cn.hasLabelBounds=function(e){return e&&e.di&&e.di.label&&e.di.label.bounds};cn.getLabelBounds=function(e){if(hn(e))return e.di.label.bounds};var mn=g.assign,vn=g.map,gn=e.is,yn=cn.hasExternalLabel,bn=cn.getExternalLabelBounds,_n=me.isCollapsed,wn=sn.elementToString;function xn(e,t){return mn({id:e.id,type:e.$type,businessObject:e},t)}function En(e,t,n){return new Error("element "+wn(t)+" referenced by "+wn(e)+"#"+n+" not yet drawn")}function Cn(e,t,n,i){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i}Cn.$inject=["eventBus","canvas","elementFactory","elementRegistry"];var kn=Cn;Cn.prototype.root=function(e){var t=this._elementFactory.createRoot(xn(e));return this._canvas.setRootElement(t),t},Cn.prototype.add=function(e,t){var n,i,r=e.di;if(r&&gn(r,"cmmndi:CMMNShape")&&!this._getElement(e)){var o=_n(e);i=t&&(t.hidden||t.collapsed);var a=e.di.bounds;n=this._elementFactory.createShape(xn(e,{collapsed:o,hidden:i,x:Math.round(a.x),y:Math.round(a.y),width:Math.round(a.width),height:Math.round(a.height)})),gn(e,"cmmn:Criterion")&&this._attachCriterion(e,n),this._canvas.addShape(n,t)}else{if(!(r&&gn(r,"cmmndi:CMMNEdge")||gn(e,"cmmndi:CMMNEdge")))throw new Error("unknown di "+wn(r)+" for element "+wn(e));var s=this._getSource(e),c=this._getTarget(e);i=t&&(t.hidden||t.collapsed)||s&&s.hidden||c&&c.hidden;var l=(e.di||{}).waypoint||e.waypoint;n=this._elementFactory.createConnection(xn(e,{hidden:i,source:s,target:c,waypoints:function(e){return vn(e,function(e){return{x:e.x,y:e.y}})}(l)})),this._canvas.addConnection(n,t)}return yn(e)&&this.addLabel(e,n),this._eventBus.fire("cmmnElement.added",{element:n}),n},Cn.prototype._attachCriterion=function(e,t){var n=e.$parent;if(!n)throw new Error("missing "+wn(e)+"$parent");var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw En(e,n,"criterion");t.host=i,r||(i.attachers=r=[]),-1===r.indexOf(t)&&r.push(t)},Cn.prototype.addLabel=function(e,t){var n=bn(e,t),i=this._elementFactory.createLabel(xn(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden,x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)}));return this._canvas.addShape(i,t.parent)},Cn.prototype._getSource=function(e){var t=e.cmmnElementRef;if(t){if(gn(t,"cmmn:OnPart"))return t.exitCriterionRef?this._getEnd(t,"exitCriterionRef"):this._getEnd(t,"sourceRef");if(gn(t,"cmmn:Association"))return this._getEnd(t,"sourceRef")}if(gn(e,"cmmndi:CMMNEdge"))return this._getEnd(e,"sourceCMMNElementRef")},Cn.prototype._getTarget=function(e){var t=e.cmmnElementRef;return t&&gn(t,"cmmn:Association")?this._getEnd(t,"targetRef"):this._getEnd(e,"targetCMMNElementRef")},Cn.prototype._getEnd=function(e,t){var n=e[t],i=n&&this._getElement(n);if(i)return i;throw n?En(e,n,t):new Error(wn(e)+"#"+t+"Ref not specified")},Cn.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};var Sn={__depends__:[an,{cmmnImporter:["type",kn]}],itemRegistry:["type",de]},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.remove=function(e,t){if(!e||!t)return-1;var n=e.indexOf(t);-1!==n&&e.splice(n,1);return n},Tn.add=function(e,t,n){if(!e||!t)return;"number"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)},Tn.indexOf=function(e,t){return e&&t?e.indexOf(t):-1};var On=g.forEach,An=g.filter,In=sn.elementToString,Dn=e.is,Pn=new j({name:"cmmnElement",enumerable:!0},{name:"di"});var Rn=function(o){var a=[],s=[],c={},l=[],n={},u=[],p=[];function d(e,t){return o.element(e,t)}function f(t,e){try{return o.addItem(t),t.di&&d(t,e)}catch(e){h(e.message,{element:t,error:e}),console.error("failed to import "+In(t)),console.error(e)}}function h(e,t){o.error(e,t)}function m(t,n){return function(e){t(e,n)}}function t(t){var e=t.cmmnElementRef;if(e&&!Dn(t,"cmmndi:CMMNEdge"))if(e.di)h("multiple DI elements defined for "+In(e),{element:e});else{var n=function(e){for(;e&&!Dn(e,"cmmn:Case");)e=e.$parent;return e}(e);n&&-1===l.indexOf(n)&&l.push(n),(Dn(e,"cmmn:TextAnnotation")||Dn(e,"cmmn:CaseFileItem"))&&u.push(e),Pn.bind(e,"di"),e.di=t}else if(Dn(t,"cmmndi:CMMNEdge")){var i=!0;if(function(e){return Dn(e.cmmnElementRef,"cmmn:Association")?!!e.cmmnElementRef.targetRef:!!e.targetCMMNElementRef}(t)||(i=!1,h("no target referenced in "+In(t),{element:t})),function(e){return Dn(e.cmmnElementRef,"cmmn:OnPart")?!(!e.cmmnElementRef.exitCriterionRef&&!e.cmmnElementRef.sourceRef):Dn(e.cmmnElementRef,"cmmn:Association")?!!e.cmmnElementRef.sourceRef:!!e.sourceCMMNElementRef}(t)||(i=!1,h("no source referenced in "+In(t),{element:t})),i)if(Dn(e,"cmmn:Association"))p.push(t);else if(e)s.push(function(e){!function(e,t){d(e,t)}(t,e)});else{var r=t.sourceCMMNElementRef;c[r.id]=c[r.id]||[],c[r.id].push(t)}}else h("no cmmnElement referenced in "+In(t),{element:t})}function v(e){!function(e){On(e,i)}(e.diagramElements)}function i(e){t(e)}function g(e,t){!function(e,t){On(e,m(r,t))}(e.planItems,t),Dn(e,"cmmn:Stage")&&function(e,t){y(e.planningTable,t)}(e,t)}function y(e,t){e&&On(e.tableItems,function(e){Dn(e,"cmmn:DiscretionaryItem")?function(e,t){!function(e){return!!n[e.id]}(e)&&(function(e){n[e.id]=e}(e),r(e,t))}(e,t):Dn(e,"cmmn:PlanningTable")&&y(e,t)})}function r(e,t){var n=f(e,t);On(e.exitCriteria,m(b,t)),On(e.entryCriteria,m(b,t));var i=e.definitionRef;if(Dn(i,"cmmn:PlanFragment"))g(i,n),_(e,n);else if(Dn(i,"cmmn:HumanTask")){y(i.planningTable,t);var r=c[e.id];On(r,m(E,t)),delete c[e.id]}}function b(e,t){a.unshift(function(){f(e,t)})}function _(e,t){if(e.di&&e.di.bounds){var n=function(e,t){var n=t.di.bounds;return An(e,function(e){return e.di.bounds.x>n.x&&e.di.bounds.x<n.x+n.width&&e.di.bounds.y>n.y&&e.di.bounds.y<n.y+n.height})}(u,e);On(n,function(e){Tn.remove(u,e),w(e,t)})}}function w(e,t){Dn(e,"cmmn:TextAnnotation")?function(e,t){f(e,t)}(e,t):Dn(e,"cmmn:CaseFileItem")&&function(e,t){f(e,t)}(e,t)}function x(e,t){d(e,t)}function E(e,t){a.push(function(){d(e,t)})}return{handleDefinitions:function(e,t){var n=e.CMMNDI;if(n){var i=n.diagrams;if(t&&-1===i.indexOf(t))throw new Error("diagram not part of cmmn:Definitions");!t&&i&&i.length&&(t=i[0]),v(t);var r=function(e,t){return o.root(e,t)}(t,t);!function(e,t){On(e,function(e){!function(e,t){var n,i=e.casePlanModel;i&&(n=function(e,t){var n=f(e,t);return On(e.exitCriteria,m(b,n)),g(e,n),_(e,n),n}(i,t)),function(e){On(e,function(e){e()})}(a),On(s,function(e){e(n)})}(e,t),a=[],s=[]})}(l,r),On(u,m(w)),On(p,m(x))}}}},Nn={};Nn.importCmmnDiagram=function(e,t,n){var i,r,o=e.get("cmmnImporter"),a=e.get("eventBus"),s=e.get("itemRegistry"),c=[];a.fire("import.render.start",{definitions:t});try{r=t,new Rn({root:function(e){return o.root(e)},element:function(e,t){return o.add(e,t)},error:function(e,t){c.push({message:e,context:t})},addItem:function(e){s.add(e)}}).handleDefinitions(r)}catch(e){i=e}a.fire("import.render.complete",{error:i,warnings:c}),n(i,c)};var Mn={},jn=at.domify,$n=at.delegate,Ln='<img width="52" height="52" src="'+("data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960"><path fill="#fff" d="M960 60v839c0 33-27 61-60 61H60c-33 0-60-27-60-60V60C0 27 27 0 60 0h839c34 0 61 27 61 60z"/><path fill="#52b415" d="M217 548a205 205 0 0 0-144 58 202 202 0 0 0-4 286 202 202 0 0 0 285 3 200 200 0 0 0 48-219 203 203 0 0 0-185-128zM752 6a206 206 0 0 0-192 285 206 206 0 0 0 269 111 207 207 0 0 0 111-260A204 204 0 0 0 752 6zM62 0A62 62 0 0 0 0 62v398l60 46a259 259 0 0 1 89-36c5-28 10-57 14-85l99 2 12 85a246 246 0 0 1 88 38l70-52 69 71-52 68c17 30 29 58 35 90l86 14-2 100-86 12a240 240 0 0 1-38 89l43 58h413c37 0 60-27 60-61V407a220 220 0 0 1-44 40l21 85-93 39-45-76a258 258 0 0 1-98 1l-45 76-94-39 22-85a298 298 0 0 1-70-69l-86 22-38-94 76-45a258 258 0 0 1-1-98l-76-45 40-94 85 22a271 271 0 0 1 41-47z"/></svg>'))+'" />';function Bn(e){return e.join(";")}var Vn,Fn='<div class="bjs-powered-by-lightbox" style="'+Bn(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+Bn(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"])+'"></div><div class="notice" style="'+Bn(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"])+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px">'+Ln+'</a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';Mn.open=function(){Vn||(Vn=jn(Fn),$n.bind(Vn,".backdrop","click",function(e){document.body.removeChild(Vn)})),document.body.appendChild(Vn)},Mn.BPMNIO_IMG=Ln;var Un={};Object.defineProperty(Un,"__esModule",{value:!0}),Un.hasLowerCaseAlias=function(e){return e.xml&&"lowerCase"===e.xml.tagAlias},Un.serializeAsType=function(e){return zn(e)===Hn},Un.serializeAsProperty=function(e){return"property"===zn(e)},Un.XSI_TYPE=Un.DEFAULT_NS_MAP=void 0;Un.DEFAULT_NS_MAP={xsi:"http://www.w3.org/2001/XMLSchema-instance"};var Hn="xsi:type";function zn(e){return e.xml&&e.xml.serialize}Un.XSI_TYPE=Hn;var qn={};function Wn(){}Object.defineProperty(qn,"__esModule",{value:!0}),(qn.default=Wn).prototype.get=function(e){return this.$model.properties.get(this,e)},Wn.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.default=Xn;var Yn,Kn=(Yn=qn)&&Yn.__esModule?Yn:{default:Yn};function Xn(e,t){this.model=e,this.properties=t}Xn.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Kn.default.prototype);(0,g.forEach)(e.properties,function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(e){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),(0,g.forEach)(e,(0,g.bind)(function(e,t){this.set(t,e)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.parseName=function(e,t){var n,i,r=e.split(/:/);if(1===r.length)n=e,i=t;else{if(2!==r.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=r[1],i=r[0]}return{name:e=(i?i+":":"")+n,prefix:i,localName:n}};var Qn={};function Zn(e){this.model=e}function ei(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}Object.defineProperty(Qn,"__esModule",{value:!0}),(Qn.default=Zn).prototype.set=function(e,t,n){var i=this.model.getPropertyDescriptor(e,t),r=i&&i.name;!function(e){return void 0===e}(n)?i?r in e?e[r]=n:ei(e,i,n):e.$attrs[t]=n:i?delete e[r]:delete e.$attrs[t]},Zn.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var i=n.name;return!e[i]&&n.isMany&&ei(e,n,[]),e[i]},Zn.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},Zn.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},Zn.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};var ti={};function ni(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}Object.defineProperty(ti,"__esModule",{value:!0}),(ti.default=ni).prototype.build=function(){return(0,g.pick)(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},ni.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},ni.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(-1===s)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t},ni.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=(0,Jn.parseName)(r[0],i),a=(0,Jn.parseName)(r[1],o.prefix).name,s=this.propertiesByName[a];if(!s)throw new Error("refined property <"+a+"> not found");this.replaceProperty(s,e,n),delete e.redefines},ni.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},ni.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},ni.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},ni.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},ni.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},ni.prototype.hasProperty=function(e){return this.propertiesByName[e]},ni.prototype.addTrait=function(i,r){var e=this.allTypesByName,t=this.allTypes,n=i.name;n in e||((0,g.forEach)(i.properties,(0,g.bind)(function(e){e=(0,g.assign)({},e,{name:e.ns.localName,inherited:r}),Object.defineProperty(e,"definedBy",{value:i});var t=e.replaces,n=e.redefines;t||n?this.redefineProperty(e,t||n,t):(e.isBody&&this.setBodyProperty(e),e.isId&&this.setIdProperty(e),this.addProperty(e))},this)),t.push(i),e[n]=i)};var ii={};Object.defineProperty(ii,"__esModule",{value:!0}),ii.coerceType=function(e,t){var n=oi[e];return n?n(t):t},ii.isBuiltIn=function(e){return!!ri[e]},ii.isSimple=function(e){return!!oi[e]};var ri={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},oi={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};var ai={};Object.defineProperty(ai,"__esModule",{value:!0}),ai.default=li;var si,ci=(si=ti)&&si.__esModule?si:{default:si};function li(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,(0,g.forEach)(e,(0,g.bind)(this.registerPackage,this))}function ui(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}li.prototype.getPackage=function(e){return this.packageMap[e]},li.prototype.getPackages=function(){return this.packages},li.prototype.registerPackage=function(t){t=(0,g.assign)({},t);var e=this.packageMap;ui(e,t,"prefix"),ui(e,t,"uri"),(0,g.forEach)(t.types,(0,g.bind)(function(e){this.registerType(e,t)},this)),e[t.uri]=e[t.prefix]=t,this.packages.push(t)},li.prototype.registerType=function(e,t){e=(0,g.assign)({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:(0,g.assign)(e.meta||{})});var i=(0,Jn.parseName)(e.name,t.prefix),n=i.name,r={};(0,g.forEach)(e.properties,(0,g.bind)(function(e){var t=(0,Jn.parseName)(e.name,i.prefix),n=t.name;(0,ii.isBuiltIn)(e.type)||(e.type=(0,Jn.parseName)(e.type,t.prefix).name),(0,g.assign)(e,{ns:t,name:n}),r[n]=e},this)),(0,g.assign)(e,{ns:i,name:n,propertiesByName:r}),(0,g.forEach)(e.extends,(0,g.bind)(function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(n)},this)),this.definePackage(e,t),this.typeMap[n]=e},li.prototype.mapTypes=function(i,r,e){var t=(0,ii.isBuiltIn)(i.name)?{name:i.name}:this.typeMap[i.name],o=this;function n(e){return a(e,!0)}function a(e,t){var n=(0,Jn.parseName)(e,(0,ii.isBuiltIn)(e)?"":i.prefix);o.mapTypes(n,r,t)}if(!t)throw new Error("unknown type <"+i.name+">");(0,g.forEach)(t.superClass,e?n:a),r(t,!e),(0,g.forEach)(t.traits,n)},li.prototype.getEffectiveDescriptor=function(e){var t=(0,Jn.parseName)(e),n=new ci.default(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},li.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};var pi={};Object.defineProperty(pi,"__esModule",{value:!0}),pi.default=vi;var di=mi(Gn),fi=mi(ai),hi=mi(Qn);function mi(e){return e&&e.__esModule?e:{default:e}}function vi(e){this.properties=new hi.default(this),this.factory=new di.default(this,this.properties),this.registry=new fi.default(e,this.properties),this.typeCache={}}vi.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},vi.prototype.getType=function(e){var t=this.typeCache,n=(0,g.isString)(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},vi.prototype.createAny=function(e,t,n){var i=(0,Jn.parseName)(e),r={$type:e,$instanceOf:function(e){return e===this.$type}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),(0,g.forEach)(n,function(e,t){(0,g.isObject)(e)&&void 0!==e.value?r[e.name]=e.value:r[t]=e}),r},vi.prototype.getPackage=function(e){return this.registry.getPackage(e)},vi.prototype.getPackages=function(){return this.registry.getPackages()},vi.prototype.getElementDescriptor=function(e){return e.$descriptor},vi.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},vi.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},vi.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var gi={};Object.defineProperty(gi,"__esModule",{value:!0}),Object.defineProperty(gi,"default",{enumerable:!0,get:function(){return bi.default}});var yi,bi=(yi=pi)&&yi.__esModule?yi:{default:yi};var _i={};function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(_i,"__esModule",{value:!0});var xi=String.fromCharCode,Ei=Object.prototype.hasOwnProperty,Ci=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,ki={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function Si(e,t,n,i){return i?Ei.call(ki,i)?ki[i]:"&"+i+";":xi(t||parseInt(n,16))}function Ti(e){return 3<e.length&&-1!==e.indexOf("&")?e.replace(Ci,Si):e}Object.keys(ki).forEach(function(e){ki[e.toUpperCase()]=ki[e]});var Oi="http://www.w3.org/2001/XMLSchema-instance",Ai="xsi",Ii="xsi:type",Di="non-whitespace outside of root node";function Pi(e){return new Error(e)}function Ri(e){return"missing namespace for prefix <"+e+">"}function Ni(e){return{get:e,enumerable:!0}}function Mi(e){var t,n={};for(t in e)n[t]=e[t];return n}function ji(e){return e+"$uri"}function $i(){return{line:0,column:0}}function Li(e){throw e}_i.Parser=function e(t){if(!this)return new e(t);var g,E,C,k,n,S,T,O,A,I=t&&t.proxy,i=Li,D=$i,P=!1,R=!1,r=null,N=!1;function M(e){e instanceof Error||(e=Pi(e)),i(r=e,D)}function j(e){n&&(e instanceof Error||(e=Pi(e)),n(e,D))}this.on=function(e,t){if("function"!=typeof t)throw Pi("required args <name, cb>");switch(e){case"openTag":E=t;break;case"text":g=t;break;case"closeTag":C=t;break;case"error":i=t;break;case"warn":n=t;break;case"cdata":k=t;break;case"attention":O=t;break;case"question":T=t;break;case"comment":S=t;break;default:throw Pi("unsupported event: "+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),"object"!==wi(e))throw Pi("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return n[Oi]=Ai,R=!0,A=n,this},this.parse=function(e){if("string"!=typeof e)throw Pi("required args <xml=string>");return r=null,function(a){var e,t,n,i,r,o,s,c,l,y,u=R?[]:null,b=R?function(e){var t,n,i={};for(t in e)i[n=e[t]]=n,i[ji(n)]=t;return i}(A):null,p=[],_=0,d=!1,f=!1,h=0,m=0,w="",x=0;function v(){if(null!==y)return y;var e,t,n,i,r,o,a,s,c,l,u,p=R&&b.xmlns,d=R&&P?[]:null,f=x,h=w,m=h.length,v={},g={};e:for(;f<m;f++)if(c=!1,!(32===(l=h.charCodeAt(f))||l<14&&8<l)){for(!(l<65||122<l||90<l&&l<97)||95!==l&&58!==l&&(j("illegal first char attribute name"),c=!0),u=f+1;u<m;u++)if(!(96<(l=h.charCodeAt(u))&&l<123||64<l&&l<91||47<l&&l<59||46===l||45===l||95===l)){if(32===l||l<14&&8<l){j("missing attribute value"),f=u;continue e}if(61===l)break;j("illegal attribute name char"),c=!0}if("xmlns:xmlns"===(s=h.substring(f,u))&&(j("illegal declaration of xmlns"),c=!0),34===(l=h.charCodeAt(u+1)))-1!==(u=h.indexOf('"',f=u+2))||-1!==(u=h.indexOf("'",f))&&(j("attribute value quote missmatch"),c=!0);else if(39===l)-1!==(u=h.indexOf("'",f=u+2))||-1!==(u=h.indexOf('"',f))&&(j("attribute value quote missmatch"),c=!0);else for(j("missing attribute value quotes"),c=!0,u+=1;u<m&&!(32===(l=h.charCodeAt(u+1))||l<14&&8<l);u++);for(-1===u&&(j("missing closing quotes"),u=m,c=!0),c||(o=h.substring(f,u)),f=u;u+1<m&&!(32===(l=h.charCodeAt(u+1))||l<14&&8<l);u++)f===u&&(j("illegal character after attribute end"),c=!0);if(f=u+1,!c)if(s in g)j("attribute <"+s+"> already defined");else if(g[s]=!0,R)if(P){if(null!==(r="xmlns"===s?"xmlns":120===s.charCodeAt(0)&&"xmlns:"===s.substr(0,6)?s.substr(6):null)){if(e=Ti(o),t=ji(r),!(a=A[e])){if("xmlns"===r||t in b&&b[t]!==e)for(;a="ns"+_++,void 0!==b[a];);else a=r;A[e]=a}b[r]!==a&&(i||(b=Mi(b),i=!0),b[r]=a,"xmlns"===r&&(b[ji(a)]=e,p=a),b[t]=e),v[s]=o;continue}d.push(s,o)}else-1!==(l=s.indexOf(":"))?(n=b[s.substring(0,l)])?((s=p===n?s.substr(l+1):n+s.substr(l))===Ii&&(o=-1!==(l=o.indexOf(":"))?(n=o.substring(0,l),(n=b[n]||n)+o.substring(l)):p+":"+o),v[s]=o):j(Ri(s.substring(0,l))):v[s]=o;else v[s]=o}if(P)for(f=0,m=d.length;f<m;f++){if(s=d[f++],o=d[f],-1!==(l=s.indexOf(":"))){if(!(n=b[s.substring(0,l)])){j(Ri(s.substring(0,l)));continue}(s=p===n?s.substr(l+1):n+s.substr(l))===Ii&&(o=-1!==(l=o.indexOf(":"))?(n=o.substring(0,l),(n=b[n]||n)+o.substring(l)):p+":"+o)}v[s]=o}return y=v}for(D=function(){for(var e,t=/(\r\n|\r|\n)/g,n=0,i=0,r=0,o=m;r<=h&&(e=t.exec(a))&&(o=e[0].length+e.index,!(h<o));)n+=1,r=o;return{data:-1==h?(i=o,a.substring(m)):0===m?(console.log(h-r),a.substring(m,h)):(i=h-r,-1==m?a.substring(h):a.substring(h,m+1)),line:n,column:i}},I&&(l=Object.create({},{name:Ni(function(){return s}),originalName:Ni(function(){return c}),attrs:Ni(v),ns:Ni(function(){return b})}));-1!==m;){if(-1===(h=60===a.charCodeAt(m)?m:a.indexOf("<",m)))return p.length?M("unexpected end of file"):0===m?M("missing start tag"):m<a.length&&a.substring(m).trim()&&j(Di);if(m!==h)if(p.length){if(g&&(g(a.substring(m,h),Ti,D),N))return}else if(a.substring(m,h).trim()&&(j(Di),N))return;if(33!==(r=a.charCodeAt(h+1)))if(63!==r){if(-1==(m=a.indexOf(">",h+1)))return M("unclosed tag");if(y={},47===r){if(f=!(d=!1),!p.length)return M("missing open tag");if(t=s=p.pop(),i=h+2+t.length,a.substring(h+2,i)!==t)return M("closing tag mismatch");for(;i<m;i++)if(!(32===(r=a.charCodeAt(i))||8<r&&r<14))return M("close tag")}else{if(f=47===a.charCodeAt(m-1)?(t=s=a.substring(h+1,m-1),d=!0):(t=s=a.substring(h+1,m),!(d=!0)),!(96<r&&r<123||64<r&&r<91||95===r||58===r))return M("illegal first char nodeName");for(i=1,n=t.length;i<n;i++)if(!(96<(r=t.charCodeAt(i))&&r<123||64<r&&r<91||47<r&&r<59||45===r||95===r||46==r)){if(32===r||r<14&&8<r){s=t.substring(0,i),y=null;break}return M("invalid nodeName")}f||p.push(s)}if(R){if(e=b,d&&(f||u.push(e),null!==y||(P=-1!==t.indexOf("xmlns",i))&&(x=i,w=t,v(),P=!1)),-1!==(r=(c=s).indexOf(":"))){if(!(o=b[s.substring(0,r)]))return M("missing namespace on <"+c+">");s=s.substr(r+1)}else o=b.xmlns;o&&(s=o+":"+s)}if(d&&(x=i,w=t,E&&(I?E(l,Ti,f,D):E(s,v,Ti,f,D),N)))return;if(f){if(C&&(C(I?l:s,Ti,d,D),N))return;R&&(b=d?e:u.pop())}m+=1}else{if(-1===(m=a.indexOf("?>",h)))return M("unclosed question");if(T&&(T(a.substring(h,m+2),D),N))return;m+=2}else{if(91===(r=a.charCodeAt(h+2))&&"CDATA["===a.substr(h+3,6)){if(-1===(m=a.indexOf("]]>",h)))return M("unclosed cdata");if(k&&(k(a.substring(h+9,m),D),N))return;m+=3;continue}if(45===r&&45===a.charCodeAt(h+3)){if(-1===(m=a.indexOf("--\x3e",h)))return M("unclosed comment");if(S&&(S(a.substring(h+4,m),Ti,D),N))return;m+=3;continue}if(-1===(m=a.indexOf(">",h+1)))return M("unclosed tag");if(O&&(O(a.substring(h,m+1),Ti,D),N))return;m+=1}}}(e),D=$i,N=!1,r},this.stop=function(){N=!0}},_i.decode=Ti;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Context=qi,Bi.ElementHandler=Qi,Bi.Reader=tr;var Vi,Fi=(Vi=gi)&&Vi.__esModule?Vi:{default:Vi};function Ui(e,t){return(0,Un.hasLowerCaseAlias)(t)?e.prefix+":"+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e.localName):e.name}function Hi(e){return new Error(e)}function zi(e){return e.$descriptor}function qi(e){(0,g.assign)(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw Hi("expected element");var t,n=this.elementsById,i=zi(e).idProperty;if(i&&(t=e.get(i.name))){if(n[t])throw Hi("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function Wi(){}function Gi(){}function Yi(){}function Ki(e,t){this.property=e,this.context=t}function Xi(e,t){this.element=t,this.propertyDesc=e}function Ji(){}function Qi(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function Zi(e,t,n){Qi.call(this,e,t,n)}function er(e,t,n){this.model=e,this.context=n}function tr(e){e instanceof Fi.default&&(e={model:e}),(0,g.assign)(this,{lax:!1},e)}Wi.prototype.handleEnd=function(){},Wi.prototype.handleText=function(){},Wi.prototype.handleNode=function(){},(Gi.prototype=Object.create(Wi.prototype)).handleNode=function(){return this},(Yi.prototype=Object.create(Wi.prototype)).handleText=function(e){this.body=(this.body||"")+e},(Ki.prototype=Object.create(Yi.prototype)).handleNode=function(e){if(this.element)throw Hi("expected no sub nodes");return this.element=this.createReference(e),this},Ki.prototype.handleEnd=function(){this.element.id=this.body},Ki.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},(Xi.prototype=Object.create(Yi.prototype)).handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=(0,ii.coerceType)(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},(Ji.prototype=Object.create(Yi.prototype)).handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},(Qi.prototype=Object.create(Ji.prototype)).addReference=function(e){this.context.addReference(e)},Qi.prototype.handleText=function(e){if(!zi(this.element).bodyProperty)throw Hi("unexpected body text <"+e+">");Yi.prototype.handleText.call(this,e)},Qi.prototype.handleEnd=function(){var e=this.body,t=this.element,n=zi(t).bodyProperty;n&&void 0!==e&&(e=(0,ii.coerceType)(n.type,e),t.set(n.name,e))},Qi.prototype.createElement=function(e){var r,t=e.attributes,n=this.type,o=zi(n),a=this.context,s=new n({}),c=this.model;return(0,g.forEach)(t,function(e,t){var n,i=o.propertiesByName[t];i&&i.isReference?i.isMany?(n=e.split(" "),(0,g.forEach)(n,function(e){a.addReference({element:s,property:i.ns.name,id:e})})):a.addReference({element:s,property:i.ns.name,id:e}):(i?e=(0,ii.coerceType)(i.type,e):"xmlns"!==t&&(r=(0,Jn.parseName)(t,o.ns.prefix),c.getPackage(r.prefix)&&a.addWarning({message:"unknown attribute <"+t+">",element:s,property:t,value:e})),s.set(t,e))}),s},Qi.prototype.getPropertyForNode=function(e){var t,n,i=e.name,r=(0,Jn.parseName)(i),o=this.type,a=this.model,s=zi(o),c=r.name,l=s.propertiesByName[c];if(l)return(0,Un.serializeAsType)(l)&&(t=e.attributes[Un.XSI_TYPE])?(t=function(e,t){var n=(0,Jn.parseName)(e);return function(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&0===i.indexOf(r)?e.prefix+":"+i.slice(r.length):n}(n,t.getPackage(n.prefix))}(t,a),n=a.getType(t),(0,g.assign)({},l,{effectiveType:zi(n).name})):l;var u=a.getPackage(r.prefix);if(u){if(t=Ui(r,u),n=a.getType(t),l=(0,g.find)(s.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return(0,g.assign)({},l,{effectiveType:zi(n).name})}else if(l=(0,g.find)(s.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return l;throw Hi("unrecognized element <"+r.name+">")},Qi.prototype.toString=function(){return"ElementDescriptor["+zi(this.type).name+"]"},Qi.prototype.valueHandler=function(e,t){return new Xi(e,t)},Qi.prototype.referenceHandler=function(e){return new Ki(e,this.context)},Qi.prototype.handler=function(e){return"Element"===e?new er(this.model,e,this.context):new Qi(this.model,e,this.context)},Qi.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,(0,ii.isSimple)(n))return this.valueHandler(t,i);var o=(r=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==o&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?((0,g.assign)(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},(Zi.prototype=Object.create(Qi.prototype)).createElement=function(e){var t=e.name,n=(0,Jn.parseName)(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&Ui(n,o)||t;if(!r.hasType(a))throw Hi("unexpected element <"+e.originalName+">");return Qi.prototype.createElement.call(this,e)},(er.prototype=Object.create(Ji.prototype)).createElement=function(e){var t=e.name,n=(0,Jn.parseName)(t).prefix,i=e.ns[n+"$uri"],r=e.attributes;return this.model.createAny(t,i,r)},er.prototype.handleChild=function(e){var t=new er(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},er.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},tr.prototype.fromXML=function(n,e,i){var r=e.rootHandler;e instanceof Qi?(r=e,e={}):"string"==typeof e?(r=this.handler(e),e={}):"string"==typeof r&&(r=this.handler(r));var t=this.model,a=this.lax,l=new qi((0,g.assign)({},e,{rootHandler:r})),o=new _i.Parser({proxy:!0}),s=function(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}();function c(e,t,n){var i=t(),r=i.line,o=i.column,a=i.data;"<"===a.charAt(0)&&-1!==a.indexOf(" ")&&(a=a.slice(0,a.indexOf(" "))+">");var s="unparsable content "+(a?a+" ":"")+"detected\n\tline: "+r+"\n\tcolumn: "+o+"\n\tnested error: "+e.message;if(n)return l.addWarning({message:s,error:e}),!0;throw Hi(s)}function u(e,t){return c(e,t,!0)}r.context=l,s.push(r);var p=/^<\?xml /i,d=/ encoding="([^"]+)"/i,f=/^utf-8$/i;function h(e,t){try{s.peek().handleText(e)}catch(e){u(e,t)}}var m=t.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},{});o.ns(m).on("openTag",function(e,i,t,n){var r=e.attrs||{},o=Object.keys(r).reduce(function(e,t){var n=i(r[t]);return e[t]=n,e},{});!function(e,t){var n=s.peek();try{s.push(n.handleNode(e))}catch(e){c(e,t,a)&&s.push(new Gi)}}({name:e.name,originalName:e.originalName,attributes:o,ns:e.ns},n)}).on("question",function(e){if(p.test(e)){var t=d.exec(e),n=t&&t[1];n&&!f.test(n)&&l.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}}).on("closeTag",function(){s.pop().handleEnd()}).on("cdata",h).on("text",function(e,t,n){!function(e,t){(e=e.trim())&&h(e,t)}(t(e),n)}).on("error",c).on("warn",u),function(e){setTimeout(e,0)}(function(){var t;try{o.parse(n),function(){var e,t,n=l.elementsById,i=l.references;for(e=0;t=i[e];e++){var r=t.element,o=n[t.id],a=zi(r).propertiesByName[t.property];if(o||l.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),a.isMany){var s=r.get(a.name),c=s.indexOf(t);-1===c&&(c=s.length),o?s[c]=o:s.splice(c,1)}else r.set(a.name,o)}}()}catch(e){t=e}var e=r.element;t||e||(t=Hi("failed to parse document as <"+r.type.$descriptor.name+">")),i(t,t?void 0:e,l)})},tr.prototype.handler=function(e){return new Zi(this.model,e)};var nr={};Object.defineProperty(nr,"__esModule",{value:!0}),nr.Namespaces=ar,nr.Writer=function(r){return r=(0,g.assign)({format:!1,preamble:!0},r||{}),{toXML:function(e,t){var n=t||new yr,i=new br(n,r.format);if(r.preamble&&i.append(ir),(new vr).build(e).serializeTo(i),!t)return n.value}}};var ir='<?xml version="1.0" encoding="UTF-8"?>\n',rr=/<|>|'|"|&|\n\r|\n/g,or=/<|>|&/g;function ar(t){var n={},i={},r={},o=[],a=[];this.byUri=function(e){return i[e]||t&&t.byUri(e)},this.add=function(e,t){i[e.uri]=e,t?o.push(e):a.push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return n[e||"xmlns"]},this.mapPrefix=function(e,t){n[e||"xmlns"]=t},this.logUsed=function(e){var t=e.uri;r[t]=this.byUri(t)},this.getUsed=function(e){return[].concat(o,a).filter(function(e){return r[e.uri]})}}function sr(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function cr(e){return(0,g.isString)(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function lr(e,t){return t.isGeneric?(0,g.assign)({localName:t.ns.localName},e):(0,g.assign)({localName:function(e,t){return(0,Un.hasLowerCaseAlias)(t)?function(e){return e.charAt(0).toLowerCase()+e.slice(1)}(e):e}(t.ns.localName,t.$pkg)},e)}var ur={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},pr={"<":"lt",">":"gt","&":"amp"};function dr(e,t,n){return(e=(0,g.isString)(e)?e:""+e).replace(t,function(e){return"&"+n[e]+";"})}function fr(e){this.tagName=e}function hr(){}function mr(e){this.tagName=e}function vr(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function gr(e,t){vr.call(this,e,t)}function yr(){this.value="",this.write=function(e){this.value+=e}}function br(t,e){var n=[""];this.append=function(e){return t.write(e),this},this.appendNewLine=function(){return e&&t.write("\n"),this},this.appendIndent=function(){return e&&t.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}fr.prototype.build=function(e){return this.element=e,this},fr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},hr.prototype.serializeValue=hr.prototype.serializeTo=function(e){e.append(this.escape?function(e){return dr(e,or,pr)}(this.value):this.value)},hr.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(or)&&(this.escape=!0),this},sr(mr,hr),mr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},vr.prototype.build=function(e){var t,n,i=(this.element=e).$descriptor,r=this.propertyDescriptor,o=i.isGeneric;return t=o?this.parseGeneric(e):this.parseNsAttributes(e),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(i),this.tagName=this.addTagName(this.ns),o||(n=function(i){var e=i.$descriptor;return(0,g.filter)(e.properties,function(e){var t=e.name;if(e.isVirtual)return!1;if(!i.hasOwnProperty(t))return!1;var n=i[t];return n!==e.default&&null!==n&&(!e.isMany||n.length)})}(e),this.parseAttributes(function(e){return(0,g.filter)(e,function(e){return e.isAttr})}(n)),this.parseContainments(function(e){return(0,g.filter)(e,function(e){return!e.isAttr})}(n))),this.parseGenericAttributes(e,t),this},vr.prototype.nsTagName=function(e){return lr(this.logNamespaceUsed(e.ns),e)},vr.prototype.nsPropertyTagName=function(e){return function(e,t){return(0,g.assign)({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},vr.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},vr.prototype.nsAttributeName=function(e){var t;if(t=(0,g.isString)(e)?(0,Jn.parseName)(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:(0,g.assign)({localName:t.localName},n)},vr.prototype.parseGeneric=function(n){var i=this,r=this.body,o=[];return(0,g.forEach)(n,function(e,t){"$body"===t?r.push((new hr).build({type:"String"},e)):"$children"===t?(0,g.forEach)(e,function(e){r.push(new vr(i).build(e))}):0===t.indexOf("$")||i.parseNsAttribute(n,t,e)&&o.push({name:t,value:e})}),o},vr.prototype.parseNsAttribute=function(e,t,n){var i,r=e.$model,o=(0,Jn.parseName)(t);if("xmlns"===o.prefix&&(i={prefix:o.localName,uri:n}),o.prefix||"xmlns"!==o.localName||(i={uri:n}),!i)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},vr.prototype.parseNsAttributes=function(i,e){var r=this,t=i.$attrs,o=[];return(0,g.forEach)(t,function(e,t){var n=r.parseNsAttribute(i,t,e);n&&o.push(n)}),o},vr.prototype.parseGenericAttributes=function(n,e){var i=this;(0,g.forEach)(e,function(t){if(t.name!==Un.XSI_TYPE)try{i.addAttribute(i.nsAttributeName(t.name),t.value)}catch(e){console.warn("missing namespace information for ",t.name,"=",t.value,"on",n,e)}})},vr.prototype.parseContainments=function(e){var o=this,a=this.body,s=this.element;(0,g.forEach)(e,function(n){var e=s.get(n.name),t=n.isReference;if(n.isMany||(e=[e]),n.isBody)a.push((new hr).build(n,e[0]));else if((0,ii.isSimple)(n.type))(0,g.forEach)(e,function(e){a.push(new mr(o.addTagName(o.nsPropertyTagName(n))).build(n,e))});else if(t)(0,g.forEach)(e,function(e){a.push(new fr(o.addTagName(o.nsPropertyTagName(n))).build(e))});else{var i=(0,Un.serializeAsType)(n),r=(0,Un.serializeAsProperty)(n);(0,g.forEach)(e,function(e){var t;t=i?new gr(o,n):r?new vr(o,n):new vr(o),a.push(t.build(e))})}})},vr.prototype.getNamespaces=function(e){var t,n=this.namespaces,i=this.parent;return n||(t=i&&i.getNamespaces(),e||!t?this.namespaces=n=new ar(t):n=t),n},vr.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix;return i.byUri(r)||i.add(e,t),i.mapPrefix(o,r),e},vr.prototype.logNamespaceUsed=function(e,t){var n,i,r,o=this.element.$model,a=this.getNamespaces(t),s=e.prefix,c=e.uri;if(!s&&!c)return{localName:e.localName};if(r=Un.DEFAULT_NS_MAP[s]||o&&(o.getPackage(s)||{}).uri,!(c=c||r||a.uriByPrefix(s)))throw new Error("no namespace uri given for prefix <"+s+">");if(!(e=a.byUri(c))){for(n=s,i=1;a.uriByPrefix(n);)n=s+"_"+i++;e=this.logNamespace({prefix:n,uri:c},r===c)}return s&&a.mapPrefix(s,c),e},vr.prototype.parseAttributes=function(e){var i=this,r=this.element;(0,g.forEach)(e,function(e){var t=r.get(e.name);if(e.isReference)if(e.isMany){var n=[];(0,g.forEach)(t,function(e){n.push(e.id)}),t=n.join(" ")}else t=t.id;i.addAttribute(i.nsAttributeName(e),t)})},vr.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),cr(e)},vr.prototype.addAttribute=function(e,t){var n=this.attrs;(0,g.isString)(t)&&(t=function(e){return dr(e,rr,ur)}(t)),n.push({name:e,value:t})},vr.prototype.serializeAttributes=function(t){var e=this.attrs,n=this.namespaces;n&&(e=function(e){return(0,g.map)(e.getUsed(),function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}})}(n).concat(e)),(0,g.forEach)(e,function(e){t.append(" ").append(cr(e.name)).append('="').append(e.value).append('"')})},vr.prototype.serializeTo=function(t){var e=this.body[0],n=e&&e.constructor!==hr;t.appendIndent().append("<"+this.tagName),this.serializeAttributes(t),t.append(e?">":" />"),e&&(n&&t.appendNewLine().indent(),(0,g.forEach)(this.body,function(e){e.serializeTo(t)}),n&&t.unindent().appendIndent(),t.append("</"+this.tagName+">")),t.appendNewLine()},sr(gr,vr),gr.prototype.parseNsAttributes=function(e){var t=vr.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(Un.XSI_TYPE),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t},gr.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};var _r={};Object.defineProperty(_r,"__esModule",{value:!0}),Object.defineProperty(_r,"Reader",{enumerable:!0,get:function(){return Bi.Reader}}),Object.defineProperty(_r,"Writer",{enumerable:!0,get:function(){return nr.Writer}});var wr={};Object.defineProperty(wr,"__esModule",{value:!0}),wr.default=Cr;var xr,Er=(xr=gi)&&xr.__esModule?xr:{default:xr};function Cr(e,t){Er.default.call(this,e,t)}(Cr.prototype=Object.create(Er.default.prototype)).fromXML=function(e,t,n,i){(0,g.isString)(t)||(i=n,n=t,t="cmmn:Definitions"),(0,g.isFunction)(n)&&(i=n,n={});var r=new _r.Reader((0,g.assign)({model:this,lax:!0},n)),o=r.handler(t);r.fromXML(e,o,i)};Cr.prototype.toXML=function(e,t,n){(0,g.isFunction)(t)&&(n=t,t={});var i,r,o=new _r.Writer(t);try{i=o.toXML(e)}catch(e){r=e}return n(r,i)};var kr={};Object.defineProperty(kr,"__esModule",{value:!0}),kr.default=function(e,t){var n=(0,g.assign)({},Pr,e);return new Sr.default(n,t)};var Sr=Dr(wr),Tr=Dr({name:"CMMN",uri:"http://www.omg.org/spec/CMMN/20151109/MODEL",types:[{name:"ApplicabilityRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["CMMNElement"]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"CMMNElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"CMMNElement",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"ManualActivationRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"Case",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"caseFileModel",type:"CaseFile",xml:{serialize:"property"}},{name:"casePlanModel",type:"Stage",xml:{serialize:"property"}},{name:"caseRoles",type:"CaseRoles"},{name:"input",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}}]},{name:"CaseFile",superClass:["CMMNElement"],properties:[{name:"caseFileItems",type:"CaseFileItem",isMany:!0}]},{name:"CaseFileItem",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"multiplicity",type:"String",isAttr:!0,default:"Unspecified"},{name:"definitionRef",type:"CaseFileItemDefinition",isAttr:!0,isReference:!0},{name:"sourceRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"targetRefs",type:"CaseFileItem",isAttr:!0,isReference:!0,isMany:!0},{name:"children",type:"Children",xml:{serialize:"property"}}]},{name:"CaseFileItemDefinition",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"definitionType",type:"String",default:"http://www.omg.org/spec/CMMN/DefinitionType/Unspecified",isAttr:!0},{name:"properties",type:"Property",isMany:!0},{name:"structureRef",type:"String",isAttr:!0},{name:"importRef",type:"Import",isAttr:!0,isReference:!0}]},{name:"CaseFileItemOnPart",superClass:["OnPart"],properties:[{name:"standardEvent",type:"String"},{name:"sourceRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"CaseParameter",superClass:["Parameter"],properties:[{name:"bindingRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"bindingRefinement",type:"Expression",xml:{serialize:"property"}}]},{name:"CaseRoles",superClass:["Parameter"],properties:[{name:"role",type:"Role",isMany:!0}]},{name:"CaseTask",superClass:["Task"],properties:[{name:"parameterMapping",type:"ParameterMapping",isMany:!0},{name:"caseRefExpression",type:"Expression",xml:{serialize:"property"}},{name:"caseRef",type:"String",isAttr:!0}]},{name:"Children",superClass:["CMMNElement"],properties:[{name:"caseFileItems",type:"CaseFileItem",isMany:!0}]},{name:"CMMNElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionElements",type:"ExtensionElements"},{name:"extensionDefinitions",type:"ExtensionDefinition",isReference:!0,isMany:!0}]},{name:"Definitions",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0,default:"http://www.w3.org/1999/XPath"},{name:"exporter",isAttr:!0,type:"String"},{name:"exporterVersion",isAttr:!0,type:"String"},{name:"author",isAttr:!0,type:"String"},{name:"creationDate",type:"DateTime",isAttr:!0},{name:"imports",type:"Import",isMany:!0},{name:"caseFileItemDefinitions",type:"CaseFileItemDefinition",isMany:!0},{name:"cases",type:"Case",isMany:!0},{name:"processes",type:"Process",isMany:!0},{name:"decisions",type:"Decision",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"relationships",type:"Relationship",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"CMMNDI",type:"cmmndi:CMMNDI"}]},{name:"DiscretionaryItem",superClass:["TableItem"],properties:[{name:"itemControl",type:"PlanItemControl",xml:{serialize:"property"}},{name:"definitionRef",type:"PlanItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"entryCriteria",type:"EntryCriterion",isMany:!0},{name:"exitCriteria",type:"ExitCriterion",isMany:!0}]},{name:"EventListener",superClass:["PlanItemDefinition"]},{name:"Expression",superClass:["CMMNElement"],properties:[{name:"language",type:"String",isAttr:!0},{name:"body",isBody:!0,type:"String"}]},{name:"HumanTask",superClass:["Task"],properties:[{name:"planningTable",type:"PlanningTable"},{name:"performerRef",type:"Role",isAttr:!0,isReference:!0}]},{name:"IfPart",superClass:["CMMNElement"],properties:[{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"condition",type:"Expression",xml:{serialize:"property"}}]},{name:"Import",properties:[{name:"location",isAttr:!0,type:"String"},{name:"namespace",type:"String",isAttr:!0},{name:"importType",isAttr:!0,type:"String"}]},{name:"Milestone",superClass:["PlanItemDefinition"]},{name:"On",isAbstract:!0,superClass:["CMMNElement"]},{name:"OnPart",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"Parameter",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ParameterMapping",properties:[{name:"sourceRef",type:"Parameter",isAttr:!0,isReference:!0},{name:"targetRef",type:"Parameter",isAttr:!0,isReference:!0},{name:"transformation",type:"Expression",xml:{serialize:"property"}}]},{name:"PlanFragment",superClass:["PlanItemDefinition"],properties:[{name:"planItems",type:"PlanItem",isMany:!0},{name:"sentries",type:"Sentry",isMany:!0}]},{name:"PlanItem",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"definitionRef",type:"PlanItemDefinition",isAttr:!0,isReference:!0},{name:"itemControl",type:"PlanItemControl",xml:{serialize:"property"}},{name:"entryCriteria",type:"EntryCriterion",isMany:!0},{name:"exitCriteria",type:"ExitCriterion",isMany:!0}]},{name:"PlanItemControl",superClass:["CMMNElement"],properties:[{name:"repetitionRule",type:"RepetitionRule"},{name:"requiredRule",type:"RequiredRule"},{name:"manualActivationRule",type:"ManualActivationRule"}]},{name:"PlanItemDefinition",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"defaultControl",type:"PlanItemControl",xml:{serialize:"property"}}]},{name:"PlanItemOnPart",superClass:["OnPart"],properties:[{name:"standardEvent",type:"String"},{name:"sourceRef",type:"PlanItem",isAttr:!0,isReference:!0},{name:"exitCriterionRef",type:"ExitCriterion",isAttr:!0,isReference:!0}]},{name:"PlanningTable",superClass:["TableItem"],properties:[{name:"tableItems",type:"TableItem",isMany:!0},{name:"applicabilityRules",type:"ApplicabilityRule",isMany:!0}]},{name:"Process",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"implementationType",type:"String",isAttr:!0,default:"http://www.omg.org/spec/CMMN/ProcessType/Unspecified"},{name:"externalRef",type:"String",isAttr:!0},{name:"input",type:"ProcessParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"ProcessParameter",isMany:!0,xml:{serialize:"property"}}]},{name:"ProcessParameter",superClass:["Parameter"]},{name:"ProcessTask",superClass:["Task"],properties:[{name:"parameterMapping",type:"ParameterMapping",isMany:!0},{name:"processRefExpression",type:"Expression",xml:{serialize:"property"}},{name:"processRef",type:"String",isAttr:!0}]},{name:"Property",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",type:"String",isAttr:!0,default:"http://www.omg.org/spec/CMMN/PropertyType/Unspecified"}]},{name:"RepetitionRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"RequiredRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"Role",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"Sentry",superClass:["CMMNElement"],properties:[{name:"onParts",type:"OnPart",isMany:!0},{name:"ifPart",type:"IfPart"},{name:"name",isAttr:!0,type:"String"}]},{name:"Stage",superClass:["PlanFragment"],properties:[{name:"planningTable",type:"PlanningTable"},{name:"planItemDefinitions",type:"PlanItemDefinition",isMany:!0},{name:"autoComplete",isAttr:!0,type:"Boolean"},{name:"exitCriteria",type:"ExitCriterion",isMany:!0}]},{name:"TableItem",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"authorizedRoleRefs",type:"Role",isAttr:!0,isReference:!0,isMany:!0},{name:"applicabilityRuleRefs",type:"ApplicabilityRule",isAttr:!0,isReference:!0,isMany:!0}]},{name:"Task",superClass:["PlanItemDefinition"],properties:[{name:"input",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}},{name:"isBlocking",isAttr:!0,default:!0,type:"Boolean"}]},{name:"TimerEventListener",superClass:["EventListener"],properties:[{name:"timerExpression",type:"Expression",xml:{serialize:"property"}},{name:"timerStart",type:"StartTrigger"}]},{name:"UserEventListener",superClass:["EventListener"],properties:[{name:"authorizedRoleRefs",type:"Role",isMany:!0,isAttr:!0}]},{name:"DateTime",superClass:[]},{name:"StartTrigger",isAbstract:!0,superClass:["CMMNElement"]},{name:"PlanItemStartTrigger",superClass:["StartTrigger"],properties:[{name:"standardEvent",type:"String",isAttr:!0},{name:"sourceRef",type:"PlanItem",isAttr:!0,isReference:!0}]},{name:"CaseFileItemStartTrigger",superClass:["StartTrigger"],properties:[{name:"standardEvent",type:"String",isAttr:!0},{name:"sourceRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition"}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",isAttr:!0,default:!1,type:"Boolean"}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Relationship",properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,type:"Element"},{name:"target",isMany:!0,type:"Element"}]},{name:"Documentation",superClass:["CMMNElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"DecisionTask",superClass:["Task"],properties:[{name:"mappings",type:"ParameterMapping",isMany:!0},{name:"decisionRef",type:"String",isAttr:!0},{name:"decisionRefExpression",type:"Expression",xml:{serialize:"property"}}]},{name:"Decision",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"implementationType",type:"String",isAttr:!0,default:"http://www.omg.org/spec/CMMN/DecisionType/Unspecified"},{name:"input",type:"DecisionParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"DecisionParameter",isMany:!0,xml:{serialize:"property"}},{name:"externalRef",type:"String",isAttr:!0}]},{name:"DecisionParameter",superClass:["Parameter"]},{name:"Criterion",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sentryRef",type:"Sentry",isAttr:!0,isReference:!0}]},{name:"EntryCriterion",superClass:["Criterion"]},{name:"ExitCriterion",superClass:["Criterion"]}],emumerations:[{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"CaseFileItemTransition",literalValues:[{name:"addChild"},{name:"addReference"},{name:"create"},{name:"delete"},{name:"removeChild"},{name:"removeReference"},{name:"replace"},{name:"update"}]},{name:"MultiplicityEnum",literalValues:[{name:"ZeroOrOne"},{name:"ZeroOrMore"},{name:"ExactlyOne"},{name:"OneOrMore"},{name:"Unspecified"},{name:"Unknown"}]},{name:"PlanItemTransition",literalValues:[{name:"close"},{name:"complete"},{name:"create"},{name:"disable"},{name:"enable"},{name:"exit"},{name:"fault"},{name:"manualStart"},{name:"occur"},{name:"parentResume"},{name:"parentSuspend"},{name:"reactivate"},{name:"reenable"},{name:"resume"},{name:"start"},{name:"suspend"},{name:"terminate"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]}],associations:[],xml:{tagAlias:"lowerCase",typePrefix:"t"},prefix:"cmmn"}),Or=Dr({name:"CMMNDI",uri:"http://www.omg.org/spec/CMMN/20151109/CMMNDI",types:[{name:"CMMNDI",properties:[{name:"diagrams",type:"CMMNDiagram",isMany:!0},{name:"styles",type:"CMMNStyle",isMany:!0}]},{name:"CMMNDiagram",properties:[{name:"cmmnElementRef",isAttr:!0,type:"cmmn:CMMNElement",isReference:!0},{name:"Size",type:"dc:Dimension",xml:{serialize:"xsi:type"}},{name:"diagramElements",type:"CMMNDiagramElement",isMany:!0}],superClass:["di:Diagram"]},{name:"CMMNDiagramElement",superClass:["di:DiagramElement"]},{name:"CMMNShape",properties:[{name:"cmmnElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"label",type:"CMMNLabel"},{name:"isCollapsed",isAttr:!0,type:"Boolean"},{name:"isPlanningTableCollapsed",isAttr:!0,type:"Boolean"}],superClass:["CMMNDiagramElement","di:Shape"]},{name:"CMMNEdge",properties:[{name:"label",type:"CMMNLabel"},{name:"cmmnElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"sourceCMMNElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"targetCMMNElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"isStandardEventVisible",type:"Boolean",isAttr:!0}],superClass:["CMMNDiagramElement","di:Edge"]},{name:"CMMNLabel",superClass:["di:Shape"]},{name:"CMMNStyle",properties:[{name:"FillColor",type:"dc:Color",xml:{serialize:"xsi:type"}},{name:"StrokeColor",type:"dc:Color",xml:{serialize:"xsi:type"}},{name:"FontColor",type:"dc:Color",xml:{serialize:"xsi:type"}},{name:"fontFamily",type:"String",isAttr:!0},{name:"fontSize",type:"Real",isAttr:!0},{name:"fontItalic",type:"Boolean",isAttr:!0},{name:"fontBold",type:"Boolean",isAttr:!0},{name:"fontUnderline",type:"Boolean",isAttr:!0},{name:"fontStrikeThrough",type:"Boolean",isAttr:!0}],superClass:["di:Style"]}],associations:[],prefix:"cmmndi"}),Ar=Dr({name:"DC",uri:"http://www.omg.org/spec/CMMN/20151109/DC",types:[{name:"rgb"},{name:"Real"},{name:"Color",properties:[{name:"red",type:"rgb",isAttr:!0},{name:"green",type:"rgb",isAttr:!0},{name:"blue",type:"rgb",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",isAttr:!0},{name:"y",type:"Real",isAttr:!0}]},{name:"Dimension",properties:[{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",isAttr:!0},{name:"y",type:"Real",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]}),Ir=Dr({name:"DI",uri:"http://www.omg.org/spec/CMMN/20151109/DI",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"style",type:"Style"},{name:"sharedStyle",type:"Style",isReference:!0,isAttr:!0},{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"waypoint",isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"name",type:"String",isAttr:!0},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,default:300,type:"double"}]},{name:"Shape",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Extension",properties:[{name:"values",type:"Element",isMany:!0}]}],associations:[],prefix:"di",xml:{tagAlias:"lowerCase"}});function Dr(e){return e&&e.__esModule?e:{default:e}}var Pr={cmmn:Tr.default,cmmndi:Or.default,dc:Ar.default,di:Ir.default};var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0}),Object.defineProperty(Rr,"default",{enumerable:!0,get:function(){return Mr.default}});var Nr,Mr=(Nr=kr)&&Nr.__esModule?Nr:{default:Nr};var jr={};function $r(e,t,n){var i=!n||-1===e.indexOf(t);return i&&e.push(t),i}function Lr(e,i,r){r=r||0,(0,g.isArray)(e)||(e=[e]),(0,g.forEach)(e,function(e,t){var n=i(e,t,r);(0,g.isArray)(n)&&n.length&&Lr(n,i,r+1)})}function Br(e,r,o){var a=[],s=[];return Lr(e,function(e,t,n){$r(a,e,r);var i=e.children;if((-1===o||n<o)&&i&&$r(s,i,r))return i}),a}function Vr(e,a){var s,c,l,u;return a=!!a,(0,g.isArray)(e)||(e=[e]),(0,g.forEach)(e,function(e){var t=e;e.waypoints&&!a&&(t=Vr(e.waypoints,!0));var n=t.x,i=t.y,r=t.height||0,o=t.width||0;(n<s||void 0===s)&&(s=n),(i<c||void 0===c)&&(c=i),(l<n+o||void 0===l)&&(l=n+o),(u<i+r||void 0===u)&&(u=i+r)}),{x:s,y:c,height:u-c,width:l-s}}function Fr(e,t){return(0,g.assign)({},e||{},t||{})}Object.defineProperty(jr,"__esModule",{value:!0}),jr.add=$r,jr.eachElement=Lr,jr.selfAndChildren=Br,jr.selfAndDirectChildren=function(e,t){return Br(e,!t,1)},jr.selfAndAllChildren=function(e,t){return Br(e,!t,-1)},jr.getClosure=function(e,t,n){(0,g.isUndefined)(t)&&(t=!0);(0,g.isObject)(t)&&(n=t,t=!0);var i=Fr((n=n||{}).allShapes),r=Fr(n.allConnections),o=Fr(n.enclosedElements),a=Fr(n.enclosedConnections),s=Fr(n.topLevel,t&&(0,g.groupBy)(e,function(e){return e.id}));function c(e){s[e.source.id]&&s[e.target.id]&&(s[e.id]=[e]),i[e.source.id]&&i[e.target.id]&&(a[e.id]=o[e.id]=e),r[e.id]=e}return Lr(e,function(e){if(!(o[e.id]=e).waypoints)return i[e.id]=e,(0,g.forEach)(e.incoming,c),(0,g.forEach)(e.outgoing,c),e.children;a[e.id]=r[e.id]=e}),{allShapes:i,allConnections:r,topLevel:s,enclosedConnections:a,enclosedElements:o}},jr.getBBox=Vr,jr.getEnclosedElements=function(e,n){var i={};return(0,g.forEach)(e,function(e){var t=e;t.waypoints&&(t=Vr(t)),!(0,g.isNumber)(n.y)&&t.x>n.x&&(i[e.id]=e),!(0,g.isNumber)(n.x)&&t.y>n.y&&(i[e.id]=e),t.x>n.x&&t.y>n.y&&((0,g.isNumber)(n.width)&&(0,g.isNumber)(n.height)&&t.width+t.x<n.width+n.x&&t.height+t.y<n.height+n.y?i[e.id]=e:(0,g.isNumber)(n.width)&&(0,g.isNumber)(n.height)||(i[e.id]=e))}),i},jr.getType=function(e){if("waypoints"in e)return"connection";if("x"in e)return"shape";return"root"};var Ur={};function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(e,t){return Math.round(e*t)/t}function qr(e){return(0,g.isNumber)(e)?e+"px":e}function Wr(e,t,n){var i=(0,xe.create)("g");(0,xe.classes)(i).add(t);var r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.default=Yr;var Gr={shape:["x","y","width","height"],connection:["waypoints"]};function Yr(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._init(e||{})}function Kr(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Yr.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],Yr.prototype._init=function(e){var t=this._eventBus,n=this._container=function(e){var t=(e=(0,g.assign)({},{width:"100%",height:"100%"},e)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),(0,g.assign)(n.style,{position:"relative",overflow:"hidden",width:qr(e.width),height:qr(e.height)}),t.appendChild(n),n}(e),i=this._svg=(0,xe.create)("svg");(0,xe.attr)(i,{width:"100%",height:"100%"}),(0,xe.append)(n,i);var r=this._viewport=Wr(i,"viewport");!(this._layers={})!==e.deferUpdate&&(this._viewboxChanged=(0,g.debounce)((0,g.bind)(this._viewboxChanged,this),300)),t.on("diagram.init",function(){t.fire("canvas.init",{svg:i,viewport:r})},this),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],function(){delete this._cachedViewbox},this),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},Yr.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},Yr.prototype._clear=function(){var n=this;this._elementRegistry.getAll().forEach(function(e){var t=(0,jr.getType)(e);"root"===t?n.setRootElement(null,!0):n._removeElement(e,t)}),delete this._cachedViewbox},Yr.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},Yr.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},Yr.prototype._createLayer=function(e,n){n||(n=0);var t=(0,g.reduce)(this._layers,function(e,t){return n>=t.index&&e++,e},0);return{group:Wr(this._viewport,"layer-"+e,t),index:n}},Yr.prototype.getContainer=function(){return this._container},Yr.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),(i=this._elementRegistry._elements[e.id])&&((0,g.forEach)([i.gfx,i.secondaryGfx],function(e){e&&(n?(0,xe.classes)(e).add(t):(0,xe.classes)(e).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},Yr.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},Yr.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},Yr.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));var n=this.getGraphics(e);return(0,xe.classes)(n).has(t)},Yr.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},Yr.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},Yr.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootElement,i=this._elementRegistry,r=this._eventBus;if(n){if(!t)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:n}),r.fire("root.removed",{element:n}),i.remove(n)}if(e){var o=this.getDefaultLayer();r.fire("root.add",{element:e}),i.add(e,o,this._svg),r.fire("root.added",{element:e,gfx:o})}return this._rootElement=e},Yr.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=Gr[e];if(!(0,g.every)(n,function(e){return void 0!==t[e]}))throw new Error("must supply { "+n.join(", ")+" } with "+e)},Yr.prototype._setParent=function(e,t,n){(0,Tn.add)(t.children,e,n),e.parent=t},Yr.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);var a=o.create(e,t,i);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t},Yr.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},Yr.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},Yr.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),i.remove(e),(0,Tn.remove)(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},Yr.prototype.removeShape=function(e){return this._removeElement(e,"shape")},Yr.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},Yr.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},Yr.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},Yr.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},Yr.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,i,r,o,a,s=this._viewport,c=this.getSize();return t?(this._changeViewbox(function(){r=Math.min(c.width/t.width,c.height/t.height);var e=this._svg.createSVGMatrix().scale(r).translate(-t.x,-t.y);(0,xe.transform)(s,e)}),t):(e=this.getDefaultLayer().getBBox(),n=(i=(0,xe.transform)(s))?i.matrix:(0,xe.createMatrix)(),r=zr(n.a,1e3),o=zr(-n.e||0,1e3),a=zr(-n.f||0,1e3),t=this._cachedViewbox={x:o?o/r:0,y:a?a/r:0,width:c.width/r,height:c.height/r,scale:r,inner:{width:e.width,height:e.height,x:e.x,y:e.y},outer:c})},Yr.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=(0,g.assign)({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Kr(t,n)}),{x:n.e,y:n.f}},Yr.prototype.zoom=function(e,t){return e?"fit-viewport"===e?this._fitViewport(t):(this._changeViewbox(function(){"object"!==Hr(t)&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),zr(i.a,1e3)):this.viewbox(e).scale;var n,i},Yr.prototype._fitViewport=function(e){var t,n,i=this.viewbox(),r=i.outer,o=i.inner;return n=0<=o.x&&0<=o.y&&o.x+o.width<=r.width&&o.y+o.height<=r.height&&!e?{x:0,y:0,width:Math.max(o.width+o.x,r.width),height:Math.max(o.height+o.y,r.height)}:(t=Math.min(1,r.width/o.width,r.height/o.height),{x:o.x+(e?o.width/2-r.width/t/2:0),y:o.y+(e?o.height/2-r.height/t/2:0),width:r.width/t,height:r.height/t}),this.viewbox(n),this.viewbox(!1).scale},Yr.prototype._setZoom=function(e,t){var n,i,r,o,a=this._svg,s=this._viewport,c=a.createSVGMatrix(),l=a.createSVGPoint(),u=(i=s.getCTM()).a;return o=t?(n=(0,g.assign)(l,t).matrixTransform(i.inverse()),r=c.translate(n.x,n.y).scale(1/u*e).translate(-n.x,-n.y),i.multiply(r)):c.scale(e),Kr(this._viewport,o),o},Yr.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},Yr.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();e.waypoints?t=this.getGraphics(e).getBBox():t=e;return{x:t.x*n.scale-n.x*n.scale,y:t.y*n.scale-n.y*n.scale,width:t.width*n.scale,height:t.height*n.scale}},Yr.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Xr={};function Jr(){this._uid=12}Object.defineProperty(Xr,"__esModule",{value:!0}),(Xr.default=Jr).prototype.createRoot=function(e){return this.create("root",e)},Jr.prototype.createLabel=function(e){return this.create("label",e)},Jr.prototype.createShape=function(e){return this.create("shape",e)},Jr.prototype.createConnection=function(e){return this.create("connection",e)},Jr.prototype.create=function(e,t){return(t=(0,g.assign)({},t||{})).id||(t.id=e+"_"+this._uid++),(0,$.create)(e,t)};var Qr={};Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.default=eo;var Zr="data-element-id";function eo(e){this._elements={},this._eventBus=e}eo.$inject=["eventBus"],eo.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),(0,xe.attr)(t,Zr,i),n&&(0,xe.attr)(n,Zr,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},eo.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&((0,xe.attr)(i.gfx,Zr,""),i.secondaryGfx&&(0,xe.attr)(i.secondaryGfx,Zr,""),delete t[n])},eo.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},eo.prototype.get=function(e){var t;t="string"==typeof e?e:e&&(0,xe.attr)(e,Zr);var n=this._elements[t];return n&&n.element},eo.prototype.filter=function(n){var i=[];return this.forEach(function(e,t){n(e,t)&&i.push(e)}),i},eo.prototype.getAll=function(){return this.filter(function(e){return e})},eo.prototype.forEach=function(r){var o=this._elements;Object.keys(o).forEach(function(e){var t=o[e],n=t.element,i=t.gfx;return r(n,i)})},eo.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},eo.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var to={};function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(to,"__esModule",{value:!0}),to.default=ro;var io=Array.prototype.slice;function ro(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function oo(){}ro.prototype.on=function(e,t,n,i){if(e=(0,g.isArray)(e)?e:[e],(0,g.isFunction)(t)&&(i=n,n=t,t=1e3),!(0,g.isNumber)(t))throw new Error("priority must be a number");var r=n;i&&((r=(0,g.bind)(n,i)).__fn=n.__fn||n);var o=this;e.forEach(function(e){o._addListener(e,{priority:t,callback:r,next:null})})},ro.prototype.once=function(t,e,n,i){var r=this;if((0,g.isFunction)(e)&&(i=n,n=e,e=1e3),!(0,g.isNumber)(e))throw new Error("priority must be a number");function o(){var e=n.apply(i,arguments);return r.off(t,o),e}o.__fn=n,this.on(t,e,o)},ro.prototype.off=function(e,t){e=(0,g.isArray)(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},ro.prototype.createEvent=function(e){var t=new oo;return t.init(e),t},ro.prototype.fire=function(e,t){var n,i,r,o;if(o=io.call(arguments),"object"===no(e)&&(e=(n=e).type),!e)throw new Error("no event type specified");if(i=this._listeners[e]){n=t instanceof oo?t:this.createEvent(t);var a=(o[0]=n).type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==a&&(n.type=a)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},ro.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},ro.prototype._destroy=function(){this._listeners={}},ro.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i},ro.prototype._invokeListener=function(e,t,n){var i;try{void 0!==(i=function(e,t){return e.apply(null,t)}(n.callback,t))&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return i},ro.prototype._addListener=function(e,t){var n,i=this._getListeners(e);if(i){for(;i;){if(i.priority<t.priority)return t.next=i,void(n?n.next=t:this._setListeners(e,t));i=(n=i).next}n.next=t}else this._setListeners(e,t)},ro.prototype._getListeners=function(e){return this._listeners[e]},ro.prototype._setListeners=function(e,t){this._listeners[e]=t},ro.prototype._removeListener=function(e,t){var n,i,r,o=this._getListeners(e);if(t)for(;o;)n=o.next,(r=o.callback)!==t&&r.__fn!==t||(i?i.next=n:this._setListeners(e,n)),i=o,o=n;else this._setListeners(e,null)},oo.prototype.stopPropagation=function(){this.cancelBubble=!0},oo.prototype.preventDefault=function(){this.defaultPrevented=!0},oo.prototype.init=function(e){(0,g.assign)(this,e||{})};var ao={};Object.defineProperty(ao,"__esModule",{value:!0}),ao.getVisual=function(e){return(0,at.query)(".djs-visual",e)},ao.getChildren=function(e){return e.parentNode.childNodes[1]};var so={};function co(e,t){this._eventBus=e,this._elementRegistry=t}function lo(e,t,n){t.insertBefore(e,n||t.firstChild)}Object.defineProperty(so,"__esModule",{value:!0}),(so.default=co).$inject=["eventBus","elementRegistry"],co.prototype._getChildren=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=(0,ao.getChildren)(n))||(t=(0,xe.create)("g"),(0,xe.classes)(t).add("djs-children"),(0,xe.append)(n.parentNode,t)):t=n,t},co.prototype._clear=function(e){var t=(0,ao.getVisual)(e);return(0,at.clear)(t),t},co.prototype._createContainer=function(e,t,n){var i=(0,xe.create)("g");(0,xe.classes)(i).add("djs-group"),void 0!==n?lo(i,t,t.childNodes[n]):(0,xe.append)(t,i);var r=(0,xe.create)("g");(0,xe.classes)(r).add("djs-element"),(0,xe.classes)(r).add("djs-"+e),(0,xe.append)(i,r);var o=(0,xe.create)("g");return(0,xe.classes)(o).add("djs-visual"),(0,xe.append)(r,o),r},co.prototype.create=function(e,t,n){var i=this._getChildren(t.parent);return this._createContainer(e,i,n)},co.prototype.updateContainments=function(e){var t,i=this,r=this._elementRegistry;t=(0,g.reduce)(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),(0,g.forEach)(t,function(e){var t=e.children;if(t){var n=i._getChildren(e);(0,g.forEach)(t.slice().reverse(),function(e){lo(r.getGraphics(e).parentNode,n)})}})},co.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},co.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},co.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},co.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},co.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if("shape"===e)this.drawShape(i,t),(0,Je.translate)(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(i,t)}t.hidden?(0,xe.attr)(n,"display","none"):(0,xe.attr)(n,"display","block")}},co.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);(0,xe.remove)(t.parentNode)};var uo={};Object.defineProperty(uo,"__esModule",{value:!0}),uo.default=vo;var po=ho(l),fo=ho(be);function ho(e){return e&&e.__esModule?e:{default:e}}var mo=1;function vo(e,t){fo.default.call(this,e,mo),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}(0,po.default)(vo,fo.default),vo.prototype.canRender=function(){return!0},vo.prototype.drawShape=function(e,t){var n=(0,xe.create)("rect");return(0,xe.attr)(n,{x:0,y:0,width:t.width||0,height:t.height||0}),(0,xe.attr)(n,this.SHAPE_STYLE),(0,xe.append)(e,n),n},vo.prototype.drawConnection=function(e,t){var n=(0,Ke.createLine)(t.waypoints,this.CONNECTION_STYLE);return(0,xe.append)(e,n),n},vo.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width,r=[["M",t,n],["l",i,0],["l",0,e.height],["l",-i,0],["z"]];return(0,Ke.componentsToPath)(r)},vo.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,r=[];for(t=0;n=i[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return(0,Ke.componentsToPath)(r)},vo.$inject=["eventBus","styles"];var go={};Object.defineProperty(go,"__esModule",{value:!0}),go.default=function(){var i={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},r=this;this.cls=function(e,t,n){var i=this.style(t,n);return(0,g.assign)(i,{class:e})},this.style=function(e,t){(0,g.isArray)(e)||t||(t=e,e=[]);var n=(0,g.reduce)(e,function(e,t){return(0,g.assign)(e,i[t]||{})},{});return t?(0,g.assign)(n,t):n},this.computeStyle=function(e,t,n){return(0,g.isArray)(t)||(n=t,t=[]),r.style(t||[],(0,g.assign)({},n,e||{}))}};var yo={};Object.defineProperty(yo,"__esModule",{value:!0}),yo.default=void 0;var bo=wo(uo),_o=wo(go);function wo(e){return e&&e.__esModule?e:{default:e}}var xo={__init__:["defaultRenderer"],defaultRenderer:["type",bo.default],styles:["type",_o.default]};yo.default=xo;var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.default=void 0;var Co=Io(yo),ko=Io(Ur),So=Io(Qr),To=Io(Xr),Oo=Io(to),Ao=Io(so);function Io(e){return e&&e.__esModule?e:{default:e}}var Do={__depends__:[Co.default],__init__:["canvas"],canvas:["type",ko.default],elementRegistry:["type",So.default],elementFactory:["type",To.default],eventBus:["type",Oo.default],graphicsFactory:["type",Ao.default]};Eo.default=Do;var Po={};function Ro(e){return(Ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Po,"__esModule",{value:!0});var No=/^class /;function Mo(e){return"[object Array]"===Object.prototype.toString.call(e)}function jo(){var e=Array.prototype.slice.call(arguments);1===e.length&&Mo(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t}var $o=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Lo=/^function\s*[^(]*\(\s*([^)]*)\)/m,Bo=/\/\*([^*]*)\*\//m;function Vo(e){if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(function(e){return No.test(e.toString())}(e)?$o:Lo);return t&&t[1]&&t[1].split(",").map(function(e){return(t=e.match(Bo))?t[1].trim():e.trim()})||[]}function Fo(){var n=[];this.factory=function(e,t){return n.push([e,"factory",t]),this},this.value=function(e,t){return n.push([e,"value",t]),this},this.type=function(e,t){return n.push([e,"type",t]),this},this.forEach=function(e){n.forEach(e)}}var Uo="function"==typeof Symbol&&"symbol"===Ro(Symbol.iterator)?function(e){return Ro(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Ro(e)};function Ho(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function zo(e,t){return Object.hasOwnProperty.call(e,t)}Po.annotate=jo,Po.Module=Fo,Po.Injector=function d(e,r){r=r||{get:function(e,t){if(s.push(e),!1===t)return null;throw l('No provider for "'+e+'"!')}};function o(e,t){if(!h[e]&&-1!==e.indexOf(".")){for(var n=e.split("."),i=o(n.shift());n.length;)i=i[n.shift()];return i}if(zo(c,e))return c[e];if(zo(h,e)){if(-1!==s.indexOf(e))throw s.push(e),l("Cannot resolve circular dependency!");return s.push(e),c[e]=h[e][0](h[e][1]),s.pop(),c[e]}return r.get(e,t)}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof e){if(!Mo(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=jo(e.slice())}return{fn:e,dependencies:(e.$inject||Vo(e)).map(function(e){return zo(t,e)?t[e]:o(e)})}}function t(e){var t=a(e),n=t.dependencies,i=t.fn;return new(Function.prototype.bind.apply(i,[null].concat(Ho(n))))}function n(e,t,n){var i=a(e,n),r=i.dependencies,o=i.fn;return o.call.apply(o,[t].concat(Ho(r)))}function f(t){return jo(function(e){return t.get(e)})}var s=[],h=this._providers=Object.create(r._providers||null),c=this._instances=Object.create(null),m=c.injector=this,l=function(e){var t=s.join(" -> ");return s.length=0,new Error(t?e+" (Resolving: "+t+")":e)},u={factory:n,type:t,value:function(e){return e}};e.forEach(function(i){function r(e,t){return"value"!==e&&Mo(t)&&(t=jo(t.slice())),t}if(i instanceof Fo)i.forEach(function(e){var t=e[0],n=e[1],i=e[2];h[t]=[u[n],r(n,i),n]});else if("object"===(void 0===i?"undefined":Uo(i)))if(i.__exports__){var e=Object.keys(i).reduce(function(e,t){return"__"!==t.substring(0,2)&&(e[t]=i[t]),e},Object.create(null)),t=new d((i.__modules__||[]).concat([e]),m),n=jo(function(e){return t.get(e)});i.__exports__.forEach(function(e){h[e]=[n,e,"private",t]})}else Object.keys(i).forEach(function(e){if("private"!==i[e][2]){var t=i[e][0],n=i[e][1];h[e]=[u[t],r(t,n),t]}else h[e]=i[e]})}),this.get=o,this.invoke=n,this.instantiate=t,this.createChild=function(e,t){if(t&&t.length){var n,i,r,o,a=Object.create(null),s=Object.create(null),c=[],l=[],u=[];for(var p in h)n=h[p],-1!==t.indexOf(p)&&("private"===n[2]?-1===(i=c.indexOf(n[3]))?(r=n[3].createChild([],t),o=f(r),c.push(n[3]),l.push(r),u.push(o),a[p]=[o,p,"private",r]):a[p]=[u[i],p,"private",l[i]]:a[p]=[n[2],n[1]],s[p]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||t.forEach(function(e){-1!==n[1].$scope.indexOf(e)&&(a[p]=[n[2],n[1]],s[e]=!0)});t.forEach(function(e){if(!s[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(a)}return new d(e,m)}};var qo={};Object.defineProperty(qo,"__esModule",{value:!0}),qo.default=Ko;var Wo,Go=(Wo=Eo)&&Wo.__esModule?Wo:{default:Wo};function Yo(e){var n=[],i=[];function r(e){return 0<=n.indexOf(e)}e.forEach(function e(t){r(t)||((t.__depends__||[]).forEach(e),r(t)||(function(e){n.push(e)}(t),(t.__init__||[]).forEach(function(e){i.push(e)})))});var t=new Po.Injector(n);return i.forEach(function(e){try{t["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),t}function Ko(e,t){this.injector=t=t||function(e){return Yo([{config:["value",e=e||{}]},Go.default].concat(e.modules||[]))}(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}Ko.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Ko.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0}),Object.defineProperty(Xo,"default",{enumerable:!0,get:function(){return Qo.default}});var Jo,Qo=(Jo=qo)&&Jo.__esModule?Jo:{default:Jo};var Zo={};function ea(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}Object.defineProperty(Zo,"__esModule",{value:!0}),(Zo.default=ea).prototype.next=function(){return this._prefix+ ++this._counter};var ta,na={};Object.defineProperty(na,"__esModule",{value:!0}),na.default=ra;var ia=new((ta=Zo)&&ta.__esModule?ta:{default:ta}).default("ov");function ra(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=ia,this._overlayDefaults=(0,g.assign)({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=function(e){var t=(0,at.domify)('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}(n.getContainer()),this._init()}function oa(e,t,n){(0,g.assign)(e.style,{left:t+"px",top:n+"px"})}function aa(e,t){e.style.display=!1===t?"none":""}function sa(t,n){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(e){t.style[e+"transform"]=n})}ra.$inject=["config.overlays","eventBus","canvas","elementRegistry"],ra.prototype.get=function(e){if((0,g.isString)(e)&&(e={id:e}),(0,g.isString)(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?(0,g.filter)(t.overlays,(0,g.matchPattern)({type:e.type})):t.overlays.slice():[]}return e.type?(0,g.filter)(this._overlays,(0,g.matchPattern)({type:e.type})):e.id?this._overlays[e.id]:null},ra.prototype.add=function(e,t,n){if((0,g.isObject)(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=(0,g.assign)({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},ra.prototype.remove=function(e){var t=this.get(e)||[];(0,g.isArray)(t)||(t=[t]);var i=this;(0,g.forEach)(t,function(e){var t=i._getOverlayContainer(e.element,!0);if(e&&((0,at.remove)(e.html),(0,at.remove)(e.htmlContainer),delete e.htmlContainer,delete e.element,delete i._overlays[e.id]),t){var n=t.overlays.indexOf(e);-1!==n&&t.overlays.splice(n,1)}})},ra.prototype.show=function(){aa(this._overlayRoot)},ra.prototype.hide=function(){aa(this._overlayRoot,!1)},ra.prototype.clear=function(){this._overlays={},this._overlayContainers=[],(0,at.clear)(this._overlayRoot)},ra.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=(0,jr.getBBox)(t);i=o.x,r=o.y}oa(n,i,r),(0,at.attr)(e.html,"data-container-id",t.id)},ra.prototype._updateOverlay=function(e){var t,n,i=e.position,r=e.htmlContainer,o=e.element,a=i.left,s=i.top;void 0!==i.right&&(t=o.waypoints?(0,jr.getBBox)(o).width:o.width,a=-1*i.right+t);void 0!==i.bottom&&(n=o.waypoints?(0,jr.getBBox)(o).height:o.height,s=-1*i.bottom+n);oa(r,a||0,s||0)},ra.prototype._createOverlayContainer=function(e){var t=(0,at.domify)('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},ra.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";sa(this._overlayRoot,n)},ra.prototype._getOverlayContainer=function(t,e){var n=(0,g.find)(this._overlayContainers,function(e){return e.element===t});return n||e?n:this._createOverlayContainer(t)},ra.prototype._addOverlay=function(e){var t,n,i=e.id,r=e.element,o=e.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),(0,g.isString)(o)&&(o=(0,at.domify)(o)),n=this._getOverlayContainer(r),(t=(0,at.domify)('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">')).appendChild(o),e.type&&(0,at.classes)(t).add("djs-overlay-"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},ra.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=n&&n.minZoom,r=n&&n.maxZoom,o=e.htmlContainer,a=!0;n&&(((0,g.isDefined)(i)&&i>t.scale||(0,g.isDefined)(r)&&r<t.scale)&&(a=!1),aa(o,a)),this._updateOverlayScale(e,t)},ra.prototype._updateOverlayScale=function(e,t){var n,i,r,o=e.scale,a=e.htmlContainer,s="";!0!==o&&(i=!1===o?n=1:(n=o.min,o.max),(0,g.isDefined)(n)&&t.scale<n&&(r=(1/t.scale||1)*n),(0,g.isDefined)(i)&&t.scale>i&&(r=(1/t.scale||1)*i)),(0,g.isDefined)(r)&&(s="scale("+r+","+r+")"),sa(a,s)},ra.prototype._updateOverlaysVisibilty=function(t){var n=this;(0,g.forEach)(this._overlays,function(e){n._updateOverlayVisibilty(e,t)})},ra.prototype._init=function(){var e=this._eventBus,o=this;e.on("canvas.viewbox.changing",function(e){o.hide()}),e.on("canvas.viewbox.changed",function(e){!function(e){o._updateRoot(e),o._updateOverlaysVisibilty(e),o.show()}(e.viewbox)}),e.on(["shape.remove","connection.remove"],function(e){var t=e.element,n=o.get({element:t});(0,g.forEach)(n,function(e){o.remove(e.id)});var i=o._getOverlayContainer(t);if(i){(0,at.remove)(i.html);var r=o._overlayContainers.indexOf(i);-1!==r&&o._overlayContainers.splice(r,1)}}),e.on("element.changed",500,function(e){var t=e.element,n=o._getOverlayContainer(t,!0);n&&((0,g.forEach)(n.overlays,function(e){o._updateOverlay(e)}),o._updateOverlayContainer(n))}),e.on("element.marker.update",function(e){var t=o._getOverlayContainer(e.element,!0);t&&(0,at.classes)(t.html)[e.add?"add":"remove"](e.marker)}),e.on("diagram.clear",this.clear,this)};var ca,la={};Object.defineProperty(la,"__esModule",{value:!0}),la.default=void 0;var ua={__init__:["overlays"],overlays:["type",((ca=na)&&ca.__esModule?ca:{default:ca}).default]};la.default=ua;var pa={};function da(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function fa(e){return e.originalEvent||e.srcEvent}Object.defineProperty(pa,"__esModule",{value:!0}),pa.getOriginal=fa,pa.stopPropagation=function(e,t){da(e),da(fa(e))},pa.toPoint=function(e){e.pointers&&e.pointers.length&&(e=e.pointers[0]);e.touches&&e.touches.length&&(e=e.touches[0]);return e?{x:e.clientX,y:e.clientY}:null};var ha={};Object.defineProperty(ha,"__esModule",{value:!0}),ha.isMac=function(){return/mac/i.test(navigator.platform)};var ma={};function va(e){return!((0,pa.getOriginal)(e)||e).button}Object.defineProperty(ma,"__esModule",{value:!0}),ma.isPrimaryButton=va,ma.hasPrimaryModifier=function(e){var t=(0,pa.getOriginal)(e)||e;if(!va(e))return!1;return(0,ha.isMac)()?t.metaKey:t.ctrlKey},ma.hasSecondaryModifier=function(e){var t=(0,pa.getOriginal)(e)||e;return va(e)&&t.shiftKey},Object.defineProperty(ma,"isMac",{enumerable:!0,get:function(){return ha.isMac}});var ga={};function ya(e){return!0}Object.defineProperty(ga,"__esModule",{value:!0}),ga.default=_a;var ba=500;function _a(o,a,e){var r=e.cls("djs-hit",["no-fill","no-border"],{stroke:"white",strokeWidth:15});function s(e,t,n){var i,r;!function(e,t){return!(p[e]||ma.isPrimaryButton)(t)}(e,t)&&(n?r=a.getGraphics(n):(i=t.delegateTarget||t.target)&&(r=i,n=a.get(r)),r&&n&&!1===o.fire(e,{element:n,gfx:r,originalEvent:t})&&(t.stopPropagation(),t.preventDefault()))}var c={};function l(e){return c[e]}var u={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup",contextmenu:"element.contextmenu"},p={"element.contextmenu":ya};var d="svg, .djs-element";function i(e,t,n,i){var r=c[n]=function(e){s(n,e)};i&&(p[n]=i),r.$delegate=at.delegate.bind(e,d,t,r)}function f(e,t,n){var i=l(n);i&&at.delegate.unbind(e,t,i.$delegate)}o.on("canvas.destroy",function(e){!function(n){(0,g.forEach)(u,function(e,t){f(n,t,e)})}(e.svg)}),o.on("canvas.init",function(e){!function(n){(0,g.forEach)(u,function(e,t){i(n,t,e)})}(e.svg)}),o.on(["shape.added","connection.added"],function(e){var t,n=e.element,i=e.gfx;n.waypoints?t=(0,Ke.createLine)(n.waypoints):(t=(0,xe.create)("rect"),(0,xe.attr)(t,{x:0,y:0,width:n.width,height:n.height})),(0,xe.attr)(t,r),(0,xe.append)(i,t)}),o.on("shape.changed",ba,function(e){var t=e.element,n=e.gfx,i=(0,at.query)(".djs-hit",n);(0,xe.attr)(i,{width:t.width,height:t.height})}),o.on("connection.changed",function(e){var t=e.element,n=e.gfx,i=(0,at.query)(".djs-hit",n);(0,Ke.updateLine)(i,t.waypoints)}),this.fire=s,this.triggerMouseEvent=function(e,t,n){var i=u[e];if(!i)throw new Error("unmapped DOM event name <"+e+">");return s(i,t,n)},this.mouseHandler=l,this.registerEvent=i,this.unregisterEvent=f}_a.$inject=["eventBus","elementRegistry","styles"];var wa,xa={};Object.defineProperty(xa,"__esModule",{value:!0}),xa.default=void 0;var Ea={__init__:["interactionEvents"],interactionEvents:["type",((wa=ga)&&wa.__esModule?wa:{default:wa}).default]};xa.default=Ea;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.default=Sa;var ka=500;function Sa(e,t,n){this.offset=6;var i=t.cls("djs-outline",["no-fill"]),r=this;function o(e,t){var n=(0,xe.create)("rect");return(0,xe.attr)(n,(0,g.assign)({x:10,y:10,width:100,height:100},i)),(0,xe.append)(e,n),n}e.on(["shape.added","shape.changed"],ka,function(e){var t=e.element,n=e.gfx,i=(0,at.query)(".djs-outline",n);i||(i=o(n)),r.updateShapeOutline(i,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,i=(0,at.query)(".djs-outline",n);i||(i=o(n)),r.updateConnectionOutline(i,t)})}Sa.prototype.updateShapeOutline=function(e,t){(0,xe.attr)(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},Sa.prototype.updateConnectionOutline=function(e,t){var n=(0,jr.getBBox)(t);(0,xe.attr)(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},Sa.$inject=["eventBus","styles","elementRegistry"];var Ta,Oa={};Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.default=void 0;var Aa={__init__:["outline"],outline:["type",((Ta=Ca)&&Ta.__esModule?Ta:{default:Ta}).default]};Oa.default=Aa;var Ia={};function Da(e){this._eventBus=e,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear"],function(e){n.select(null)})}Object.defineProperty(Ia,"__esModule",{value:!0}),(Ia.default=Da).$inject=["eventBus"],Da.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}},Da.prototype.get=function(){return this._selectedElements},Da.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},Da.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();(0,g.isArray)(e)||(e=e?[e]:[]),t?(0,g.forEach)(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Pa={};function Ra(e,o,a,i){e.on("create.end",500,function(e){e.context.canExecute&&o.select(e.context.shape)}),e.on("connect.end",500,function(e){e.context.canExecute&&e.context.target&&o.select(e.context.target)}),e.on("shape.move.end",500,function(e){var t=e.previousSelection||[],n=i.get(e.context.shape.id);(0,g.find)(t,function(e){return n.id===e.id})||o.select(n)}),e.on("element.click",function(e){var t=e.element;t===a.getRootElement()&&(t=null);var n=o.isSelected(t),i=1<o.get().length,r=(0,ma.hasPrimaryModifier)(e);if(n&&i)return r?o.deselect(t):o.select(t);n?o.deselect(t):o.select(t,r)})}Object.defineProperty(Pa,"__esModule",{value:!0}),(Pa.default=Ra).$inject=["eventBus","selection","canvas","elementRegistry"];var Na={};Object.defineProperty(Na,"__esModule",{value:!0}),Na.default=$a;var Ma="hover",ja="selected";function $a(e,n,t,i){function r(e,t){n.addMarker(e,t)}function o(e,t){n.removeMarker(e,t)}this._multiSelectionBox=null,e.on("element.hover",function(e){r(e.element,Ma)}),e.on("element.out",function(e){o(e.element,Ma)}),e.on("selection.changed",function(e){var t=e.oldSelection,n=e.newSelection;(0,g.forEach)(t,function(e){-1===n.indexOf(e)&&function(e){o(e,ja)}(e)}),(0,g.forEach)(n,function(e){-1===t.indexOf(e)&&function(e){r(e,ja)}(e)})})}$a.$inject=["eventBus","canvas","selection","styles"];var La={};Object.defineProperty(La,"__esModule",{value:!0}),La.default=void 0;var Ba=za(xa),Va=za(Oa),Fa=za(Ia),Ua=za(Na),Ha=za(Pa);function za(e){return e&&e.__esModule?e:{default:e}}var qa={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Ba.default,Va.default],selection:["type",Fa.default],selectionVisuals:["type",Ua.default],selectionBehavior:["type",Ha.default]};La.default=qa;var Wa=g.assign,Ga=g.omit,Ya=g.isNumber,Ka=at.domify,Xa=at.query,Ja=at.remove,Qa=xe.innerSVG,Za=Xo.default,es=Rr.default;var ts={width:"100%",height:"100%",position:"relative"};function ns(e){return e+(Ya(e)?"px":"")}function is(e){e=Wa({},ts,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),function(e){var t=Mn.BPMNIO_IMG,n=Ka('<a href="http://bpmn.io" target="_blank" class="cjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100">'+t+"</a>");e.appendChild(n),os.bind(n,"click",function(e){Mn.open(),e.preventDefault()})}(this._container),this._init(this._container,this._moddle,e)}l(is,Za);var rs=is;is.prototype.importXML=function(e,r){r=r||function(){};var o=this;e=this._emit("import.parse.start",{xml:e})||e,this._moddle.fromXML(e,"cmmn:Definitions",function(e,t,n){t=o._emit("import.parse.complete",{error:e,definitions:t,context:n})||t;var i=n.warnings;if(e)return e=function(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return t&&(e.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid CMMN 1.1 diagram file"+t[2]),e}(e),o._emit("import.done",{error:e,warnings:i}),r(e,i);o.importDefinitions(t,function(e,t){var n=[].concat(i,t||[]);o._emit("import.done",{error:e,warnings:n}),r(e,n)})})},is.prototype.saveXML=function(e,n){n||(n=e,e={});var i=this,t=this._definitions;if(!t)return n(new Error("no definitions loaded"));t=this._emit("saveXML.start",{definitions:t})||t,this._moddle.toXML(t,e,function(e,t){try{t=i._emit("saveXML.serialized",{error:e,xml:t})||t,i._emit("saveXML.done",{error:e,xml:t})}catch(e){console.error("error in saveXML life-cycle listener",e)}n(e,t)})},is.prototype.saveSVG=function(e,t){t||(t=e,e={});var n=this.get("canvas"),i=n.getDefaultLayer(),r=Xa("defs",n._svg),o=Qa(i),a=r&&r.outerHTML||"",s=i.getBBox();t(null,'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with cmmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+s.width+'" height="'+s.height+'" viewBox="'+s.x+" "+s.y+" "+s.width+" "+s.height+'" version="1.1">'+a+o+"</svg>")},is.prototype.importDefinitions=function(e,t){try{this._definitions&&this.clear(),this._definitions=e,Nn.importCmmnDiagram(this,e,t)}catch(e){t(e)}},is.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=Xa(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},is.prototype.getDefinitions=function(){return this._definitions},is.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},is.prototype.getModules=function(){return this._modules},is.prototype.destroy=function(){Za.prototype.destroy.call(this),Ja(this._container)},is.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},is.prototype.off=function(e,t){this.get("eventBus").off(e,t)},is.prototype._init=function(e,t,n){var i=n.modules||this.getModules(),r=n.additionalModules||[],o=[].concat([{cmmnjs:["value",this],moddle:["value",t]}],i,r),a=Wa(Ga(n,"additionalModules"),{canvas:Wa({},n.canvas,{container:e}),modules:o});Za.call(this,a),n&&n.container&&this.attachTo(n.container)},is.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},is.prototype._createContainer=function(e){var t=Ka('<div class="cjs-container"></div>');return Wa(t.style,{width:ns(e.width),height:ns(e.height),position:e.position}),t},is.prototype._createModdle=function(e){var t=Wa({},this._moddleExtensions,e.moddleExtensions);return new es(t)},is.prototype._modules=[Sn,La.default,la.default];var os=at.event;var as={};Object.defineProperty(as,"__esModule",{value:!0}),as.install=function(e,t){function n(){return!1}return t=t||"element.click",e.once(t,ss,n),function(){e.off(t,n)}};var ss=5e3;var cs={};Object.defineProperty(cs,"__esModule",{value:!0}),cs.set=us,cs.unset=function(){us(null)},cs.has=function(e){return(0,at.classes)(document.body).has("djs-cursor-"+e)};var ls=/^djs-cursor-.*$/;function us(e){var t=(0,at.classes)(document.body);t.removeMatching(ls),e&&t.add("djs-cursor-"+e)}var ps={};Object.defineProperty(ps,"__esModule",{value:!0}),ps.center=function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},ps.delta=function(e,t){return{x:e.x-t.x,y:e.y-t.y}};var ds={};Object.defineProperty(ds,"__esModule",{value:!0}),ds.default=hs;var fs=15;function hs(o,a){var s;function t(e){var t=s.start,n=(0,pa.toPoint)(e),i=(0,ps.delta)(n,t);if(!s.dragging&&function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}(i)>fs&&(s.dragging=!0,(0,as.install)(o),(0,cs.set)("grab")),s.dragging){var r=s.last||s.start;i=(0,ps.delta)(n,r),a.scroll({dx:i.x,dy:i.y}),s.last=n}e.preventDefault()}function n(e){at.event.unbind(document,"mousemove",t),at.event.unbind(document,"mouseup",n),s=null,(0,cs.unset)()}o.on("element.mousedown",500,function(e){return function(e){if((0,at.closest)(e.target,".djs-draggable"))return;if(e.button||e.ctrlKey||e.shiftKey||e.altKey)return;return s={start:(0,pa.toPoint)(e)},at.event.bind(document,"mousemove",t),at.event.bind(document,"mouseup",n),!0}(e.originalEvent)})}hs.$inject=["eventBus","canvas"];var ms,vs={};Object.defineProperty(vs,"__esModule",{value:!0}),vs.default=void 0;var gs={__init__:["moveCanvas"],moveCanvas:["type",((ms=ds)&&ms.__esModule?ms:{default:ms}).default]};vs.default=gs;var ys={};Object.defineProperty(ys,"__esModule",{value:!0}),ys.log10=function(e){return Math.log(e)/Math.log(10)},Object.defineProperty(ys,"substract",{enumerable:!0,get:function(){return ps.delta}});var bs={};Object.defineProperty(bs,"__esModule",{value:!0}),bs.getStepSize=function(e,t){var n=(0,ys.log10)(e.min),i=(0,ys.log10)(e.max);return(Math.abs(n)+Math.abs(i))/t},bs.cap=function(e,t){return Math.max(e.min,Math.min(e.max,t))};var _s={};Object.defineProperty(_s,"__esModule",{value:!0}),_s.default=Cs;var ws=Math.sign||function(e){return 0<=e?1:-1},xs={min:.2,max:4},Es=.75;function Cs(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=(0,g.bind)(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||Es;var i=this;e.on("canvas.init",function(e){i._init(!1!==t.enabled)})}Cs.$inject=["config.zoomScroll","eventBus","canvas"],Cs.prototype.scroll=function(e){this._canvas.scroll(e)},Cs.prototype.reset=function(){this._canvas.zoom("fit-viewport")},Cs.prototype.zoom=function(e,t){var n=(0,bs.getStepSize)(xs,20);this._totalDelta+=e,.1<Math.abs(this._totalDelta)&&(this._zoom(e,t,n),this._totalDelta=0)},Cs.prototype._handleWheel=function(e){if(!(0,at.closest)(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var n,i=e.ctrlKey,r=e.shiftKey,o=-1*this._scale;if(o*=i?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,i){var a=t.getBoundingClientRect(),s={x:e.clientX-a.left,y:e.clientY-a.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*ws(e.deltaY)*o,this.zoom(n,s)}else n=r?{dx:o*e.deltaY,dy:0}:{dx:o*e.deltaX,dy:o*e.deltaY},this.scroll(n)}},Cs.prototype.stepZoom=function(e,t){var n=(0,bs.getStepSize)(xs,10);this._zoom(e,t,n)},Cs.prototype._zoom=function(e,t,n){var i=this._canvas,r=0<e?1:-1,o=(0,ys.log10)(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var s=Math.pow(10,a);i.zoom((0,bs.cap)(xs,s),t)},Cs.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return void 0===e&&(e=!i),i!==e&&at.event[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e},Cs.prototype._init=function(e){this.toggle(e)};var ks,Ss={};Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.default=void 0;var Ts={__init__:["zoomScroll"],zoomScroll:["type",((ks=_s)&&ks.__esModule?ks:{default:ks}).default]};function Os(e){rs.call(this,e)}Ss.default=Ts,l(Os,rs);var As=Os;return Os.prototype._navigationModules=[Ss.default,vs.default],Os.prototype._modules=[].concat(Os.prototype._modules,Os.prototype._navigationModules),As})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(e,t,OC){(function(e,t){"use strict";function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return Array.prototype.concat.apply([],e)}Object.defineProperty(OC,"__esModule",{value:!0});var n=Object.prototype.toString,s=Object.prototype.hasOwnProperty;function l(e){return void 0===e}function c(e){return void 0!==e}function m(e){return"[object Array]"===n.call(e)}function v(e){return"[object Object]"===n.call(e)}function u(e){return"[object Number]"===n.call(e)}function p(e){var t=n.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function f(e){return"[object String]"===n.call(e)}function h(e,n){var i;return n=function(t){return p(t)?t:function(e){return e===t}}(n),y(e,function(e,t){if(n(e,t))return i=e,!1}),i}function g(e,n){var i=[];return y(e,function(e,t){n(e,t)&&i.push(e)}),i}function y(e,t){var n;if(!l(e)){var i,r,o=m(e)?A:O;for(var a in e)if(i=e,r=a,s.call(i,r)&&!1===t(n=e[a],o(a)))return n}}function b(e,n,i){return y(e,function(e,t){i=n(i,e,t)}),i}function _(e,i){return b(e,function(e,t,n){return e&&i(t,n)},!0)}function w(e,t){return!!h(e,t)}function x(e,n){var i=[];return y(e,function(e,t){i.push(n(e,t))}),i}function E(e){return e&&Object.keys(e)||[]}function C(e,i){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return i=T(i),y(e,function(e){var t=i(e)||"_",n=r[t];n||(n=r[t]=[]),n.push(e)}),r}function k(e,o){o=T(o);var a=[];return y(e,function(e,t){for(var n=o(e,t),i={d:n,v:e},r=0;r<a.length;r++){if(n<a[r].d)return void a.splice(r,0,i)}a.push(i)}),x(a,function(e){return e.v})}function S(e){return function(n){return _(e,function(e,t){return n[t]===e})}}function T(t){return p(t)?t:function(e){return e[t]}}function O(e){return e}function A(e){return Number(e)}function I(n,i){var r,o,a,s;function t(){var e=Date.now(),t=s+i-e;if(0<t)return c(t);n.apply(a,o),r=s=o=a=void 0}function c(e){r=setTimeout(t,e)}return function(){s=Date.now();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o=t,a=this,r||c(i)}}function D(e,t){return e.bind(t)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function R(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return P.apply(void 0,[e].concat(n))}function N(t,e){var n={},i=Object(t);return y(e,function(e){e in i&&(n[e]=t[e])}),n}var M=Array.prototype.slice;function j(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function $(){}function L(){}function B(e,t){this.model=e,this.properties=t}j.prototype.on=function(e,t,n,i){if(e=m(e)?e:[e],p(t)&&(i=n,n=t,t=1e3),!u(t))throw new Error("priority must be a number");var r=n;i&&((r=D(n,i)).__fn=n.__fn||n);var o=this;e.forEach(function(e){o._addListener(e,{priority:t,callback:r,next:null})})},j.prototype.once=function(t,e,n,i){var r=this;if(p(e)&&(i=n,n=e,e=1e3),!u(e))throw new Error("priority must be a number");function o(){var e=n.apply(i,arguments);return r.off(t,o),e}o.__fn=n,this.on(t,e,o)},j.prototype.off=function(e,t){e=m(e)?e:[e];var n=this;e.forEach(function(e){n._removeListener(e,t)})},j.prototype.createEvent=function(e){var t=new $;return t.init(e),t},j.prototype.fire=function(e,t){var n,i,r,o;if(o=M.call(arguments),"object"===qe(e)&&(e=(n=e).type),!e)throw new Error("no event type specified");if(i=this._listeners[e]){n=t instanceof $?t:this.createEvent(t);var a=(o[0]=n).type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==a&&(n.type=a)}return void 0===r&&n.defaultPrevented&&(r=!1),r}},j.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},j.prototype._destroy=function(){this._listeners={}},j.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i},j.prototype._invokeListener=function(e,t,n){var i;try{void 0!==(i=function(e,t){return e.apply(null,t)}(n.callback,t))&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return i},j.prototype._addListener=function(e,t){var n,i=this._getListeners(e);if(i){for(;i;){if(i.priority<t.priority)return t.next=i,void(n?n.next=t:this._setListeners(e,t));i=(n=i).next}n.next=t}else this._setListeners(e,t)},j.prototype._getListeners=function(e){return this._listeners[e]},j.prototype._setListeners=function(e,t){this._listeners[e]=t},j.prototype._removeListener=function(e,t){var n,i,r,o=this._getListeners(e);if(t)for(;o;)n=o.next,(r=o.callback)!==t&&r.__fn!==t||(i?i.next=n:this._setListeners(e,n)),i=o,o=n;else this._setListeners(e,null)},$.prototype.stopPropagation=function(){this.cancelBubble=!0},$.prototype.preventDefault=function(){this.defaultPrevented=!0},$.prototype.init=function(e){R(this,e||{})},L.prototype.get=function(e){return this.$model.properties.get(this,e)},L.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},B.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(L.prototype);y(e.properties,function(e){e.isMany||void 0===e.default||(i[e.name]=e.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(e){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),y(e,D(function(e,t){this.set(t,e)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var V={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},F={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};function U(e,t){var n=F[e];return n?n(t):t}function H(e){return!!V[e]}function z(e){return!!F[e]}function q(e,t){var n,i,r=e.split(/:/);if(1===r.length)n=e,i=t;else{if(2!==r.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=r[1],i=r[0]}return{name:e=(i?i+":":"")+n,prefix:i,localName:n}}function W(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function G(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,y(e,D(this.registerPackage,this))}function Y(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function K(e){this.model=e}function X(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function J(e){this.properties=new K(this),this.factory=new B(this,this.properties),this.registry=new G(e,this.properties),this.typeCache={}}W.prototype.build=function(){return N(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},W.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},W.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(-1===s)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t},W.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=q(r[0],i),a=q(r[1],o.prefix).name,s=this.propertiesByName[a];if(!s)throw new Error("refined property <"+a+"> not found");this.replaceProperty(s,e,n),delete e.redefines},W.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},W.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},W.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},W.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},W.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},W.prototype.hasProperty=function(e){return this.propertiesByName[e]},W.prototype.addTrait=function(i,r){var e=this.allTypesByName,t=this.allTypes,n=i.name;n in e||(y(i.properties,D(function(e){e=R({},e,{name:e.ns.localName,inherited:r}),Object.defineProperty(e,"definedBy",{value:i});var t=e.replaces,n=e.redefines;t||n?this.redefineProperty(e,t||n,t):(e.isBody&&this.setBodyProperty(e),e.isId&&this.setIdProperty(e),this.addProperty(e))},this)),t.push(i),e[n]=i)},G.prototype.getPackage=function(e){return this.packageMap[e]},G.prototype.getPackages=function(){return this.packages},G.prototype.registerPackage=function(t){t=R({},t);var e=this.packageMap;Y(e,t,"prefix"),Y(e,t,"uri"),y(t.types,D(function(e){this.registerType(e,t)},this)),e[t.uri]=e[t.prefix]=t,this.packages.push(t)},G.prototype.registerType=function(e,t){var i=q((e=R({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:R(e.meta||{})})).name,t.prefix),n=i.name,r={};y(e.properties,D(function(e){var t=q(e.name,i.prefix),n=t.name;H(e.type)||(e.type=q(e.type,t.prefix).name),R(e,{ns:t,name:n}),r[n]=e},this)),R(e,{ns:i,name:n,propertiesByName:r}),y(e.extends,D(function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(n)},this)),this.definePackage(e,t),this.typeMap[n]=e},G.prototype.mapTypes=function(i,r,e){var t=H(i.name)?{name:i.name}:this.typeMap[i.name],o=this;function n(e){return a(e,!0)}function a(e,t){var n=q(e,H(e)?"":i.prefix);o.mapTypes(n,r,t)}if(!t)throw new Error("unknown type <"+i.name+">");y(t.superClass,e?n:a),r(t,!e),y(t.traits,n)},G.prototype.getEffectiveDescriptor=function(e){var t=q(e),n=new W(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},G.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},K.prototype.set=function(e,t,n){var i=this.model.getPropertyDescriptor(e,t),r=i&&i.name;!function(e){return void 0===e}(n)?i?r in e?e[r]=n:X(e,i,n):e.$attrs[t]=n:i?delete e[r]:delete e.$attrs[t]},K.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var i=n.name;return!e[i]&&n.isMany&&X(e,n,[]),e[i]},K.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},K.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},K.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},J.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},J.prototype.getType=function(e){var t=this.typeCache,n=f(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},J.prototype.createAny=function(e,t,n){var i=q(e),r={$type:e,$instanceOf:function(e){return e===this.$type}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),y(n,function(e,t){v(e)&&void 0!==e.value?r[e.name]=e.value:r[t]=e}),r},J.prototype.getPackage=function(e){return this.registry.getPackage(e)},J.prototype.getPackages=function(){return this.registry.getPackages()},J.prototype.getElementDescriptor=function(e){return e.$descriptor},J.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},J.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},J.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var Q=String.fromCharCode,Z=Object.prototype.hasOwnProperty,ee=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,te={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function ne(e,t,n,i){return i?Z.call(te,i)?te[i]:"&"+i+";":Q(t||parseInt(n,16))}function ie(e){return 3<e.length&&-1!==e.indexOf("&")?e.replace(ee,ne):e}Object.keys(te).forEach(function(e){te[e.toUpperCase()]=te[e]});var re="http://www.w3.org/2001/XMLSchema-instance",oe="xsi",ae="xsi:type",se="non-whitespace outside of root node";function ce(e){return new Error(e)}function le(e){return"missing namespace for prefix <"+e+">"}function ue(e){return{get:e,enumerable:!0}}function pe(e){var t,n={};for(t in e)n[t]=e[t];return n}function de(e){return e+"$uri"}function fe(){return{line:0,column:0}}function he(e){throw e}function me(e){if(!this)return new me(e);var g,E,C,k,n,S,T,O,A,I=e&&e.proxy,i=he,D=fe,P=!1,R=!1,t=null,N=!1;function M(e){e instanceof Error||(e=ce(e)),i(t=e,D)}function j(e){n&&(e instanceof Error||(e=ce(e)),n(e,D))}this.on=function(e,t){if("function"!=typeof t)throw ce("required args <name, cb>");switch(e){case"openTag":E=t;break;case"text":g=t;break;case"closeTag":C=t;break;case"error":i=t;break;case"warn":n=t;break;case"cdata":k=t;break;case"attention":O=t;break;case"question":T=t;break;case"comment":S=t;break;default:throw ce("unsupported event: "+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),"object"!==qe(e))throw ce("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return n[re]=oe,R=!0,A=n,this},this.parse=function(e){if("string"!=typeof e)throw ce("required args <xml=string>");return t=null,function(a){var e,t,n,i,r,o,s,c,l,y,u=R?[]:null,b=R?function(e){var t,n,i={};for(t in e)i[n=e[t]]=n,i[de(n)]=t;return i}(A):null,p=[],_=0,d=!1,f=!1,h=0,m=0,w="",x=0;function v(){if(null!==y)return y;var e,t,n,i,r,o,a,s,c,l,u,p=R&&b.xmlns,d=R&&P?[]:null,f=x,h=w,m=h.length,v={},g={};e:for(;f<m;f++)if(c=!1,!(32===(l=h.charCodeAt(f))||l<14&&8<l)){for(!(l<65||122<l||90<l&&l<97)||95!==l&&58!==l&&(j("illegal first char attribute name"),c=!0),u=f+1;u<m;u++)if(!(96<(l=h.charCodeAt(u))&&l<123||64<l&&l<91||47<l&&l<59||46===l||45===l||95===l)){if(32===l||l<14&&8<l){j("missing attribute value"),f=u;continue e}if(61===l)break;j("illegal attribute name char"),c=!0}if("xmlns:xmlns"===(s=h.substring(f,u))&&(j("illegal declaration of xmlns"),c=!0),34===(l=h.charCodeAt(u+1)))-1!==(u=h.indexOf('"',f=u+2))||-1!==(u=h.indexOf("'",f))&&(j("attribute value quote missmatch"),c=!0);else if(39===l)-1!==(u=h.indexOf("'",f=u+2))||-1!==(u=h.indexOf('"',f))&&(j("attribute value quote missmatch"),c=!0);else for(j("missing attribute value quotes"),c=!0,u+=1;u<m&&!(32===(l=h.charCodeAt(u+1))||l<14&&8<l);u++);for(-1===u&&(j("missing closing quotes"),u=m,c=!0),c||(o=h.substring(f,u)),f=u;u+1<m&&!(32===(l=h.charCodeAt(u+1))||l<14&&8<l);u++)f===u&&(j("illegal character after attribute end"),c=!0);if(f=u+1,!c)if(s in g)j("attribute <"+s+"> already defined");else if(g[s]=!0,R)if(P){if(null!==(r="xmlns"===s?"xmlns":120===s.charCodeAt(0)&&"xmlns:"===s.substr(0,6)?s.substr(6):null)){if(e=ie(o),t=de(r),!(a=A[e])){if("xmlns"===r||t in b&&b[t]!==e)for(;a="ns"+_++,void 0!==b[a];);else a=r;A[e]=a}b[r]!==a&&(i||(b=pe(b),i=!0),b[r]=a,"xmlns"===r&&(b[de(a)]=e,p=a),b[t]=e),v[s]=o;continue}d.push(s,o)}else-1!==(l=s.indexOf(":"))?(n=b[s.substring(0,l)])?((s=p===n?s.substr(l+1):n+s.substr(l))===ae&&(o=-1!==(l=o.indexOf(":"))?(n=o.substring(0,l),(n=b[n]||n)+o.substring(l)):p+":"+o),v[s]=o):j(le(s.substring(0,l))):v[s]=o;else v[s]=o}if(P)for(f=0,m=d.length;f<m;f++){if(s=d[f++],o=d[f],-1!==(l=s.indexOf(":"))){if(!(n=b[s.substring(0,l)])){j(le(s.substring(0,l)));continue}(s=p===n?s.substr(l+1):n+s.substr(l))===ae&&(o=-1!==(l=o.indexOf(":"))?(n=o.substring(0,l),(n=b[n]||n)+o.substring(l)):p+":"+o)}v[s]=o}return y=v}D=function(){for(var e,t=/(\r\n|\r|\n)/g,n=0,i=0,r=0,o=m;r<=h&&(e=t.exec(a))&&(o=e[0].length+e.index,!(h<o));)n+=1,r=o;return{data:-1==h?(i=o,a.substring(m)):0===m?(console.log(h-r),a.substring(m,h)):(i=h-r,-1==m?a.substring(h):a.substring(h,m+1)),line:n,column:i}},I&&(l=Object.create({},{name:ue(function(){return s}),originalName:ue(function(){return c}),attrs:ue(v),ns:ue(function(){return b})}));for(;-1!==m;){if(-1===(h=60===a.charCodeAt(m)?m:a.indexOf("<",m)))return p.length?M("unexpected end of file"):0===m?M("missing start tag"):m<a.length&&a.substring(m).trim()&&j(se);if(m!==h)if(p.length){if(g&&(g(a.substring(m,h),ie,D),N))return}else if(a.substring(m,h).trim()&&(j(se),N))return;if(33!==(r=a.charCodeAt(h+1)))if(63!==r){if(-1==(m=a.indexOf(">",h+1)))return M("unclosed tag");if(y={},47===r){if(f=!(d=!1),!p.length)return M("missing open tag");if(t=s=p.pop(),i=h+2+t.length,a.substring(h+2,i)!==t)return M("closing tag mismatch");for(;i<m;i++)if(!(32===(r=a.charCodeAt(i))||8<r&&r<14))return M("close tag")}else{if(f=47===a.charCodeAt(m-1)?(t=s=a.substring(h+1,m-1),d=!0):(t=s=a.substring(h+1,m),!(d=!0)),!(96<r&&r<123||64<r&&r<91||95===r||58===r))return M("illegal first char nodeName");for(i=1,n=t.length;i<n;i++)if(!(96<(r=t.charCodeAt(i))&&r<123||64<r&&r<91||47<r&&r<59||45===r||95===r||46==r)){if(32===r||r<14&&8<r){s=t.substring(0,i),y=null;break}return M("invalid nodeName")}f||p.push(s)}if(R){if(e=b,d&&(f||u.push(e),null!==y||(P=-1!==t.indexOf("xmlns",i))&&(x=i,w=t,v(),P=!1)),-1!==(r=(c=s).indexOf(":"))){if(!(o=b[s.substring(0,r)]))return M("missing namespace on <"+c+">");s=s.substr(r+1)}else o=b.xmlns;o&&(s=o+":"+s)}if(d&&(x=i,w=t,E&&(I?E(l,ie,f,D):E(s,v,ie,f,D),N)))return;if(f){if(C&&(C(I?l:s,ie,d,D),N))return;R&&(b=d?e:u.pop())}m+=1}else{if(-1===(m=a.indexOf("?>",h)))return M("unclosed question");if(T&&(T(a.substring(h,m+2),D),N))return;m+=2}else{if(91===(r=a.charCodeAt(h+2))&&"CDATA["===a.substr(h+3,6)){if(-1===(m=a.indexOf("]]>",h)))return M("unclosed cdata");if(k&&(k(a.substring(h+9,m),D),N))return;m+=3;continue}if(45===r&&45===a.charCodeAt(h+3)){if(-1===(m=a.indexOf("--\x3e",h)))return M("unclosed comment");if(S&&(S(a.substring(h+4,m),ie,D),N))return;m+=3;continue}if(-1===(m=a.indexOf(">",h+1)))return M("unclosed tag");if(O&&(O(a.substring(h,m+1),ie,D),N))return;m+=1}}}(e),D=fe,N=!1,t},this.stop=function(){N=!0}}function ve(e){return e.xml&&"lowerCase"===e.xml.tagAlias}var ge={xsi:"http://www.w3.org/2001/XMLSchema-instance"},ye="xsi:type";function be(e){return e.xml&&e.xml.serialize}function _e(e){return be(e)===ye}function we(e,t){return ve(t)?e.prefix+":"+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e.localName):e.name}function xe(e){return new Error(e)}function Ee(e){return e.$descriptor}function Ce(e){R(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw xe("expected element");var t,n=this.elementsById,i=Ee(e).idProperty;if(i&&(t=e.get(i.name))){if(n[t])throw xe("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function ke(){}function Se(){}function Te(){}function Oe(e,t){this.property=e,this.context=t}function Ae(e,t){this.element=t,this.propertyDesc=e}function Ie(){}function De(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function Pe(e,t,n){De.call(this,e,t,n)}function Re(e,t,n){this.model=e,this.context=n}function Ne(e){e instanceof J&&(e={model:e}),R(this,{lax:!1},e)}ke.prototype.handleEnd=function(){},ke.prototype.handleText=function(){},ke.prototype.handleNode=function(){},(Se.prototype=Object.create(ke.prototype)).handleNode=function(){return this},(Te.prototype=Object.create(ke.prototype)).handleText=function(e){this.body=(this.body||"")+e},(Oe.prototype=Object.create(Te.prototype)).handleNode=function(e){if(this.element)throw xe("expected no sub nodes");return this.element=this.createReference(e),this},Oe.prototype.handleEnd=function(){this.element.id=this.body},Oe.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},(Ae.prototype=Object.create(Te.prototype)).handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=U(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},(Ie.prototype=Object.create(Te.prototype)).handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},(De.prototype=Object.create(Ie.prototype)).addReference=function(e){this.context.addReference(e)},De.prototype.handleText=function(e){if(!Ee(this.element).bodyProperty)throw xe("unexpected body text <"+e+">");Te.prototype.handleText.call(this,e)},De.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Ee(t).bodyProperty;n&&void 0!==e&&(e=U(n.type,e),t.set(n.name,e))},De.prototype.createElement=function(e){var i,t=e.attributes,n=this.type,r=Ee(n),o=this.context,a=new n({}),s=this.model;return y(t,function(e,t){var n=r.propertiesByName[t];n&&n.isReference?n.isMany?y(e.split(" "),function(e){o.addReference({element:a,property:n.ns.name,id:e})}):o.addReference({element:a,property:n.ns.name,id:e}):(n?e=U(n.type,e):"xmlns"!==t&&(i=q(t,r.ns.prefix),s.getPackage(i.prefix)&&o.addWarning({message:"unknown attribute <"+t+">",element:a,property:t,value:e})),a.set(t,e))}),a},De.prototype.getPropertyForNode=function(e){var t,n,i=q(e.name),r=this.type,o=this.model,a=Ee(r),s=i.name,c=a.propertiesByName[s];if(c)return _e(c)&&(t=e.attributes[ye])?(t=function(e,t){var n=q(e);return function(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&0===i.indexOf(r)?e.prefix+":"+i.slice(r.length):n}(n,t.getPackage(n.prefix))}(t,o),R({},c,{effectiveType:Ee(n=o.getType(t)).name})):c;var l=o.getPackage(i.prefix);if(l){if(t=we(i,l),n=o.getType(t),c=h(a.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return R({},c,{effectiveType:Ee(n).name})}else if(c=h(a.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return c;throw xe("unrecognized element <"+i.name+">")},De.prototype.toString=function(){return"ElementDescriptor["+Ee(this.type).name+"]"},De.prototype.valueHandler=function(e,t){return new Ae(e,t)},De.prototype.referenceHandler=function(e){return new Oe(e,this.context)},De.prototype.handler=function(e){return"Element"===e?new Re(this.model,e,this.context):new De(this.model,e,this.context)},De.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,z(n=t.effectiveType||t.type))return this.valueHandler(t,i);var o=(r=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==o&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(R(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},(Pe.prototype=Object.create(De.prototype)).createElement=function(e){var t=e.name,n=q(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&we(n,o)||t;if(!r.hasType(a))throw xe("unexpected element <"+e.originalName+">");return De.prototype.createElement.call(this,e)},(Re.prototype=Object.create(Ie.prototype)).createElement=function(e){var t=e.name,n=q(t).prefix,i=e.ns[n+"$uri"],r=e.attributes;return this.model.createAny(t,i,r)},Re.prototype.handleChild=function(e){var t=new Re(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element;return void 0!==i&&((n.$children=n.$children||[]).push(i),i.$parent=n),t},Re.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},Ne.prototype.fromXML=function(n,e,i){var r=e.rootHandler;e instanceof De?(r=e,e={}):"string"==typeof e?(r=this.handler(e),e={}):"string"==typeof r&&(r=this.handler(r));var t=this.model,a=this.lax,l=new Ce(R({},e,{rootHandler:r})),o=new me({proxy:!0}),s=function(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}();function c(e,t,n){var i=t(),r=i.line,o=i.column,a=i.data;"<"===a.charAt(0)&&-1!==a.indexOf(" ")&&(a=a.slice(0,a.indexOf(" "))+">");var s="unparsable content "+(a?a+" ":"")+"detected\n\tline: "+r+"\n\tcolumn: "+o+"\n\tnested error: "+e.message;if(n)return l.addWarning({message:s,error:e}),!0;throw xe(s)}function u(e,t){return c(e,t,!0)}r.context=l,s.push(r);var p=/^<\?xml /i,d=/ encoding="([^"]+)"/i,f=/^utf-8$/i;function h(e,t){try{s.peek().handleText(e)}catch(e){u(e,t)}}var m=t.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},{});o.ns(m).on("openTag",function(e,i,t,n){var r=e.attrs||{},o=Object.keys(r).reduce(function(e,t){var n=i(r[t]);return e[t]=n,e},{});!function(e,t){var n=s.peek();try{s.push(n.handleNode(e))}catch(e){c(e,t,a)&&s.push(new Se)}}({name:e.name,originalName:e.originalName,attributes:o,ns:e.ns},n)}).on("question",function(e){if(p.test(e)){var t=d.exec(e),n=t&&t[1];n&&!f.test(n)&&l.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}}).on("closeTag",function(){s.pop().handleEnd()}).on("cdata",h).on("text",function(e,t,n){!function(e,t){(e=e.trim())&&h(e,t)}(t(e),n)}).on("error",c).on("warn",u),function(e){setTimeout(e,0)}(function(){var t;try{o.parse(n),function(){var e,t,n=l.elementsById,i=l.references;for(e=0;t=i[e];e++){var r=t.element,o=n[t.id],a=Ee(r).propertiesByName[t.property];if(o||l.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),a.isMany){var s=r.get(a.name),c=s.indexOf(t);-1===c&&(c=s.length),o?s[c]=o:s.splice(c,1)}else r.set(a.name,o)}}()}catch(e){t=e}var e=r.element;t||e||(t=xe("failed to parse document as <"+r.type.$descriptor.name+">")),i(t,t?void 0:e,l)})},Ne.prototype.handler=function(e){return new Pe(this.model,e)};var Me=/<|>|'|"|&|\n\r|\n/g,je=/<|>|&/g;function $e(t){var n={},i={},r={},o=[],a=[];this.byUri=function(e){return i[e]||t&&t.byUri(e)},this.add=function(e,t){i[e.uri]=e,t?o.push(e):a.push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return n[e||"xmlns"]},this.mapPrefix=function(e,t){n[e||"xmlns"]=t},this.logUsed=function(e){var t=e.uri;r[t]=this.byUri(t)},this.getUsed=function(e){return[].concat(o,a).filter(function(e){return r[e.uri]})}}function Le(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Be(e){return f(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function Ve(e,t){return t.isGeneric?R({localName:t.ns.localName},e):R({localName:function(e,t){return ve(t)?function(e){return e.charAt(0).toLowerCase()+e.slice(1)}(e):e}(t.ns.localName,t.$pkg)},e)}var Fe={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Ue={"<":"lt",">":"gt","&":"amp"};function He(e,t,n){return(e=f(e)?e:""+e).replace(t,function(e){return"&"+n[e]+";"})}function ze(e){this.tagName=e}function We(){}function Ge(e){this.tagName=e}function Ye(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function Ke(e,t){Ye.call(this,e,t)}function Xe(){this.value="",this.write=function(e){this.value+=e}}function Je(t,e){var n=[""];this.append=function(e){return t.write(e),this},this.appendNewLine=function(){return e&&t.write("\n"),this},this.appendIndent=function(){return e&&t.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Qe(r){return r=R({format:!1,preamble:!0},r||{}),{toXML:function(e,t){var n=t||new Xe,i=new Je(n,r.format);if(r.preamble&&i.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new Ye).build(e).serializeTo(i),!t)return n.value}}}function Ze(e,t){J.call(this,e,t)}ze.prototype.build=function(e){return this.element=e,this},ze.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},We.prototype.serializeValue=We.prototype.serializeTo=function(e){e.append(this.escape?function(e){return He(e,je,Ue)}(this.value):this.value)},We.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(je)&&(this.escape=!0),this},Le(Ge,We),Ge.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},Ye.prototype.build=function(e){var t,n,i=(this.element=e).$descriptor,r=this.propertyDescriptor,o=i.isGeneric;return t=o?this.parseGeneric(e):this.parseNsAttributes(e),this.ns=r?this.nsPropertyTagName(r):this.nsTagName(i),this.tagName=this.addTagName(this.ns),o||(n=function(i){return g(i.$descriptor.properties,function(e){var t=e.name;if(e.isVirtual)return!1;if(!i.hasOwnProperty(t))return!1;var n=i[t];return n!==e.default&&null!==n&&(!e.isMany||n.length)})}(e),this.parseAttributes(function(e){return g(e,function(e){return e.isAttr})}(n)),this.parseContainments(function(e){return g(e,function(e){return!e.isAttr})}(n))),this.parseGenericAttributes(e,t),this},Ye.prototype.nsTagName=function(e){return Ve(this.logNamespaceUsed(e.ns),e)},Ye.prototype.nsPropertyTagName=function(e){return function(e,t){return R({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},Ye.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},Ye.prototype.nsAttributeName=function(e){var t;if(t=f(e)?q(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:R({localName:t.localName},n)},Ye.prototype.parseGeneric=function(n){var i=this,r=this.body,o=[];return y(n,function(e,t){"$body"===t?r.push((new We).build({type:"String"},e)):"$children"===t?y(e,function(e){r.push(new Ye(i).build(e))}):0===t.indexOf("$")||i.parseNsAttribute(n,t,e)&&o.push({name:t,value:e})}),o},Ye.prototype.parseNsAttribute=function(e,t,n){var i,r=e.$model,o=q(t);if("xmlns"===o.prefix&&(i={prefix:o.localName,uri:n}),o.prefix||"xmlns"!==o.localName||(i={uri:n}),!i)return{name:t,value:n};if(r&&r.getPackage(n))this.logNamespace(i,!0,!0);else{var a=this.logNamespaceUsed(i,!0);this.getNamespaces().logUsed(a)}},Ye.prototype.parseNsAttributes=function(i,e){var r=this,t=i.$attrs,o=[];return y(t,function(e,t){var n=r.parseNsAttribute(i,t,e);n&&o.push(n)}),o},Ye.prototype.parseGenericAttributes=function(n,e){var i=this;y(e,function(t){if(t.name!==ye)try{i.addAttribute(i.nsAttributeName(t.name),t.value)}catch(e){console.warn("missing namespace information for ",t.name,"=",t.value,"on",n,e)}})},Ye.prototype.parseContainments=function(e){var o=this,a=this.body,s=this.element;y(e,function(n){var e=s.get(n.name),t=n.isReference;if(n.isMany||(e=[e]),n.isBody)a.push((new We).build(n,e[0]));else if(z(n.type))y(e,function(e){a.push(new Ge(o.addTagName(o.nsPropertyTagName(n))).build(n,e))});else if(t)y(e,function(e){a.push(new ze(o.addTagName(o.nsPropertyTagName(n))).build(e))});else{var i=_e(n),r=function(e){return"property"===be(e)}(n);y(e,function(e){var t;t=i?new Ke(o,n):r?new Ye(o,n):new Ye(o),a.push(t.build(e))})}})},Ye.prototype.getNamespaces=function(e){var t,n=this.namespaces,i=this.parent;return n||(t=i&&i.getNamespaces(),e||!t?this.namespaces=n=new $e(t):n=t),n},Ye.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix;return i.byUri(r)||i.add(e,t),i.mapPrefix(o,r),e},Ye.prototype.logNamespaceUsed=function(e,t){var n,i,r,o=this.element.$model,a=this.getNamespaces(t),s=e.prefix,c=e.uri;if(!s&&!c)return{localName:e.localName};if(r=ge[s]||o&&(o.getPackage(s)||{}).uri,!(c=c||r||a.uriByPrefix(s)))throw new Error("no namespace uri given for prefix <"+s+">");if(!(e=a.byUri(c))){for(n=s,i=1;a.uriByPrefix(n);)n=s+"_"+i++;e=this.logNamespace({prefix:n,uri:c},r===c)}return s&&a.mapPrefix(s,c),e},Ye.prototype.parseAttributes=function(e){var i=this,r=this.element;y(e,function(e){var t=r.get(e.name);if(e.isReference)if(e.isMany){var n=[];y(t,function(e){n.push(e.id)}),t=n.join(" ")}else t=t.id;i.addAttribute(i.nsAttributeName(e),t)})},Ye.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Be(e)},Ye.prototype.addAttribute=function(e,t){var n=this.attrs;f(t)&&(t=function(e){return He(e,Me,Fe)}(t)),n.push({name:e,value:t})},Ye.prototype.serializeAttributes=function(t){var e=this.attrs,n=this.namespaces;n&&(e=function(e){return x(e.getUsed(),function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}})}(n).concat(e)),y(e,function(e){t.append(" ").append(Be(e.name)).append('="').append(e.value).append('"')})},Ye.prototype.serializeTo=function(t){var e=this.body[0],n=e&&e.constructor!==We;t.appendIndent().append("<"+this.tagName),this.serializeAttributes(t),t.append(e?">":" />"),e&&(n&&t.appendNewLine().indent(),y(this.body,function(e){e.serializeTo(t)}),n&&t.unindent().appendIndent(),t.append("</"+this.tagName+">")),t.appendNewLine()},Le(Ke,Ye),Ke.prototype.parseNsAttributes=function(e){var t=Ye.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(ye),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t},Ke.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri},(Ze.prototype=Object.create(J.prototype)).fromXML=function(e,t,n,i){f(t)||(i=n,n=t,t="dmn:Definitions"),p(n)&&(i=n,n={});var r=new Ne(R({model:this,lax:!0},n)),o=r.handler(t);r.fromXML(e,o,i)};Ze.prototype.toXML=function(e,t,n){p(t)&&(n=t,t={});var i,r,o=new Qe(t);try{i=o.toXML(e)}catch(e){r=e}return n(r,i)};var et={dmn:{name:"DMN",uri:"http://www.omg.org/spec/DMN/20151101/dmn.xsd",xml:{tagAlias:"lowerCase"},prefix:"dmn",types:[{name:"DMNElement",isAbstract:!0,properties:[{name:"description",type:"String"},{name:"id",type:"String",isAttr:!0,isId:!0},{name:"label",type:"String",isAttr:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"NamedElement",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"name",type:"String",isAttr:!0}]},{name:"DMNElementReference",properties:[{name:"href",type:"String",isAttr:!0}]},{name:"ExtensionElements",properties:[{name:"values",type:"Element",isMany:!0}]},{name:"Definitions",superClass:["NamedElement"],properties:[{name:"namespace",type:"String",isAttr:!0},{name:"typeLanguage",type:"String",isAttr:!0,default:"http://www.omg.org/spec/FEEL/20140401"},{name:"expressionLanguage",type:"String",isAttr:!0,default:"http://www.omg.org/spec/FEEL/20140401"},{name:"exporter",type:"String",isAttr:!0},{name:"exporterVersion",type:"String",isAttr:!0},{name:"itemDefinition",type:"ItemDefinition",isMany:!0,xml:{serialize:"property"}},{name:"drgElements",type:"DRGElement",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"Import",properties:[{name:"namespace",type:"String",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0},{name:"importType",type:"String",isAttr:!0}]},{name:"DRGElement",isAbstract:!0,superClass:["NamedElement"]},{name:"Decision",superClass:["DRGElement"],properties:[{name:"question",type:"String"},{name:"allowedAnswers",type:"String"},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"informationRequirement",type:"InformationRequirement",isMany:!0,xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0,xml:{serialize:"property"}},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0,xml:{serialize:"property"}},{name:"decisionTable",type:"DecisionTable",xml:{serialize:"property"}},{name:"literalExpression",type:"LiteralExpression",xml:{serialize:"property"}}]},{name:"BusinessKnowledgeModel",superClass:["DRGElement"],properties:[{name:"encapsulatedLogic",type:"FunctionDefinition"},{name:"variable",type:"InformationItem",xml:{serialize:"property"}},{name:"knowledgeRequirement",type:"KnowledgeRequirement",isMany:!0,xml:{serialize:"property"}},{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0,xml:{serialize:"property"}}]},{name:"InputData",superClass:["DRGElement"],properties:[{name:"variable",type:"InformationItem",xml:{serialize:"property"}}]},{name:"KnowledgeSource",superClass:["DRGElement"],properties:[{name:"authorityRequirement",type:"AuthorityRequirement",isMany:!0,xml:{serialize:"property"}},{name:"type",type:"String",isAttr:!0},{name:"owner",type:"DMNElementReference",isAttr:!0},{name:"locationURI",type:"String",isAttr:!0}]},{name:"InformationRequirement",properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"KnowledgeRequirement",properties:[{name:"requiredKnowledge",type:"DMNElementReference",isUnique:!0,xml:{serialize:"property"}}]},{name:"AuthorityRequirement",properties:[{name:"requiredDecision",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredInput",type:"DMNElementReference",xml:{serialize:"property"}},{name:"requiredAuthority",type:"DMNElementReference",xml:{serialize:"property"}}]},{name:"Expression",isAbstract:!0,superClass:["DMNElement"],properties:[{name:"typeRef",type:"String",isAttr:!0}]},{name:"ItemDefinition",superClass:["NamedElement"],properties:[{name:"typeLanguage",type:"String",isAttr:!0},{name:"isCollection",type:"Boolean",isAttr:!0,default:!1},{name:"typeRef",type:"String"},{name:"allowedValues",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}}]},{name:"LiteralExpression",superClass:["Expression"],properties:[{name:"expressionLanguage",type:"String",isAttr:!0},{name:"importedValues",type:"ImportedValues"},{name:"text",type:"String"}]},{name:"InformationItem",superClass:["NamedElement"],properties:[{name:"typeRef",type:"String",isAttr:!0}]},{name:"DecisionTable",superClass:["Expression"],properties:[{name:"input",type:"InputClause",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"OutputClause",isMany:!0,xml:{serialize:"property"}},{name:"rule",type:"DecisionRule",isMany:!0,xml:{serialize:"property"}},{name:"hitPolicy",type:"HitPolicy",isAttr:!0,default:"UNIQUE"},{name:"aggregation",type:"BuiltinAggregator",isAttr:!0},{name:"preferredOrientation",type:"DecisionTableOrientation",isAttr:!0,default:"Rule-as-Row"},{name:"outputLabel",type:"String",isAttr:!0}]},{name:"DecisionRule",superClass:["DMNElement"],properties:[{name:"inputEntry",type:"UnaryTests",isMany:!0,xml:{serialize:"property"}},{name:"outputEntry",type:"LiteralExpression",isMany:!0,xml:{serialize:"property"}}]},{name:"ImportedValues",superClass:["Import"],properties:[{name:"importedElement",type:"String",isMany:!0,xml:{serialize:"property"}},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"Artifact",isAbstract:!0,superClass:["DMNElement"]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String",xml:{serialize:"property"}},{name:"textFormat",type:"String",isAttr:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"sourceRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"targetRef",type:"DMNElementReference",xml:{serialize:"property"}},{name:"associationDirection",type:"AssociationDirection",isAttr:!0,default:"None"}]},{name:"InputClause",superClass:["DMNElement"],properties:[{name:"inputExpression",type:"LiteralExpression",xml:{serialize:"property"}},{name:"inputValues",type:"UnaryTests",xml:{serialize:"property"}}]},{name:"OutputClause",superClass:["DMNElement"],properties:[{name:"outputValues",type:"UnaryTests",xml:{serialize:"property"}},{name:"defaultOutputEntry",type:"LiteralExpression",xml:{serialize:"property"}},{name:"name",type:"String",isAttr:!0},{name:"typeRef",type:"String",isAttr:!0}]},{name:"UnaryTests",superClass:["DMNElement"],properties:[{name:"text",type:"String"},{name:"expressionLanguage",type:"String",isAttr:!0}]},{name:"FunctionDefinition",superClass:["Expression"],properties:[{name:"formalParameter",type:"InformationItem",isMany:!0,xml:{serialize:"property"}},{name:"expression",type:"String",isReference:!0,xml:{serialize:"property"}}]}],emumerations:[{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"HitPolicy",literalValues:[{name:"UNIQUE"},{name:"FIRST"},{name:"PRIORITY"},{name:"ANY"},{name:"COLLECT"},{name:"RULE ORDER"},{name:"OUTPUT ORDER"}]},{name:"BuiltinAggregator",literalValues:[{name:"SUM"},{name:"COUNT"},{name:"MIN"},{name:"MAX"}]},{name:"DecisionTableOrientation",literalValues:[{name:"Rule-as-Row"},{name:"Rule-as-Column"},{name:"CrossTable"}]}]},camunda:{name:"Camunda",uri:"http://camunda.org/schema/1.0/dmn",prefix:"camunda",xml:{tagAlias:"lowerCase"},types:[{name:"InputVariable",extends:["dmn:InputClause"],properties:[{name:"inputVariable",isAttr:!0,type:"String"}]}]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]},biodi:{name:"bpmn.io DI for DMN",uri:"http://bpmn.io/schema/dmn/biodi/1.0",prefix:"biodi",xml:{tagAlias:"lowerCase"},types:[{name:"Edge",superClass:["Element"],properties:[{name:"source",type:"String",isAttr:!0},{name:"waypoints",type:"Waypoint",isMany:!0,xml:{serialize:"property"}}]},{name:"Bounds",superClass:["dc:Bounds","Element"]},{name:"Waypoint",superClass:["dc:Point"]}]}};function tt(e,t){return new Ze(R({},et,e),t)}function nt(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}function it(e,t){if(rt)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var rt=[].indexOf,ot=/\s+/,at=Object.prototype.toString;function st(e){return new ct(e)}function ct(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function lt(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}ct.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~it(t,e)||t.push(e),this.el.className=t.join(" "),this},ct.prototype.remove=function(e){if("[object RegExp]"==at.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=it(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},ct.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},ct.prototype.toggle=function(e,t){return this.list?void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},ct.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(ot);return""===e[0]&&e.shift(),e},ct.prototype.has=ct.prototype.contains=function(e){return this.list?this.list.contains(e):!!~it(this.array(),e)};var ut=Element.prototype,pt=ut.matchesSelector||ut.webkitMatchesSelector||ut.mozMatchesSelector||ut.msMatchesSelector||ut.oMatchesSelector,dt=function(e,t){if(pt)return pt.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1};var ft,ht=function(e,t,n){for(var i=n?e:e.parentNode;i&&i!==document;){if(dt(i,t))return i;i=i.parentNode}},mt=window.addEventListener?"addEventListener":"attachEvent",vt=window.removeEventListener?"removeEventListener":"detachEvent",gt="addEventListener"!=mt?"on":"",yt={bind:function(e,t,n,i){return e[mt](gt+t,n,i||!1),n},unbind:function(e,t,n,i){return e[vt](gt+t,n,i||!1),n}},bt=["focus","blur"],_t={bind:function(n,i,e,r,t){return-1!==bt.indexOf(e)&&(t=!0),yt.bind(n,e,function(e){var t=e.target||e.srcElement;e.delegateTarget=ht(t,i,!0,n),e.delegateTarget&&r.call(n,e)},t)},unbind:function(e,t,n,i){-1!==bt.indexOf(t)&&(i=!0),yt.unbind(e,t,n,i)}},wt=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){var r=t.createElement("html");return r.innerHTML=e,r.removeChild(r.lastChild)}var o=Et[i]||Et._default,a=o[0],s=o[1],c=o[2];(r=t.createElement("div")).innerHTML=s+e+c;for(;a--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);var l=t.createDocumentFragment();for(;r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l},xt=!1;"undefined"!=typeof document&&((ft=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',xt=!ft.getElementsByTagName("link").length,ft=void 0);var Et={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:xt?[1,"X<div>","</div>"]:[0,"",""]};Et.td=Et.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Et.option=Et.optgroup=[1,'<select multiple="multiple">',"</select>"],Et.thead=Et.tbody=Et.colgroup=Et.caption=Et.tfoot=[1,"<table>","</table>"],Et.polyline=Et.ellipse=Et.polygon=Et.circle=Et.text=Et.line=Et.path=Et.rect=Et.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Ct="undefined"!=typeof Element?Element.prototype:{},kt=Ct.matches||Ct.matchesSelector||Ct.webkitMatchesSelector||Ct.mozMatchesSelector||Ct.msMatchesSelector||Ct.oMatchesSelector,St=function(e,t){if(!e||1!==e.nodeType)return!1;if(kt)return kt.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;i++)if(n[i]==e)return!0;return!1};function Tt(e,t){return(t=t||document).querySelector(e)}function Ot(e,t){return(t=t||document).querySelectorAll(e)}function At(e){e.parentNode&&e.parentNode.removeChild(e)}var It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Dt="function"==typeof Symbol&&"symbol"===qe(Symbol.iterator)?function(e){return qe(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":qe(e)};function Pt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Rt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Nt={width:"100%",height:"100%",position:"relative"},Mt=(function(e,t,n){return t&&Pt(e.prototype,t),n&&Pt(e,n),e}(jt,[{key:"importXML",value:function(e,o,a){var s=this;"object"!==(void 0===o?"undefined":Dt(o))&&(a=o,o={open:!0}),"function"!=typeof a&&(a=$t),e=this._emit("import.parse.start",{xml:e})||e,this._moddle.fromXML(e,"dmn:Definitions",function(e,t,n){t=s._emit("import.parse.complete",{error:e,definitions:t,context:n})||t;var i=n.warnings;if(s._setDefinitions(t),e&&(e=function(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return t&&(e.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid DMN 1.1 diagram file"+t[2]),e}(e)),e||!o.open)return s._emit("import.done",{error:e,warmings:i}),a(e,i);var r=s._activeView||s._getInitialView(s._views);if(!r)return a(new Error("no displayable contents"));s.open(r,function(e,t){var n=[].concat(i,t||[]);s._emit("import.done",{error:e,warnings:n}),a(e,n)})})}},{key:"getDefinitions",value:function(){return this._definitions}},{key:"getActiveView",value:function(){return this._activeView}},{key:"getActiveViewer",value:function(){var e=this.getActiveView();return e&&this._getViewer(e)}},{key:"getView",value:function(t){return this._views.filter(function(e){return e.element===t})[0]}},{key:"getViews",value:function(){return this._views}},{key:"saveXML",value:function(e,n){var i=this;"function"==typeof e&&(n=e,e={});var t=this._definitions;if(!t)return n(new Error("no definitions loaded"));t=this._emit("saveXML.start",{definitions:t})||t,this._moddle.toXML(t,e,function(e,t){try{t=i._emit("saveXML.serialized",{error:e,xml:t})||t,i._emit("saveXML.done",{error:e,xml:t})}catch(e){console.error("error in saveXML life-cycle listener",e)}n(e,t)})}},{key:"on",value:function(){var e;(e=this._eventBus).on.apply(e,arguments)}},{key:"off",value:function(){var e;(e=this._eventBus).off.apply(e,arguments)}},{key:"once",value:function(){var e;(e=this._eventBus).once.apply(e,arguments)}},{key:"attachTo",value:function(e){e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=Tt(e)),e.appendChild(this._container),this._emit("attach",{})}},{key:"detach",value:function(){this._emit("detach",{}),At(this._container)}},{key:"destroy",value:function(){var t=this;Object.keys(this._viewers).forEach(function(e){Ft(t._viewers[e],"destroy")}),At(this._container)}},{key:"_init",value:function(e){this._options=e,this._moddle=this._createModdle(e),this._viewers={},this._views=[];var t=wt('<div class="dmn-js-parent"></div>'),n=R({},Nt,e);R(t.style,{width:Lt(n.width),height:Lt(n.height),position:n.position}),this._container=t,e.container&&this.attachTo(e.container)}},{key:"open",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:$t;this._switchView(e,t)}},{key:"_setDefinitions",value:function(e){this._definitions=e,this._updateViews()}},{key:"_updateViews",value:function(){var e=this._definitions;if(!e)return this._views=[],void this._switchView(null);var r=this._getViewProviders(),t=[e].concat(Rt(e.drgElements||[]));this._views=t.reduce(function(e,t){var n=Bt(r,function(e){return"string"==typeof e.opens?e.opens===t.$type:e.opens(t)});if(!n)return e;var i={element:t,type:n.id};return[].concat(Rt(e),[i])},[]);var n,i=this._activeView;if(i){if(n=Bt(this._views,function(e){return Vt(i,e)})||this._getInitialView(this._views),!Vt(i,n))return this._switchView(null);this._activeView=n}this._viewsChanged()}},{key:"_getInitialView",value:function(e){return e[0]}},{key:"_switchView",value:function(n){function i(e,t){r._viewsChanged(),o(e,t)}var e,r=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:$t,t=this.getActiveView(),a=n&&this._getViewer(n),s=n&&n.element;if(!t||(e=this._getViewer(t))!==a&&(Ft(e,"clear"),e.detach()),this._activeView=n,a)return e!==a&&a.attachTo(this._container),this._emit("import.render.start",{view:n,element:s}),a.open(s,function(e,t){r._emit("import.render.complete",{view:n,error:e,warnings:t}),i(e,t)});i()}},{key:"_getViewer",value:function(e){var t=e.type,n=this._viewers[t];return n||(n=this._viewers[t]=this._createViewer(e.type),this._emit("viewer.created",{type:t,viewer:n})),n}},{key:"_createViewer",value:function(t){var e=Bt(this._getViewProviders(),function(e){return e.id===t});if(!e)throw new Error("no provider for view type <"+t+">");var n=e.constructor,i=this._options[t]||{},r=this._options.common||{};return new n(It({},r,i,{additionalModules:[].concat(Rt(i.additionalModules||[]),[{_parent:["value",this],moddle:["value",this._moddle]}])}))}},{key:"_emit",value:function(){var e;(e=this._eventBus).fire.apply(e,arguments)}},{key:"_createModdle",value:function(e){return new tt(e.moddleExtensions||{})}},{key:"_getViewProviders",value:function(){return[]}}]),jt);function jt(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,jt),this._viewsChanged=function(){e._emit("views.changed",{views:e._views,activeView:e._activeView})},this._eventBus=new j,this._viewsChanged=I(this._viewsChanged,0),this._views=[],this._viewers={},this._init(t)}function $t(){}function Lt(e){return e+(u(e)?"px":"")}function Bt(e,t){return e.filter(t)[0]}function Vt(e,t){return void 0===e?void 0===t:void 0!==t&&(e.element===t.element||e.element.id===t.element.id)}function Ft(e,t){"function"==typeof e[t]&&e[t]()}var Ut="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function Ht(e,t){return e(t={exports:{}},t.exports),t.exports}var zt=Ht(function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}),qt=/^class /;function Wt(e){return"[object Array]"===Object.prototype.toString.call(e)}function Gt(){var e=Array.prototype.slice.call(arguments);1===e.length&&Wt(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t}var Yt=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Kt=/^function\s*[^(]*\(\s*([^)]*)\)/m,Xt=/\/\*([^*]*)\*\//m;function Jt(e){if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(function(e){return qt.test(e.toString())}(e)?Yt:Kt);return t&&t[1]&&t[1].split(",").map(function(e){return(t=e.match(Xt))?t[1].trim():e.trim()})||[]}var Qt="function"==typeof Symbol&&"symbol"===qe(Symbol.iterator)?function(e){return qe(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":qe(e)};function Zt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function en(e,r){r=r||{get:function(e,t){if(s.push(e),!1===t)return null;throw l('No provider for "'+e+'"!')}};function o(e,t){if(!f[e]&&-1!==e.indexOf(".")){for(var n=e.split("."),i=o(n.shift());n.length;)i=i[n.shift()];return i}if(tn(c,e))return c[e];if(tn(f,e)){if(-1!==s.indexOf(e))throw s.push(e),l("Cannot resolve circular dependency!");return s.push(e),c[e]=f[e][0](f[e][1]),s.pop(),c[e]}return r.get(e,t)}function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"!=typeof e){if(!Wt(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=Gt(e.slice())}return{fn:e,dependencies:(e.$inject||Jt(e)).map(function(e){return tn(t,e)?t[e]:o(e)})}}function t(e){var t=a(e),n=t.dependencies,i=t.fn;return new(Function.prototype.bind.apply(i,[null].concat(Zt(n))))}function n(e,t,n){var i=a(e,n),r=i.dependencies,o=i.fn;return o.call.apply(o,[t].concat(Zt(r)))}function d(t){return Gt(function(e){return t.get(e)})}var s=[],f=this._providers=Object.create(r._providers||null),c=this._instances=Object.create(null),h=c.injector=this,l=function(e){var t=s.join(" -> ");return s.length=0,new Error(t?e+" (Resolving: "+t+")":e)},u={factory:n,type:t,value:function(e){return e}};e.forEach(function(i){function r(e,t){return"value"!==e&&Wt(t)&&(t=Gt(t.slice())),t}if(i instanceof function(){var n=[];this.factory=function(e,t){return n.push([e,"factory",t]),this},this.value=function(e,t){return n.push([e,"value",t]),this},this.type=function(e,t){return n.push([e,"type",t]),this},this.forEach=function(e){n.forEach(e)}})i.forEach(function(e){var t=e[0],n=e[1],i=e[2];f[t]=[u[n],r(n,i),n]});else if("object"===(void 0===i?"undefined":Qt(i)))if(i.__exports__){var e=Object.keys(i).reduce(function(e,t){return"__"!==t.substring(0,2)&&(e[t]=i[t]),e},Object.create(null)),t=new en((i.__modules__||[]).concat([e]),h),n=Gt(function(e){return t.get(e)});i.__exports__.forEach(function(e){f[e]=[n,e,"private",t]})}else Object.keys(i).forEach(function(e){if("private"!==i[e][2]){var t=i[e][0],n=i[e][1];f[e]=[u[t],r(t,n),t]}else f[e]=i[e]})}),this.get=o,this.invoke=n,this.instantiate=t,this.createChild=function(e,t){if(t&&t.length){var n,i,r,o,a=Object.create(null),s=Object.create(null),c=[],l=[],u=[];for(var p in f)n=f[p],-1!==t.indexOf(p)&&("private"===n[2]?-1===(i=c.indexOf(n[3]))?(r=n[3].createChild([],t),o=d(r),c.push(n[3]),l.push(r),u.push(o),a[p]=[o,p,"private",r]):a[p]=[u[i],p,"private",l[i]]:a[p]=[n[2],n[1]],s[p]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||t.forEach(function(e){-1!==n[1].$scope.indexOf(e)&&(a[p]=[n[2],n[1]],s[e]=!0)});t.forEach(function(e){if(!s[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(a)}return new en(e,h)}}function tn(e,t){return Object.hasOwnProperty.call(e,t)}var nn=1e3;function rn(e,t){var o=this;t=t||nn,e.on(["render.shape","render.connection"],t,function(e,t){var n=e.type,i=t.element,r=t.gfx;if(o.canRender(i))return"render.shape"===n?o.drawShape(r,i):o.drawConnection(r,i)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(o.canRender(t))return"render.getShapePath"===e.type?o.getShapePath(t):o.getConnectionPath(t)})}function on(e,t){return t.appendChild(function(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}(e,t))}function an(e,t){return on(t,e),e}rn.prototype.canRender=function(){},rn.prototype.drawShape=function(){},rn.prototype.drawConnection=function(){},rn.prototype.getShapePath=function(){},rn.prototype.getConnectionPath=function(){};var sn=2,cn={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":sn,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":sn,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function ln(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=cn[i];r?(r===sn&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function un(e,t,n){if("string"==typeof t){if(void 0===n)return function(e,t){return cn[t]?e.style[t]:e.getAttributeNS(null,t)}(e,t);ln(e,t,n)}else!function(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)ln(e,i,t[i])}(e,t);return e}function pn(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var dn=/\s+/,fn=Object.prototype.toString;function hn(e){return void 0!==e}function mn(e){return new vn(e)}function vn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function gn(e){var t=e.parentNode;return t&&t.removeChild(e),e}function yn(e){for(var t;t=e.firstChild;)gn(t);return e}vn.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~pn(t,e)||t.push(e),hn(this.el.className.baseVal)?this.el.className.baseVal=t.join(" "):this.el.className=t.join(" "),this},vn.prototype.remove=function(e){if("[object RegExp]"===fn.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=pn(t,e);return~n&&t.splice(n,1),this.el.className.baseVal=t.join(" "),this},vn.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},vn.prototype.toggle=function(e,t){return this.list?hn(t)?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e):hn(t)?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this},vn.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(dn);return""===e[0]&&e.shift(),e},vn.prototype.has=vn.prototype.contains=function(e){return this.list?this.list.contains(e):!!~pn(this.array(),e)};var bn={svg:"http://www.w3.org/2000/svg"},_n='<svg xmlns="'+bn.svg+'"';function wn(e){var t=!1;"<svg"===e.substring(0,4)?-1===e.indexOf(bn.svg)&&(e=_n+e.substring(4)):(e=_n+">"+e+"</svg>",t=!0);var n=function(e){var t;return(t=new DOMParser).async=!1,t.parseFromString(e,"text/xml")}(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function xn(e,t){var n;return n="<"===e.charAt(0)?(n=wn(e).firstChild,document.importNode(n,!0)):document.createElementNS(bn.svg,e),t&&un(n,t),n}var En=xn("svg");function Cn(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function kn(e){return e?En.createSVGTransformFromMatrix(e):En.createSVGTransform()}var Sn=/([&<>]{1})/g,Tn=/([\n\r"]{1})/g,On={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function An(e,t){return e.replace(t,function(e,t){return On[t]||t})}function In(e,t){var n,i,r,o,a;switch(e.nodeType){case 3:t.push(An(e.textContent,Sn));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(n=0,i=(r=e.attributes).length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',An(o.value,Tn),'"');if(e.hasChildNodes()){for(t.push(">"),n=0,i=(a=e.childNodes).length;n<i;++n)In(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("\x3c!--",An(e.nodeValue,Sn),"--\x3e");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function Dn(e,t){var n=wn(t);if(yn(e),t){!function(e){return"#document-fragment"===e.nodeName}(n)&&(n=n.documentElement);for(var i=function(e){return Array.prototype.slice.call(e)}(n.childNodes),r=0;r<i.length;r++)on(i[r],e)}}function Pn(e,t){if(void 0===t)return function(e){for(var t=e.firstChild,n=[];t;)In(t,n),t=t.nextSibling;return n.join("")}(e);try{Dn(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}function Rn(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),function(e,t){var n,i,r,o;for(e.clear(),n=0;i=t[n];n++)e.appendItem((r=e,(o=i)instanceof SVGMatrix?r.createSVGTransformFromMatrix(o):o))}(n,t)),n.consolidate()}function Nn(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")}function Mn(e){for(var t,n="",i=0;t=e[i];i++)n+=t.x+","+t.y+" ";return n}function jn(e,t){var n=xn("polyline");return un(n,{points:Mn(e)}),t&&un(n,t),n}function $n(e,t){rn.call(this,e,1),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}zt($n,rn),$n.prototype.canRender=function(){return!0},$n.prototype.drawShape=function(e,t){var n=xn("rect");return un(n,{x:0,y:0,width:t.width||0,height:t.height||0}),un(n,this.SHAPE_STYLE),an(e,n),n},$n.prototype.drawConnection=function(e,t){var n=jn(t.waypoints,this.CONNECTION_STYLE);return an(e,n),n},$n.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width;return Nn([["M",t,n],["l",i,0],["l",0,e.height],["l",-i,0],["z"]])},$n.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,r=[];for(t=0;n=i[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return Nn(r)},$n.$inject=["eventBus","styles"];var Ln={__init__:["defaultRenderer"],defaultRenderer:["type",$n],styles:["type",function(){var i={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},r=this;this.cls=function(e,t,n){return R(this.style(t,n),{class:e})},this.style=function(e,t){m(e)||t||(t=e,e=[]);var n=b(e,function(e,t){return R(e,i[t]||{})},{});return t?R(n,t):n},this.computeStyle=function(e,t,n){return m(t)||(n=t,t=[]),r.style(t||[],R({},n,e||{}))}}]};function Bn(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n}function Vn(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}}function Fn(e,t){return e&&t?e.indexOf(t):-1}function Un(e,t,n){var i=!n||-1===e.indexOf(t);return i&&e.push(t),i}function Hn(e,i,r){r=r||0,m(e)||(e=[e]),y(e,function(e,t){var n=i(e,t,r);m(n)&&n.length&&Hn(n,i,r+1)})}function zn(e,t){return function(e,r,o){var a=[],s=[];return Hn(e,function(e,t,n){Un(a,e,r);var i=e.children;if((-1===o||n<o)&&i&&Un(s,i,r))return i}),a}(e,!t,-1)}function qn(e,a){var s,c,l,u;return a=!!a,m(e)||(e=[e]),y(e,function(e){var t=e;e.waypoints&&!a&&(t=qn(e.waypoints,!0));var n=t.x,i=t.y,r=t.height||0,o=t.width||0;(n<s||void 0===s)&&(s=n),(i<c||void 0===c)&&(c=i),(l<n+o||void 0===l)&&(l=n+o),(u<i+r||void 0===u)&&(u=i+r)}),{x:s,y:c,height:u-c,width:l-s}}function Wn(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Gn(e,t){return R({},e||{},t||{})}function Yn(e,t){return Math.round(e*t)/t}function Kn(e){return u(e)?e+"px":e}function Xn(e,t,n){var i=xn("g");mn(i).add(t);var r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}var Jn={shape:["x","y","width","height"],connection:["waypoints"]};function Qn(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._init(e||{})}function Zn(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Qn.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],Qn.prototype._init=function(e){var t=this._eventBus,n=this._container=function(e){var t=(e=R({},{width:"100%",height:"100%"},e)).container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),R(n.style,{position:"relative",overflow:"hidden",width:Kn(e.width),height:Kn(e.height)}),t.appendChild(n),n}(e),i=this._svg=xn("svg");un(i,{width:"100%",height:"100%"}),an(n,i);var r=this._viewport=Xn(i,"viewport");!(this._layers={})!==e.deferUpdate&&(this._viewboxChanged=I(D(this._viewboxChanged,this),300)),t.on("diagram.init",function(){t.fire("canvas.init",{svg:i,viewport:r})},this),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed"],function(){delete this._cachedViewbox},this),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},Qn.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},Qn.prototype._clear=function(){var n=this;this._elementRegistry.getAll().forEach(function(e){var t=Wn(e);"root"===t?n.setRootElement(null,!0):n._removeElement(e,t)}),delete this._cachedViewbox},Qn.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},Qn.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},Qn.prototype._createLayer=function(e,n){n||(n=0);var t=b(this._layers,function(e,t){return n>=t.index&&e++,e},0);return{group:Xn(this._viewport,"layer-"+e,t),index:n}},Qn.prototype.getContainer=function(){return this._container},Qn.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),(i=this._elementRegistry._elements[e.id])&&(y([i.gfx,i.secondaryGfx],function(e){e&&(n?mn(e).add(t):mn(e).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},Qn.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},Qn.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},Qn.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),mn(this.getGraphics(e)).has(t)},Qn.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},Qn.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},Qn.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootElement,i=this._elementRegistry,r=this._eventBus;if(n){if(!t)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:n}),r.fire("root.removed",{element:n}),i.remove(n)}if(e){var o=this.getDefaultLayer();r.fire("root.add",{element:e}),i.add(e,o,this._svg),r.fire("root.added",{element:e,gfx:o})}return this._rootElement=e},Qn.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=Jn[e];if(!_(n,function(e){return void 0!==t[e]}))throw new Error("must supply { "+n.join(", ")+" } with "+e)},Qn.prototype._setParent=function(e,t,n){Vn(t.children,e,n),e.parent=t},Qn.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);var a=o.create(e,t,i);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t},Qn.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},Qn.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},Qn.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),i.remove(e),Bn(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},Qn.prototype.removeShape=function(e){return this._removeElement(e,"shape")},Qn.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},Qn.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},Qn.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},Qn.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},Qn.prototype.viewbox=function(t){if(void 0===t&&this._cachedViewbox)return this._cachedViewbox;var e,n,i,r,o,a,s=this._viewport,c=this.getSize();return t?(this._changeViewbox(function(){r=Math.min(c.width/t.width,c.height/t.height);var e=this._svg.createSVGMatrix().scale(r).translate(-t.x,-t.y);Rn(s,e)}),t):(e=this.getDefaultLayer().getBBox(),n=(i=Rn(s))?i.matrix:function(e,t,n,i,r,o){var a=En.createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return Cn(a,e);case 6:return Cn(a,{a:e,b:t,c:n,d:i,e:r,f:o})}}(),r=Yn(n.a,1e3),o=Yn(-n.e||0,1e3),a=Yn(-n.f||0,1e3),t=this._cachedViewbox={x:o?o/r:0,y:a?a/r:0,width:c.width/r,height:c.height/r,scale:r,inner:{width:e.width,height:e.height,x:e.x,y:e.y},outer:c})},Qn.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=R({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Zn(t,n)}),{x:n.e,y:n.f}},Qn.prototype.zoom=function(e,t){return e?"fit-viewport"===e?this._fitViewport(t):(this._changeViewbox(function(){"object"!==qe(t)&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Yn(i.a,1e3)):this.viewbox(e).scale;var n,i},Qn.prototype._fitViewport=function(e){var t,n,i=this.viewbox(),r=i.outer,o=i.inner;return n=0<=o.x&&0<=o.y&&o.x+o.width<=r.width&&o.y+o.height<=r.height&&!e?{x:0,y:0,width:Math.max(o.width+o.x,r.width),height:Math.max(o.height+o.y,r.height)}:(t=Math.min(1,r.width/o.width,r.height/o.height),{x:o.x+(e?o.width/2-r.width/t/2:0),y:o.y+(e?o.height/2-r.height/t/2:0),width:r.width/t,height:r.height/t}),this.viewbox(n),this.viewbox(!1).scale},Qn.prototype._setZoom=function(e,t){var n,i,r,o,a=this._svg,s=this._viewport,c=a.createSVGMatrix(),l=a.createSVGPoint(),u=(i=s.getCTM()).a;return o=t?(n=R(l,t).matrixTransform(i.inverse()),r=c.translate(n.x,n.y).scale(1/u*e).translate(-n.x,-n.y),i.multiply(r)):c.scale(e),Zn(this._viewport,o),o},Qn.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},Qn.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();e.waypoints?t=this.getGraphics(e).getBBox():t=e;return{x:t.x*n.scale-n.x*n.scale,y:t.y*n.scale-n.y*n.scale,width:t.width*n.scale,height:t.height*n.scale}},Qn.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var ei="data-element-id";function ti(e){this._elements={},this._eventBus=e}ti.$inject=["eventBus"],ti.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),un(t,ei,i),n&&un(n,ei,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},ti.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(un(i.gfx,ei,""),i.secondaryGfx&&un(i.secondaryGfx,ei,""),delete t[n])},ti.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},ti.prototype.get=function(e){var t;t="string"==typeof e?e:e&&un(e,ei);var n=this._elements[t];return n&&n.element},ti.prototype.filter=function(n){var i=[];return this.forEach(function(e,t){n(e,t)&&i.push(e)}),i},ti.prototype.getAll=function(){return this.filter(function(e){return e})},ti.prototype.forEach=function(r){var o=this._elements;Object.keys(o).forEach(function(e){var t=o[e],n=t.element,i=t.gfx;return r(n,i)})},ti.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},ti.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var ni={extend:function(e,i,t,r){var o=t.inverse;return Object.defineProperty(e,"remove",{value:function(e){var t=this.indexOf(e);return-1!==t&&(this.splice(t,1),i.unset(e,o,r)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e,t){var n=this.indexOf(e);if(void 0===t){if(-1!==n)return;t=this.length}-1!==n&&this.splice(n,1),this.splice(t,0,e),-1===n&&i.set(e,o,r)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e},isExtended:function(e){return!0===e.__refs_collection}};function ii(t,n,i){var e=ni.extend(i[n.name]||[],t,n,i);Object.defineProperty(i,n.name,{enumerable:n.enumerable,value:e}),e.length&&e.forEach(function(e){t.set(e,n.inverse,i)})}function ri(e,t){if(!(this instanceof ri))return new ri(e,t);(e.inverse=t).inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}ri.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?ii(this,t,e):function(n,e,i){var r=e.inverse,o=i[e.name];Object.defineProperty(i,e.name,{configurable:e.configurable,enumerable:e.enumerable,get:function(){return o},set:function(e){if(e!==o){var t=o;o=null,t&&n.unset(t,r,i),o=e,n.set(o,r,i)}}})}(this,t,e)},ri.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return ni.isExtended(n)||ii(this,t,e),n},ri.prototype.ensureBound=function(e,t){!function(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}(e,t)&&this.bind(e,t)},ri.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},ri.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var oi=ri,ai=ni;oi.Collection=ai;var si=new oi({name:"children",enumerable:!0,collection:!0},{name:"parent"}),ci=new oi({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),li=new oi({name:"attachers",collection:!0},{name:"host"}),ui=new oi({name:"outgoing",collection:!0},{name:"source"}),pi=new oi({name:"incoming",collection:!0},{name:"target"});function di(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),si.bind(this,"parent"),ci.bind(this,"labels"),ui.bind(this,"outgoing"),pi.bind(this,"incoming")}function fi(){di.call(this),si.bind(this,"children"),li.bind(this,"host"),li.bind(this,"attachers")}function hi(){fi.call(this)}function mi(){fi.call(this),ci.bind(this,"labelTarget")}function vi(){di.call(this),ui.bind(this,"source"),pi.bind(this,"target")}zt(fi,di),zt(hi,fi),zt(mi,fi),zt(vi,di);var gi={connection:vi,shape:fi,label:mi,root:hi};function yi(){this._uid=12}function bi(e,t,n){var i=kn();i.setTranslate(t,n),Rn(e,i)}function _i(e,t){this._eventBus=e,this._elementRegistry=t}function wi(e,t,n){t.insertBefore(e,n||t.firstChild)}yi.prototype.createRoot=function(e){return this.create("root",e)},yi.prototype.createLabel=function(e){return this.create("label",e)},yi.prototype.createShape=function(e){return this.create("shape",e)},yi.prototype.createConnection=function(e){return this.create("connection",e)},yi.prototype.create=function(e,t){return(t=R({},t||{})).id||(t.id=e+"_"+this._uid++),function(e,t){var n=gi[e];if(!n)throw new Error("unknown type: <"+e+">");return R(new n,t)}(e,t)},_i.$inject=["eventBus","elementRegistry"],_i.prototype._getChildren=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=function(e){return e.parentNode.childNodes[1]}(n))||(mn(t=xn("g")).add("djs-children"),an(n.parentNode,t)):t=n,t},_i.prototype._clear=function(e){var t=function(e){return Tt(".djs-visual",e)}(e);return lt(t),t},_i.prototype._createContainer=function(e,t,n){var i=xn("g");mn(i).add("djs-group"),void 0!==n?wi(i,t,t.childNodes[n]):an(t,i);var r=xn("g");mn(r).add("djs-element"),mn(r).add("djs-"+e),an(i,r);var o=xn("g");return mn(o).add("djs-visual"),an(r,o),r},_i.prototype.create=function(e,t,n){var i=this._getChildren(t.parent);return this._createContainer(e,i,n)},_i.prototype.updateContainments=function(e){var i=this,r=this._elementRegistry;y(b(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),function(e){var t=e.children;if(t){var n=i._getChildren(e);y(t.slice().reverse(),function(e){wi(r.getGraphics(e).parentNode,n)})}})},_i.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},_i.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},_i.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},_i.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},_i.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if("shape"===e)this.drawShape(i,t),bi(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(i,t)}t.hidden?un(n,"display","none"):un(n,"display","block")}},_i.prototype.remove=function(e){gn(this._elementRegistry.getGraphics(e).parentNode)};var xi={__depends__:[Ln],__init__:["canvas"],canvas:["type",Qn],elementRegistry:["type",ti],elementFactory:["type",yi],eventBus:["type",j],graphicsFactory:["type",_i]};function Ei(e){var n=[],i=[];function r(e){return 0<=n.indexOf(e)}e.forEach(function e(t){r(t)||((t.__depends__||[]).forEach(e),r(t)||(function(e){n.push(e)}(t),(t.__init__||[]).forEach(function(e){i.push(e)})))});var t=new en(n);return i.forEach(function(e){try{t["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),t}function Ci(e,t){this.injector=t=t||function(e){return Ei([{config:["value",e=e||{}]},xi].concat(e.modules||[]))}(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}function ki(e,t){var n=Oi(e);return n&&"function"==typeof n.$instanceOf&&n.$instanceOf(t)}function Si(e){return ki(e,"dmn:InputClause")}function Ti(e){return ki(e,"dmn:OutputClause")}function Oi(e){return e&&e.businessObject||e}function Ai(t,e){return w(e,function(e){return ki(t,e)})}function Ii(n,e){var o=[];function a(e,t){if(e.gfx)throw new Error("already rendered "+e.id);return n.element(e,t)}function i(t){var n=[];!function(e,t){var n=e.extensionElements;if(!n)return;y(n.values,t)}(t,function(e){ki(e,"biodi:Bounds")?a(t,e):ki(e,"biodi:Edge")&&n.push(e)}),function(r,t){function n(e,t){var n=function(e){return e&&e.href.slice(1)}(t),i=h(r,S({source:n}));i&&o.push(function(){a(e,i)})}if(ki(t,"dmn:Association"))return n(t,t.sourceRef);y(["informationRequirement","knowledgeRequirement","authorityRequirement"],function(e){y(t[e],function(t){var e=null;ki(t,"dmn:InformationRequirement")?e=["requiredDecision","requiredInput"]:ki(t,"dmn:KnowledgeRequirement")?e=["requiredKnowledge"]:ki(t,"dmn:AuthorityRequirement")&&(e=["requiredDecision","requiredInput","requiredAuthority"]),e&&y(e,function(e){t[e]&&n(t,t[e])})})})}(n,t)}return{handleDefinitions:function(t){n.root(t),y(["decision","drgElements","artifacts"],function(e){t[e]&&y(t[e],i)}),function(e){y(e,function(e){e()})}(o)}}}Ci.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Ci.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};var Di=0,Pi={width:150,height:50};function Ri(e,t){var n;t.textContent=e;try{var i,r=""===e;return t.textContent=r?"dummy":e,i={width:(n=t.getBBox()).width+2*n.x,height:n.height},r&&(i.width=0),i}catch(e){return{width:0,height:0}}}function Ni(e,t,n){for(var i,r=e.shift(),o=r;;){if((i=Ri(o,n)).width=o?i.width:0," "===o||""===o||i.width<Math.round(t)||o.length<2)return Mi(e,o,r,i);o=ji(o,i.width,t)}}function Mi(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}function ji(e,t,n){var i=Math.max(e.length*(n/t),1),r=function(e,t){var n,i=e.split(/(\s|-)/g),r=[],o=0;if(1<i.length)for(;n=i.shift();){if(!(n.length+o<t)){"-"===n&&r.pop();break}r.push(n),o+=n.length}return r.join("")}(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function $i(e){this._config=R({},{size:Pi,padding:Di,style:{},align:"center-top"},e||{})}function Li(e,r,i){rn.call(this,e);var o=new $i({style:{fontFamily:"Arial, sans-serif",fontSize:"12px"},size:{width:100}}),c={};function a(e){return"url(#"+c[e].id+")"}function t(s){function e(e,t){var n=R({strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),i=t.ref||{x:0,y:0},r=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var o=xn("marker");un(t.element,n),an(o,t.element),un(o,{id:e,viewBox:"0 0 20 20",refX:i.x,refY:i.y,markerWidth:20*r,markerHeight:20*r,orient:"auto"});var a=Tt("defs",s);return a||(a=xn("defs"),an(s,a)),an(a,o),function(e,t){c[e]=t}(e,o)}var t=xn("path");un(t,{d:"M 11 5 L 1 10 L 11 15"}),e("association-start",{element:t,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:1,y:10},scale:.5});var n=xn("path");un(n,{d:"M 1 5 L 11 10 L 1 15"}),e("association-end",{element:n,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:12,y:10},scale:.5});var i=xn("path");un(i,{d:"M 1 5 L 11 10 L 1 15 Z"}),e("information-requirement-end",{element:i,ref:{x:11,y:10},scale:1});var r=xn("path");un(r,{d:"M 1 3 L 11 10 L 1 17"}),e("knowledge-requirement-end",{element:r,attrs:{fill:"none",stroke:"black",strokeWidth:2},ref:{x:11,y:10},scale:.8});var o=xn("circle");un(o,{cx:3,cy:3,r:3}),e("authority-requirement-end",{element:o,ref:{x:3,y:3},scale:.9})}function s(e,t,n){return m(t)||(n=t,t=[]),i.style(t||[],R(n,e||{}))}function l(e,t,n,i,r,o){v(r)&&(o=r,r=0),r=r||0,o=s(o,{stroke:"black",strokeWidth:2,fill:"white"});var a=xn("rect");return un(a,{x:r,y:r,width:t-2*r,height:n-2*r,rx:i,ry:i}),un(a,o),an(e,a),a}function u(e,t,n){var i=o.createText(t||"",n);return nt(i,"class","djs-label"),an(e,i),i}function p(e,t,n){return u(e,function(e){return Oi(e).name}(t),{box:t,align:n,padding:5})}function d(e,t,n){n=s(n,["no-fill"],{strokeWidth:2,stroke:"black"});var i=xn("path");return un(i,{d:t}),un(i,n),an(e,i),i}var f={"dmn:Decision":function(e,t,n){var i=l(e,t.width,t.height,0,n);return p(e,t,"center-middle"),i},"dmn:KnowledgeSource":function(e,t,n){var i=d(e,r.getScaledPath("KNOWLEDGE_SOURCE",{xScaleFactor:1.021,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.075}}),{strokeWidth:2,fill:"white",stroke:"black"});return p(e,t,"center-middle"),i},"dmn:BusinessKnowledgeModel":function(e,t,n){var i=d(e,r.getScaledPath("BUSINESS_KNOWLEDGE_MODEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.3}}),{strokeWidth:2,fill:"white",stroke:"black"});return p(e,t,"center-middle"),i},"dmn:InputData":function(e,t,n){var i=l(e,t.width,t.height,22,n);return p(e,t,"center-middle"),i},"dmn:TextAnnotation":function(e,t,n){var i=l(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return d(e,r.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}})),u(e,Bi(t).text||"",{box:t,align:"left-middle",padding:5}),i},"dmn:Association":function(e,t,n){var i=Bi(t);return n=R({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"},n||{}),"One"!==i.associationDirection&&"Both"!==i.associationDirection||(n.markerEnd=a("association-end")),"Both"===i.associationDirection&&(n.markerStart=a("association-start")),h(e,t.waypoints,n)},"dmn:InformationRequirement":function(e,t,n){return n=R({strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:a("information-requirement-end")},n||{}),h(e,t.waypoints,n)},"dmn:KnowledgeRequirement":function(e,t,n){return n=R({strokeWidth:1,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:a("knowledge-requirement-end")},n||{}),h(e,t.waypoints,n)},"dmn:AuthorityRequirement":function(e,t,n){return n=R({strokeWidth:1.5,strokeDasharray:5,strokeLinecap:"round",strokeLinejoin:"round",markerEnd:a("authority-requirement-end")},n||{}),h(e,t.waypoints,n)}};function h(e,t,n){var i=jn(t,n=s(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}));return an(e,i),i}this.canRender=function(e){return ki(e,"dmn:DMNElement")||ki(e,"dmn:InformationRequirement")||ki(e,"dmn:KnowledgeRequirement")||ki(e,"dmn:AuthorityRequirement")},this.drawShape=function(e,t){var n=f[t.type];return n?n(e,t):rn.prototype.drawShape.apply(this,[e,t])},this.drawConnection=function(e,t){var n=t.type,i=f[n];return i?i(e,t):rn.prototype.drawConnection.apply(this,[e,t])},e.on("canvas.init",function(e){t(e.svg)})}function Bi(e){return e.businessObject}$i.prototype.createText=function(e,t){return this.layoutText(e,t).element},$i.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},$i.prototype.layoutText=function(e,t){var n=R({},this._config.size,t.box),i=R({},this._config.style,t.style),r=function(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}(t.align||this._config.align),o=function(e){return v(e)?R({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}(void 0!==t.padding?t.padding:this._config.padding),a=t.fitBox||!1,s=function(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}(i),c=e.split(/\r?\n/g),l=[],u=n.width-o.left-o.right,p=xn("text");for(un(p,{x:0,y:0}),un(p,i),an(function(){var e=document.getElementById("helper-svg");return e||(un(e=xn("svg"),{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(e)),e}(),p);c.length;)l.push(Ni(c,u,p));"middle"===r.vertical&&(o.top=o.bottom=0);var d=b(l,function(e,t,n){return e+(s||t.height)},0)+o.top+o.bottom,f=b(l,function(e,t,n){return t.width>e?t.width:e},0),h=o.top;"middle"===r.vertical&&(h+=(n.height-d)/2),h-=(s||l[0].height)/4;var m=xn("text");return un(m,i),y(l,function(e){var t;switch(h+=s||e.height,r.horizontal){case"left":t=o.left;break;case"right":t=(a?f:u)-o.right-e.width;break;default:t=Math.max(((a?f:u)-e.width)/2+o.left,0)}var n=xn("tspan");un(n,{x:t,y:h}),n.textContent=e.text,an(m,n)}),gn(p),{dimensions:{width:f,height:d},element:m}},zt(Li,rn),Li.$inject=["eventBus","pathMap","styles"];var Vi=/\{([^}]+)\}/g,Fi=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;var Ui={__init__:["drdRenderer"],drdRenderer:["type",Li],pathMap:["type",function(){this.pathMap={KNOWLEDGE_SOURCE:{d:"m {mx},{my} l 0,{e.y0} c {e.x0},{e.y1} {e.x1},-{e.y2} {e.x2},-{e.y3} c {e.x3},-{e.y4} {e.x4},{e.y5} {e.x5},{e.y6} l 0,-{e.y7}z",width:100,height:65,widthElements:[29.8,48.4,67.2,12.2,19.8,30.8],heightElements:[55.3,19.7,4.2,6.7,2.3,1.6,6.2,54.6]},BUSINESS_KNOWLEDGE_MODEL:{d:"m {mx},{my} l {e.x0},-{e.y0} l {e.x1},0 l 0,{e.y1} l -{e.x2},{e.y2} l -{e.x3},0z",width:125,height:45,widthElements:[13.8,109.2,13.8,109.1],heightElements:[13.2,29.8,13.2]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",width:10,height:30,widthElements:[10],heightElements:[30]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,r=this.pathMap[e];i=t.abspos?(n=t.abspos.x,t.abspos.y):(n=t.containerWidth*t.position.mx,t.containerHeight*t.position.my);var o={};if(t.position){for(var a=t.containerHeight/r.height*t.yScaleFactor,s=t.containerWidth/r.width*t.xScaleFactor,c=0;c<r.heightElements.length;c++)o["y"+c]=r.heightElements[c]*a;for(var l=0;l<r.widthElements.length;l++)o["x"+l]=r.widthElements[l]*s}return function(e,n){return String(e).replace(Vi,function(e,t){return function(e,t,n){var o=n;return t.replace(Fi,function(e,t,n,i,r){t=t||i,o&&(t in o&&(o=o[t]),"function"==typeof o&&r&&(o=o()))}),o=(null==o||o==n?e:o)+""}(e,t,n)})}(r.d,{mx:n,my:i,e:o})}}]};function Hi(e,t){return R({id:e.id,type:e.$type,businessObject:e},t)}function zi(e,t,n,i){this._eventBus=e,this._canvas=t,this._elementRegistry=i,this._elementFactory=n}zi.$inject=["eventBus","canvas","elementFactory","elementRegistry"],zi.prototype.root=function(e){var t=this._elementFactory.createRoot(Hi(e));return this._canvas.setRootElement(t),t},zi.prototype.add=function(e,t){var n,i,r,o,a,s,c,l=this._elementFactory,u=this._canvas,p=this._eventBus;if(t.$instanceOf("biodi:Bounds"))a=Hi(e,{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}),n=l.createShape(a),u.addShape(n),p.fire("drdElement.added",{element:n,di:t});else{if(!t.$instanceOf("biodi:Edge"))throw new Error("unknown di for element "+e.id);i=function(e){var t=e.waypoints;if(t)return x(t,function(e){var t={x:e.x,y:e.y};return R({original:t},t)})}(t),s=t.source,c=e.$parent.id,ki(e,"dmn:Association")&&(c=function(e){return e&&e.href.slice(1)}(e.targetRef)),r=this._getShape(s),o=this._getShape(c),r&&o&&(a=Hi(e,{hidden:!1,source:r,target:o,waypoints:i}),n=l.createConnection(a),u.addConnection(n),p.fire("drdElement.added",{element:n,di:t}))}return n},zi.prototype._getShape=function(e){return this._elementRegistry.get(e)};var qi={__depends__:[Ui,{drdImporter:["type",zi]}]};var Wi={translate:["value",function(e,n){return n=n||{},e.replace(/{([^}]+)}/g,function(e,t){return n[t]||"{"+t+"}"})}]};function Gi(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function Yi(e){return e.originalEvent||e.srcEvent}function Ki(e,t){Gi(e),Gi(Yi(e))}function Xi(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Ji(e){return!(Yi(e)||e).button}function Qi(e){var t=Yi(e)||e;return!!Ji(e)&&(/mac/i.test(navigator.platform)?t.metaKey:t.ctrlKey)}function Zi(e){return!0}function er(o,a,e){var r=e.cls("djs-hit",["no-fill","no-border"],{stroke:"white",strokeWidth:15});function s(e,t,n){var i,r;!function(e,t){return!(p[e]||Ji)(t)}(e,t)&&(n?r=a.getGraphics(n):(i=t.delegateTarget||t.target)&&(r=i,n=a.get(r)),r&&n&&!1===o.fire(e,{element:n,gfx:r,originalEvent:t})&&(t.stopPropagation(),t.preventDefault()))}var c={};function l(e){return c[e]}var u={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup",contextmenu:"element.contextmenu"},p={"element.contextmenu":Zi};var d="svg, .djs-element";function i(e,t,n,i){var r=c[n]=function(e){s(n,e)};i&&(p[n]=i),r.$delegate=_t.bind(e,d,t,r)}function f(e,t,n){var i=l(n);i&&_t.unbind(e,t,i.$delegate)}o.on("canvas.destroy",function(e){!function(n){y(u,function(e,t){f(n,t,e)})}(e.svg)}),o.on("canvas.init",function(e){!function(n){y(u,function(e,t){i(n,t,e)})}(e.svg)}),o.on(["shape.added","connection.added"],function(e){var t,n=e.element,i=e.gfx;n.waypoints?t=jn(n.waypoints):un(t=xn("rect"),{x:0,y:0,width:n.width,height:n.height}),un(t,r),an(i,t)}),o.on("shape.changed",500,function(e){var t=e.element;un(Tt(".djs-hit",e.gfx),{width:t.width,height:t.height})}),o.on("connection.changed",function(e){var t=e.element;!function(e,t){un(e,{points:Mn(t)})}(Tt(".djs-hit",e.gfx),t.waypoints)}),this.fire=s,this.triggerMouseEvent=function(e,t,n){var i=u[e];if(!i)throw new Error("unmapped DOM event name <"+e+">");return s(i,t,n)},this.mouseHandler=l,this.registerEvent=i,this.unregisterEvent=f}er.$inject=["eventBus","elementRegistry","styles"];var tr={__init__:["interactionEvents"],interactionEvents:["type",er]};function nr(e,t,n){this.offset=6;var i=t.cls("djs-outline",["no-fill"]),r=this;function o(e,t){var n=xn("rect");return un(n,R({x:10,y:10,width:100,height:100},i)),an(e,n),n}e.on(["shape.added","shape.changed"],500,function(e){var t=e.element,n=e.gfx,i=Tt(".djs-outline",n);i||(i=o(n)),r.updateShapeOutline(i,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,i=Tt(".djs-outline",n);i||(i=o(n)),r.updateConnectionOutline(i,t)})}nr.prototype.updateShapeOutline=function(e,t){un(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},nr.prototype.updateConnectionOutline=function(e,t){var n=qn(t);un(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},nr.$inject=["eventBus","styles","elementRegistry"];var ir={__init__:["outline"],outline:["type",nr]};function rr(e){this._eventBus=e,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(e){var t=e.element;n.deselect(t)}),e.on(["diagram.clear"],function(e){n.select(null)})}rr.$inject=["eventBus"],rr.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}},rr.prototype.get=function(){return this._selectedElements},rr.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},rr.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();m(e)||(e=e?[e]:[]),t?y(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};function or(e,n,t,i){function r(e,t){n.addMarker(e,t)}function o(e,t){n.removeMarker(e,t)}this._multiSelectionBox=null,e.on("element.hover",function(e){r(e.element,"hover")}),e.on("element.out",function(e){o(e.element,"hover")}),e.on("selection.changed",function(e){var t=e.oldSelection,n=e.newSelection;y(t,function(e){-1===n.indexOf(e)&&function(e){o(e,"selected")}(e)}),y(n,function(e){-1===t.indexOf(e)&&function(e){r(e,"selected")}(e)})})}function ar(e,o,a,i){e.on("create.end",500,function(e){e.context.canExecute&&o.select(e.context.shape)}),e.on("connect.end",500,function(e){e.context.canExecute&&e.context.target&&o.select(e.context.target)}),e.on("shape.move.end",500,function(e){var t=e.previousSelection||[],n=i.get(e.context.shape.id);h(t,function(e){return n.id===e.id})||o.select(n)}),e.on("element.click",function(e){var t=e.element;t===a.getRootElement()&&(t=null);var n=o.isSelected(t),i=1<o.get().length,r=Qi(e);if(n&&i)return r?o.deselect(t):o.select(t);n?o.deselect(t):o.select(t,r)})}or.$inject=["eventBus","canvas","selection","styles"],ar.$inject=["eventBus","selection","canvas","elementRegistry"];var sr={__init__:["selectionVisuals","selectionBehavior"],__depends__:[tr,ir],selection:["type",rr],selectionVisuals:["type",or],selectionBehavior:["type",ar]};function cr(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}cr.prototype.next=function(){return this._prefix+ ++this._counter};var lr=new cr("ov");function ur(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=lr,this._overlayDefaults=R({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=function(e){var t=wt('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}(n.getContainer()),this._init()}function pr(e,t,n){R(e.style,{left:t+"px",top:n+"px"})}function dr(e,t){e.style.display=!1===t?"none":""}function fr(t,n){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(e){t.style[e+"transform"]=n})}ur.$inject=["config.overlays","eventBus","canvas","elementRegistry"],ur.prototype.get=function(e){if(f(e)&&(e={id:e}),f(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?g(t.overlays,S({type:e.type})):t.overlays.slice():[]}return e.type?g(this._overlays,S({type:e.type})):e.id?this._overlays[e.id]:null},ur.prototype.add=function(e,t,n){if(v(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=R({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},ur.prototype.remove=function(e){var t=this.get(e)||[];m(t)||(t=[t]);var i=this;y(t,function(e){var t=i._getOverlayContainer(e.element,!0);if(e&&(At(e.html),At(e.htmlContainer),delete e.htmlContainer,delete e.element,delete i._overlays[e.id]),t){var n=t.overlays.indexOf(e);-1!==n&&t.overlays.splice(n,1)}})},ur.prototype.show=function(){dr(this._overlayRoot)},ur.prototype.hide=function(){dr(this._overlayRoot,!1)},ur.prototype.clear=function(){this._overlays={},this._overlayContainers=[],lt(this._overlayRoot)},ur.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=qn(t);i=o.x,r=o.y}pr(n,i,r),nt(e.html,"data-container-id",t.id)},ur.prototype._updateOverlay=function(e){var t,n,i=e.position,r=e.htmlContainer,o=e.element,a=i.left,s=i.top;void 0!==i.right&&(t=o.waypoints?qn(o).width:o.width,a=-1*i.right+t);void 0!==i.bottom&&(n=o.waypoints?qn(o).height:o.height,s=-1*i.bottom+n);pr(r,a||0,s||0)},ur.prototype._createOverlayContainer=function(e){var t=wt('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},ur.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";fr(this._overlayRoot,n)},ur.prototype._getOverlayContainer=function(t,e){var n=h(this._overlayContainers,function(e){return e.element===t});return n||e?n:this._createOverlayContainer(t)},ur.prototype._addOverlay=function(e){var t,n,i=e.id,r=e.element,o=e.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),f(o)&&(o=wt(o)),n=this._getOverlayContainer(r),(t=wt('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">')).appendChild(o),e.type&&st(t).add("djs-overlay-"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},ur.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=n&&n.minZoom,r=n&&n.maxZoom,o=e.htmlContainer,a=!0;n&&((c(i)&&i>t.scale||c(r)&&r<t.scale)&&(a=!1),dr(o,a)),this._updateOverlayScale(e,t)},ur.prototype._updateOverlayScale=function(e,t){var n,i,r,o=e.scale,a=e.htmlContainer,s="";!0!==o&&(i=!1===o?n=1:(n=o.min,o.max),c(n)&&t.scale<n&&(r=(1/t.scale||1)*n),c(i)&&t.scale>i&&(r=(1/t.scale||1)*i)),c(r)&&(s="scale("+r+","+r+")"),fr(a,s)},ur.prototype._updateOverlaysVisibilty=function(t){var n=this;y(this._overlays,function(e){n._updateOverlayVisibilty(e,t)})},ur.prototype._init=function(){var e=this._eventBus,r=this;e.on("canvas.viewbox.changing",function(e){r.hide()}),e.on("canvas.viewbox.changed",function(e){!function(e){r._updateRoot(e),r._updateOverlaysVisibilty(e),r.show()}(e.viewbox)}),e.on(["shape.remove","connection.remove"],function(e){var t=e.element;y(r.get({element:t}),function(e){r.remove(e.id)});var n=r._getOverlayContainer(t);if(n){At(n.html);var i=r._overlayContainers.indexOf(n);-1!==i&&r._overlayContainers.splice(i,1)}}),e.on("element.changed",500,function(e){var t=e.element,n=r._getOverlayContainer(t,!0);n&&(y(n.overlays,function(e){r._updateOverlay(e)}),r._updateOverlayContainer(n))}),e.on("element.marker.update",function(e){var t=r._getOverlayContainer(e.element,!0);t&&st(t.html)[e.add?"add":"remove"](e.marker)}),e.on("diagram.clear",this.clear,this)};var hr={__init__:["overlays"],overlays:["type",ur]};function mr(e,t){this._eventBus=e,this._canvas=t,e.on("diagram.init",function(){this._init()},this),e.on("import.done",function(e){this.update()},this)}function vr(e,n){function t(e,t){st(n.getContainer()).toggle(e,t)}e.on("palette.create",function(){t("with-palette",!0)}),e.on("palette.changed",function(e){t("with-palette-two-column",e.twoColumn)})}mr.$inject=["eventBus","canvas"],mr.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),i=this._container=wt(mr.HTML_MARKUP);n.appendChild(i),this.nameElement=Tt(".dmn-definitions-name",this._container),this.idElement=Tt(".dmn-definitions-id",this._container),_t.bind(i,".dmn-definitions-name, .dmn-definitions-id","mousedown",function(e){e.stopPropagation()}),t.fire("definitionIdView.create",{html:i})},mr.prototype.update=function(e){var t=this._canvas.getRootElement().businessObject;this.nameElement.textContent=t.name,this.idElement.textContent=t.id},mr.HTML_MARKUP='<div class="dmn-definitions"><div class="dmn-definitions-name" title="Definition Name"></div><div class="dmn-definitions-id" title="Definition ID"></div></div>',vr.$inject=["eventBus","canvas"];var gr={__init__:["definitionPropertiesView","definitionPropertiesPaletteAdapter"],definitionPropertiesView:["type",mr],definitionPropertiesPaletteAdapter:["type",vr]};function yr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var br=[{className:"dmn-icon-decision-table",matches:function(e){var t=e.businessObject;return ki(t,"dmn:Decision")&&t.decisionTable}},{className:"dmn-icon-literal-expression",matches:function(e){var t=e.businessObject;return ki(t,"dmn:Decision")&&t.literalExpression}}],_r=(function(e,t,n){return t&&yr(e.prototype,t),n&&yr(e,n),e}(wr,[{key:"addOverlay",value:function(e,t){var n=wt('\n      <div class="drill-down-overlay">\n        <span class="'+t+'"></span>\n      </div>\n    '),i=this._overlays.add(e,{position:{top:2,left:2},html:n});!1!==this._config.enabled&&(st(n).add("interactive"),this.bindEventListener(e,n,i))}},{key:"bindEventListener",value:function(e,t,n){var i=this,r=this._overlays,o=this._eventBus,a=r._overlayRoot;_t.bind(a,'[data-overlay-id="'+n+'"]',"click",function(){!1!==o.fire("drillDown.click",{element:e})&&i.drillDown(e)})}},{key:"drillDown",value:function(e){var t=this._injector.get("_parent",!1);if(!t)return!1;var n=t.getView(e.businessObject);return!!n&&(t.open(n),!0)}}]),wr);function wr(e,t,n,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,wr),this._injector=e,this._eventBus=t,this._overlays=n,this._config=i||{enabled:!0},t.on(["shape.added"],function(e){for(var t=e.element,n=0;n<br.length;n++){var i=br[n],r=i.matches,o=i.className;r&&r(t)&&a.addOverlay(t,o)}})}_r.$inject=["injector","eventBus","overlays","config.drillDown"];var xr={__depends__:[hr],__init__:["drillDown"],drillDown:["type",_r]},Er='<img width="52" height="52" src="'+("data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960"><path fill="#fff" d="M960 60v839c0 33-27 61-60 61H60c-33 0-60-27-60-60V60C0 27 27 0 60 0h839c34 0 61 27 61 60z"/><path fill="#52b415" d="M217 548a205 205 0 0 0-144 58 202 202 0 0 0-4 286 202 202 0 0 0 285 3 200 200 0 0 0 48-219 203 203 0 0 0-185-128zM752 6a206 206 0 0 0-192 285 206 206 0 0 0 269 111 207 207 0 0 0 111-260A204 204 0 0 0 752 6zM62 0A62 62 0 0 0 0 62v398l60 46a259 259 0 0 1 89-36c5-28 10-57 14-85l99 2 12 85a246 246 0 0 1 88 38l70-52 69 71-52 68c17 30 29 58 35 90l86 14-2 100-86 12a240 240 0 0 1-38 89l43 58h413c37 0 60-27 60-61V407a220 220 0 0 1-44 40l21 85-93 39-45-76a258 258 0 0 1-98 1l-45 76-94-39 22-85a298 298 0 0 1-70-69l-86 22-38-94 76-45a258 258 0 0 1-1-98l-76-45 40-94 85 22a271 271 0 0 1 41-47z"/></svg>'))+'" />';function Cr(e){return e.join(";")}var kr,Sr='<div class="bjs-powered-by-lightbox" style="'+Cr(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"])+'"><div class="backdrop" style="'+Cr(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"])+'"></div><div class="notice" style="'+Cr(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"])+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px">'+Er+'</a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';var Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function Or(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Ar(e){this._container=this._createContainer(),function(e){var t=wt('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100">'+Er+"</a>");e.appendChild(t),yt.bind(t,"click",function(e){kr||(kr=wt(Sr),_t.bind(kr,".backdrop","click",function(e){document.body.removeChild(kr)})),document.body.appendChild(kr),e.preventDefault()})}(this._container),this._init(this._container,e)}function Ir(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Dr(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Pr(e){return Math.log(e)/Math.log(10)}function Rr(e,t){var n=Pr(e.min),i=Pr(e.max);return(Math.abs(n)+Math.abs(i))/t}zt(Ar,Ci),Ar.prototype.saveSVG=function(e,t){t||(t=e,e={});var n=this.get("canvas"),i=n.getDefaultLayer(),r=Tt("defs",n._svg),o=Pn(i),a=r&&r.outerHTML||"",s=i.getBBox();t(null,'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with dmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+s.width+'" height="'+s.height+'" viewBox="'+s.x+" "+s.y+" "+s.width+" "+s.height+'" version="1.1">'+a+o+"</svg>")},Ar.prototype.getModules=function(){return this._modules},Ar.prototype.destroy=function(){Ci.prototype.destroy.call(this),At(this._container)},Ar.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},Ar.prototype.off=function(e,t){this.get("eventBus").off(e,t)},Ar.prototype._init=function(e,t){var n=t.additionalModules,i=t.canvas,r=function(e,t){var n={};for(var i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(t,["additionalModules","canvas"]),o=t.modules||this.getModules(),a=[].concat([{drd:["value",this]}],Or(o),Or(n||[])),s=Tr({},r,{canvas:Tr({},i,{container:e}),modules:a});Ci.call(this,s),t&&t.container&&this.attachTo(t.container)},Ar.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},Ar.prototype._createContainer=function(){return wt('<div class="dmn-drd-container"></div>')},Ar.prototype.open=function(e,t){var n;try{return this._definitions&&this.clear(),this._definitions=e,function(e,t,n){var i,r,o=e.get("drdImporter"),a=e.get("eventBus"),s=[];a.fire("import.start",{definitions:t});try{r=t,new Ii({root:function(e){return o.root(e)},element:function(e,t){return o.add(e,t)},error:function(e,t){s.push({message:e,context:t})}}).handleDefinitions(r)}catch(e){i=e}a.fire("import.done",{error:i,warnings:s}),n(i,s)}(this,e,t)}catch(e){n=e}return t(n)},Ar.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach();var t=this._container;e.appendChild(t),this._emit("attach",{}),this.get("canvas").resized()},Ar.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},Ar.prototype._modules=[qi,Wi,sr,hr,gr,xr];var Nr=Math.sign||function(e){return 0<=e?1:-1},Mr={min:.2,max:4};function jr(t,e,n){t=t||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=D(this._handleWheel,this),this._totalDelta=0,this._scale=t.scale||.75;var i=this;e.on("canvas.init",function(e){i._init(!1!==t.enabled)})}jr.$inject=["config.zoomScroll","eventBus","canvas"],jr.prototype.scroll=function(e){this._canvas.scroll(e)},jr.prototype.reset=function(){this._canvas.zoom("fit-viewport")},jr.prototype.zoom=function(e,t){var n=Rr(Mr,20);this._totalDelta+=e,.1<Math.abs(this._totalDelta)&&(this._zoom(e,t,n),this._totalDelta=0)},jr.prototype._handleWheel=function(e){if(!ht(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var n,i=e.ctrlKey,r=e.shiftKey,o=-1*this._scale;if(o*=i?0===e.deltaMode?.02:.32:0===e.deltaMode?1:16,i){var a=t.getBoundingClientRect(),s={x:e.clientX-a.left,y:e.clientY-a.top};n=Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*Nr(e.deltaY)*o,this.zoom(n,s)}else n=r?{dx:o*e.deltaY,dy:0}:{dx:o*e.deltaX,dy:o*e.deltaY},this.scroll(n)}},jr.prototype.stepZoom=function(e,t){var n=Rr(Mr,10);this._zoom(e,t,n)},jr.prototype._zoom=function(e,t,n){var i=this._canvas,r=0<e?1:-1,o=Pr(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var s=Math.pow(10,a);i.zoom(function(e,t){return Math.max(e.min,Math.min(e.max,t))}(Mr,s),t)},jr.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return void 0===e&&(e=!i),i!==e&&yt[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e},jr.prototype._init=function(e){this.toggle(e)};var $r={__init__:["zoomScroll"],zoomScroll:["type",jr]},Lr=/^djs-cursor-.*$/;function Br(e){var t=st(document.body);t.removeMatching(Lr),e&&t.add("djs-cursor-"+e)}function Vr(){Br(null)}var Fr=5e3;function Ur(e,t){function n(){return!1}return t=t||"element.click",e.once(t,Fr,n),function(){e.off(t,n)}}function Hr(r,o){var a;function t(e){var t=a.start,n=Xi(e),i=Dr(n,t);(!a.dragging&&15<function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}(i)&&(a.dragging=!0,Ur(r),Br("grab")),a.dragging)&&(i=Dr(n,a.last||a.start),o.scroll({dx:i.x,dy:i.y}),a.last=n);e.preventDefault()}function n(e){yt.unbind(document,"mousemove",t),yt.unbind(document,"mouseup",n),a=null,Vr()}r.on("element.mousedown",500,function(e){return function(e){if(ht(e.target,".djs-draggable"))return;if(e.button||e.ctrlKey||e.shiftKey||e.altKey)return;return a={start:Xi(e)},yt.bind(document,"mousemove",t),yt.bind(document,"mouseup",n),!0}(e.originalEvent)})}Hr.$inject=["eventBus","canvas"];var zr={__init__:["moveCanvas"],moveCanvas:["type",Hr]},qr=Ht(function(ze){!function(o,r,e,p){var a,s=["","webkit","Moz","MS","ms","o"],t=r.createElement("div"),n="function",c=Math.round,d=Math.abs,f=Date.now;function l(e,t,n){return setTimeout(y(e,n),t)}function i(e,t,n){return!!Array.isArray(e)&&(u(e,n[t],n),!0)}function u(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==p)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function h(i,e,t){var r="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=o.console&&(o.console.warn||o.console.log);return n&&n.call(o.console,r,t),i.apply(this,arguments)}}a="function"!=typeof Object.assign?function(e){if(e===p||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==p&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t}:Object.assign;var m=h(function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===p)&&(e[i[r]]=t[i[r]]),r++;return e},"extend","Use `assign`."),v=h(function(e,t){return m(e,t,!0)},"merge","Use `assign`.");function g(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&a(i,n)}function y(e,t){return function(){return e.apply(t,arguments)}}function b(e,t){return qe(e)==n?e.apply(t&&t[0]||p,t):e}function _(e,t){return e===p?t:e}function w(t,e,n){u(k(e),function(e){t.addEventListener(e,n,!1)})}function x(t,e,n){u(k(e),function(e){t.removeEventListener(e,n,!1)})}function E(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function C(e,t){return-1<e.indexOf(t)}function k(e){return e.trim().split(/\s+/g)}function S(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function T(e){return Array.prototype.slice.call(e,0)}function O(e,n,t){for(var i=[],r=[],o=0;o<e.length;){var a=n?e[o][n]:e[o];S(r,a)<0&&i.push(e[o]),r[o]=a,o++}return t&&(i=n?i.sort(function(e,t){return e[n]>t[n]}):i.sort()),i}function A(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),o=0;o<s.length;){if((i=(n=s[o])?n+r:t)in e)return i;o++}return p}var I=1;function D(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}var P="ontouchstart"in o,R=A(o,"PointerEvent")!==p,N=P&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),M="touch",j=25,$=1,L=4,B=8,V=1,F=2,U=4,H=8,z=16,q=F|U,W=H|z,G=q|W,Y=["x","y"],K=["clientX","clientY"];function X(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function J(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,o=t&$&&i-r==0,a=t&(L|B)&&i-r==0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=Q(t));1<r&&!n.firstMultiple?n.firstMultiple=Q(t):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,c=t.center=Z(i);t.timeStamp=f(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=ie(s,c),t.distance=ne(s,c),function(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},o=e.prevInput||{};t.eventType!==$&&o.eventType!==L||(r=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y});t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}(n,t),t.offsetDirection=te(t.deltaX,t.deltaY);var l=ee(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,t.scale=a?function(e,t){return ne(t[0],t[1],K)/ne(e[0],e[1],K)}(a.pointers,i):1,t.rotation=a?function(e,t){return ie(t[1],t[0],K)+ie(e[1],e[0],K)}(a.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,r,o,a=e.lastInterval||t,s=t.timeStamp-a.timeStamp;if(t.eventType!=B&&(j<s||a.velocity===p)){var c=t.deltaX-a.deltaX,l=t.deltaY-a.deltaY,u=ee(s,c,l);i=u.x,r=u.y,n=d(u.x)>d(u.y)?u.x:u.y,o=te(c,l),e.lastInterval=t}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=o}(n,t);var u=e.element;E(t.srcEvent.target,u)&&(u=t.srcEvent.target);t.target=u}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function Q(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:c(e.pointers[n].clientX),clientY:c(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:Z(t),deltaX:e.deltaX,deltaY:e.deltaY}}function Z(e){var t=e.length;if(1===t)return{x:c(e[0].clientX),y:c(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:c(n/t),y:c(i/t)}}function ee(e,t,n){return{x:t/e||0,y:n/e||0}}function te(e,t){return e===t?V:d(e)>=d(t)?e<0?F:U:t<0?H:z}function ne(e,t,n){n||(n=Y);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function ie(e,t,n){n||(n=Y);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}X.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(D(this.element),this.evWin,this.domHandler)}};var re={mousedown:$,mousemove:2,mouseup:L},oe="mousedown",ae="mousemove mouseup";function se(){this.evEl=oe,this.evWin=ae,this.pressed=!1,X.apply(this,arguments)}g(se,X,{handler:function(e){var t=re[e.type];t&$&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=L),this.pressed&&(t&L&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var ce={pointerdown:$,pointermove:2,pointerup:L,pointercancel:B,pointerout:B},le={2:M,3:"pen",4:"mouse",5:"kinect"},ue="pointerdown",pe="pointermove pointerup pointercancel";function de(){this.evEl=ue,this.evWin=pe,X.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(ue="MSPointerDown",pe="MSPointerMove MSPointerUp MSPointerCancel"),g(de,X,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=ce[i],o=le[e.pointerType]||e.pointerType,a=o==M,s=S(t,e.pointerId,"pointerId");r&$&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):r&(L|B)&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var fe={touchstart:$,touchmove:2,touchend:L,touchcancel:B};function he(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,X.apply(this,arguments)}g(he,X,{handler:function(e){var t=fe[e.type];if(t===$&&(this.started=!0),this.started){var n=function(e,t){var n=T(e.touches),i=T(e.changedTouches);t&(L|B)&&(n=O(n.concat(i),"identifier",!0));return[n,i]}.call(this,e,t);t&(L|B)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:M,srcEvent:e})}}});var me={touchstart:$,touchmove:2,touchend:L,touchcancel:B},ve="touchstart touchmove touchend touchcancel";function ge(){this.evTarget=ve,this.targetIds={},X.apply(this,arguments)}g(ge,X,{handler:function(e){var t=me[e.type],n=function(e,t){var n=T(e.touches),i=this.targetIds;if(t&(2|$)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=T(e.changedTouches),s=[],c=this.target;if(o=n.filter(function(e){return E(e.target,c)}),t===$)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;r=0;for(;r<a.length;)i[a[r].identifier]&&s.push(a[r]),t&(L|B)&&delete i[a[r].identifier],r++;return s.length?[O(o.concat(s),"identifier",!0),s]:void 0}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:M,srcEvent:e})}});var ye=2500;function be(){X.apply(this,arguments);var e=y(this.handler,this);this.touch=new ge(this.manager,e),this.mouse=new se(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function _e(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var e=i.indexOf(n);-1<e&&i.splice(e,1)},ye)}}g(be,X,{handler:function(e,t,n){var i=n.pointerType==M,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(e,t){e&$?(this.primaryTouch=t.changedPointers[0].identifier,_e.call(this,t)):e&(L|B)&&_e.call(this,t)}).call(this,t,n);else if(r&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(t-r.x),a=Math.abs(n-r.y);if(o<=25&&a<=25)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var we=A(t.style,"touchAction"),xe=we!==p,Ee="manipulation",Ce="none",ke="pan-x",Se="pan-y",Te=function(){if(!xe)return!1;var t={},n=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!n||o.CSS.supports("touch-action",e)}),t}();function Oe(e,t){this.manager=e,this.set(t)}Oe.prototype={set:function(e){"compute"==e&&(e=this.compute()),xe&&this.manager.element.style&&Te[e]&&(this.manager.element.style[we]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(C(e,Ce))return Ce;var t=C(e,ke),n=C(e,Se);if(t&&n)return Ce;if(t||n)return t?ke:Se;if(C(e,Ee))return Ee;return"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,r=C(i,Ce)&&!Te.none,o=C(i,Se)&&!Te[Se],a=C(i,ke)&&!Te[ke];if(r){var s=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(s&&c&&l)return}if(!a||!o)return r||o&&n&q||a&&n&W?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ae=1;function Ie(e){this.options=a({},this.defaults,e||{}),this.id=I++,this.manager=null,this.options.enable=_(this.options.enable,!0),this.state=Ae,this.simultaneous={},this.requireFail=[]}function De(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Pe(e){return e==z?"down":e==H?"up":e==F?"left":e==U?"right":""}function Re(e,t){var n=t.manager;return n?n.get(e):e}function Ne(){Ie.apply(this,arguments)}function Me(){Ne.apply(this,arguments),this.pX=null,this.pY=null}function je(){Ne.apply(this,arguments)}function $e(){Ie.apply(this,arguments),this._timer=null,this._input=null}function Le(){Ne.apply(this,arguments)}function Be(){Ne.apply(this,arguments)}function Ve(){Ie.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Fe(e,t){return(t=t||{}).recognizers=_(t.recognizers,Fe.defaults.preset),new Ue(e,t)}Ie.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(i(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Re(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return i(e,"dropRecognizeWith",this)||(e=Re(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(i(e,"requireFailure",this))return this;var t=this.requireFail;return-1===S(t,e=Re(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(i(e,"dropRequireFailure",this))return this;e=Re(e,this);var t=S(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){var n=this,e=this.state;function i(e){n.manager.emit(e,t)}e<8&&i(n.options.event+De(e)),i(n.options.event),t.additionalEvent&&i(t.additionalEvent),8<=e&&i(n.options.event+De(e))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Ae)))return!1;e++}return!0},recognize:function(e){var t=a({},e);if(!b(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Ae),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},g(Ne,Ie,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=6&t,r=this.attrTest(e);return i&&(n&B||!r)?16|t:i||r?n&L?8|t:2&t?4|t:2:32}}),g(Me,Ne,{defaults:{event:"pan",threshold:10,pointers:1,direction:G},getTouchAction:function(){var e=this.options.direction,t=[];return e&q&&t.push(Se),e&W&&t.push(ke),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,o=e.deltaX,a=e.deltaY;return r&t.direction||(i=t.direction&q?(r=0===o?V:o<0?F:U,n=o!=this.pX,Math.abs(e.deltaX)):(r=0===a?V:a<0?H:z,n=a!=this.pY,Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return Ne.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Pe(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),g(je,Ne,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ce]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),g($e,Ie,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(L|B)&&!r)this.reset();else if(e.eventType&$)this.reset(),this._timer=l(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&L)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&L?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),g(Le,Ne,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ce]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),g(Be,Ne,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:q|W,pointers:1},getTouchAction:function(){return Me.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(q|W)?t=e.overallVelocity:n&q?t=e.overallVelocityX:n&W&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&e.eventType&L},emit:function(e){var t=Pe(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),g(Ve,Ie,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ee]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&$&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=L)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||ne(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Fe.VERSION="2.0.7",Fe.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Le,{enable:!1}],[je,{enable:!1},["rotate"]],[Be,{direction:q}],[Me,{direction:q},["swipe"]],[Ve],[Ve,{event:"doubletap",taps:2},["tap"]],[$e]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Ue(e,t){this.options=a({},Fe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=function(e){var t=e.options.inputClass;return new(t||(R?de:N?ge:P?be:se))(e,J)}(this),this.touchAction=new Oe(this,this.options.touchAction),He(this,!0),u(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function He(n,i){var r,o=n.element;o.style&&(u(n.options.cssProps,function(e,t){r=A(o.style,t),i?(n.oldCssProps[r]=o.style[r],o.style[r]=e):o.style[r]=n.oldCssProps[r]||""}),i||(n.oldCssProps={}))}Ue.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,r=t.curRecognizer;(!r||r&&8&r.state)&&(r=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&14&n.state&&(r=t.curRecognizer=n),o++}},get:function(e){if(e instanceof Ie)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(i(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(i(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=S(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==p&&t!==p){var n=this.handlers;return u(k(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==p){var n=this.handlers;return u(k(e),function(e){t?n[e]&&n[e].splice(S(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=r.createEvent("Event");n.initEvent(e,!0,!0),(n.gesture=t).target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&He(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(Fe,{INPUT_START:$,INPUT_MOVE:2,INPUT_END:L,INPUT_CANCEL:B,STATE_POSSIBLE:Ae,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:V,DIRECTION_LEFT:F,DIRECTION_RIGHT:U,DIRECTION_UP:H,DIRECTION_DOWN:z,DIRECTION_HORIZONTAL:q,DIRECTION_VERTICAL:W,DIRECTION_ALL:G,Manager:Ue,Input:X,TouchAction:Oe,TouchInput:ge,MouseInput:se,PointerEventInput:de,TouchMouseInput:be,SingleTouchInput:he,Recognizer:Ie,AttrRecognizer:Ne,Tap:Ve,Pan:Me,Swipe:Be,Pinch:je,Rotate:Le,Press:$e,on:w,off:x,each:u,merge:v,extend:m,assign:a,inherit:g,bindFn:y,prefixed:A}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=Fe,"function"==typeof p&&p.amd?p(function(){return Fe}):ze.exports?ze.exports=Fe:o.Hammer=Fe}(window,document)}),Wr=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function Gr(e,t){return t.get(e,!1)}function Yr(e){e.preventDefault(),e.stopPropagation(),"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation()}function Kr(t){function e(e){setTimeout(function(){y(Wr,function(e){yt.unbind(t,e,Yr,!0)})},500)}yt.bind(t,"touchstart",function(e){y(Wr,function(e){yt.bind(t,e,Yr,!0)})},!0),yt.bind(t,"touchend",e,!0),yt.bind(t,"touchcancel",e,!0);var r=new qr.Manager(t,{inputClass:qr.TouchInput,recognizers:[]}),n=new qr.Tap,i=new qr.Pan({threshold:10}),o=new qr.Press,a=new qr.Pinch,s=new qr.Tap({event:"doubletap",taps:2});return a.requireFailure(i),a.requireFailure(o),r.add([i,o,a,s,n]),r.reset=function(e){var n=this.recognizers,i=this.session;i.stopped||(r.stop(e),setTimeout(function(){var e,t;for(e=0;t=n[e];e++)t.reset(),t.state=8;i.curRecognizer=null},0))},r.on("hammer.input",function(e){e.srcEvent.defaultPrevented&&r.reset(!0)}),r}function Xr(e,o,t,a,n){var s,c=Gr("dragging",e),i=Gr("move",e),r=Gr("contextPad",e),l=Gr("palette",e);function u(t){return function(e){n.fire(t,e)}}function p(e){return ht(e,"svg, .djs-element",!0)}function d(e){function t(e){var t=p(e.target),n=t&&a.get(t);if(i&&o.getRootElement()!==n)return i.start(e,n,!0);!function(e){var i=0,r=0;function t(e){var t=e.deltaX-i,n=e.deltaY-r;o.scroll({dx:t,dy:n}),i=e.deltaX,r=e.deltaY}function n(e){s.off("panmove",t),s.off("panend",n),s.off("pancancel",n)}s.on("panmove",t),s.on("panend",n),s.on("pancancel",n)}()}(s=Kr(e)).on("doubletap",u("element.dblclick")),s.on("tap",u("element.click")),s.on("panstart",t),s.on("press",t),s.on("pinchstart",function(e){var i=o.zoom(),r=e.center;function t(e){var t=1-(1-e.scale)/1.5,n=Math.max(.2,Math.min(4,t*i));o.zoom(n,r),Yr(e)}function n(e){s.off("pinchmove",t),s.off("pinchend",n),s.off("pinchcancel",n),s.reset(!0)}s.on("pinchmove",t),s.on("pinchend",n),s.on("pinchcancel",n)})}c&&t.on("drag.move",function(e){var t=e.originalEvent;if(t&&!(t instanceof MouseEvent)){var n=Xi(t),i=p(document.elementFromPoint(n.x,n.y)),r=i&&a.get(i);r!==e.hover&&(e.hover&&c.out(e),r&&(c.hover({element:r,gfx:i}),e.hover=r,e.hoverGfx=i))}}),r&&t.on("contextPad.create",function(e){var t=Kr(e.pad.html);t.on("panstart",function(e){r.trigger("dragstart",e,!0)}),t.on("press",function(e){r.trigger("dragstart",e,!0)}),t.on("tap",function(e){r.trigger("click",e)})}),l&&t.on("palette.create",function(e){var t=Kr(e.container);t.on("panstart",function(e){l.trigger("dragstart",e,!0)}),t.on("press",function(e){l.trigger("dragstart",e,!0)}),t.on("tap",function(e){l.trigger("click",e)})}),t.on("canvas.init",function(e){d(e.svg)})}function Jr(e,t){var n=this;t.on("canvas.init",function(e){n.addBBoxMarker(e.svg)})}Xr.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"],Jr.$inject=["canvas","eventBus"],Jr.prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=xn("rect");un(n,{x:-1e4,y:1e4,width:10,height:10}),un(n,t),an(e,n);var i=xn("rect");un(i,{x:1e4,y:1e4,width:10,height:10}),un(i,t),an(e,i)};var Qr={__depends__:[{__depends__:[tr],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",Xr],touchFix:["type",Jr]}]};function Zr(e){Ar.call(this,e)}function eo(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}function to(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}zt(Zr,Ar),Zr.prototype._modules=[].concat(Zr.prototype._modules,Zr.prototype._navigationModules=[$r,zr,Qr]);function io(e){no(this,io),R(this,e),ho(this,"businessObject",{writable:!0})}var ro=(to(oo,io),oo);function oo(e){no(this,oo);var t=eo(this,(oo.__proto__||Object.getPrototypeOf(oo)).call(this,e));return ho(t,"rows",{enumerable:!0,value:t.rows||[]}),ho(t,"cols",{enumerable:!0,value:t.cols||[]}),t}var ao=(to(so,io),so);function so(e){no(this,so);var t=eo(this,(so.__proto__||Object.getPrototypeOf(so)).call(this,e));return ho(t,"root",{writable:!0}),ho(t,"cells",{enumerable:!0,value:t.cells||[]}),t}var co=(to(lo,io),lo);function lo(e){no(this,lo);var t=eo(this,(lo.__proto__||Object.getPrototypeOf(lo)).call(this,e));return ho(t,"root",{writable:!0}),ho(t,"cells",{enumerable:!0,value:t.cells||[]}),t}var uo=(to(po,io),po);function po(e){no(this,po);var t=eo(this,(po.__proto__||Object.getPrototypeOf(po)).call(this,e));return ho(t,"row",{writable:!0}),ho(t,"col",{writable:!0}),t}var fo={root:ro,row:ao,col:co,cell:uo};function ho(e,t,n){Object.defineProperty(e,t,n)}function mo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var vo=(function(e,t,n){return t&&mo(e.prototype,t),n&&mo(e,n),e}(go,[{key:"create",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.id||(t.id=e+"_"+this._uid++),function(e,t){var n=fo[e];if(!n)throw new Error("unknown type "+e);return new n(t)}(e,t)}},{key:"createRoot",value:function(e){return this.create("root",e)}},{key:"createRow",value:function(e){return this.create("row",e)}},{key:"createCol",value:function(e){return this.create("col",e)}},{key:"createCell",value:function(e){return this.create("cell",e)}}]),go);function go(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,go),this._uid=12}function yo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var bo=(function(e,t,n){return t&&yo(e.prototype,t),n&&yo(e,n),e}(_o,[{key:"add",value:function(e,t){var n=e.id;this._elements[n]=e}},{key:"remove",value:function(e){var t=e.id||e;delete this._elements[t]}},{key:"get",value:function(e){return this._elements[e]}},{key:"getAll",value:function(){return wo(this._elements)}},{key:"forEach",value:function(t){wo(this._elements).forEach(function(e){return t(e)})}},{key:"filter",value:function(t){return wo(this._elements).filter(function(e){return t(e)})}},{key:"clear",value:function(){this._elements={}}},{key:"updateId",value:function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t}),this.remove(e),e.id=t,this.add(e)}},{key:"_validateId",value:function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}}]),_o);function _o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_o),this._eventBus=e,this._elements={},e.on("table.clear",this.clear.bind(this))}function wo(t){return Object.keys(t).map(function(e){return t[e]})}function xo(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}bo.$inject=["eventBus"];var Eo=(function(e,t,n){return t&&xo(e.prototype,t),n&&xo(e,n),e}(Co,[{key:"elementsChanged",value:function(e){for(var t={},n=e.length,i=0;i<n;i++){var r=e[i].id;if(t[r])return;t[r]=!0;var o=this._listeners[r]&&this._listeners[r].length;if(o)for(var a=0;a<o;a++)this._listeners[r][a]&&this._listeners[r][a]()}}},{key:"onElementsChanged",value:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}},{key:"offElementsChanged",value:function(e,t){if(this._listeners[e])if(t){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}else this._listeners[e].length=0}},{key:"updateId",value:function(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}]),Co);function Co(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Co),this._listeners={},t.on("elements.changed",function(e){var t=e.elements;i.elementsChanged(t)}),t.on("root.remove",function(e){var n=e.root.id;i._listeners[n]&&t.once("root.add",function(e){var t=e.root.id;i.updateId(n,t)})}),t.on("element.updateId",function(e){var t=e.element,n=e.newId;i.updateId(t.id,n)})}function ko(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Eo.$inject=["eventBus"];var So=(function(e,t,n){return t&&ko(e.prototype,t),n&&ko(e,n),e}(To,[{key:"getComponent",value:function(e,t){var n=this._listeners[e];if(n){for(var i=void 0,r=0;r<n.length&&!(i=n[r].callback(t));r++);return i}}},{key:"getComponents",value:function(e,t){var n=this._listeners[e],i=[];if(!n)return i;for(var r=0;r<n.length;r++){var o=n[r].callback(t);o&&i.push(o)}return i.length,i}},{key:"onGetComponent",value:function(e,t,n){if(p(t)&&(n=t,t=1e3),!u(t))throw new Error("priority must be a number");var i=this._getListeners(e),r=void 0,o=void 0,a={priority:t,callback:n};for(o=0;r=i[o];o++)if(r.priority<t)return void i.splice(o,0,a);i.push(a)}},{key:"offGetComponent",value:function(e,t){var n=this._getListeners(e),i=void 0,r=void 0;if(t)for(r=n.length-1;i=n[r];r--)i.callback===t&&n.splice(r,1);else n.length=0}},{key:"_getListeners",value:function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}]),To);function To(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,To),this._listeners={}}var Oo="$NO_OP",Ao="a runtime error occured! Use Inferno in development environment to find the error.",Io=!("undefined"==typeof window||!window.document),Do=Array.isArray;function Po(e){var t=qe(e);return"string"===t||"number"===t}function Ro(e){return Bo(e)||Lo(e)}function No(e){return Lo(e)||!1===e||function(e){return!0===e}(e)||Bo(e)}function Mo(e){return"function"==typeof e}function jo(e){return"string"==typeof e}function $o(e){return"number"==typeof e}function Lo(e){return null===e}function Bo(e){return void 0===e}function Vo(e,t){var n={};if(e)for(var i in e)n[i]=e[i];if(t)for(var r in t)n[r]=t[r];return n}var Fo="$";function Uo(e,t,n,i,r,o,a,s){return{childFlags:e,children:t,className:n,dom:null,flags:i,key:void 0===r?null:r,parentVNode:null,props:void 0===o?null:o,ref:void 0===a?null:a,type:s}}function Ho(e,t,n,i,r,o,a,s){var c=void 0===r?1:r,l=Uo(c,i,n,e,a,o,s,t);return 0===c&&Xo(l,l.children),l}function zo(e,t,n,i,r){0<(2&e)&&(e=t.prototype&&Mo(t.prototype.render)?4:8);var o=t.defaultProps;if(!Ro(o))for(var a in n||(n={}),o)Bo(n[a])&&(n[a]=o[a]);if(0<(8&e)){var s=t.defaultHooks;if(!Ro(s))if(r)for(var c in s)Bo(r[c])&&(r[c]=s[c]);else r=s}var l=Uo(1,null,null,e,i,n,r,t),u=Jo.createVNode;return Mo(u)&&u(l),l}function qo(e,t){return Uo(1,Ro(e)?"":e,null,16,t,null,null,null)}function Wo(e){var t=e.props;if(t){var n=e.flags;481&n&&(void 0!==t.children&&Ro(e.children)&&Xo(e,t.children),void 0!==t.className&&(e.className=t.className||null,t.className=void 0)),void 0!==t.key&&(e.key=t.key,t.key=void 0),void 0!==t.ref&&(e.ref=8&n?Vo(e.ref,t.ref):t.ref,t.ref=void 0)}return e}function Go(e){var t,n=e.flags;if(14&n){var i,r=e.props;if(!Lo(r))for(var o in i={},r)i[o]=r[o];t=zo(n,e.type,i,e.key,e.ref)}else if(481&n){var a=e.children;t=Ho(n,e.type,e.className,a,e.childFlags,e.props,e.key,e.ref)}else 16&n?t=qo(e.children,e.key):1024&n&&(t=e);return t}function Yo(){return qo("",null)}function Ko(e,t,n,i){for(var r=e.length;n<r;n++){var o=e[n];if(!No(o)){var a=i+Fo+n;if(Do(o))Ko(o,t,0,a);else{if(Po(o))o=qo(o,a);else{var s=o.key,c=jo(s)&&s[0]===Fo;Lo(o.dom)&&!c||(o=Go(o)),Lo(s)||c?o.key=a:o.key=i+s}t.push(o)}}}}function Xo(e,t){var n,i=1;if(No(t))n=t;else if(jo(t))i=2,n=qo(t);else if($o(t))i=2,n=qo(t+"");else if(Do(t)){var r=t.length;if(0===r)n=null,i=1;else{!Object.isFrozen(t)&&!0!==t.$||(t=t.slice()),i=8;for(var o=0;o<r;o++){var a=t[o];if(No(a)||Do(a)){n=n||t.slice(0,o),Ko(t,n,o,"");break}if(Po(a))(n=n||t.slice(0,o)).push(qo(a,Fo+o));else{var s=a.key,c=Lo(a.dom),l=Lo(s),u=!l&&s[0]===Fo;!c||l||u?(n=n||t.slice(0,o),c&&!u||(a=Go(a)),(l||u)&&(a.key=Fo+o),n.push(a)):n&&n.push(a)}}(n=n||t).$=!0}}else Lo((n=t).dom)||(n=Go(t)),i=2;return e.children=n,e.childFlags=i,e}var Jo={afterMount:null,afterRender:null,afterUpdate:null,beforeRender:null,beforeUnmount:null,createVNode:null,roots:[]},Qo="http://www.w3.org/1999/xlink",Zo="http://www.w3.org/XML/1998/namespace",ea="http://www.w3.org/2000/svg",ta={"xlink:actuate":Qo,"xlink:arcrole":Qo,"xlink:href":Qo,"xlink:role":Qo,"xlink:show":Qo,"xlink:title":Qo,"xlink:type":Qo,"xml:base":Zo,"xml:lang":Zo,"xml:space":Zo},na={},ia=[];function ra(e,t){e.appendChild(t)}function oa(e,t,n){Ro(n)?ra(e,t):e.insertBefore(t,n)}function aa(e,t,n){e.replaceChild(t,n)}function sa(e){for(var t;void 0!==(t=e.shift());)t()}var ca={},la={};function ua(e,t,n){var i=ca[e],r=n.$EV;t?(i||(la[e]=function(r){var e=function(e){var t=e.type,n="click"===t||"dblclick"===t;if(n&&0!==e.button)return e.preventDefault(),e.stopPropagation(),!1;e.stopPropagation=da;var i={dom:document};Object.defineProperty(e,"currentTarget",{configurable:!0,get:function(){return i.dom}}),function(e,t,n,i,r){var o=t;for(;!Lo(o);){if(n&&o.disabled)return;var a=o.$EV;if(a){var s=a[i];if(s&&(r.dom=o,s.event?s.event(s.data,e):s(e),e.cancelBubble))return}o=o.parentNode}}(e,e.target,n,r,i)};return document.addEventListener(pa(r),e),e}(e),ca[e]=0),r||(r=n.$EV={}),r[e]||ca[e]++,r[e]=t):r&&r[e]&&(ca[e]--,1===i&&(document.removeEventListener(pa(e),la[e]),la[e]=null),r[e]=t)}function pa(e){return e.substr(2).toLowerCase()}function da(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function fa(e,t){var n=document.createElement("i");return n.innerHTML=t,n.innerHTML===e.innerHTML}function ha(e,t,n){if(e[t]){var i=e[t];i.event?i.event(i.data,n):i(n)}else{var r=t.toLowerCase();e[r]&&e[r](n)}}function ma(s,c){function e(e){e.stopPropagation();var t=this.$V;if(t){var n=t.props||na,i=t.dom;if(jo(s))ha(n,s,e);else for(var r=0;r<s.length;r++)ha(n,s[r],e);if(Mo(c)){var o=this.$V,a=o.props||na;c(a,i,!1,o)}}}return Object.defineProperty(e,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),e}function va(e){return"checkbox"===e||"radio"===e}var ga=ma("onInput",_a),ya=ma(["onClick","onChange"],_a);function ba(e){e.stopPropagation()}function _a(e,t){var n=e.type,i=e.value,r=e.checked,o=e.multiple,a=e.defaultValue,s=!Ro(i);n&&n!==t.type&&t.setAttribute("type",n),Ro(o)||o===t.multiple||(t.multiple=o),Ro(a)||s||(t.defaultValue=a+""),va(n)?(s&&(t.value=i),Ro(r)||(t.checked=r)):s&&t.value!==i?(t.defaultValue=i,t.value=i):Ro(r)||(t.checked=r)}function wa(e,t){if("optgroup"===e.type){var n=e.children,i=e.childFlags;if(12&i)for(var r=0,o=n.length;r<o;r++)xa(n[r],t);else 2===i&&xa(n,t)}else xa(e,t)}function xa(e,t){var n=e.props||na,i=e.dom;i.value=n.value,Do(t)&&-1!==t.indexOf(n.value)||n.value===t?i.selected=!0:Ro(t)&&Ro(n.selected)||(i.selected=n.selected||!1)}ba.wrapped=!0;var Ea=ma("onChange",Ca);function Ca(e,t,n,i){var r=Boolean(e.multiple);Ro(e.multiple)||r===t.multiple||(t.multiple=r);var o=i.childFlags;if(0==(1&o)){var a=i.children,s=e.value;if(n&&Ro(s)&&(s=e.defaultValue),12&o)for(var c=0,l=a.length;c<l;c++)wa(a[c],s);else 2===o&&wa(a,s)}}var ka=ma("onInput",Ta),Sa=ma("onChange");function Ta(e,t,n){var i=e.value,r=t.value;if(Ro(i)){if(n){var o=e.defaultValue;Ro(o)||o===r||(t.defaultValue=o,t.value=o)}}else r!==i&&(t.defaultValue=i,t.value=i)}function Oa(e,t,n,i,r,o){64&e?_a(i,n):256&e?Ca(i,n,r,t):128&e&&Ta(i,n,r),o&&(n.$V=t)}function Aa(e,t,n){64&e?function(e,t){va(t.type)?(e.onchange=ya,e.onclick=ba):e.oninput=ga}(t,n):256&e?function(e){e.onchange=Ea}(t):128&e&&function(e,t){e.oninput=ka,t.onChange&&(e.onchange=Sa)}(t,n)}function Ia(e){return e.type&&va(e.type)?!Ro(e.checked):!Ro(e.value)}function Da(e,t){Pa(e),Lo(t)||(function(e,t){e.removeChild(t)}(t,e.dom),e.dom=null)}function Pa(e){var t=e.flags;if(481&t){var n=e.ref,i=e.props;Mo(n)&&n(null);var r=e.children,o=e.childFlags;if(12&o?Ra(r):2===o&&Pa(r),!Lo(i))for(var a in i)switch(a){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":ua(a,null,e.dom)}}else if(14&t){var s=e.children,c=e.ref;4&t?(Mo(Jo.beforeUnmount)&&Jo.beforeUnmount(e),Mo(s.componentWillUnmount)&&s.componentWillUnmount(),Mo(c)&&c(null),s.$UN=!0,Pa(s.$LI)):(!Ro(c)&&Mo(c.onComponentWillUnmount)&&c.onComponentWillUnmount(e.dom,e.props||na),Pa(s))}else if(1024&t){var l=e.children;!Lo(l)&&function(e){return"object"===qe(e)}(l)&&Da(l,e.type)}}function Ra(e){for(var t=0,n=e.length;t<n;t++)Pa(e[t])}function Na(e,t){Ra(t),e.textContent=""}function Ma(e,t){switch(e){case"animationIterationCount":case"borderImageOutset":case"borderImageSlice":case"borderImageWidth":case"boxFlex":case"boxFlexGroup":case"boxOrdinalGroup":case"columnCount":case"fillOpacity":case"flex":case"flexGrow":case"flexNegative":case"flexOrder":case"flexPositive":case"flexShrink":case"floodOpacity":case"fontWeight":case"gridColumn":case"gridRow":case"lineClamp":case"lineHeight":case"opacity":case"order":case"orphans":case"stopOpacity":case"strokeDasharray":case"strokeDashoffset":case"strokeMiterlimit":case"strokeOpacity":case"strokeWidth":case"tabSize":case"widows":case"zIndex":case"zoom":return t;default:return t+"px"}}function ja(e,t,n,i,r,o,a){switch(e){case"onClick":case"onDblClick":case"onFocusIn":case"onFocusOut":case"onKeyDown":case"onKeyPress":case"onKeyUp":case"onMouseDown":case"onMouseMove":case"onMouseUp":case"onSubmit":case"onTouchEnd":case"onTouchMove":case"onTouchStart":ua(e,n,i);break;case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":return;case"allowfullscreen":case"autoFocus":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":i[e="autoFocus"===e?e.toLowerCase():e]=!!n;break;case"defaultChecked":case"value":case"volume":if(o&&"value"===e)return;var s=Ro(n)?"":n;i[e]!==s&&(i[e]=s);break;case"dangerouslySetInnerHTML":var c=t&&t.__html||"",l=n&&n.__html||"";c!==l&&(Ro(l)||fa(i,l)||(Lo(a)||(12&a.childFlags?Ra(a.children):2===a.childFlags&&Pa(a.children),a.children=null,a.childFlags=1),i.innerHTML=l));break;default:"o"===e[0]&&"n"===e[1]?function(e,t,n,i){var r=e.toLowerCase();if(Mo(n)||Ro(n)){var o=i[r];o&&o.wrapped||(i[r]=n)}else{var a=n.event;a&&Mo(a)&&(i[r]=function(t,n){return function(e){t(n.data,e)}}(a,n))}}(e,0,n,i):Ro(n)?i.removeAttribute(e):"style"===e?function(e,t,n){var i,r,o=n.style;if(jo(t))o.cssText=t;else if(Ro(e)||jo(e))for(i in t)r=t[i],o[i]=$o(r)?Ma(i,r):r;else{for(i in t)(r=t[i])!==e[i]&&(o[i]=$o(r)?Ma(i,r):r);for(i in e)Ro(t[i])&&(o[i]="")}}(t,n,i):r&&ta[e]?i.setAttributeNS(ta[e],e,n):i.setAttribute(e,n)}}function $a(e,t,n,i,r){var o=!1,a=0<(448&t);for(var s in!a||(o=Ia(n))&&Aa(t,i,n),n)ja(s,null,n[s],i,r,o,null);a&&Oa(t,e,i,n,!0,o)}function La(e,t,n,i){var r=new t(n,i);if((e.children=r).$V=e,r.$BS=!1,r.context=i,r.props===na&&(r.props=n),r.$UN=!1,Mo(r.componentWillMount)){if(r.$BR=!0,r.componentWillMount(),r.$PSS){var o=r.state,a=r.$PS;if(Lo(o))r.state=a;else for(var s in a)o[s]=a[s];r.$PSS=!1,r.$PS=null}r.$BR=!1}Mo(Jo.beforeRender)&&Jo.beforeRender(r);var c,l=Ba(r.render(n,r.state,i),e);return Mo(r.getChildContext)&&(c=r.getChildContext()),Ro(c)?r.$CX=i:r.$CX=Vo(i,c),Mo(Jo.afterRender)&&Jo.afterRender(r),r.$LI=l,r}function Ba(e,t){return No(e)?e=Yo():Po(e)?e=qo(e,null):(e.dom&&(e=Go(e)),14&e.flags&&(e.parentVNode=t)),e}function Va(e,t,n,i,r){var o=e.flags;return 481&o?Ua(e,t,n,i,r):14&o?function(e,t,n,i,r,o){var a,s=e.type,c=e.props||na,l=e.ref;if(o){var u=La(e,s,c,i);e.dom=a=Va(u.$LI,null,n,u.$CX,r),za(e,l,u,n),u.$UPD=!1}else{var p=Ba(s(c,i),e);e.children=p,e.dom=a=Va(p,null,n,i,r),qa(c,l,a,n)}Lo(t)||ra(t,a);return a}(e,t,n,i,r,0<(4&o)):512&o||16&o?Fa(e,t):1024&o?(Va(e.children,e.type,n,i,!1),e.dom=Fa(Yo(),t)):void 0}function Fa(e,t){var n=e.dom=document.createTextNode(e.children);return Lo(t)||ra(t,n),n}function Ua(e,t,n,i,r){var o=e.flags,a=e.children,s=e.props,c=e.className,l=e.ref,u=e.childFlags;r=r||0<(32&o);var p=function(e,t){return!0===t?document.createElementNS(ea,e):document.createElement(e)}(e.type,r);if(e.dom=p,Ro(c)||""===c||(r?p.setAttribute("class",c):p.className=c),Lo(t)||ra(t,p),0==(1&u)){var d=!0===r&&"foreignObject"!==e.type;2===u?Va(a,p,n,i,d):12&u&&Ha(a,p,n,i,d)}return Lo(s)||$a(e,o,s,p,r),Mo(l)&&Wa(p,l,n),p}function Ha(e,t,n,i,r){for(var o=0,a=e.length;o<a;o++){var s=e[o];Lo(s.dom)||(e[o]=s=Go(s)),Va(s,t,n,i,r)}}function za(e,t,n,i){Mo(t)&&t(n);var r=Mo(n.componentDidMount),o=Jo.afterMount,a=Mo(o);(r||a)&&i.push(function(e,t,n,i,r){return function(){e.$UPD=!0,t&&n(i),r&&e.componentDidMount(),e.$UPD=!1}}(n,a,o,e,r))}function qa(e,t,n,i){Ro(t)||(Mo(t.onComponentWillMount)&&t.onComponentWillMount(e),Mo(t.onComponentDidMount)&&i.push(function(e,t,n){return function(){return e.onComponentDidMount(t,n)}}(t,n,e)))}function Wa(e,t,n){n.push(function(){return t(e)})}function Ga(e,t,n,i,r){var o=e.children,a=e.props,s=e.className,c=e.flags,l=e.ref;if(r=r||0<(32&c),1!==t.nodeType||t.tagName.toLowerCase()!==e.type){var u=Ua(e,null,n,i,r);e.dom=u,aa(t.parentNode,u,t)}else{var p=(e.dom=t).firstChild,d=e.childFlags;if(0==(1&d)){for(var f=null;p;)f=p.nextSibling,8===p.nodeType&&("!"===p.data?t.replaceChild(document.createTextNode(""),p):t.removeChild(p)),p=f;if(p=t.firstChild,2===d)Lo(p)?Va(o,t,n,i,r):(f=p.nextSibling,Ya(o,p,n,i,r),p=f);else if(12&d)for(var h=0,m=o.length;h<m;h++){var v=o[h];Lo(p)?Va(v,t,n,i,r):(f=p.nextSibling,Ya(v,p,n,i,r),p=f)}for(;p;)f=p.nextSibling,t.removeChild(p),p=f}else Lo(t.firstChild)||function(e,t){return Boolean(t&&t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html&&fa(e,t.dangerouslySetInnerHTML.__html))}(t,a)||(t.textContent="",448&c&&(t.defaultValue=""));Lo(a)||$a(e,c,a,t,r),Ro(s)?""!==t.className&&t.removeAttribute("class"):r?t.setAttribute("class",s):t.className=s,Mo(l)&&Wa(t,l,n)}}function Ya(e,t,n,i,r){var o=e.flags;14&o?function(e,t,n,i,r,o){var a=e.type,s=e.ref,c=e.props||na;if(o){var l=La(e,a,c,i),u=l.$LI;Ya(u,t,n,l.$CX,r),e.dom=u.dom,za(e,s,l,n),l.$UPD=!1}else{var p=Ba(a(c,i),e);Ya(p,t,n,i,r),e.children=p,e.dom=p.dom,qa(c,s,t,n)}}(e,t,n,i,r,0<(4&o)):481&o?Ga(e,t,n,i,r):16&o?function(e,t){if(3!==t.nodeType){var n=Fa(e,null);e.dom=n,aa(t.parentNode,n,t)}else{var i=e.children;t.nodeValue!==i&&(t.nodeValue=i),e.dom=t}}(e,t):512&o?e.dom=t:function(e){throw e||(e=Ao),new Error("Inferno Error: "+e)}()}function Ka(e,t,n,i,r,o){Pa(e),aa(n,Va(t,null,i,r,o),e.dom)}function Xa(e,t,n,i,r,o){if(e!==t){var a=0|t.flags;e.flags!==a||2048&a?Ka(e,t,n,i,r,o):481&a?function(e,t,n,i,r,o){var a=t.type;if(e.type!==a)Ka(e,t,n,i,r,o);else{var s,c=e.dom,l=t.flags,u=e.props,p=t.props,d=!1,f=!1;if(t.dom=c,o=o||0<(32&l),u!==p){var h=u||na;if((s=p||na)!==na)for(var m in(d=0<(448&l))&&(f=Ia(s)),s){var v=h[m],g=s[m];v!==g&&ja(m,v,g,c,o,f,e)}if(h!==na)for(var y in h)s.hasOwnProperty(y)||Ro(h[y])||ja(y,h[y],null,c,o,f,e)}var b=e.children,_=t.children,w=t.ref,x=e.className,E=t.className;b!==_&&Ja(e.childFlags,t.childFlags,b,_,c,i,r,o&&"foreignObject"!==a),d&&Oa(l,t,c,s,!1,f),x!==E&&(Ro(E)?c.removeAttribute("class"):o?c.setAttribute("class",E):c.className=E),Mo(w)&&e.ref!==w&&Wa(c,w,i)}}(e,t,n,i,r,o):14&a?function(e,t,n,i,r,o,a){var s=t.type,c=e.key,l=t.key;if(e.type!==s||c!==l)Ka(e,t,n,i,r,o);else{var u=t.props||na;if(a){var p=e.children;p.$UPD=!0,Qa(p,p.state,t,u,n,i,r,o,!1,!1),p.$V=t,p.$UPD=!1}else{var d=!0,f=e.props,h=t.ref,m=!Ro(h),v=e.children;if(t.dom=e.dom,t.children=v,m&&Mo(h.onComponentShouldUpdate)&&(d=h.onComponentShouldUpdate(f,u)),!1!==d){m&&Mo(h.onComponentWillUpdate)&&h.onComponentWillUpdate(f,u);var g=s(u,r);g!==Oo&&(g=Ba(g,t),Xa(v,g,n,i,r,o),t.children=g,t.dom=g.dom,m&&Mo(h.onComponentDidUpdate)&&h.onComponentDidUpdate(f,u))}else 14&v.flags&&(v.parentVNode=t)}}}(e,t,n,i,r,o,0<(4&a)):16&a?function(e,t,n){var i,r=t.children;Lo(n.firstChild)?(n.textContent=r,i=n.firstChild):(i=e.dom,r!==e.children&&(i.nodeValue=r));t.dom=i}(e,t,n):512&a?t.dom=e.dom:function(e,t,n,i){var r=e.type,o=t.type,a=t.children;if(Ja(e.childFlags,t.childFlags,e.children,a,r,n,i,!1),t.dom=e.dom,r!==o&&!No(a)){var s=a.dom;r.removeChild(s),o.appendChild(s)}}(e,t,i,r)}}function Ja(e,t,n,i,r,o,a,s){switch(e){case 2:switch(t){case 2:Xa(n,i,r,o,a,s);break;case 1:Da(n,r);break;default:Da(n,r),Ha(i,r,o,a,s)}break;case 1:switch(t){case 2:Va(i,r,o,a,s);break;case 1:break;default:Ha(i,r,o,a,s)}break;default:if(12&t){var c=n.length,l=i.length;0===c?0<l&&Ha(i,r,o,a,s):0===l?Na(r,n):8===t&&8===e?function(e,t,n,i,r,o,a,s){var c,l,u,p,d=a-1,f=s-1,h=0,m=0,v=e[h],g=t[m];e:{for(;v.key===g.key;){if(g.dom&&(t[m]=g=Go(g)),Xa(v,g,n,i,r,o),m++,d<++h||f<m)break e;v=e[h],g=t[m]}for(v=e[d],g=t[f];v.key===g.key;){if(g.dom&&(t[f]=g=Go(g)),Xa(v,g,n,i,r,o),f--,--d<h||f<m)break e;v=e[d],g=t[f]}}if(d<h){if(m<=f)for(u=(p=f+1)<s?t[p].dom:null;m<=f;)(g=t[m]).dom&&(t[m]=g=Go(g)),m++,oa(n,Va(g,null,i,r,o),u)}else if(f<m)for(;h<=d;)Da(e[h++],n);else{var y=d-h+1,b=f-m+1,_=[];for(c=0;c<b;c++)_.push(0);var w=y===a,x=!1,E=0,C=0;if(s<4||(y|b)<32)for(c=h;c<=d;c++)if(v=e[c],C<b){for(l=m;l<=f;l++)if(g=t[l],v.key===g.key){if(_[l-m]=c+1,w)for(w=!1;h<c;)Da(e[h++],n);l<E?x=!0:E=l,g.dom&&(t[l]=g=Go(g)),Xa(v,g,n,i,r,o),C++;break}!w&&f<l&&Da(v,n)}else w||Da(v,n);else{var k={};for(c=m;c<=f;c++)k[t[c].key]=c;for(c=h;c<=d;c++)if(v=e[c],C<b)if(void 0!==(l=k[v.key])){if(w)for(w=!1;h<c;)Da(e[h++],n);g=t[l],_[l-m]=c+1,l<E?x=!0:E=l,g.dom&&(t[l]=g=Go(g)),Xa(v,g,n,i,r,o),C++}else w||Da(v,n);else w||Da(v,n)}if(w)Na(n,e),Ha(t,n,i,r,o);else if(x){var S=function(e){var t,n,i,r,o,a=e.slice(),s=[0],c=e.length;for(t=0;t<c;t++){var l=e[t];if(0!==l){if(n=s[s.length-1],e[n]<l){a[t]=n,s.push(t);continue}for(i=0,r=s.length-1;i<r;)e[s[o=(i+r)/2|0]]<l?i=1+o:r=o;l<e[s[i]]&&(0<i&&(a[t]=s[i-1]),s[i]=t)}}i=s.length,r=s[i-1];for(;0<i--;)s[i]=r,r=a[r];return s}(_);for(l=S.length-1,c=b-1;0<=c;c--)0===_[c]?((g=t[E=c+m]).dom&&(t[E]=g=Go(g)),p=E+1,oa(n,Va(g,null,i,r,o),p<s?t[p].dom:null)):l<0||c!==S[l]?(g=t[E=c+m],p=E+1,oa(n,g.dom,p<s?t[p].dom:null)):l--}else if(C!==b)for(c=b-1;0<=c;c--)0===_[c]&&((g=t[E=c+m]).dom&&(t[E]=g=Go(g)),p=E+1,oa(n,Va(g,null,i,r,o),p<s?t[p].dom:null))}}(n,i,r,o,a,s,c,l):function(e,t,n,i,r,o,a,s){for(var c,l=s<a?s:a,u=0;u<l;u++)(c=t[u]).dom&&(c=t[u]=Go(c)),Xa(e[u],c,n,i,r,o);if(a<s)for(u=l;u<s;u++)(c=t[u]).dom&&(c=t[u]=Go(c)),Va(c,n,i,r,o);else if(s<a)for(u=l;u<a;u++)Da(e[u],n)}(n,i,r,o,a,s,c,l)}else 1===t?Na(r,n):(Na(r,n),Va(i,r,o,a,s))}}function Qa(e,t,n,i,r,o,a,s,c,l){var u,p=e.state,d=e.props;if(!(n.children=e).$UN){if(d!==i||i===na){if(!l&&Mo(e.componentWillReceiveProps)){if(e.$BR=!0,e.componentWillReceiveProps(i,a),e.$UN)return;e.$BR=!1}e.$PSS&&(t=Vo(t,e.$PS),e.$PSS=!1,e.$PS=null)}var f=Mo(e.shouldComponentUpdate);if(c||!f||f&&e.shouldComponentUpdate(i,t,a)){Mo(e.componentWillUpdate)&&(e.$BS=!0,e.componentWillUpdate(i,t,a),e.$BS=!1),e.props=i,e.state=t,e.context=a,Mo(Jo.beforeRender)&&Jo.beforeRender(e),u=e.render(i,t,a),Mo(Jo.afterRender)&&Jo.afterRender(e);var h,m=u!==Oo;if(Mo(e.getChildContext)&&(h=e.getChildContext()),h=Ro(h)?a:Vo(a,h),e.$CX=h,m)Xa(e.$LI,e.$LI=Ba(u,n),r,o,h,s),Mo(e.componentDidUpdate)&&e.componentDidUpdate(d,p),Mo(Jo.afterUpdate)&&Jo.afterUpdate(n)}else e.props=i,e.state=t,e.context=a;n.dom=e.$LI.dom}}var Za=Jo.roots;Io&&document.body;function es(e,t,n){if(e!==Oo){var i,r,o=Za.length;for(r=0;r<o;r++)if(Za[r]===t){i=t.$V;break}return Bo(i)?No(e)||(e.dom&&(e=Go(e)),Lo(t.firstChild)?(Va(e,t,ia,na,!1),t.$V=e,Za.push(t)):function(e,t,n){var i=t.firstChild;if(!Lo(i))for(No(e)||Ya(e,i,ia,na,!1),i=t.firstChild;i=i.nextSibling;)t.removeChild(i);0<ia.length&&sa(ia),t.$V||Jo.roots.push(t),t.$V=e,Mo(n)&&n()}(e,t),i=e):Ro(e)?(Da(i,t),Za.splice(r,1)):(e.dom&&(e=Go(e)),Xa(i,e,t,ia,na,!1),i=t.$V=e),0<ia.length&&sa(ia),Mo(n)&&n(),i&&14&i.flags?i.children:void 0}}var ts="undefined"==typeof Promise?null:Promise.resolve(),ns="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame.bind(window);function is(e,t,n){Mo(t)&&(t=t(e.state,e.props,e.context));var i=e.$PS;if(Ro(i))e.$PS=t;else for(var r in t)i[r]=t[r];if(e.$PSS||e.$BR)e.$PSS=!0,e.$BR&&Mo(n)&&ia.push(n.bind(e));else if(e.$UPD){var o=e.$QU;Lo(o)&&(o=e.$QU=[],function(e){ts?ts.then(e):ns(e)}(function(n,i){return function(){n.$QU=null,n.$UPD=!0,rs(n,!1,function(){for(var e=0,t=i.length;e<t;e++)i[e].call(n)}),n.$UPD=!1}}(e,o))),Mo(n)&&o.push(n)}else e.$PSS=!0,e.$UPD=!0,rs(e,!1,n),e.$UPD=!1}function rs(e,t,n){if(!e.$UN){if(t||!e.$BR){e.$PSS=!1;var i=e.$PS,r=Vo(e.state,i),o=e.props,a=e.context;e.$PS=null;var s=e.$V,c=e.$LI;if(Qa(e,r,s,o,c.dom&&c.dom.parentNode,ia,a,0<(32&s.flags),t,!0),e.$UN)return;if(0==(1024&e.$LI.flags))for(var l=e.$LI.dom;!Lo(s=s.parentVNode);)0<(14&s.flags)&&(s.dom=l);0<ia.length&&sa(ia)}else e.state=e.$PS,e.$PS=null;Mo(n)&&n.call(e)}}function os(e,t){this.state=null,this.$BR=!1,this.$BS=!0,this.$PSS=!1,this.$PS=null,this.$LI=null,this.$V=null,this.$UN=!1,this.$CX=null,this.$UPD=!0,this.$QU=null,this.props=e||na,this.context=t||na}os.prototype.forceUpdate=function(e){this.$UN||rs(this,!0,e)},os.prototype.setState=function(e,t){this.$UN||this.$BS||is(this,e,t)},os.prototype.render=function(e,t,n){},os.defaultProps=null,"production"!==e.env.NODE_ENV&&console.warn("You are running production build of Inferno in development mode. Use dev:module entry point.");var as=function(e,t,n){return t&&ss(e.prototype,t),n&&ss(e,n),e};function ss(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var cs=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ls,os),as(ls,[{key:"onElementsChanged",value:function(){this.forceUpdate()}},{key:"getChildContext",value:function(){return{changeSupport:this._changeSupport,components:this._components,injector:this._injector}}},{key:"componentWillMount",value:function(){var e=this._sheet.getRoot().id;this._changeSupport.onElementsChanged(e,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this._sheet.getRoot().id;this._changeSupport.offElementsChanged(e,this.onElementsChanged)}},{key:"render",value:function(){var e=this._sheet.getRoot(),t=e.rows,n=e.cols,i=this._components.getComponents("table.before"),r=this._components.getComponents("table.after"),o=this._components.getComponent("table.head"),a=this._components.getComponent("table.body"),s=this._components.getComponent("table.foot");return Ho(1,"div","tjs-container",[i&&i.map(function(e,t){return zo(2,e,null,t)}),Ho(1,"table","tjs-table",[o&&zo(2,o,{rows:t,cols:n}),a&&zo(2,a,{rows:t,cols:n}),s&&zo(2,s,{rows:t,cols:n})],0),r&&r.map(function(e,t){return zo(2,e,null,t)})],0)}}]),ls);function ls(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ls);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(ls.__proto__||Object.getPrototypeOf(ls)).call(this,e)),n=t._injector=e.injector;return t._sheet=n.get("sheet"),t._changeSupport=n.get("changeSupport"),t._components=n.get("components"),t.onElementsChanged=t.onElementsChanged.bind(t),t}function us(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ps=(function(e,t,n){return t&&us(e.prototype,t),n&&us(e,n),e}(ds,[{key:"getContainer",value:function(){return this._container}}]),ds);function ds(e,t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ds);var o=n.container;this._container=o,i.on("root.added",function(){es(zo(2,cs,{injector:r}),o)}),i.on("root.remove",function(){es(null,o)})}ps.$inject=["changeSupport","components","config.renderer","eventBus","injector"];var fs={__init__:["changeSupport","components","renderer"],changeSupport:["type",Eo],components:["type",So],renderer:["type",ps]};function hs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ms=(function(e,t,n){return t&&hs(e.prototype,t),n&&hs(e,n),e}(vs,[{key:"setRoot",value:function(e){if(this._root){var t=this._root;this._eventBus.fire("root.remove",{root:t}),this._root=null,this._eventBus.fire("root.removed",{root:t})}e&&this._eventBus.fire("root.add",{root:e}),(this._root=e)&&this._eventBus.fire("root.added",{root:e})}},{key:"getRoot",value:function(){return this._root||this.setRoot({id:"__implicitroot",rows:[],cols:[]}),this._root}},{key:"addRow",value:function(n,i){var r=this,o=this.getRoot();if(o.cols.length!=n.cells.length)throw new Error("number of cells is not equal to number of cols");return void 0===i&&(i=o.rows.length),gs(i,o.rows,n),n.root=o,this._elementRegistry.add(n),n.cells.forEach(function(e,t){r._elementRegistry.add(e),e.row=n,e.col=o.cols[t],gs(i,o.cols[t].cells,e)}),this._eventBus.fire("row.add",{row:n}),n}},{key:"removeRow",value:function(e){var n=this,i=this.getRoot();"string"==typeof e&&(e=this._elementRegistry.get(e));var r=i.rows.indexOf(e);-1!==r&&(ys(r,i.rows),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach(function(e,t){n._elementRegistry.remove(e),e.col=void 0,ys(r,i.cols[t].cells)}),this._eventBus.fire("row.remove",{row:e}))}},{key:"addCol",value:function(n,i){var r=this,o=this.getRoot();if(this._elementRegistry.add(n),o.rows.length!=n.cells.length)throw new Error("number of cells is not equal to number of rows");return void 0===i&&(i=o.cols.length),gs(i,o.cols,n),n.root=o,n.cells.forEach(function(e,t){r._elementRegistry.add(e),e.col=n,e.row=o.rows[t],gs(i,o.rows[t].cells,e)}),this._eventBus.fire("col.add",{col:n}),n}},{key:"removeCol",value:function(e){var n=this,i=this.getRoot();"string"==typeof e&&(e=this._elementRegistry.get(e));var r=i.cols.indexOf(e);-1!==r&&(ys(r,i.cols),e.root=void 0,this._elementRegistry.remove(e),e.cells.forEach(function(e,t){n._elementRegistry.remove(e),e.row=void 0,ys(r,i.rows[t].cells)}),this._eventBus.fire("col.remove",{col:e}))}},{key:"resized",value:function(){this._eventBus.fire("sheet.resized")}}]),vs);function vs(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,vs),this._elementRegistry=e,this._eventBus=t,this._root=null,t.on("table.clear",function(){n.setRoot(null)})}function gs(e,t,n){return t.splice(e,0,n)}function ys(e,t){return t.splice(e,1)}ms.$inject=["elementRegistry","eventBus"];var bs={__depends__:[fs],__init__:["elementFactory","sheet"],elementFactory:["type",vo],elementRegistry:["type",bo],eventBus:["type",j],sheet:["type",ms]};function _s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ws=(function(e,t,n){return t&&_s(e.prototype,t),n&&_s(e,n),e}(xs,[{key:"_init",value:function(e){return{modules:e.modules,config:function(e,t){var n={};for(var i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["modules"])}}},{key:"destroy",value:function(){var e=this.get("eventBus");e.fire("table.destroy"),e.fire("diagram.destroy")}},{key:"clear",value:function(){var e=this.get("eventBus");e.fire("table.clear"),e.fire("diagram.clear")}}]),xs);function xs(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,xs);var t=e.injector;if(!t){var n=this._init(e),i=n.modules;t=function(e,t){return function(e){var i=[],r=[];function o(e){return 0<=i.indexOf(e)}e.forEach(function e(t){if(o(t))return;(t.__depends__||[]).forEach(e);if(o(t))return;n=t,i.push(n);var n;(t.__init__||[]).forEach(function(e){r.push(e)})});var t=new en(i);return r.forEach(function(e){try{t["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),t}([{config:["value",e]},bs].concat(t||[]))}(n.config,i)}this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("table.init"),this.get("eventBus").fire("diagram.init")}function Es(e){if(!e)return"<null>";var t=e.id?' id="'+e.id+'"':"";return"<"+e.$type+t+" />"}function Cs(i,e){function r(e,t,n){if(e.gfx)throw new Error("already rendered "+Es(e));return i.element(e,t,n)}function o(e,t,n){y(e,function(e){r(e,t,n)})}function a(e,t,n){y(e,function(e){r(e,t,n)})}return{handleDecision:function(e){e.id||(e.id="decision");var t=e.decisionTable;if(!t)throw new Error("no table for "+Es(e));if(!t.output)throw new Error("missing output for "+Es(t));var n=function(e){return i.table(e)}(t);t.input&&o(t.input,n,t),o(t.output,n,t),function(e,t,n){y(e,function(e){r(e,t,n),a(e.inputEntry,e),a(e.outputEntry,e)})}(t.rule,n,t)}}}function ks(){return Ho(1,"th","annotation header",qo("Annotation"),2,{rowspan:"3"})}var Ss="function"==typeof Symbol&&"symbol"===qe(Symbol.iterator)?function(e){return qe(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":qe(e)},Ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function Os(e,t){var n=e.elements,i=e.index;return i[t]?e:{elements:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[t]),index:Ts({},i,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,!0))}}function As(){for(var n={elements:[],index:{}},e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.forEach(function(t){var e=void 0===t?"undefined":Ss(t);"string"===e&&0<t.length?n=Os(n,t):"object"===e&&null!==t&&Object.keys(t).forEach(function(e){t[e]&&(n=Os(n,e))})}),function(e,t){return e.elements.join(t)}(n," ")}function Is(e){return Ds(e.constructor,e)}function Ds(e,a){var s=e.$inject;if(s){var t=a.context.injector,n=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s),[function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i in t){var r=s[i],o=t[i];a[r]=o}}]);t.invoke(n)}}function Ps(i,r){Object.keys(r).forEach(function(e){if("$inject"!==e&&"__init"!==e){var t=r[e];"constructor"===e&&t.call(i,i.props,i.context);var n=i[e];if(void 0!==n){if("function"!=typeof n)throw new Error("failed to mixin <"+e+">: cannot combine with non-fn component value");i[e]=function(r){for(var e=arguments.length,o=Array(1<e?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=void 0;return o.forEach(function(e){if(void 0!==(i=e.call.apply(e,[r].concat(t))))return!1}),i}.bind(r)}(i,n,t)}else i[e]=t.bind(i)}}),"$inject"in r&&Ds(r,i),"__init"in r&&r.__init.call(i,i.props,i.context)}var Rs={getSelectionClasses:function(){var e=this.state;return As({selected:e.selected,"selected-secondary":e.selectedSecondary,focussed:e.focussed})},selectionChanged:function(e){this.setState(e)},componentWillUpdate:function(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!1)},componentDidUpdate:function(e){e.elementId!==this.props.elementId&&this.updateSelectionSubscription(!0)},componentDidMount:function(){this.updateSelectionSubscription(!0)},componentWillUnmount:function(){this.updateSelectionSubscription(!1)},updateSelectionSubscription:function(e){var t=this.props.elementId;!t||t&&this.eventBus[e?"on":"off"]("selection."+t+".changed",this.selectionChanged)},$inject:["eventBus"]},Ns=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ms=function(e,t,n){return t&&js(e.prototype,t),n&&js(e,n),e};function js(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var $s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Ls,os),Ms(Ls,[{key:"getRenderProps",value:function(){for(var e=this.props,t=e.className,n=e.elementId,i=e.coords,r=function(e,t){var n={};for(var i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["className","elementId","coords"]),o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var c={className:As.apply(void 0,a.concat([this.getSelectionClasses(),t]))};return n&&(c["data-element-id"]=n),i&&(c["data-coords"]=i),Ns({},c,r)}}]),Ls);function Ls(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ls);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Ls.__proto__||Object.getPrototypeOf(Ls)).call(this,e,t));return Ps(n,Rs),Is(n),n}var Bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vs=function(e,t,n){return t&&Fs(e.prototype,t),n&&Fs(e,n),e};function Fs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Us=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Hs,$s),Vs(Hs,[{key:"render",value:function(){var e=this.props.children,t=this.getRenderProps("cell");return Wo(Ho(1,"td",null,e,0,Bs({},t)))}}]),Hs);function Hs(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Hs);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Hs.__proto__||Object.getPrototypeOf(Hs)).call(this,e,t));return n.state={},n}var zs=function(e,t,n){return t&&qs(e.prototype,t),n&&qs(e,n),e};function qs(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(Ws,os),zs(Ws,[{key:"getChildContext",value:function(){return{injector:this.props.injector}}},{key:"render",value:function(){return this.props.children}}]);function Ws(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ws),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Ws.__proto__||Object.getPrototypeOf(Ws)).apply(this,arguments))}var Gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ys=function(e,t,n){return t&&Ks(e.prototype,t),n&&Ks(e,n),e};function Ks(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(Xs,$s),Ys(Xs,[{key:"render",value:function(){var e=this.props.children,t=this.getRenderProps("cell","header-cell");return Wo(Ho(1,"th",null,e,0,Gs({},t)))}}]);function Xs(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Xs);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Xs.__proto__||Object.getPrototypeOf(Xs)).call(this,e,t));return n.state={},n}function Js(e){var t=e.row.businessObject,n=t.id,i=t.description;return zo(2,Us,{className:"annotation",elementId:n+"__annotation",children:i||"-"})}function Qs(e){e.onGetComponent("cell",function(e){var t=e.cellType;return"after-label-cells"===t?ks:"after-rule-cells"===t?Js:void 0})}Qs.$inject=["components"];var Zs={__init__:["annotationsProvider"],annotationsProvider:["type",Qs]};function ec(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tc(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function nc(e,t){return R({id:e.id,type:e.$type,businessObject:e},t)}var ic=(function(e,t,n){return t&&ec(e.prototype,t),n&&ec(e,n),e}(rc,[{key:"add",value:function(e){var t=this,n=void 0;if(ki(e,"dmn:DecisionTable"))n=this._elementFactory.createRoot(nc(e)),this._sheet.setRoot(n);else if(ki(e,"dmn:InputClause"))n=this._elementFactory.createCol(nc(e)),this._sheet.addCol(n);else if(ki(e,"dmn:OutputClause"))n=this._elementFactory.createCol(nc(e)),this._sheet.addCol(n);else if(ki(e,"dmn:DecisionRule")){e.inputEntry||(e.inputEntry=[]),e.outputEntry||(e.outputEntry=[]);var i=[].concat(tc(e.inputEntry),tc(e.outputEntry)).map(function(e){return t._elementFactory.createCell(nc(e))});n=this._elementFactory.createRow(R(nc(e),{cells:i})),this._sheet.addRow(n)}return this._eventBus.fire("dmnElement.added",{element:n}),n}}]),rc);function rc(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,rc),this._elementFactory=e,this._eventBus=t,this._sheet=n}ic.$inject=["elementFactory","eventBus","sheet"];var oc={__depends__:[{tableImporter:["type",ic]},fs]},ac=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function sc(e,t){var n={};for(var i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}var cc={slotFill:function(e,t){var n=e.type,i=e.context,r=sc(e,["type","context"]),o=this.components.getComponent(n,i)||t;return o?Wo(zo(2,o,ac({},i,r))):null},slotFills:function(e){var t=e.type,n=e.context,i=sc(e,["type","context"]);return this.components.getComponents(t,n).map(function(e){return Wo(zo(2,e,ac({},n,i)))})},$inject:["components"]},lc=function(e,t,n){return t&&uc(e.prototype,t),n&&uc(e,n),e};function uc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function pc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}function fc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var hc=(fc(mc,os),lc(mc,[{key:"componentWillMount",value:function(){var e=this._sheet.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}},{key:"componentWillUnmout",value:function(){var e=this._sheet.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"render",value:function(e){var i=this,t=this._sheet.getRoot();if(!ki(t,"dmn:DMNElement"))return null;var n=Oi(t),r=n.input,o=n.output;return Ho(1,"thead",null,[Ho(1,"tr",null,[this.slotFills({type:"cell",context:{cellType:"before-label-cells"}}),this.slotFill({type:"cell",context:{cellType:"input-label"}},gc),this.slotFill({type:"cell",context:{cellType:"output-label"}},_c),this.slotFills({type:"cell",context:{cellType:"after-label-cells"}})],0),Ho(1,"tr",null,[r&&r.map(function(e){return i.slotFill({type:"cell",context:{cellType:"input-header",input:e},key:e.id},vc)}),o.map(function(e){return i.slotFill({type:"cell",context:{cellType:"output-header",output:e},key:e.id},bc)})],0),Ho(1,"tr",null,[r&&r.map(function(e,t){var n=e.inputExpression;return i.slotFill({type:"cell",context:{cellType:"input-header-type-ref",element:n},className:"input-cell",key:e.id},xc)}),o.map(function(e){return i.slotFill({type:"cell",context:{cellType:"output-header-type-ref",element:e},className:"output-cell",key:e.id},xc)})],0)],4)}}]),mc);function mc(e,t){pc(this,mc);var n=dc(this,(mc.__proto__||Object.getPrototypeOf(mc)).call(this,e,t));return n.onElementsChanged=function(){n.forceUpdate()},Ps(n,cc),n._sheet=t.injector.get("sheet"),n._changeSupport=t.changeSupport,n}function vc(e){var t=e.input,n=e.className,i=t.label,r=t.inputExpression;return Ho(1,"th",(n||"")+" input-cell",i?Ho(1,"span","input-label",i,0,{title:"Input Label"}):Ho(1,"span","input-expression",r.text||"-",0,{title:"Input Expression"}),0,{"data-col-id":t.id},t.id)}var gc=(fc(yc,os),lc(yc,[{key:"render",value:function(){var e=this._sheet.getRoot().businessObject,t=e.input;if(!t||!t.length)return null;var n=e.input.length;return Ho(1,"th","input-cell inputs-label header",qo("Input"),2,{colspan:n})}}]),yc);function yc(e,t){pc(this,yc);var n=dc(this,(yc.__proto__||Object.getPrototypeOf(yc)).call(this,e,t));return n._sheet=t.injector.get("sheet"),n}function bc(e){var t=e.output,n=e.className,i=t.label,r=t.name;return Ho(1,"th",(n||"")+" output-cell",i?Ho(1,"span","output-label",i,0,{title:"Output Label"}):Ho(1,"span","output-name",r||"-",0,{title:"Output Name"}),0,null,t.id)}var _c=(fc(wc,os),lc(wc,[{key:"render",value:function(){var e=this._sheet.getRoot().businessObject.output.length;return Ho(1,"th","output-cell outputs-label header",qo("Output"),2,{colspan:e})}}]),wc);function wc(e,t){pc(this,wc);var n=dc(this,(wc.__proto__||Object.getPrototypeOf(wc)).call(this,e,t));return n._sheet=t.injector.get("sheet"),n}function xc(e){return Ho(1,"th",e.className+" type-ref",e.element.typeRef,0,{title:"Data Type"})}function Ec(e){e.onGetComponent("table.head",function(){return hc})}Ec.$inject=["components"];var Cc={__init__:["decisionTableHeadProvider"],decisionTableHeadProvider:["type",Ec]},kc=function(e,t,n){return t&&Sc(e.prototype,t),n&&Sc(e,n),e};function Sc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Tc=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Oc,os),kc(Oc,[{key:"componentWillMount",value:function(){var e=this.context.injector;this._sheet=e.get("sheet")}},{key:"render",value:function(){var e=this._sheet.getRoot();if(!ki(e,"dmn:DMNElement"))return null;var t=e.businessObject.$parent,n=t.id;return Ho(1,"header","decision-table-properties",[Ho(1,"h3","decision-table-name",t.name,0,{title:"Decision Name"}),Ho(1,"h5","decision-table-id",n,0,{title:"Decision Id"})],4)}}]),Oc);function Oc(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Oc),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Oc.__proto__||Object.getPrototypeOf(Oc)).apply(this,arguments))}function Ac(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ac),e.onGetComponent("table.before",function(){return Tc})}Ac.$inject=["components"];var Ic={__init__:["decisionTableProperties"],decisionTableProperties:["type",Ac]},Dc=function(e,t,n){return t&&Pc(e.prototype,t),n&&Pc(e,n),e};function Pc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Rc=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Nc,os),Dc(Nc,[{key:"render",value:function(){var e=this.props,t=e.row,n=e.rowIndex,i=this.context.components.getComponents("cell-inner",{cellType:"rule-index",row:t,rowIndex:n});return Ho(1,"td","rule-index",[i&&i.map(function(e){return zo(2,e,{row:t,rowIndex:n})}),n+1],0,{"data-row-id":t.id})}}]),Nc);function Nc(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Nc),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Nc.__proto__||Object.getPrototypeOf(Nc)).apply(this,arguments))}function Mc(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Mc),e.onGetComponent("cell",function(e){if("before-rule-cells"===e.cellType)return Rc})}Mc.$inject=["components"];var jc={__init__:["decisionRuleIndices"],decisionRuleIndices:["type",Mc]},$c=function(e,t,n){return t&&Lc(e.prototype,t),n&&Lc(e,n),e};function Lc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Bc=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Vc,os),$c(Vc,[{key:"render",value:function(e){var t=e.rows,i=e.cols,r=this.context.components;return Ho(1,"tbody",null,t.map(function(e,t){var n=r.getComponent("row",{rowType:"rule"});return n&&zo(2,n,{row:e,rowIndex:t,cols:i},e.id)}),0)}}]),Vc);function Vc(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Vc),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Vc.__proto__||Object.getPrototypeOf(Vc)).apply(this,arguments))}var Fc=function(e,t,n){return t&&Uc(e.prototype,t),n&&Uc(e,n),e};function Uc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Hc=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(zc,os),Fc(zc,[{key:"render",value:function(){var n=this,e=this.props,i=e.row,r=e.rowIndex,o=e.cols,t=i.cells;return Ho(1,"tr",null,[this.slotFills({type:"cell",context:{cellType:"before-rule-cells",row:i,rowIndex:r}}),t.map(function(e,t){return n.slotFill({type:"cell",context:{cellType:"rule",cell:e,rowIndex:r,colIndex:t},key:e.id,row:i,col:o[t]})}),this.slotFills({type:"cell",context:{cellType:"after-rule-cells",row:i,rowIndex:r}})],0)}}]),zc);function zc(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,zc);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(zc.__proto__||Object.getPrototypeOf(zc)).call(this,e,t));return Ps(n,cc),n}var qc=function(e,t,n){return t&&Wc(e.prototype,t),n&&Wc(e,n),e};function Wc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Gc=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Yc,os),qc(Yc,[{key:"render",value:function(){var e=this.props,t=e.cell,n=e.row,i=e.col;return ki(t,"dmn:UnaryTests")?zo(2,Us,{className:"input-cell",elementId:t.id,"data-row-id":n.id,"data-col-id":i.id,children:t.businessObject.text}):zo(2,Us,{className:"output-cell",elementId:t.id,"data-row-id":n.id,"data-col-id":i.id,children:t.businessObject.text})}}]),Yc);function Yc(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Yc),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Yc.__proto__||Object.getPrototypeOf(Yc)).apply(this,arguments))}function Kc(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Kc),e.onGetComponent("table.body",function(){return Bc}),e.onGetComponent("row",function(e){if("rule"===e.rowType)return Hc}),e.onGetComponent("cell",function(e){if("rule"===e.cellType)return Gc})}Kc.$inject=["components"];var Xc={__init__:["decisionRules"],decisionRules:["type",Kc]},Jc=function(e,t,n){return t&&Qc(e.prototype,t),n&&Qc(e,n),e};function Qc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Zc=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(el,os),Jc(el,[{key:"componentWillMount",value:function(){var e=this.context.injector;this._sheet=e.get("sheet")}},{key:"render",value:function(){var e=this._sheet.getRoot().businessObject,t=e.hitPolicy;return Ho(1,"th","hit-policy header",[t.charAt(0),function(e){switch(e){case"SUM":return"+";case"MIN":return"<";case"MAX":return">";case"COUNT":return"#";default:return""}}(e.aggregation)],0,{rowspan:"3",title:"Hit Policy = "+t})}}]),el);function el(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,el),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(el.__proto__||Object.getPrototypeOf(el)).apply(this,arguments))}function tl(e){e.onGetComponent("cell",function(e){if("before-label-cells"===e.cellType)return Zc})}tl.$inject=["components"];var nl={__init__:["hitPolicyProvider"],hitPolicyProvider:["type",tl]},il=function(e,t,n){return t&&rl(e.prototype,t),n&&rl(e,n),e};function rl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ol=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(al,os),il(al,[{key:"render",value:function(){var t=this;return Ho(1,"div","view-drd",Ho(1,"button","view-drd-button",qo("View DRD"),2,{onClick:this.onClick}),2,null,null,function(e){return t.node=e})}}]),al);function al(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,al);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(al.__proto__||Object.getPrototypeOf(al)).call(this,e,t));n.onClick=function(){n._eventBus.fire("showDrd")};var i=t.injector;return n._eventBus=i.get("eventBus"),n}function sl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var cl=(function(e,t,n){return t&&sl(e.prototype,t),n&&sl(e,n),e}(ll,[{key:"canViewDrd",value:function(){var e=this._injector.get("_parent",!1);if(!e)return!1;var t=ul(this._sheet.getRoot());return!!e.getView(t)}}]),ll);function ll(e,t,i,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ll),this._injector=i,this._sheet=r,e.onGetComponent("table.before",function(){if(n.canViewDrd())return ol}),t.on("showDrd",function(){var e=i.get("_parent",!1),t=ul(r.getRoot());if(t){var n=e.getView(t);e.open(n)}})}function ul(e){var t=e.businessObject;if(t)return t.$parent.$parent}cl.$inject=["components","eventBus","injector","sheet"];var pl={__init__:["viewDrd"],viewDrd:["type",cl]},dl=function(e,t,n){return t&&fl(e.prototype,t),n&&fl(e,n),e};function fl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var hl=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ml,os),dl(ml,[{key:"render",value:function(){var t=this;return Ho(1,"div","powered-by-logo",Ho(1,"img","logo",null,1,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC"}),2,{onClick:this.onClick,title:"Powered by bpmn.io"},null,function(e){return t.node=e})}}]),ml);function ml(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ml);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(ml.__proto__||Object.getPrototypeOf(ml)).call(this,e,t));n.onClick=function(){n._eventBus.fire("poweredBy.show")};var i=t.injector;return n._eventBus=i.get("eventBus"),n}var vl=function(e,t,n){return t&&gl(e.prototype,t),n&&gl(e,n),e};function gl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var yl=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(bl,os),vl(bl,[{key:"onClick",value:function(){this.setState({show:!1})}},{key:"onShow",value:function(){this.setState({show:!0})}},{key:"componentWillMount",value:function(){(this._eventBus=this.context.injector.get("eventBus")).on("poweredBy.show",this.onShow)}},{key:"componentWillUnmount",value:function(){this._eventBus.off("poweredBy.show",this.onShow)}},{key:"render",value:function(){return this.state.show&&Ho(1,"div","powered-by-overlay",Ho(1,"div","powered-by-overlay-content",[Ho(1,"div",null,Ho(1,"img","logo",null,1,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC"}),2),Ho(1,"div",null,[qo("Web-based tooling for BPMN, DMN and CMMN diagrams powered by "),Ho(1,"a",null,qo("bpmn.io"),2,{href:"http://bpmn.io",target:"_blank"}),qo(".")],4)],4,{onClick:function(e){return e.stopPropagation()}}),2,{onClick:this.onClick})}}]),bl);function bl(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,bl);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(bl.__proto__||Object.getPrototypeOf(bl)).call(this,e));return t.state={show:!1},t.onClick=t.onClick.bind(t),t.onShow=t.onShow.bind(t),t}function _l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_l),e.onGetComponent("table.before",function(){return hl}),e.onGetComponent("table.before",function(){return yl})}_l.$inject=["components","eventBus"];var wl={__init__:["poweredBy"],poweredBy:["type",_l]},xl=function(e,t,n){return t&&El(e.prototype,t),n&&El(e,n),e};function El(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cl(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var kl=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Sl,ws),xl(Sl,[{key:"open",value:function(e,t){var n;try{return this._decision&&this.clear(),this._decision=e,function(e,t,n){var i,r=e.get("tableImporter"),o=e.get("eventBus"),a=e.get("sheet"),s=e.get("modeling",!1),c=void 0,l=[];o.fire("import.render.start",{decision:t});try{i=t,new Cs({create:function(e,t,n,i){return r.create(e,t,n,i)},table:function(e){return r.add(e)},element:function(e,t,n){return r.add(e,t,n)},error:function(e,t){l.push({message:e,context:t})}},{canAddMissingEntries:s}).handleDecision(i)}catch(e){c=e}o.fire("import.render.complete",{error:c,warnings:l}),o.fire("elements.changed",{elements:[a.getRoot()]}),n(c,l)}(this,e,t)}catch(e){n=e}return t(n)}},{key:"_init",value:function(e){var t=e.modules,n=e.additionalModules,i=function(e,t){var n={};for(var i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["modules","additionalModules"]),r=t||this.getModules(),o=n||[],a=[{decisionTable:["value",this]}];return{modules:[wl].concat(Cl(r),Cl(o),a),config:i}}},{key:"on",value:function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}},{key:"off",value:function(e,t){this.get("eventBus").off(e,t)}},{key:"_emit",value:function(e,t){return this.get("eventBus").fire(e,t)}},{key:"attachTo",value:function(e){if(!e)throw new Error("parentNode required");this.detach();var t=this._container;e.appendChild(t),this._emit("attach",{})}},{key:"detach",value:function(){var e=this._container;e.parentNode&&(this._emit("detach",{}),At(e))}},{key:"destroy",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(Sl.prototype.__proto__||Object.getPrototypeOf(Sl.prototype),"destroy",this).call(this),this.detach()}},{key:"getModules",value:function(){return Sl._getModules()}}],[{key:"_getModules",value:function(){return[Zs,oc,Cc,Ic,jc,Xc,nl,pl]}},{key:"_createContainer",value:function(){return wt('<div class="dmn-decision-table-container"></div>')}}]),Sl);function Sl(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Sl);var t=Sl._createContainer(),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Sl.__proto__||Object.getPrototypeOf(Sl)).call(this,R(e,{renderer:{container:t}})));return n._container=t,n}function Tl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ol=(function(e,t,n){return t&&Tl(e.prototype,t),n&&Tl(e,n),e}(Al,[{key:"elementsChanged",value:function(e){for(var t={},n=e.length,i=0;i<n;i++){var r=e[i].id;if(t[r])return;t[r]=!0;var o=this._listeners[r]&&this._listeners[r].length;if(o)for(var a=0;a<o;a++)this._listeners[r][a]&&this._listeners[r][a]()}}},{key:"onElementsChanged",value:function(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e][this._listeners[e].length]=t}},{key:"offElementsChanged",value:function(e,t){if(this._listeners[e])if(t){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}else this._listeners[e].length=0}},{key:"updateId",value:function(e,t){this._listeners[e]&&(this._listeners[t]=this._listeners[e],delete this._listeners[e])}}]),Al);function Al(e){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Al),this._listeners={},e.on("elements.changed",function(e){var t=e.elements;i.elementsChanged(t)}),e.on("element.updateId",function(e){var t=e.element,n=e.newId;i.updateId(t.id,n)})}function Il(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Ol.$inject=["eventBus"];var Dl=(function(e,t,n){return t&&Il(e.prototype,t),n&&Il(e,n),e}(Pl,[{key:"getComponent",value:function(e,t){var n=this._listeners[e];if(n){for(var i=void 0,r=0;r<n.length&&!(i=n[r].callback(t));r++);return i}}},{key:"getComponents",value:function(e,t){var n=this._listeners[e];if(n){for(var i=[],r=0;r<n.length;r++){var o=n[r].callback(t);o&&i.push(o)}if(i.length)return i}}},{key:"onGetComponent",value:function(e,t,n){if(p(t)&&(n=t,t=1e3),!u(t))throw new Error("priority must be a number");var i=this._getListeners(e),r=void 0,o=void 0,a={priority:t,callback:n};for(o=0;r=i[o];o++)if(r.priority<t)return void i.splice(o,0,a);i.push(a)}},{key:"offGetComponent",value:function(e,t){var n=this._getListeners(e),i=void 0,r=void 0;if(t)for(r=n.length-1;i=n[r];r--)i.callback===t&&n.splice(r,1);else n.length=0}},{key:"_getListeners",value:function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t}}]),Pl);function Pl(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Pl),this._listeners={}}var Rl=function(e,t,n){return t&&Nl(e.prototype,t),n&&Nl(e,n),e};function Nl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ml=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(jl,os),Rl(jl,[{key:"getChildContext",value:function(){return{changeSupport:this._changeSupport,components:this._components,renderer:this._renderer,injector:this._injector}}},{key:"render",value:function(){var e=this._components.getComponents("viewer");return Ho(1,"div","viewer-container",e&&e.map(function(e,t){return zo(2,e,null,t)}),0)}}]),jl);function jl(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,jl);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(jl.__proto__||Object.getPrototypeOf(jl)).call(this,e)),n=t._injector=e.injector;return t._changeSupport=n.get("changeSupport"),t._components=n.get("components"),t._renderer=n.get("renderer"),t}function $l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ll=(function(e,t,n){return t&&$l(e.prototype,t),n&&$l(e,n),e}(Bl,[{key:"getContainer",value:function(){return this._container}}]),Bl);function Bl(e,t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Bl);var o=n.container;this._container=o,i.on("renderer.mount",function(){es(zo(2,Ml,{injector:r}),o)}),i.on("renderer.unmount",function(){es(null,o)})}Ll.$inject=["changeSupport","components","config.renderer","eventBus","injector"];var Vl={__init__:["changeSupport","components","renderer"],changeSupport:["type",Ol],components:["type",Dl],eventBus:["type",j],renderer:["type",Ll]};function Fl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ul=(function(e,t,n){return t&&Fl(e.prototype,t),n&&Fl(e,n),e}(Hl,[{key:"_init",value:function(e){return{modules:e.modules,config:function(e,t){var n={};for(var i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["modules"])}}},{key:"destroy",value:function(){this.get("eventBus").fire("viewer.destroy")}},{key:"clear",value:function(){this.get("eventBus").fire("viewer.clear")}}]),Hl);function Hl(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Hl);var t=e.injector;if(!t){var n=this._init(e),i=n.modules;t=function(e,t){return function(e){var i=[],r=[];function o(e){return 0<=i.indexOf(e)}e.forEach(function e(t){if(o(t))return;(t.__depends__||[]).forEach(e);if(o(t))return;n=t,i.push(n);var n;(t.__init__||[]).forEach(function(e){r.push(e)})});var t=new en(i);return r.forEach(function(e){try{t["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),t}([{config:["value",e]},Vl].concat(t||[]))}(n.config,i)}this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("viewer.init")}function zl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ql=(function(e,t,n){return t&&zl(e.prototype,t),n&&zl(e,n),e}(Wl,[{key:"getDecision",value:function(){return this._viewer.getDecision()}},{key:"updateId",value:function(e,t){if(e!==this.getDecision())throw new Error("element !== decision");this._eventBus.fire("element.updateId",{element:e,newId:t}),e.id=t}}]),Wl);function Wl(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Wl),this._eventBus=t,this._viewer=e}ql.$inject=["viewer","eventBus"];var Gl={__init__:["elementRegistry"],elementRegistry:["type",ql]},Yl=function(e,t,n){return t&&Kl(e.prototype,t),n&&Kl(e,n),e};function Kl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Xl=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Jl,os),Yl(Jl,[{key:"render",value:function(){var e=this._viewer.getDecision(),t=e.name,n=e.id;return Ho(1,"div","decision-properties",[Ho(1,"h3","decision-name",t,0),Ho(1,"h5","decision-id",n,0)],4)}}]),Jl);function Jl(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Jl);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Jl.__proto__||Object.getPrototypeOf(Jl)).call(this,e,t));return n._viewer=t.injector.get("viewer"),n}function Ql(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ql),e.onGetComponent("viewer",2e3,function(){return Xl})}Ql.$inject=["components"];var Zl={__init__:["decisionProperties"],decisionProperties:["type",Ql]},eu=function(e,t,n){return t&&tu(e.prototype,t),n&&tu(e,n),e};function tu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nu=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(iu,os),eu(iu,[{key:"render",value:function(){var e=this._viewer.getDecision(),t=e.literalExpression,n=e.variable;return Ho(1,"div","literal-expression-properties",Ho(1,"table",null,[Ho(1,"tr",null,[Ho(1,"td",null,qo("Variable Name:"),2),Ho(1,"td",null,Ho(1,"span",null,n.name||"-",0),2)],4),Ho(1,"tr",null,[Ho(1,"td",null,qo("Variable Type:"),2),Ho(1,"td",null,Ho(1,"span",null,n.typeRef||"-",0),2)],4),Ho(1,"tr",null,[Ho(1,"td",null,qo("Expression Language:"),2),Ho(1,"td",null,Ho(1,"span",null,t.expressionLanguage||"-",0),2)],4)],4),2)}}]),iu);function iu(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,iu);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(iu.__proto__||Object.getPrototypeOf(iu)).call(this,e,t));return n._viewer=t.injector.get("viewer"),n}function ru(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ru),e.onGetComponent("viewer",500,function(){return nu})}ru.$inject=["components"];var ou={__init__:["literalExpressionProperties"],literalExpressionProperties:["type",ru]},au=function(e,t,n){return t&&su(e.prototype,t),n&&su(e,n),e};function su(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var cu=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(lu,os),au(lu,[{key:"render",value:function(){var t=this;return Ho(1,"div","powered-by-logo",Ho(1,"img","logo",null,1,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC"}),2,{onClick:this.onClick,title:"Powered by bpmn.io"},null,function(e){return t.node=e})}}]),lu);function lu(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,lu);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(lu.__proto__||Object.getPrototypeOf(lu)).call(this,e,t));n.onClick=function(){n._eventBus.fire("poweredBy.show")};var i=t.injector;return n._eventBus=i.get("eventBus"),n}var uu=function(e,t,n){return t&&pu(e.prototype,t),n&&pu(e,n),e};function pu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var du=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(fu,os),uu(fu,[{key:"onClick",value:function(){this.setState({show:!1})}},{key:"onShow",value:function(){this.setState({show:!0})}},{key:"componentWillMount",value:function(){(this._eventBus=this.context.injector.get("eventBus")).on("poweredBy.show",this.onShow)}},{key:"componentWillUnmount",value:function(){this._eventBus.off("poweredBy.show",this.onShow)}},{key:"render",value:function(){return this.state.show&&Ho(1,"div","powered-by-overlay",Ho(1,"div","powered-by-overlay-content",[Ho(1,"div",null,Ho(1,"img","logo",null,1,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC"}),2),Ho(1,"div",null,[qo("Web-based tooling for BPMN, DMN and CMMN diagrams powered by "),Ho(1,"a",null,qo("bpmn.io"),2,{href:"http://bpmn.io",target:"_blank"}),qo(".")],4)],4,{onClick:function(e){return e.stopPropagation()}}),2,{onClick:this.onClick})}}]),fu);function fu(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,fu);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(fu.__proto__||Object.getPrototypeOf(fu)).call(this,e));return t.state={show:!1},t.onClick=t.onClick.bind(t),t.onShow=t.onShow.bind(t),t}function hu(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,hu),e.onGetComponent("viewer",2e3,function(){return cu}),e.onGetComponent("viewer",function(){return du})}hu.$inject=["components","eventBus"];var mu={__init__:["poweredBy"],poweredBy:["type",hu]},vu=function(e,t,n){return t&&gu(e.prototype,t),n&&gu(e,n),e};function gu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var yu=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(bu,os),vu(bu,[{key:"render",value:function(){return Ho(1,"div","textarea",Ho(1,"div","content",this._viewer.getDecision().literalExpression.text,0),2)}}]),bu);function bu(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,bu);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(bu.__proto__||Object.getPrototypeOf(bu)).call(this,e,t));return n._viewer=t.injector.get("viewer"),n}function _u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_u),e.onGetComponent("viewer",function(){return yu})}_u.$inject=["components"];var wu={__init__:["textarea"],textarea:["type",_u]},xu=function(e,t,n){return t&&Eu(e.prototype,t),n&&Eu(e,n),e};function Eu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Cu=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ku,os),xu(ku,[{key:"render",value:function(){var t=this;return Ho(1,"div","view-drd",Ho(1,"button","view-drd-button",qo("View DRD"),2,{onClick:this.onClick}),2,null,null,function(e){return t.node=e})}}]),ku);function ku(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ku);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(ku.__proto__||Object.getPrototypeOf(ku)).call(this,e,t));n.onClick=function(){n._eventBus.fire("showDrd")};var i=t.injector;return n._eventBus=i.get("eventBus"),n}function Su(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Tu=(function(e,t,n){return t&&Su(e.prototype,t),n&&Su(e,n),e}(Ou,[{key:"canViewDrd",value:function(){var e=this._injector.get("_parent",!1);if(e){var t=this.getDefinitions();return!!e.getView(t)}}},{key:"getDefinitions",value:function(){return function(e){return e.$parent}(this._viewer.getDecision())}}]),Ou);function Ou(e,t,n,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ou),this._injector=i,this._viewer=t,e.onGetComponent("viewer",1500,function(){if(r.canViewDrd())return Cu}),n.on("showDrd",function(){var e=i.get("_parent",!1),t=r.getDefinitions(),n=e.getView(t);e.open(n)})}Tu.$inject=["components","viewer","eventBus","injector"];var Au={__init__:["viewDrd"],viewDrd:["type",Tu]},Iu=function(e,t,n){return t&&Du(e.prototype,t),n&&Du(e,n),e};function Du(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Pu(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Ru=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Nu,Ul),Iu(Nu,[{key:"open",value:function(e,t){var n;try{this._decision&&(this.clear(),this.get("eventBus").fire("renderer.unmount")),this._decision=e,this.get("eventBus").fire("import",e),this.get("eventBus").fire("renderer.mount")}catch(e){n=e}return t(n)}},{key:"_init",value:function(e){var t=e.modules,n=e.additionalModules,i=function(e,t){var n={};for(var i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["modules","additionalModules"]),r=t||this.getModules(),o=n||[],a=[{viewer:["value",this]}];return{modules:[].concat(Pu(r),Pu(o),a),config:i}}},{key:"on",value:function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)}},{key:"off",value:function(e,t){this.get("eventBus").off(e,t)}},{key:"_emit",value:function(e,t){return this.get("eventBus").fire(e,t)}},{key:"getDecision",value:function(){return this._decision}},{key:"attachTo",value:function(e){if(!e)throw new Error("parentNode required");this.detach(),e.appendChild(this._container),this._emit("attach",{})}},{key:"detach",value:function(){var e=this._container;e.parentNode&&(this._emit("detach",{}),At(e))}},{key:"destroy",value:function(){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(Nu.prototype.__proto__||Object.getPrototypeOf(Nu.prototype),"destroy",this).call(this),this.detach()}},{key:"getModules",value:function(){return Nu._getModules()}}],[{key:"_getModules",value:function(){return[Gl,Zl,ou,mu,wu,Au]}},{key:"_createContainer",value:function(){return wt('<div class="dmn-literal-expression-container"></div>')}}]),Nu);function Nu(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Nu);var t=Nu._createContainer(),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Nu.__proto__||Object.getPrototypeOf(Nu)).call(this,R(e,{renderer:{container:t}})));return n._container=t,n}function Mu(e){return w(e.drgElements,ju)}function ju(e){var t=e.extensionElements,n=t&&t.values;return n&&h(n,function(e){return ki(e,"biodi:Bounds")})}var $u=function(e){function n(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=a(this,r(n).call(this,t))).options=t,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,Mt),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(n,[{key:"_getViewProviders",value:function(){var e=[{id:"literalExpression",constructor:Ru,opens:function(e){return ki(e,"dmn:Decision")&&e.literalExpression}},{id:"decisionTable",constructor:kl,opens:function(e){return ki(e,"dmn:Decision")&&e.decisionTable}}];return this.options.tableViewOnly||e.push({id:"drd",constructor:Zr,opens:function(e){return ki(e,"dmn:Definitions")&&Mu(e)}}),e}}]),n}(),Lu=Ht(function(e){var c=e.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),i=2;n===1/0;i*=2)n=Math.log(Math.pow(2,e/i))/Math.log(t)*i;var r=n-Math.floor(n),o="";for(i=0;i<Math.floor(n);i++){o=Math.floor(Math.random()*t).toString(t)+o}if(r){var a=Math.pow(t,r);o=Math.floor(Math.random()*a).toString(t)+o}var s=parseInt(o,t);return s!==1/0&&s>=Math.pow(2,e)?c(e,t):o};c.rack=function(i,r,o){function n(e){var t=0;do{if(10<t++){if(!o)throw new Error("too many ID collisions, use more bits");i+=o}var n=c(i,r)}while(Object.hasOwnProperty.call(a,n));return a[n]=e,n}var a=n.hats={};return n.get=function(e){return n.hats[e]},n.set=function(e,t){return n.hats[e]=t,n},n.bits=i||128,n.base=r||16,n}});function Bu(e){if(!(this instanceof Bu))return new Bu(e);e=e||[128,36,1],this._seed=e.length?Lu.rack(e[0],e[1],e[2]):e}var Vu=Bu;Bu.prototype.next=function(e){return this._seed(e||!0)},Bu.prototype.nextPrefixed=function(e,t){for(var n;n=e+this.next(!0),this.assigned(n););return this.claim(n,t),n},Bu.prototype.claim=function(e,t){this._seed.set(e,t||!0)},Bu.prototype.assigned=function(e){return this._seed.get(e)||!1},Bu.prototype.unclaim=function(e){delete this._seed.hats[e]},Bu.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)};var Fu=function(e,t,n){return t&&Uu(e.prototype,t),n&&Uu(e,n),e};function Uu(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Hu(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:Hu(r,t,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0}var zu=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(qu,Mt),Fu(qu,[{key:"_init",value:function(e){var t=this;Hu(qu.prototype.__proto__||Object.getPrototypeOf(qu.prototype),"_init",this).call(this,e),this.on("import.parse.complete",function(e){e.error||t._collectIds(e.definitions,e.context)}),this.on("destroy",function(){t._moddle.ids.clear()}),this.on("viewer.created",function(e){e.viewer.on("elements.changed",function(e){e.elements.some(function(e){return Ai(e,["dmn:Decision","dmn:Definitions"])})&&t._updateViews()})})}},{key:"_collectIds",value:function(e,t){var n,i=e.$model.ids;for(n in i.clear(),t.elementsById)i.claim(n,t.elementsById[n])}},{key:"_createModdle",value:function(e){var t=Hu(qu.prototype.__proto__||Object.getPrototypeOf(qu.prototype),"_createModdle",this).call(this,e);return t.ids=new Vu([32,36,1]),t}}]),qu);function qu(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,qu),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(qu.__proto__||Object.getPrototypeOf(qu)).apply(this,arguments))}var Wu=Math.round,Gu="djs-drag-active";function Yu(e){e.preventDefault()}function Ku(u,p,d){var f,h={threshold:5,trapClick:!0};function m(e){var t=p.viewbox(),n=p._container.getBoundingClientRect();return{x:t.x+(e.x-n.left)/t.scale,y:t.y+(e.y-n.top)/t.scale}}function v(e,t){t=t||f;var n=u.createEvent(R({},t.payload,t.data,{isTouch:t.isTouch}));return!1!==u.fire("drag."+e,n)&&u.fire(t.prefix+"."+e,n)}function g(e,t){var n=f.payload,i=f.displacement,r=f.globalStart,o=Xi(e),a=Dr(o,r),s=f.localStart,c=m(o),l=Dr(c,s);if(!f.active&&(t||function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}(a)>f.threshold)){if(R(n,{x:Wu(s.x+i.x),y:Wu(s.y+i.y),dx:0,dy:0},{originalEvent:e}),!1===v("start"))return C();f.active=!0,f.keepSelection||(n.previousSelection=d.get(),d.select(null)),f.cursor&&Br(f.cursor),p.addMarker(p.getRootElement(),Gu)}Ki(e),f.active&&(R(n,{x:Wu(c.x+i.x),y:Wu(c.y+i.y),dx:Wu(l.x),dy:Wu(l.y)},{originalEvent:e}),v("move"))}function y(e){var t=!0;f.active&&(e&&Ki(f.payload.originalEvent=e),t=v("end")),!1===t&&v("rejected"),v("ended",i(!0!==t))}function b(e){27===e.which&&(Yu(e),C())}function _(e){var t;f.active&&(t=Ur(u),setTimeout(t,400),Yu(e)),y(e)}function w(e){g(e)}function x(e){var t=f.payload;t.hoverGfx=e.gfx,t.hover=e.element,v("hover")}function E(e){v("out");var t=f.payload;t.hoverGfx=null,t.hover=null}function C(e){var t;if(f){var n=f.active;n&&v("cancel"),t=i(e),n&&v("canceled",t)}}function i(e){var t,n;v("cleanup"),Vr(),n=f.trapClick?_:y,yt.unbind(document,"mousemove",g),yt.unbind(document,"dragstart",Yu),yt.unbind(document,"selectstart",Yu),yt.unbind(document,"mousedown",n,!0),yt.unbind(document,"mouseup",n,!0),yt.unbind(document,"keyup",b),yt.unbind(document,"touchstart",w,!0),yt.unbind(document,"touchcancel",C,!0),yt.unbind(document,"touchmove",g,!0),yt.unbind(document,"touchend",y,!0),u.off("element.hover",x),u.off("element.out",E),p.removeMarker(p.getRootElement(),Gu);var i=f.payload.previousSelection;return!1!==e&&i&&!d.get().length&&d.select(i),t=f,f=null,t}u.on("diagram.destroy",C),this.init=function(e,t,n,i){f&&C(!1),"string"==typeof t&&(i=n,n=t,t=null);var r,o,a,s,c,l=(i=R({},h,i||{})).data||{};s=i.trapClick?_:y,e?(r=Yi(e)||e,o=Xi(e),Ki(e),"dragstart"===r.type&&Yu(r)):(r=null,o={x:0,y:0}),a=m(o),t||(t=a),c=function(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}(r),f=R({prefix:n,data:l,payload:{},globalStart:o,displacement:Dr(t,a),localStart:a,isTouch:c},i),i.manual||(c?(yt.bind(document,"touchstart",w,!0),yt.bind(document,"touchcancel",C,!0),yt.bind(document,"touchmove",g,!0),yt.bind(document,"touchend",y,!0)):(yt.bind(document,"mousemove",g),yt.bind(document,"dragstart",Yu),yt.bind(document,"selectstart",Yu),yt.bind(document,"mousedown",s,!0),yt.bind(document,"mouseup",s,!0)),yt.bind(document,"keyup",b),u.on("element.hover",x),u.on("element.out",E)),v("init"),i.autoActivate&&g(e,!0)},this.move=g,this.hover=x,this.out=E,this.end=y,this.cancel=C,this.context=function(){return f},this.setOptions=function(e){R(h,e)}}function Xu(t,o,a){var n=this;t.on("drag.start",function(e){t.once("drag.move",function(){t.once("drag.move",function(e){n.ensureHover(e)})})}),this.ensureHover=function(e){if(!e.hover){var t,n,i,r=e.originalEvent;r instanceof MouseEvent&&(t=Xi(r),(i=function(e){return ht(e,"svg, .djs-element",!0)}(document.elementFromPoint(t.x,t.y)))&&(n=a.get(i),o.hover({element:n,gfx:i})))}}}Ku.$inject=["eventBus","canvas","selection"],Xu.$inject=["eventBus","dragging","elementRegistry"];var Ju={__init__:["hoverFix"],__depends__:[sr],dragging:["type",Ku],hoverFix:["type",Xu]};function Qu(e){this._commandStack=e.get("commandStack",!1)}Qu.$inject=["injector"],Qu.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),void 0===n||n};var Zu={__init__:["rules"],rules:["type",Qu]};function ep(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}function tp(e,t,n,i){if(void 0===i&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=ep(e,t);return Math.abs(r/o)<=i}var np=2;function ip(e,t){return Math.abs(e.x-t.x)<=np?"h":Math.abs(e.y-t.y)<=np&&"v"}function rp(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var op="djs-bendpoint",ap="djs-segment-dragger";function sp(e,t){var n=xn("g");mn(n).add(op),an(e,n);var i=xn("circle");un(i,{cx:0,cy:0,r:4}),mn(i).add("djs-visual"),an(n,i);var r=xn("circle");return un(r,{cx:0,cy:0,r:10}),mn(r).add("djs-hit"),an(n,r),t&&mn(n).add(t),n}function cp(e,t,n){var i=xn("g");an(e,i);var r=xn("rect");un(r,{x:-7,y:-1.5,width:14,height:3}),mn(r).add("djs-visual"),an(i,r);var o=xn("rect");return un(o,{x:-10,y:-4.5,width:20,height:9}),mn(o).add("djs-hit"),an(i,o),function(e,t){var n=kn();n.setRotate(t,0,0),Rn(e,n)}(i,"h"===n?90:0),i}function lp(e,t,n){var i=xn("g"),r=rp(t,n),o=ip(t,n);return an(e,i),cp(i,0,o),mn(i).add(ap),mn(i).add("h"===o?"vertical":"horizontal"),bi(i,r.x,r.y),i}var up=Ht(function(e,t){var n;n=Ut,e.exports=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,n=String(e),i=n.length,r=-1,o="",a=n.charCodeAt(0);++r<i;)0!=(t=n.charCodeAt(r))?o+=1<=t&&t<=31||127==t||0==r&&48<=t&&t<=57||1==r&&48<=t&&t<=57&&45==a?"\\"+t.toString(16)+" ":0==r&&1==i&&45==t||!(128<=t||45==t||95==t||48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122)?"\\"+n.charAt(r):n.charAt(r):o+="�";return o};return e.CSS||(e.CSS={}),e.CSS.escape=t}(n)}),pp="hasOwnProperty",dp=/,?([a-z]),?/gi,fp=parseFloat,hp=Math,mp=hp.PI,vp=hp.min,gp=hp.max,yp=hp.pow,bp=hp.abs,_p=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,wp=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/gi;function xp(e,t){return"finite"==(t=String.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==qe(e)&&null!==e||"object"==t&&e===Object(e)||Object.prototype.toString.call(e).slice(8,-1).toLowerCase()==t)}function Ep(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[pp](n)&&(t[n]=Ep(e[n]));return t}function Cp(t){var n=Cp.ps=Cp.ps||{};return n[t]?n[t].sleep=100:n[t]={sleep:100},setTimeout(function(){for(var e in n)n[pp](e)&&e!=t&&(n[e].sleep--,n[e].sleep||delete n[e])}),n[t]}function kp(e,t,n,i){return null==e&&(e=t=n=i=0),null==t&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:i,h:i,x2:e+n,y2:t+i,cx:e+n/2,cy:t+i/2,r1:hp.min(n,i)/2,r2:hp.max(n,i)/2,r0:hp.sqrt(n*n+i*i)/2,path:function(e,t,n,i,r){if(r)return[["M",+e+ +r,t],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]];var o=[["M",e,t],["l",n,0],["l",0,i],["l",-n,0],["z"]];return o.toString=Sp,o}(e,t,n,i),vb:[e,t,n,i].join(" ")}}function Sp(){return this.join(",").replace(dp,"$1")}function Tp(e){var t=Ep(e);return t.toString=Sp,t}function Op(e,t,n,i,r,o,a,s,c){var l=1-c,u=yp(l,3),p=yp(l,2),d=c*c,f=d*c,h=e+2*c*(n-e)+d*(r-2*n+e),m=t+2*c*(i-t)+d*(o-2*i+t),v=n+2*c*(r-n)+d*(a-2*r+n),g=i+2*c*(o-i)+d*(s-2*o+i);return{x:u*e+3*p*c*n+3*l*c*c*r+f*a,y:u*t+3*p*c*i+3*l*c*c*o+f*s,m:{x:h,y:m},n:{x:v,y:g},start:{x:l*e+c*n,y:l*t+c*i},end:{x:l*r+c*a,y:l*o+c*s},alpha:90-180*hp.atan2(h-v,m-g)/mp}}function Ap(e,t,n,i,r,o,a,s){xp(e,"array")||(e=[e,t,n,i,r,o,a,s]);var c=function(e,t,n,i,r,o,a,s){for(var c,l,u,p,d,f,h,m,v=[],g=[[],[]],y=0;y<2;++y)if(u=0==y?(l=6*e-12*n+6*r,c=-3*e+9*n-9*r+3*a,3*n-3*e):(l=6*t-12*i+6*o,c=-3*t+9*i-9*o+3*s,3*i-3*t),bp(c)<1e-12){if(bp(l)<1e-12)continue;0<(p=-u/l)&&p<1&&v.push(p)}else h=l*l-4*u*c,m=hp.sqrt(h),h<0||(0<(d=(-l+m)/(2*c))&&d<1&&v.push(d),0<(f=(-l-m)/(2*c))&&f<1&&v.push(f));var b,_=v.length,w=_;for(;_--;)p=v[_],b=1-p,g[0][_]=b*b*b*e+3*b*b*p*n+3*b*p*p*r+p*p*p*a,g[1][_]=b*b*b*t+3*b*b*p*i+3*b*p*p*o+p*p*p*s;return g[0][w]=e,g[1][w]=t,g[0][w+1]=a,g[1][w+1]=s,g[0].length=g[1].length=w+2,{min:{x:vp.apply(0,g[0]),y:vp.apply(0,g[1])},max:{x:gp.apply(0,g[0]),y:gp.apply(0,g[1])}}}.apply(null,e);return kp(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)}function Ip(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function Dp(e,t,n,i,r){return e*(e*(-3*t+9*n-9*i+3*r)+6*t-12*n+6*i)-3*t+3*n}function Pp(e,t,n,i,r,o,a,s,c){null==c&&(c=1);for(var l=(c=1<c?1:c<0?0:c)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var h=l*u[f]+l,m=Dp(h,e,n,r,a),v=Dp(h,t,i,o,s),g=m*m+v*v;d+=p[f]*hp.sqrt(g)}return l*d}function Rp(e,t,n,i,r,o,a,s){if(!(gp(e,n)<vp(r,a)||vp(e,n)>gp(r,a)||gp(t,i)<vp(o,s)||vp(t,i)>gp(o,s))){var c=(e-n)*(o-s)-(t-i)*(r-a);if(c){var l=((e*i-t*n)*(r-a)-(e-n)*(r*s-o*a))/c,u=((e*i-t*n)*(o-s)-(t-i)*(r*s-o*a))/c,p=+l.toFixed(2),d=+u.toFixed(2);if(!(p<+vp(e,n).toFixed(2)||p>+gp(e,n).toFixed(2)||p<+vp(r,a).toFixed(2)||p>+gp(r,a).toFixed(2)||d<+vp(t,i).toFixed(2)||d>+gp(t,i).toFixed(2)||d<+vp(o,s).toFixed(2)||d>+gp(o,s).toFixed(2)))return{x:l,y:u}}}}function Np(e,t,n){if(!function(e,t){return e=kp(e),Ip(t=kp(t),e.x,e.y)||Ip(t,e.x2,e.y)||Ip(t,e.x,e.y2)||Ip(t,e.x2,e.y2)||Ip(e,t.x,t.y)||Ip(e,t.x2,t.y)||Ip(e,t.x,t.y2)||Ip(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}(Ap(e),Ap(t)))return n?0:[];for(var i=~~(Pp.apply(0,e)/5),r=~~(Pp.apply(0,t)/5),o=[],a=[],s={},c=n?0:[],l=0;l<1+i;l++){var u=Op.apply(0,e.concat(l/i));o.push({x:u.x,y:u.y,t:l/i})}for(l=0;l<1+r;l++)u=Op.apply(0,t.concat(l/r)),a.push({x:u.x,y:u.y,t:l/r});for(l=0;l<i;l++)for(var p=0;p<r;p++){var d=o[l],f=o[l+1],h=a[p],m=a[p+1],v=bp(f.x-d.x)<.01?"y":"x",g=bp(m.x-h.x)<.01?"y":"x",y=Rp(d.x,d.y,f.x,f.y,h.x,h.y,m.x,m.y);if(y){if(s[y.x.toFixed(0)]==y.y.toFixed(0))continue;s[y.x.toFixed(0)]=y.y.toFixed(0);var b=d.t+bp((y[v]-d[v])/(f[v]-d[v]))*(f.t-d.t),_=h.t+bp((y[g]-h[g])/(m[g]-h[g]))*(m.t-h.t);0<=b&&b<=1&&0<=_&&_<=1&&(n?c++:c.push({x:y.x,y:y.y,t1:b,t2:_}))}}return c}function Mp(e,t,n,i,r){if(null==r&&null==i&&(i=n),e=+e,t=+t,n=+n,i=+i,null!=r)var o=Math.PI/180,a=e+n*Math.cos(-i*o),s=e+n*Math.cos(-r*o),c=[["M",a,t+n*Math.sin(-i*o)],["A",n,n,0,+(180<r-i),0,s,t+n*Math.sin(-r*o)]];else c=[["M",e,t],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return c.toString=Sp,c}function jp(e){var t=Cp(e);if(t.abs)return Tp(t.abs);if(xp(e,"array")&&xp(e&&e[0],"array")||(e=function(e){if(!e)return null;var t=Cp(e);if(t.arr)return Ep(t.arr);var o={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[];return xp(e,"array")&&xp(e[0],"array")&&(a=Ep(e)),a.length||String(e).replace(_p,function(e,t,n){var i=[],r=t.toLowerCase();if(n.replace(wp,function(e,t){t&&i.push(+t)}),"m"==r&&2<i.length&&(a.push([t].concat(i.splice(0,2))),r="l",t="m"==t?"l":"L"),"o"==r&&1==i.length&&a.push([t,i[0]]),"r"==r)a.push([t].concat(i));else for(;i.length>=o[r]&&(a.push([t].concat(i.splice(0,o[r]))),o[r]););}),a.toString=Cp.toString,t.arr=Ep(a),a}(e)),!e||!e.length)return[["M",0,0]];var n,i=[],r=0,o=0,a=0,s=0,c=0;"M"==e[0][0]&&(a=r=+e[0][1],s=o=+e[0][2],c++,i[0]=["M",r,o]);for(var l,u,p=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),d=c,f=e.length;d<f;d++){if(i.push(l=[]),(n=(u=e[d])[0])!=n.toUpperCase())switch(l[0]=n.toUpperCase(),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+u[6]+r,l[7]=+u[7]+o;break;case"V":l[1]=+u[1]+o;break;case"H":l[1]=+u[1]+r;break;case"R":for(var h=[r,o].concat(u.slice(1)),m=2,v=h.length;m<v;m++)h[m]=+h[m]+r,h[++m]=+h[m]+o;i.pop(),i=i.concat(Vp(h,p));break;case"O":i.pop(),(h=Mp(r,o,u[1],u[2])).push(h[0]),i=i.concat(h);break;case"U":i.pop(),i=i.concat(Mp(r,o,u[1],u[2],u[3])),l=["U"].concat(i[i.length-1].slice(-2));break;case"M":a=+u[1]+r,s=+u[2]+o;default:for(m=1,v=u.length;m<v;m++)l[m]=+u[m]+(m%2?r:o)}else if("R"==n)h=[r,o].concat(u.slice(1)),i.pop(),i=i.concat(Vp(h,p)),l=["R"].concat(u.slice(-2));else if("O"==n)i.pop(),(h=Mp(r,o,u[1],u[2])).push(h[0]),i=i.concat(h);else if("U"==n)i.pop(),i=i.concat(Mp(r,o,u[1],u[2],u[3])),l=["U"].concat(i[i.length-1].slice(-2));else for(var g=0,y=u.length;g<y;g++)l[g]=u[g];if("O"!=(n=n.toUpperCase()))switch(l[0]){case"Z":r=+a,o=+s;break;case"H":r=l[1];break;case"V":o=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];default:r=l[l.length-2],o=l[l.length-1]}}return i.toString=Sp,t.abs=Tp(i),i}function $p(e,t,n,i){return[e,t,n,i,n,i]}function Lp(e,t,n,i,r,o){return[1/3*e+2/3*n,1/3*t+2/3*i,1/3*r+2/3*n,1/3*o+2/3*i,r,o]}function Bp(e,t,n,i,r,o,a,s,c,l){var u,p=120*mp/180,d=mp/180*(+r||0),f=[],h=function(o,a,s){return function e(){var t=Array.prototype.slice.call(arguments,0),n=t.join("␀"),i=e.cache=e.cache||{},r=e.count=e.count||[];return i[pp](n)?function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}(r,n):(1e3<=r.length&&delete i[r.shift()],r.push(n),i[n]=o.apply(a,t)),s?s(i[n]):i[n]}}(function(e,t,n){return{x:e*hp.cos(n)-t*hp.sin(n),y:e*hp.sin(n)+t*hp.cos(n)}});if(l)E=l[0],C=l[1],w=l[2],x=l[3];else{e=(u=h(e,t,-d)).x,t=u.y;var m=(e-(s=(u=h(s,c,-d)).x))/2,v=(t-(c=u.y))/2,g=m*m/(n*n)+v*v/(i*i);1<g&&(n*=g=hp.sqrt(g),i*=g);var y=n*n,b=i*i,_=(o==a?-1:1)*hp.sqrt(bp((y*b-y*v*v-b*m*m)/(y*v*v+b*m*m))),w=_*n*v/i+(e+s)/2,x=_*-i*m/n+(t+c)/2,E=hp.asin(((t-x)/i).toFixed(9)),C=hp.asin(((c-x)/i).toFixed(9));(E=e<w?mp-E:E)<0&&(E=2*mp+E),(C=s<w?mp-C:C)<0&&(C=2*mp+C),a&&C<E&&(E-=2*mp),!a&&E<C&&(C-=2*mp)}var k=C-E;if(bp(k)>p){var S=C,T=s,O=c;C=E+p*(a&&E<C?1:-1),f=Bp(s=w+n*hp.cos(C),c=x+i*hp.sin(C),n,i,r,0,a,T,O,[C,S,w,x])}k=C-E;var A=hp.cos(E),I=hp.sin(E),D=hp.cos(C),P=hp.sin(C),R=hp.tan(k/4),N=4/3*n*R,M=4/3*i*R,j=[e,t],$=[e+N*I,t-M*A],L=[s+N*P,c-M*D],B=[s,c];if($[0]=2*j[0]-$[0],$[1]=2*j[1]-$[1],l)return[$,L,B].concat(f);for(var V=[],F=0,U=(f=[$,L,B].concat(f).join().split(",")).length;F<U;F++)V[F]=F%2?h(f[F-1],f[F],d).y:h(f[F],f[F+1],d).x;return V}function Vp(e,t){for(var n=[],i=0,r=e.length;i<r-2*!t;i+=2){var o=[{x:+e[i-2],y:+e[i-1]},{x:+e[i],y:+e[i+1]},{x:+e[i+2],y:+e[i+3]},{x:+e[i+4],y:+e[i+5]}];t?i?r-4==i?o[3]={x:+e[0],y:+e[1]}:r-2==i&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[r-2],y:+e[r-1]}:r-4==i?o[3]=o[2]:i||(o[0]={x:+e[i],y:+e[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function Fp(e,t){var n=!t&&Cp(e);if(!t&&n.curve)return Tp(n.curve);for(var o=jp(e),a=t&&jp(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=function(e,t,n){var i,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(Bp.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":r="C"==n||"S"==n?(i=2*t.x-t.bx,2*t.y-t.by):(i=t.x,t.y),e=["C",i,r].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(Lp(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(Lp(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat($p(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat($p(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat($p(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat($p(t.x,t.y,t.X,t.Y))}return e},c=function(e,t){if(7<e[t].length){e[t].shift();for(var n=e[t];n.length;)u[t]="A",a&&(p[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),m=gp(o.length,a&&a.length||0)}},l=function(e,t,n,i,r){e&&t&&"M"==e[r][0]&&"M"!=t[r][0]&&(t.splice(r,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=e[r][1],n.y=e[r][2],m=gp(o.length,a&&a.length||0))},u=[],p=[],d="",f="",h=0,m=gp(o.length,a&&a.length||0);h<m;h++){o[h]&&(d=o[h][0]),"C"!=d&&(u[h]=d,h&&(f=u[h-1])),o[h]=s(o[h],i,f),"A"!=u[h]&&"C"==d&&(u[h]="C"),c(o,h),a&&(a[h]&&(d=a[h][0]),"C"!=d&&(p[h]=d,h&&(f=p[h-1])),a[h]=s(a[h],r,f),"A"!=p[h]&&"C"==d&&(p[h]="C"),c(a,h)),l(o,a,i,r,h),l(a,o,r,i,h);var v=o[h],g=a&&a[h],y=v.length,b=a&&g.length;i.x=v[y-2],i.y=v[y-1],i.bx=fp(v[y-4])||i.x,i.by=fp(v[y-3])||i.y,r.bx=a&&(fp(g[b-4])||r.x),r.by=a&&(fp(g[b-3])||r.y),r.x=a&&g[b-2],r.y=a&&g[b-1]}return a||(n.curve=Tp(o)),a?[o,a]:o}var Up=function(e,t,n){e=Fp(e),t=Fp(t);for(var i,r,o,a,s,c,l,u,p,d,f=n?0:[],h=0,m=e.length;h<m;h++){var v=e[h];if("M"==v[0])i=s=v[1],r=c=v[2];else{r="C"==v[0]?(i=(p=[i,r].concat(v.slice(1)))[6],p[7]):(p=[i,r,i,r,s,c,s,c],i=s,c);for(var g=0,y=t.length;g<y;g++){var b=t[g];if("M"==b[0])o=l=b[1],a=u=b[2];else{a="C"==b[0]?(o=(d=[o,a].concat(b.slice(1)))[6],d[7]):(d=[o,a,o,a,l,u,l,u],o=l,u);var _=Np(p,d,n);if(n)f+=_;else{for(var w=0,x=_.length;w<x;w++)_[w].segment1=h,_[w].segment2=g,_[w].bez1=p,_[w].bez2=d;f=f.concat(_)}}}}}return f},Hp=Math.round,zp=Math.max;var qp=10;function Wp(e,t){return function(e,t){var n,i;for(n=0;i=e[n];n++)if(ep(i,t)<=qp)return{point:e[n],bendpoint:!0,index:n};return null}(e,t)||function(e,t){var n,i=Up(function(e,t){return[["M",e.x,e.y],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}(t,qp),function(e){var n=[];return e.forEach(function(e,t){n.push([0===t?"M":"L",e.x,e.y])}),n}(e)),r=i[0],o=i[i.length-1];return r?r!==o?r.segment2!==o.segment2?{point:e[n=zp(r.segment2,o.segment2)-1],bendpoint:!0,index:n}:{point:{x:Hp(r.x+o.x)/2,y:Hp(r.y+o.y)/2},index:r.segment2}:{point:{x:Hp(r.x),y:Hp(r.y)},index:r.segment2}:null}(e,t)}function Gp(e,r,i,o,a){function s(e,t){return Wp(e,function(e,t){var n,i=Xi(t),r=e._container.getBoundingClientRect();n={x:r.left,y:r.top};var o=e.viewbox();return{x:o.x+(i.x-n.x)/o.scale,y:o.y+(i.y-n.y)/o.scale}}(r,t))}function c(e,t){var n=t.waypoints,i=s(n,e);if(i)return!function(e,t,n){var i,r,o,a,s,c,l=e.index,u=e.point;return!(l<=0||e.bendpoint)&&(o=rp(i=t[l-1],r=t[l]),a=ip(i,r),s=Math.abs(u.x-o.x),c=Math.abs(u.y-o.y),a&&s<=n&&c<=n)}(i,n,10)?o.start(e,t,i.index,!i.bendpoint):a.start(e,t,i.index),!0}function l(e,t,n){yt.bind(e,t,function(e){i.triggerMouseEvent(t,e,n),e.stopPropagation()})}function u(e,t){var n=r.getLayer("overlays"),i=Tt('.djs-bendpoints[data-element-id="'+up(e.id)+'"]',n);return!i&&t&&(un(i=xn("g"),{"data-element-id":e.id}),mn(i).add("djs-bendpoints"),an(n,i),l(i,"mousedown",e),l(i,"click",e),l(i,"dblclick",e)),i}function n(i,e){e.waypoints.forEach(function(e,t){var n=sp(i);an(i,n),bi(n,e.x,e.y)}),sp(i,"floating")}function p(e,t){for(var n,i,r=t.waypoints,o=1;o<r.length;o++)ip(n=r[o-1],i=r[o])&&lp(e,n,i)}function d(e){var t=u(e);return t||(n(t=u(e,!0),e),p(t,e)),t}function t(e){var t=u(e);t&&(function(e){y(Ot("."+ap,e),function(e){gn(e)})}(t),function(e){y(Ot("."+op,e),function(e){gn(e)})}(t),p(t,e),n(t,e))}e.on("connection.changed",function(e){t(e.element)}),e.on("connection.remove",function(e){var t=u(e.element);t&&gn(t)}),e.on("element.marker.update",function(e){var t,n=e.element;n.waypoints&&(t=d(n),e.add?mn(t).add(e.marker):mn(t).remove(e.marker))}),e.on("element.mousemove",function(e){var t,n,i=e.element,r=i.waypoints;if(r){if(!(t=Tt(".floating",u(i,!0))))return;(n=s(r,e.originalEvent))&&bi(t,n.point.x,n.point.y)}}),e.on("element.mousedown",function(e){var t=e.originalEvent,n=e.element;if(n.waypoints)return c(t,n)}),e.on("selection.changed",function(e){var t=e.newSelection[0];t&&t.waypoints&&d(t)}),e.on("element.hover",function(e){var t=e.element;t.waypoints&&(d(t),i.registerEvent(e.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(e){i.unregisterEvent(e.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(e){var t=e.element,n=e.newId;if(t.waypoints){var i=u(t);i&&un(i,{"data-element-id":n})}}),this.addHandles=d,this.updateHandles=t,this.getBendpointsContainer=u}Gp.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var Yp="connect-ok",Kp="connect-not-ok",Xp="connect-hover",Jp="djs-updating",Qp="connection.updateWaypoints",Zp="connection.reconnectStart",ed="connection.reconnectEnd",td=Math.round;function nd(e,t,s,c,n,i,l){var a=e.get("connectionDocking",!1);function u(e){n.update("connection",e.connection,e.connectionGfx)}this.start=function(e,t,n,i){var r,o=t.waypoints,a=s.getGraphics(t);r={connection:t,bendpointIndex:n,insert:i,type:i||0!==n?i||n!==o.length-1?Qp:ed:Zp},c.init(e,"bendpoint.move",{data:{connection:t,connectionGfx:a,context:r}})},t.on("bendpoint.move.start",function(e){var t=e.context,n=t.connection,i=n.waypoints,r=i.slice(),o=t.insert,a=t.bendpointIndex;t.originalWaypoints=i,o&&r.splice(a,0,null),n.waypoints=r,t.draggerGfx=sp(s.getLayer("overlays")),mn(t.draggerGfx).add("djs-dragging"),s.addMarker(n,Jp)}),t.on("bendpoint.move.hover",function(e){var t=e.context;if(t.hover=e.hover,e.hover){s.addMarker(e.hover,Xp);var n=t.allowed=i.allowed(t.type,t);n?(s.removeMarker(t.hover,Kp),s.addMarker(t.hover,Yp),t.target=t.hover):!1===n&&(s.removeMarker(t.hover,Yp),s.addMarker(t.hover,Kp),t.target=null)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(e){var t=e.context.hover;t&&(s.removeMarker(t,Xp),s.removeMarker(t,e.context.target?Yp:Kp))}),t.on("bendpoint.move.move",function(e){var t,n,i=e.context,r=i.type,o=e.connection;o.waypoints[i.bendpointIndex]={x:e.x,y:e.y},a&&(i.hover&&(r===Zp&&(t=i.hover),r===ed&&(n=i.hover)),o.waypoints=a.getCroppedWaypoints(o,t,n)),bi(i.draggerGfx,e.x,e.y),u(e)}),t.on(["bendpoint.move.end","bendpoint.move.cancel"],function(e){var t=e.context,n=t.hover,i=t.connection;gn(t.draggerGfx),t.newWaypoints=i.waypoints.slice(),i.waypoints=t.originalWaypoints,s.removeMarker(i,Jp),n&&(s.removeMarker(n,Yp),s.removeMarker(n,Kp))}),t.on("bendpoint.move.end",function(e){var t,n=e.context,i=n.newWaypoints,r=n.bendpointIndex,o=i[r],a=n.allowed;if(o.x=td(o.x),o.y=td(o.y),a&&n.type===Zp)l.reconnectStart(n.connection,n.target,o);else if(a&&n.type===ed)l.reconnectEnd(n.connection,n.target,o);else{if(!1===a||n.type!==Qp)return u(e),!1;t={bendpointMove:{insert:e.context.insert,bendpointIndex:r}},l.updateWaypoints(n.connection,function(e){e=e.slice();for(var t,n,i,r=0;e[r];)t=e[r],n=e[r-1],0===ep(t,i=e[r+1])||tp(n,i,t)?e.splice(r,1):r++;return e}(i),t)}}),t.on("bendpoint.move.cancel",function(e){u(e)})}function id(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function rd(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function od(e){return id({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function ad(e,t,n){v(n=n||0)||(n={x:n,y:n});var i=rd(e),r=rd(t),o=i.bottom+n.y<=r.top,a=i.left-n.x>=r.right,s=i.top-n.y>=r.bottom,c=o?"top":s?"bottom":null,l=i.right+n.x<=r.left?"left":a?"right":null;return l&&c?c+"-"+l:l||c||"intersect"}function sd(e,t,n){var i=function(e,t){return Up(e,t)}(e,t);return 1===i.length?id(i[0]):2===i.length&&ep(i[0],i[1])<1?id(i[0]):1<i.length?id((i=k(i,function(e){var t=Math.floor(100*e.t2)||1;return t=((t=100-t)<10?"0":"")+t,e.segment2+"#"+t}))[n?0:i.length-1]):null}nd.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"];var cd="connect-hover",ld="djs-updating";function ud(e,t,n){return pd(e,t,e[t]+n)}function pd(e,t,n){return{x:"x"===t?n:e.x,y:"y"===t?n:e.y}}function dd(e){return"x"===e?"y":"x"}function fd(e,t,n){var i,r;return e.original?e.original:(i=od(t),pd(e,r=dd(n),i[r]))}function hd(e,t,d,f,n,i,l){var r=e.get("connectionDocking",!1);function m(e,t){if(!r)return t;var n,i=e.waypoints;return e.waypoints=t,n=r.getCroppedWaypoints(e),e.waypoints=i,n}function v(e){n.update("connection",e.connection,e.connectionGfx)}function g(e,t,n){var i=e.newWaypoints,r=function(e,t,n,i){var r=Math.max(t[i],n[i]),o=Math.min(t[i],n[i]);return pd(t,i,Math.min(Math.max(o+20,e[i]),r-20))}(n,i[e.segmentStartIndex+t],i[e.segmentEndIndex+t],dd(e.axis));bi(e.draggerGfx,r.x,r.y)}this.start=function(e,t,n){var i,r,o,a=d.getGraphics(t),s=n-1,c=n,l=t.waypoints,u=l[s],p=l[c];(r=ip(u,p))&&(o="v"===r?"y":"x",0==s&&(u=fd(u,t.source,o)),c===l.length-1&&(p=fd(p,t.target,o)),i={connection:t,segmentStartIndex:s,segmentEndIndex:c,segmentStart:u,segmentEnd:p,axis:o},f.init(e,{x:(u.x+p.x)/2,y:(u.y+p.y)/2},"connectionSegment.move",{cursor:"x"==o?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:a,context:i}}))},t.on("connectionSegment.move.start",function(e){var t=e.context,n=e.connection,i=d.getLayer("overlays");t.originalWaypoints=n.waypoints.slice(),t.draggerGfx=lp(i,t.segmentStart,t.segmentEnd),mn(t.draggerGfx).add("djs-dragging"),d.addMarker(n,ld)}),t.on("connectionSegment.move.move",function(e){var t,n,i=e.context,r=i.connection,o=i.segmentStartIndex,a=i.segmentEndIndex,s=i.segmentStart,c=i.segmentEnd,l=i.axis,u=i.originalWaypoints.slice(),p=ud(s,l,e["d"+l]),d=ud(c,l,e["d"+l]),f=u.length,h=0;u[o]=p,u[a]=d,o<2&&(t=ad(r.source,p),1===o?"intersect"===t&&(u.shift(),u[0]=p,h--):"intersect"!==t&&(u.unshift(s),h++)),f-3<a&&(n=ad(r.target,d),a===f-2?"intersect"===n&&(u.pop(),u[u.length-1]=d):"intersect"!==n&&u.push(c)),i.newWaypoints=r.waypoints=m(r,u),g(i,h,e),i.newSegmentStartIndex=o+h,v(e)}),t.on("connectionSegment.move.hover",function(e){e.context.hover=e.hover,d.addMarker(e.hover,cd)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(e){var t=e.context.hover;t&&d.removeMarker(t,cd)}),t.on("connectionSegment.move.cleanup",function(e){var t=e.context,n=t.connection;t.draggerGfx&&gn(t.draggerGfx),d.removeMarker(n,ld)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(e){var t=e.context;t.connection.waypoints=t.originalWaypoints,v(e)}),t.on("connectionSegment.move.end",function(e){var t=e.context,n=t.connection,i=t.newWaypoints,r=t.newSegmentStartIndex,o=function(n,i){var r=0;return{waypoints:n.filter(function(e,t){return!tp(n[t-1],n[t+1],e)||(r=t<=i?r-1:r,!1)}),segmentOffset:r}}(i=i.map(function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}}),r),a=m(n,o.waypoints),s=o.segmentOffset,c={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:r+s}};l.updateWaypoints(n,a,c)})}hd.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"];var md=Math.abs,vd=Math.round;function gd(e){function l(e,t){if(m(e)){for(var n=e.length;n--;)if(md(e[n]-t)<=10)return e[n]}else{var i=t%(e=+e);if(i<10)return t-i;if(e-10<i)return t-i+e}return t}function u(e){if(e.width)return{x:vd(e.width/2+e.x),y:vd(e.height/2+e.y)}}e.on("connectionSegment.move.move",1500,function(e){var t,n,i=function(e){var t=e.snapPoints,n=e.connection,i=n.waypoints,r=e.segmentStart,o=e.segmentStartIndex,a=e.segmentEnd,s=e.segmentEndIndex,c=e.axis;if(t)return t;var l=[i[o-1],r,a,i[s+1]];return o<2&&l.unshift(u(n.source)),s>i.length-3&&l.unshift(u(n.target)),e.snapPoints=t={horizontal:[],vertical:[]},y(l,function(e){e&&(e=e.original||e,"y"===c&&t.horizontal.push(e.y),"x"===c&&t.vertical.push(e.x))}),t}(e.context),r=e.x,o=e.y;if(i){var a=r-(t=l(i.vertical,r)),s=o-(n=l(i.horizontal,o));R(e,{dx:e.dx-a,dy:e.dy-s,x:t,y:n})}}),e.on("bendpoint.move.move",1500,function(e){var t=e.context,n=function(e){var t=e.snapPoints,n=e.connection.waypoints,i=e.bendpointIndex;if(t)return t;var r=[n[i-1],n[i+1]];return e.snapPoints=t={horizontal:[],vertical:[]},y(r,function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))}),t}(t),i=t.target,r=i&&u(i),o=e.x,a=e.y;if(n){var s=o-l(r?n.vertical.concat([r.x]):n.vertical,o),c=a-l(r?n.horizontal.concat([r.y]):n.horizontal,a);R(e,{dx:e.dx-s,dy:e.dy-c,x:e.x-s,y:e.y-c})}})}gd.$inject=["eventBus"];var yd={__depends__:[Ju,Zu],__init__:["bendpoints","bendpointSnapping"],bendpoints:["type",Gp],bendpointMove:["type",nd],connectionSegmentMove:["type",hd],bendpointSnapping:["type",gd]};function bd(e,t,n){this._providers=[],this._eventBus=t,this._overlays=n;var i=c(e&&e.scale)?e.scale:{min:1,max:1.5};this._overlaysConfig={position:{right:-9,top:-6},scale:i},this._current=null,this._init()}bd.$inject=["config.contextPad","eventBus","overlays"],bd.prototype._init=function(){var e=this._eventBus,i=this;e.on("selection.changed",function(e){var t=e.newSelection;1===t.length?i.open(t[0]):i.close()}),e.on("elements.delete",function(e){y(e.elements,function(e){i.isOpen(e)&&i.close()})}),e.on("element.changed",function(e){var t=e.element,n=i._current;n&&n.element===t&&i.open(t,!0)})},bd.prototype.registerProvider=function(e){this._providers.push(e)},bd.prototype.getEntries=function(t){var n={};return y(this._providers,function(e){y(e.getContextPadEntries(t),function(e,t){n[t]=e})}),n},bd.prototype.trigger=function(e,t,n){var i,r,o=this._current.element,a=this._current.entries,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();if(i=a[nt(s,"data-action")].action,r=t.originalEvent||t,p(i)){if("click"===e)return i(r,o,n)}else if(i[e])return i[e](r,o,n);t.preventDefault()},bd.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},bd.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),o=n.html;y(t,function(e,t){var n,i=e.group||"default",r=wt(e.html||'<div class="entry" draggable="true"></div>');nt(r,"data-action",t),(n=Tt("[data-group="+i+"]",o))||(n=wt('<div class="group" data-group="'+i+'"></div>'),o.appendChild(n)),n.appendChild(r),e.className&&function(e,t){var n=st(e);(m(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(r,e.className),e.title&&nt(r,"title",e.title),e.imageUrl&&r.appendChild(wt('<img src="'+e.imageUrl+'">'))}),st(o).add("open"),this._current={element:e,pad:n,entries:t},this._eventBus.fire("contextPad.open",{current:this._current})},bd.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=wt('<div class="djs-context-pad"></div>'),r=R({html:i},this._overlaysConfig);_t.bind(i,".entry","click",function(e){t.trigger("click",e)}),_t.bind(i,".entry","dragstart",function(e){t.trigger("dragstart",e)}),yt.bind(i,"mousedown",function(e){e.stopPropagation()}),this._overlayId=n.add(e,"context-pad",r);var o=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:e,pad:o}),o},bd.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},bd.prototype.isOpen=function(e){return!(!this._current||e&&this._current.element!==e)};var _d={__depends__:[tr,hr],contextPad:["type",bd]},wd="connect-ok",xd="connect-not-ok";function Ed(e,r,l,n,o,s){function u(e,t){return n.allowed("connection.create",{source:e,target:t})}e.on("connect.move",function(e){var t,n=e.context,i=n.source,r=n.target;un(n.visual,{points:[(t=function(e,t,n,i){var r=s.getShapePath(n),o=i&&s.getShapePath(i),a=s.getConnectionPath({waypoints:[e,t]});return[e=sd(r,a,!0)||e,t=i&&sd(o,a,!1)||t]}(n.sourcePosition,{x:e.x,y:e.y},i,r))[0].x,t[0].y,t[1].x,t[1].y]})}),e.on("connect.hover",function(e){var t,n=e.context,i=n.source,r=e.hover;null!==(t=n.canExecute=u(i,r))&&(n.target=r,o.addMarker(r,t?wd:xd))}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.target&&o.removeMarker(t.target,t.canExecute?wd:xd),t.target=null,t.canExecute=!1}),e.on("connect.cleanup",function(e){var t=e.context;t.visual&&gn(t.visual)}),e.on("connect.start",function(e){var t,n=e.context;un(t=xn("polyline"),{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),an(o.getDefaultLayer(),t),n.visual=t}),e.on("connect.end",function(e){var t=e.context,n=t.source,i=t.sourcePosition,r=t.target,o={x:e.x,y:e.y},a=t.canExecute||u(n,r);if(!a)return!1;var s=null,c={connectionStart:i,connectionEnd:o};"object"===qe(a)&&(s=a),l.connect(n,r,s,c)}),this.start=function(e,t,n,i){"object"!==qe(n)&&(i=n,n=od(t)),r.init(e,"connect",{autoActivate:i,data:{shape:t,context:{source:t,sourcePosition:n}}})}}Ed.$inject=["eventBus","dragging","modeling","rules","canvas","graphicsFactory"];var Cd={__depends__:[sr,Zu,Ju],connect:["type",Ed]},kd="drop-ok",Sd="drop-not-ok",Td="attach-ok",Od="new-parent";function Ad(e,i,c,l,o,a,s){function u(t,n){[Td,kd,Sd,Od].forEach(function(e){e===n?o.addMarker(t,e):o.removeMarker(t,e)})}e.on("create.move",function(e){var t,n=e.context,i=e.hover,r=n.shape,o=n.source,a={x:e.x,y:e.y};t=n.canExecute=i&&function(e,t,n,i){if(!t)return!1;var r,o,a,s={source:n,shape:e,target:t,position:i};return(o=c.allowed("shape.attach",s))||(r=c.allowed("shape.create",s)),(r||o)&&(a=n&&c.allowed("connection.create",{source:n,target:e,hints:{targetParent:t,targetAttach:o}})),!(!r&&!o)&&{attach:o,connect:a}}(r,i,o,a),i&&null!==t&&(n.target=i,t&&t.attach?u(i,Td):u(i,t?Od:Sd))}),e.on("create.move",750,function(e){var t=e.context,n=t.shape,i=t.visual;i||(i=t.visual=function(e){var t,n,i;un(t=xn("g"),a.cls("djs-drag-group",["no-events"])),an(o.getDefaultLayer(),t),mn(n=xn("g")).add("djs-dragger"),an(t,n),bi(n,e.width/-2,e.height/-2);var r=xn("g");return mn(r).add("djs-visual"),an(n,r),i=r,s.drawShape(i,e),t}(n)),bi(i,e.x,e.y)}),e.on(["create.end","create.out","create.cleanup"],function(e){var t=e.context.target;t&&u(t,null)}),e.on("create.end",function(e){var t=e.context,n=t.source,i=t.shape,r=t.target,o=t.canExecute,a=o&&o.attach,s=o&&o.connect,c={x:e.x,y:e.y};if(!o)return!1;i=s?l.appendShape(n,i,c,r,{attach:a,connection:!0===s?{}:s}):l.createShape(i,c,r,{attach:a}),t.shape=i}),e.on("create.cleanup",function(e){var t=e.context;t.visual&&gn(t.visual)}),this.start=function(e,t,n){i.init(e,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:t,context:{shape:t,source:n}}})}}Ad.$inject=["eventBus","dragging","rules","modeling","canvas","styles","graphicsFactory"];var Id={__depends__:[Ju,sr,Zu],create:["type",Ad]};function Dd(e,t,n){var i=c(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:i},this._eventBus=t,this._canvas=n,this._providers={},this._current={}}Dd.$inject=["config.popupMenu","eventBus","canvas"],Dd.prototype.registerProvider=function(e,t){this._providers[e]=t},Dd.prototype.isEmpty=function(e,t){if(!e)throw new Error("element parameter is missing");if(!t)throw new Error("providerId parameter is missing");var n=this._providers[t],i=n.getEntries(e),r=n.getHeaderEntries&&n.getHeaderEntries(e),o=0<i.length,a=r&&0<r.length;return!o&&!a},Dd.prototype.open=function(e,t,n){var i=this._providers[t];if(!e)throw new Error("Element is missing");if(!i)throw new Error("Provider is not registered: "+t);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close(),this._emit("open");var r=this._current={provider:i,className:t,element:e,position:n};i.getHeaderEntries&&(r.headerEntries=i.getHeaderEntries(e)),r.entries=i.getEntries(e),r.container=this._createContainer();var o=r.headerEntries||[],a=r.entries||[];o.length&&r.container.appendChild(this._createEntries(r.headerEntries,"djs-popup-header")),a.length&&r.container.appendChild(this._createEntries(r.entries,"djs-popup-body"));var s=this._canvas.getContainer();this._attachContainer(r.container,s,n.cursor)},Dd.prototype.close=function(){this.isOpen()&&(this._emit("close"),this._unbindHandlers(),At(this._current.container),this._current.container=null)},Dd.prototype.isOpen=function(){return!!this._current.container},Dd.prototype.trigger=function(e){e.preventDefault();var t=nt(e.delegateTarget||e.target,"data-id"),n=this._getEntry(t);if(n.action)return n.action.call(null,e,n)},Dd.prototype._getEntry=function(e){var t=S({id:e}),n=h(this._current.entries,t)||h(this._current.headerEntries,t);if(!n)throw new Error("entry not found");return n},Dd.prototype._emit=function(e){this._eventBus.fire("popupMenu."+e)},Dd.prototype._createContainer=function(){var e=wt('<div class="djs-popup">'),t=this._current.position,n=this._current.className;return R(e.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),st(e).add(n),e},Dd.prototype._attachContainer=function(e,t,n){var i=this;_t.bind(e,".entry","click",function(e){i.trigger(e)}),this._updateScale(e),t.appendChild(e),n&&this._assureIsInbounds(e,n),this._bindHandlers()},Dd.prototype._updateScale=function(e){var t,n,i=this._canvas.zoom(),r=this._config.scale,o=i;!0!==r&&(n=!1===r?t=1:(t=r.min,r.max),c(t)&&i<t&&(o=t),c(n)&&n<i&&(o=n)),function(t,n){t.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(e){t.style[e+"transform"]=n})}(e,"scale("+o+")")},Dd.prototype._assureIsInbounds=function(e,t){var n,i,r=this._canvas._container.getBoundingClientRect(),o=e.offsetLeft,a=e.offsetTop,s=e.scrollWidth,c=e.scrollHeight,l={},u=t.x-r.left,p=t.y-r.top;o+s>r.width&&(l.x=!0),a+c>r.height&&(l.y=!0),l.x&&l.y?(n=u-s+"px",i=p-c+"px"):l.x?(n=u-s+"px",i=p+"px"):l.y&&p<c?(n=u+"px",i="10px"):l.y&&(n=u+"px",i=p-c+"px"),R(e.style,{left:n,top:i},{visibility:"visible","z-index":1e3})},Dd.prototype._createEntries=function(e,t){var n=wt("<div>"),i=this;return st(n).add(t),y(e,function(e){var t=i._createEntry(e,n);n.appendChild(t)}),n},Dd.prototype._createEntry=function(e){if(!e.id)throw new Error("every entry must have the id property set");var t=wt("<div>"),n=st(t);if(n.add("entry"),e.className&&e.className.split(" ").forEach(function(e){n.add(e)}),nt(t,"data-id",e.id),e.label){var i=wt("<span>");i.textContent=e.label,t.appendChild(i)}return e.imageUrl&&t.appendChild(wt('<img src="'+e.imageUrl+'" />')),!0===e.active&&n.add("active"),!0===e.disabled&&n.add("disabled"),e.title&&(t.title=e.title),t},Dd.prototype._bindHandlers=function(){var e=this._eventBus,t=this;function n(){t.close()}e.once("contextPad.close",n),e.once("canvas.viewbox.changing",n),e.once("commandStack.changed",n)},Dd.prototype._unbindHandlers=function(){var e=this._eventBus,t=this;function n(){t.close()}e.off("contextPad.close",n),e.off("canvas.viewbox.changed",n),e.off("commandStack.changed",n)};var Pd={__init__:["popupMenu"],popupMenu:["type",Dd]},Rd=Math.round;function Nd(e){this._modeling=e}Nd.$inject=["modeling"],Nd.prototype.replaceElement=function(e,t,n){var i=this._modeling,r=null;return e.waypoints||(t.x=Rd(e.x+(t.width||e.width)/2),t.y=Rd(e.y+(t.height||e.height)/2),r=i.replaceShape(e,t,n)),r};var Md={__init__:["replace"],replace:["type",Nd]};function jd(p,d,e,t){this.replaceElement=function(e,t,n){n=n||{};var i=t.type,r=e.businessObject,o=p.create(i),a={type:i,businessObject:o};if(a.width=e.width,a.height=e.height,o.name=r.name,t.table){var s=p.create("dmn:DecisionTable");(o.decisionTable=s).$parent=o;var c=p.create("dmn:OutputClause");c.typeRef="string",(c.$parent=s).output=[c];var l=p.create("dmn:InputClause");l.$parent=s;var u=p.create("dmn:LiteralExpression",{typeRef:"string"});(l.inputExpression=u).$parent=l,s.input=[l]}return t.expression&&(o.literalExpression=p.create("dmn:LiteralExpression"),o.variable=p.create("dmn:InformationItem")),d.replaceElement(e,a,n)}}jd.$inject=["drdFactory","replace","selection","modeling"];var $d={__depends__:[Md,sr],drdReplace:["type",jd]},Ld=[{label:"Empty",actionName:"replace-with-empty-decision",className:"dmn-icon-clear",target:{type:"dmn:Decision",table:!1,expression:!1}},{label:"Decision Table",actionName:"replace-with-decision-table",className:"dmn-icon-decision-table",target:{type:"dmn:Decision",table:!0,expression:!1}},{label:"Literal Expression",actionName:"replace-with-literal-expression",className:"dmn-icon-literal-expression",target:{type:"dmn:Decision",table:!1,expression:!0}}];function Bd(e,t,n,i,r,o){this._popupMenu=e,this._modeling=t,this._moddle=n,this._drdReplace=i,this._rules=r,this._translate=o,this.register()}Bd.$inject=["popupMenu","modeling","moddle","drdReplace","rules","translate"],Bd.prototype.register=function(){this._popupMenu.registerProvider("dmn-replace",this)},Bd.prototype.getEntries=function(e){var r=e.businessObject;if(!this._rules.allowed("shape.replace",{element:e}))return[];if(ki(r,"dmn:Decision")){var t=g(Ld,function(e){var t="replace-with-empty-decision"===e.actionName&&(r.decisionTable||r.literalExpression),n="replace-with-decision-table"===e.actionName&&!r.decisionTable,i="replace-with-literal-expression"===e.actionName&&!r.literalExpression;return t||n||i});return this._createEntries(e,t)}return[]},Bd.prototype._createEntries=function(n,e){var i=[],r=this;return y(e,function(e){var t=r._createMenuEntry(e,n);i.push(t)}),i},Bd.prototype._createMenuEntry=function(e,t,n){var i=this._drdReplace.replaceElement;return n=n||function(){return i(t,e.target)},{label:(0,this._translate)(e.label),className:e.className,id:e.actionName,action:n}},Bd.prototype.getHeaderEntries=function(e){return[]};var Vd={__depends__:[Wi,Pd,$d],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",Bd]};function Fd(e,i,t,n,r,o,a,s,c,l){i.registerProvider(this),this._contextPad=i,this._modeling=t,this._elementFactory=n,this._connect=r,this._create=o,this._rules=a,this._popupMenu=s,this._canvas=c,this._translate=l,e.on("create.end",250,function(e){var t=e.context.shape;if(Qi(e)){var n=i.getEntries(t);n.replace&&n.replace.action.click(e,t)}})}Fd.$inject=["eventBus","contextPad","modeling","elementFactory","connect","create","rules","popupMenu","canvas","translate"],Fd.prototype.getContextPadEntries=function(t){var n=this._modeling,o=this._elementFactory,i=this._connect,a=this._create,r=this._popupMenu,s=this._canvas,c=this._contextPad,e=this._rules,l=this._translate,u={};if("label"===t.type)return u;var p=t.businessObject;function d(e,t,n){i.start(e,t,n)}function f(i,e,t,r){function n(e,t){var n=o.createShape(R({type:i},r));a.start(e,n,t)}return"string"!=typeof t&&(r=t,t=l("Append {type}",{type:i.replace(/^dmn:/,"")})),{group:"model",className:e,title:t,action:{dragstart:n,click:n}}}Ai(p,["dmn:InputData","dmn:BusinessKnowledgeModel","dmn:KnowledgeSource","dmn:Decision"])&&R(u,{"append.decision":f("dmn:Decision","dmn-icon-decision")}),Ai(p,["dmn:InputData","dmn:Decision","dmn:KnowledgeSource"])&&R(u,{"append.knowledge-source":f("dmn:KnowledgeSource","dmn-icon-knowledge-source")}),Ai(p,["dmn:BusinessKnowledgeModel","dmn:KnowledgeSource"])&&R(u,{"append.business-knowledge-model":f("dmn:BusinessKnowledgeModel","dmn-icon-business-knowledge")}),Ai(p,["dmn:Decision"])&&R(u,{"append.input-data":f("dmn:InputData","dmn-icon-input-data")}),ki(p,"dmn:DRGElement")&&R(u,{"append.text-annotation":f("dmn:TextAnnotation","dmn-icon-text-annotation"),connect:{group:"connect",className:"dmn-icon-connection-multi",title:l("Connect using Information/Knowledge/Authority Requirement or Association"),action:{click:d,dragstart:d}}}),r.isEmpty(t,"dmn-replace")||R(u,{replace:{group:"edit",className:"dmn-icon-screw-wrench",title:l("Change type"),action:{click:function(e,t){var n=R(function(e){var t=s.getContainer(),n=c.getPad(e).html,i=t.getBoundingClientRect(),r=n.getBoundingClientRect(),o=r.top-i.top;return{x:r.left-i.left,y:o+r.height+5}}(t),{cursor:{x:e.x,y:e.y}});r.open(t,"dmn-replace",n)}}}});var h=e.allowed("elements.delete",{elements:[t]});return m(h)&&(h=h[0]===t),h&&R(u,{delete:{group:"edit",className:"dmn-icon-trash",title:l("Remove"),action:{click:function(e){n.removeElements([t])}}}}),u};var Ud={__depends__:[Wi,_d,sr,Cd,Id,Vd],__init__:["contextPadProvider"],contextPadProvider:["type",Fd]};function Hd(e,t,n){this._eventBus=e,this._modeling=t,this._canvas=n,e.on("definitionIdView.create",function(e){var t=e.html,n=Tt(".dmn-definitions-name",t),i=Tt(".dmn-definitions-id",t);this._setup(n,"name"),this._setup(i,"id")},this)}Hd.$inject=["eventBus","modeling","canvas"],Hd.prototype.update=function(e,t){var n={};n[e]=t,this._modeling.updateProperties(this._canvas.getRootElement(),n)},Hd.prototype._setup=function(t,n){var i=this;t.setAttribute("contenteditable",!0),t.addEventListener("input",I(function(e){var t=e.target.value||e.target.textContent;i.update(n,t.trim())},300)),t.addEventListener("keydown",function(e){13===e.keyCode&&(t.blur(),window.getSelection().removeAllRanges())})};var zd={__init__:["definitionPropertiesEdit","definitionPropertiesPaletteAdapter"],definitionPropertiesEdit:["type",Hd],definitionPropertiesPaletteAdapter:["type",vr]},qd="is not a registered action";function Wd(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}function Gd(e,t){return new Error(e+" "+t)}Wd.$inject=["eventBus","injector"],Wd.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),i=e.get("modeling",!1),r=e.get("selection",!1),n=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),c=e.get("mouseTracking",!1),l=e.get("keyboardMove",!1),u=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&r&&this.register("copy",function(){var e=r.get();o.copy(e)}),c&&o&&this.register("paste",function(){var e=c.getHoverContext();o.paste(e)}),n&&this.register("stepZoom",function(e){n.stepZoom(e.value)}),a&&this.register("zoom",function(e){a.zoom(e.value)}),i&&r&&s&&this.register("removeSelection",function(){var e=r.get();if(e.length){var t,n=s.allowed("elements.delete",{elements:e});!1===n||(t=m(n)?n:e).length&&i.removeElements(t.slice())}}),l&&this.register("moveCanvas",function(e){l.moveCanvas(e)}),u&&this.register("moveSelection",function(e){u.moveSelection(e.direction,e.accelerated)})},Wd.prototype.trigger=function(e,t){if(!this._actions[e])throw Gd(e,qd);return this._actions[e](t)},Wd.prototype.register=function(e,t){var n=this;if("string"==typeof e)return this._registerAction(e,t);y(e,function(e,t){n._registerAction(t,e)})},Wd.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw Gd(e,"is already registered");this._actions[e]=t},Wd.prototype.unregister=function(e){if(!this.isRegistered(e))throw Gd(e,qd);this._actions[e]=void 0},Wd.prototype.getActions=function(){return Object.keys(this._actions)},Wd.prototype.isRegistered=function(e){return!!this._actions[e]};var Yd={__init__:["editorActions"],editorActions:["type",Wd]};function Kd(e){e.invoke(Wd,this)}zt(Kd,Wd),Kd.$inject=["injector"],Kd.prototype._registerDefaultActions=function(e){Wd.prototype._registerDefaultActions.call(this,e);var n=e.get("canvas",!1),i=e.get("elementRegistry",!1),r=e.get("selection",!1),t=e.get("lassoTool",!1),o=e.get("directEditing",!1);n&&i&&r&&this._registerAction("selectElements",function(){var t=n.getRootElement(),e=i.filter(function(e){return e!==t});return r.select(e),e}),t&&this._registerAction("lassoTool",function(){t.toggle()}),r&&o&&this._registerAction("directEditing",function(){var e=r.get();e.length&&o.activate(e[0])})};var Xd={__depends__:[Yd],editorActions:["type",Kd]};function Jd(e,o,a){e.on("import.start",function(e){var t=e.definitions;Mu(t)||function(e){var r=0;y(e.drgElements,function(e){var t,n,i;ki(e,"dmn:Decision")&&((n=e.extensionElements)||((n=e.extensionElements=o.createDi()).$parent=e),i=a._getDefaultSize(e),t=o.createDiBounds({x:150+30*r,y:150+30*r,width:i.width,height:i.height}),n.get("values").push(t),t.$parent=n,r++)})}(t)})}Jd.$inject=["eventBus","drdFactory","elementFactory"];var Qd={__init__:["diGenerator"],diGenerator:["type",Jd]};function Zd(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function ef(e,t){return-1<(e=m(e)?e:[e]).indexOf(t.key)}function tf(e){return e.shiftKey}var nf="keyboard.keydown";function rf(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keyHandler=this._keyHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}rf.$inject=["config.keyboard","eventBus"],rf.prototype._keyHandler=function(e){if(!function(e){return e&&(St(e,"input, textarea")||"true"===e.contentEditable)}(e.target)){var t={keyEvent:e};this._eventBus.fire(nf,t)&&e.preventDefault()}},rf.prototype.bind=function(e){this.unbind(),this._node=e,yt.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")},rf.prototype.getBinding=function(){return this._node},rf.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),yt.unbind(e,"keydown",this._keyHandler,!0)),this._node=null},rf.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})},rf.prototype.addListener=function(e,t){p(e)&&(t=e,e=1e3),this._eventBus.on(nf,e,t)},rf.prototype.hasModifier=function(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey},rf.prototype.isCmd=Zd,rf.prototype.isShift=tf,rf.prototype.isKey=ef;var of=500;function af(e,n){var i=this;e.on("editorActions.init",of,function(e){var t=e.editorActions;i.registerBindings(n,t)})}af.$inject=["eventBus","keyboard"],af.prototype.registerBindings=function(n,i){function e(e,t){i.isRegistered(e)&&n.addListener(t)}e("undo",function(e){var t=e.keyEvent;if(Zd(t)&&!tf(t)&&ef(["z","Z"],t))return i.trigger("undo"),!0}),e("redo",function(e){var t=e.keyEvent;if(Zd(t)&&(ef(["y","Y"],t)||ef(["z","Z"],t)&&tf(t)))return i.trigger("redo"),!0}),e("copy",function(e){var t=e.keyEvent;if(Zd(t)&&ef(["c","C"],t))return i.trigger("copy"),!0}),e("paste",function(e){var t=e.keyEvent;if(Zd(t)&&ef(["v","V"],t))return i.trigger("paste"),!0}),e("stepZoom",function(e){var t=e.keyEvent;if(ef(["+","Add"],t)&&Zd(t))return i.trigger("stepZoom",{value:1}),!0}),e("stepZoom",function(e){var t=e.keyEvent;if(ef(["-","Subtract"],t)&&Zd(t))return i.trigger("stepZoom",{value:-1}),!0}),e("zoom",function(e){var t=e.keyEvent;if(ef("0",t)&&Zd(t))return i.trigger("zoom",{value:1}),!0}),e("removeSelection",function(e){if(ef(["Delete","Del"],e.keyEvent))return i.trigger("removeSelection"),!0})};var sf={__init__:["keyboard","keyboardBindings"],keyboard:["type",rf],keyboardBindings:["type",af]};function cf(e){e.invoke(af,this)}zt(cf,af),cf.$inject=["injector"],cf.prototype.registerBindings=function(n,i){function e(e,t){i.isRegistered(e)&&n.addListener(t)}af.prototype.registerBindings.call(this,n,i),e("selectElements",function(e){var t=e.keyEvent;if(n.isKey(["a","A"],t)&&n.isCmd(t))return i.trigger("selectElements"),!0}),e("lassoTool",function(e){var t=e.keyEvent;if(!n.hasModifier(t))return n.isKey(["l","L"],t)?(i.trigger("lassoTool"),!0):void 0}),e("directEditing",function(e){var t=e.keyEvent;if(!n.hasModifier(t))return n.isKey(["e","E"],t)?(i.trigger("directEditing"),!0):void 0})};var lf={__depends__:[sf],__init__:["keyboardBindings"],keyboardBindings:["type",cf]},uf={moveSpeed:50,moveSpeedAccelerated:200};function pf(e,o,r){var a=this;this._config=R({},uf,e||{}),o.addListener(function(e){var t=e.keyEvent,n=a._config;if(!o.isCmd(t))return;if(o.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],t)){var i,r=o.isShift(t)?n.moveSpeedAccelerated:n.moveSpeed;switch(t.key){case"ArrowLeft":case"Left":i="left";break;case"ArrowUp":case"Up":i="up";break;case"ArrowRight":case"Right":i="right";break;case"ArrowDown":case"Down":i="down"}return a.moveCanvas({speed:r,direction:i}),!0}}),this.moveCanvas=function(e){var t=0,n=0,i=e.speed/Math.min(Math.sqrt(r.viewbox().scale),1);switch(e.direction){case"left":t=i;break;case"up":n=i;break;case"right":t=-i;break;case"down":n=-i}r.scroll({dx:t,dy:n})}}pf.$inject=["config.keyboardMove","keyboard","canvas"];var df={__depends__:[sf],__init__:["keyboardMove"],keyboardMove:["type",pf]},ff={moveSpeed:1,moveSpeedAccelerated:10},hf={ArrowLeft:"left",Left:"left",ArrowUp:"up",Up:"up",ArrowRight:"right",Right:"right",ArrowDown:"down",Down:"down"},mf={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function vf(e,r,o,a){var s=this;this._config=R({},ff,e||{}),r.addListener(1500,function(e){var t=e.keyEvent,n=hf[t.key];if(n&&!r.isCmd(t)){var i=r.isShift(t);return s.moveSelection(n,i),!0}}),this.moveSelection=function(e,t){var n=a.get();if(n.length){var i=this._config[t?"moveSpeedAccelerated":"moveSpeed"],r=mf[e](i);o.moveElements(n,r)}}}vf.$inject=["config.keyboardMoveSelection","keyboard","modeling","selection"];var gf={__depends__:[sf,sr],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",vf]};function yf(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}yf.$inject=["eventBus","injector"],yf.prototype.execute=function(e,t){if(!e)throw new Error("command required");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},yf.prototype.canExecute=function(e,t){var n={command:e,context:t},i=this._getHandler(e),r=this._fire(e,"canExecute",n);if(void 0===r){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r},yf.prototype.clear=function(e){this._stack.length=0,!(this._stackIdx=-1)!==e&&this._fire("changed")},yf.prototype.undo=function(){var e,t=this._getUndoAction();if(t){for(this._pushAction(t);t&&(this._internalUndo(t),(e=this._getUndoAction())&&e.id===t.id);)t=e;this._popAction()}},yf.prototype.redo=function(){var e,t=this._getRedoAction();if(t){for(this._pushAction(t);t&&(this._internalExecute(t,!0),(e=this._getRedoAction())&&e.id===t.id);)t=e;this._popAction()}},yf.prototype.register=function(e,t){this._setHandler(e,t)},yf.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},yf.prototype.canUndo=function(){return!!this._getUndoAction()},yf.prototype.canRedo=function(){return!!this._getRedoAction()},yf.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},yf.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},yf.prototype._internalUndo=function(e){var t=this,n=e.command,i=e.context,r=this._getHandler(n);this._atomicDo(function(){t._fire(n,"revert",e),r.revert&&t._markDirty(r.revert(i)),t._revertedAction(e),t._fire(n,"reverted",e)})},yf.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var i,r,o,a=t?[e+"."+t,t]:[e];for(n=this._eventBus.createEvent(n),i=0;(r=a[i])&&(o=this._eventBus.fire("commandStack."+r,n),!n.cancelBubble);i++);return o},yf.prototype._createId=function(){return this._uid++},yf.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},yf.prototype._internalExecute=function(e,t){var n=this,i=e.command,r=e.context,o=this._getHandler(i);if(!o)throw new Error("no command handler registered for <"+i+">");this._pushAction(e),t||(this._fire(i,"preExecute",e),o.preExecute&&o.preExecute(r),this._fire(i,"preExecuted",e)),this._atomicDo(function(){n._fire(i,"execute",e),o.execute&&n._markDirty(o.execute(r)),n._executedAction(e,t),n._fire(i,"executed",e)}),t||(this._fire(i,"postExecute",e),o.postExecute&&o.postExecute(r),this._fire(i,"postExecuted",e)),this._popAction(e)},yf.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},yf.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:function(t){t=T(t);for(var n={},e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return y(i,function(e){return C(e,t,n)}),x(n,function(e,t){return e[0]})}("id",n)}),n.length=0,this._fire("changed"))},yf.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=m(e)?e:[e],t.dirty=t.dirty.concat(e))},yf.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},yf.prototype._revertedAction=function(e){this._stackIdx--},yf.prototype._getHandler=function(e){return this._handlerMap[e]},yf.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};var bf={commandStack:["type",yf]};function _f(n,i,r,o){n.on("element.changed",function(e){var t=e.element;!t.parent&&t!==i.getRootElement()||(e.gfx=r.getGraphics(t)),e.gfx&&n.fire(Wn(t)+".changed",e)}),n.on("elements.changed",function(e){var t=e.elements;t.forEach(function(e){n.fire("element.changed",{element:e})}),o.updateContainments(t)}),n.on("shape.changed",function(e){o.update("shape",e.element,e.gfx)}),n.on("connection.changed",function(e){o.update("connection",e.element,e.gfx)})}_f.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var wf={__init__:["changeSupport"],changeSupport:["type",_f]},xf=Math.min,Ef=Math.max;function Cf(e){e.preventDefault()}function kf(e){e.stopPropagation()}function Sf(e){this.container=e.container,this.parent=wt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Tt("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=D(this.autoResize,this),this.handlePaste=D(this.handlePaste,this)}function Tf(e,t){this._eventBus=e,this._providers=[],this._textbox=new Sf({container:t.getContainer(),keyHandler:D(this._handleKey,this),resizeHandler:D(this._handleResize,this)})}Sf.prototype.create=function(e,t,n,i){var r=this.parent,o=this.content,a=this.container;i=this.options=i||{};var s=N(t=this.style=t||{},["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);R(r.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},s);var c=N(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return R(o.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},c),i.centerVertically&&R(o.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},c),o.innerText=n,yt.bind(o,"keydown",this.keyHandler),yt.bind(o,"mousedown",kf),yt.bind(o,"paste",this.handlePaste),i.autoResize&&yt.bind(o,"input",this.autoResize),i.resizable&&this.resizable(t),a.appendChild(r),this.setSelection(o.lastChild,o.lastChild&&o.lastChild.length),r},Sf.prototype.handlePaste=function(e){var n,t=this,i=this.options,r=this.style;if(e.preventDefault(),n=e.clipboardData?e.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),!document.execCommand("insertHTML",!1,n)){var o,a,s=this.getSelection(),c=s.startContainer,l=s.endContainer,u=s.startOffset,p=s.endOffset,d=s.commonAncestorContainer,f=function(e){return[].slice.call(e)}(d.childNodes);if(function(e){return e.nodeType===Node.TEXT_NODE}(d)){var h=c.textContent;c.textContent=h.substring(0,u)+n+h.substring(p),o=c,a=u+n.length}else if(c===this.content&&l===this.content){var m=document.createTextNode(n);this.content.insertBefore(m,f[u]),a=(o=m).textContent.length}else{var v=f.indexOf(c),g=f.indexOf(l);f.forEach(function(e,t){t===v?e.textContent=c.textContent.substring(0,u)+n+l.textContent.substring(p):v<t&&t<=g&&At(e)}),o=c,a=u+n.length}o&&void 0!==a&&setTimeout(function(){t.setSelection(o,a)})}if(i.autoResize){var y=this.autoResize(r);y&&this.resizeHandler(y)}},Sf.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}},Sf.prototype.resizable=function(){var i=this,r=this.parent,e=this.resizeHandle,o=parseInt(this.style.minWidth)||0,a=parseInt(this.style.minHeight)||0,s=parseInt(this.style.maxWidth)||1/0,c=parseInt(this.style.maxHeight)||1/0;if(!e){var l,u,p,d;e=this.resizeHandle=wt('<div class="djs-direct-editing-resize-handle"></div>');var n=function(e){Cf(e),kf(e);var t=xf(Ef(p+e.clientX-l,o),s),n=xf(Ef(d+e.clientY-u,a),c);r.style.width=t+"px",r.style.height=n+"px",i.resizeHandler({width:p,height:d,dx:e.clientX-l,dy:e.clientY-u})},f=function e(t){Cf(t),kf(t),yt.unbind(document,"mousemove",n,!1),yt.unbind(document,"mouseup",e,!1)};yt.bind(e,"mousedown",function(e){Cf(e),kf(e),l=e.clientX,u=e.clientY;var t=r.getBoundingClientRect();p=t.width,d=t.height,yt.bind(document,"mousemove",n),yt.bind(document,"mouseup",f)})}R(e.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),r.appendChild(e)},Sf.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),yt.unbind(t,"keydown",this.keyHandler),yt.unbind(t,"mousedown",kf),yt.unbind(t,"input",this.autoResize),yt.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),At(n)),At(e)},Sf.prototype.getValue=function(){return this.content.innerText.trim()},Sf.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},Sf.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)},Tf.$inject=["eventBus","canvas"],Tf.prototype.registerProvider=function(e){this._providers.push(e)},Tf.prototype.isActive=function(){return!!this._active},Tf.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},Tf.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},Tf.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},Tf.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue();r===e.context.text&&i.height===n.height&&i.width===n.width||(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}},Tf.prototype.getValue=function(){return this._textbox.getValue()},Tf.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},Tf.prototype._handleResize=function(e){this._fire("resize",e)},Tf.prototype.activate=function(t){var n;this.isActive()&&this.cancel();var e=h(this._providers,function(e){return(n=e.activate(t))?e:null});return n&&(this.$textbox=this._textbox.create(n.bounds,n.style,n.text,n.options),this._active={element:t,context:n,provider:e},n.options&&n.options.resizable&&(this.resizable=!0),this._fire("activate")),!!n};var Of={__depends__:[tr],__init__:["directEditing"],directEditing:["type",Tf]};function Af(e){return ki(e,"dmn:Decision")||ki(e,"dmn:BusinessKnowledgeModel")||ki(e,"dmn:InputData")||ki(e,"dmn:KnowledgeSource")?"name":ki(e,"dmn:TextAnnotation")?"text":void 0}function If(e){var t=e.businessObject,n=Af(t);if(n)return t[n]||""}function Df(){function t(e,t){var n=e.label||e,i=e.labelTarget||e;return function(e,t,n){var i=e.businessObject,r=Af(i);r&&(i[r]=t),n&&(e.hidden=!t)}(n,t,i!==n),[n,i]}this.execute=function(e){return e.oldLabel=If(e.element),t(e.element,e.newLabel)},this.revert=function(e){return t(e.element,e.oldLabel)}}function Pf(e,t,n,i){this._canvas=t,this._commandStack=i,n.registerProvider(this),i.registerHandler("element.updateLabel",Df),e.on("element.dblclick",function(e){n.activate(e.element)}),e.on(["element.mousedown","drag.init","canvas.viewbox.changed"],function(e){n.complete()}),e.on(["commandStack.changed"],function(){n.cancel()}),e.on("create.end",500,function(e){var t=e.shape;(ki(t,"dmn:Decision")||ki(t,"dmn:InputData")||ki(t,"dmn:BusinessKnowledgeModel")||ki(t,"dmn:KnowledgeSource"))&&n.activate(t)})}Pf.$inject=["eventBus","canvas","directEditing","commandStack"],Pf.prototype.activate=function(e){var t=If(e);if(void 0!==t){var n=this.getEditingBBox(e);return n.text=t,n}},Pf.prototype.getEditingBBox=function(e){var t,n=this._canvas,i=e.label||e,r=n.getAbsoluteBBox(i),o={x:r.x,y:r.y},a={};return 1<(t=n.zoom())?(o.width=r.width,o.height=r.height):(o.width=r.width/t,o.height=r.height/t),t<1&&(o.x=r.x-(o.width/2-r.width/2),o.y=r.y-(o.height/2-r.height/2)),ki(e,"dmn:TextAnnotation")&&(o.minWidth=100,o.height=e.height,a.textAlign="left"),{bounds:o,style:a}},Pf.prototype.update=function(e,t){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t})};var Rf={__depends__:[bf,wf,Of],__init__:["labelEditingProvider"],labelEditingProvider:["type",Pf]};function Nf(e){this._eventBus=e}Nf.$inject=["eventBus"],Nf.prototype.on=function(e,n,i,r,o,a){if((p(n)||u(n))&&(a=o,o=r,r=i,i=n,n=null),p(i)&&(a=o,o=r,r=i,i=1e3),v(o)&&(a=o,o=!1),!p(r))throw new Error("handlerFn must be a function");m(e)||(e=[e]);var s=this._eventBus;y(e,function(e){var t=["commandStack",e,n].filter(function(e){return e}).join(".");s.on(t,i,o?function(t,n){return function(e){return t.call(n||null,e.context,e.command,e)}}(r,a):r,a)})};function Mf(e,u,t){Nf.call(this,e),this.preExecute("connection.create",function(e){var t,n,i,r,o,a=e.connection,s=a.businessObject,c=e.source,l=e.target;"dmn:Association"===a.type?(t=u.create("dmn:DMNElementReference",{href:"#"+c.id}),n=u.create("dmn:DMNElementReference",{href:"#"+l.id}),s.sourceRef=t,s.targetRef=n,s.extensionElements=u.createDi(),o=u.createDiEdge(c,[od(c),od(l)]),s.extensionElements.values.push(o)):(ki(c,"dmn:Decision")&&ki(l,"dmn:InputData")&&(e.target=c,e.source=c=l),i=function(e){switch(e.type){case"dmn:InputData":return"Input";case"dmn:Decision":return"Decision";case"dmn:KnowledgeSource":return"Authority";case"dmn:BusinessKnowledgeModel":return"Knowledge"}}(c),r=u.create("dmn:DMNElementReference",{href:"#"+c.id}),s["required"+i]=r,o=u.createDiEdge(c,[od(c),od(e.target)]),e.di=o)},!0)}function jf(e,r,o){Nf.call(this,e),this.postExecuted("connection.reconnectStart",function(t){var e=t.context.connection.target.businessObject.extensionElements.values,n=g(e,function(e){return"biodi:Edge"===e.$type&&e.source===t.context.oldSource.id})[0];n&&e.splice(e.indexOf(n),1)}),this.postExecuted(["connection.reconnectStart","connection.reconnectEnd"],function(e){!function(e){var t,n=e.source,i=e.target;e.parent&&((t=o.canConnect(n,i)||{type:"dmn:Association"}).waypoints=e.waypoints.slice(),r.removeConnection(e),r.connect(n,i,t))}(e.context.connection)})}function $f(e,o){Nf.call(this,e),this._modeling=o,this.postExecuted(["shape.replace"],1500,function(e){var t=e.context,i=t.oldShape,n=t.newShape,r=n.id;o.unclaimId(i.businessObject.id,i.businessObject),o.updateProperties(n,{id:i.id}),y(n.outgoing,function(e){var t,n=e.businessObject;(t=g((n.$instanceOf("dmn:Association")?(n.sourceRef.href="#"+i.id,n.extensionElements):(n.requiredDecision.href="#"+i.id,n.$parent.extensionElements)).values,function(e){return"biodi:Edge"===e.$type&&e.source===r})[0])&&(t.source=i.id)})})}y(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],function(o){Nf.prototype[o]=function(e,t,n,i,r){(p(e)||u(e))&&(r=i,i=n,n=t,t=e,e=null),this.on(e,o,t,n,i,r)}}),Mf.$inject=["eventBus","drdFactory","drdRules"],zt(Mf,Nf),zt(jf,Nf),jf.$inject=["eventBus","modeling","drdRules"],zt($f,Nf),$f.$inject=["eventBus","modeling"];var Lf={__init__:["createConnectionBehavior","replaceConnectionBehavior","replaceElementBehavior"],createConnectionBehavior:["type",Mf],replaceConnectionBehavior:["type",jf],replaceElementBehavior:["type",$f]};function Bf(e){Nf.call(this,e),this.init()}function Vf(e){Bf.call(this,e)}function Ff(e,t){if(ki(e,"dmn:Definitions")||ki(t,"dmn:Definitions"))return!1;if(ki(e,"dmn:Decision")||ki(e,"dmn:InputData")){if(ki(t,"dmn:Decision")||ki(e,"dmn:Decision")&&ki(t,"dmn:InputData"))return{type:"dmn:InformationRequirement"};if(ki(t,"dmn:KnowledgeSource"))return{type:"dmn:AuthorityRequirement"}}return ki(e,"dmn:BusinessKnowledgeModel")&&Ai(t,["dmn:Decision","dmn:BusinessKnowledgeModel"])?{type:"dmn:KnowledgeRequirement"}:ki(e,"dmn:KnowledgeSource")&&Ai(t,["dmn:Decision","dmn:BusinessKnowledgeModel","dmn:KnowledgeSource"])?{type:"dmn:AuthorityRequirement"}:!!ki(t,"dmn:TextAnnotation")&&{type:"dmn:Association"}}function Uf(e,t){return ki(t,"dmn:Definitions")}function Hf(e,t){return!t||!!ki(t,"dmn:Definitions")}Bf.$inject=["eventBus"],zt(Bf,Nf),Bf.prototype.addRule=function(e,t,i){var n=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){n.canExecute(e,t,function(e,t,n){return i(e)},!0)})},Bf.prototype.init=function(){},zt(Vf,Bf),Vf.$inject=["eventBus"],Vf.prototype.init=function(){this.addRule("elements.move",function(e){var t=e.target,n=e.shapes;e.position;return Hf(n,t)}),this.addRule("connection.create",function(e){return Ff(e.source,e.target)}),this.addRule("connection.reconnectStart",function(e){var t=e.connection;return Ff(e.hover||e.source,t.target)}),this.addRule("connection.reconnectEnd",function(e){return Ff(e.connection.source,e.hover||e.target)}),this.addRule("connection.updateWaypoints",function(e){return null}),this.addRule("shape.create",function(e){return Uf(e.shape,e.target)})},Vf.prototype.canConnect=Ff,Vf.prototype.canCreate=Uf,Vf.prototype.canMove=Hf;var zf={__depends__:[Zu],__init__:["drdRules"],drdRules:["type",Vf]};function qf(e){this._model=e}function Wf(e,t,i,n,r){Nf.call(this,e),this._drdFactory=t,this._drdRules=n,this._definitionPropertiesView=r;var a=this;function s(e){var t=e.context,n=t.shape||t.connection,i=t.oldParent;t.connection&&!ki(n,"dmn:Association")&&(i=n.target),a.updateParent(n,i)}function c(e){var t=e.context,n=t.shape||t.connection,i=t.parent||t.newParent;t.connection&&!ki(n,"dmn:Association")&&(i=n.target),a.updateParent(n,i)}function o(e){var t=e.context.shape;(ki(t,"dmn:DRGElement")||ki(t,"dmn:TextAnnotation"))&&a.updateBounds(t)}function l(e){a.updateConnectionWaypoints(e.context)}this.executed(["connection.layout","connection.create","connection.reconnectEnd","connection.reconnectStart"],function(e){var t,n=e.context;n.cropped||((t=n.connection).waypoints=i.getCroppedWaypoints(t),n.cropped=!0)}),this.reverted(["connection.layout"],function(e){delete e.context.cropped}),this.executed(["shape.create","shape.delete","connection.create","connection.move","connection.delete"],s),this.reverted(["shape.create","shape.delete","connection.create","connection.move","connection.delete"],c),this.executed(["shape.create","shape.move"],o),this.reverted(["shape.create","shape.move"],o),this.executed(["connection.layout","connection.updateWaypoints","connection.move"],l),this.reverted(["connection.layout","connection.updateWaypoints","connection.move"],l),this.executed(["connection.create"],function(e){var t,n,i=e.context,r=i.connection,o=i.target.businessObject;ki(r,"dmn:Association")?s(e):(a.updateSemanticParent(r.businessObject,o),t=i.di,n=o.extensionElements.values,y(t.waypoints,function(e,t){e.x=r.waypoints[t].x,e.y=r.waypoints[t].y}),n.push(t))}),this.reverted(["connection.create"],function(e){var t,n,i,r=e.context,o=r.connection;c(e),ki(o,"dmn:Association")||(t=r.di,-1!==(i=(n=r.target.businessObject.extensionElements.values).indexOf(t))&&n.splice(i,1))}),this.executed(["connection.delete"],function(e){var n,t=e.context,i=Oi(t.connection),r=t.source,o=Oi(t.target);ki(i,"dmn:Association")||(y(o.extensionElements.values,function(e,t){if(ki(e,"biodi:Edge")&&r.id===e.source)return n=t,!1}),void 0!==n&&(t.oldDI=o.extensionElements.values[n],o.extensionElements.values.splice(n,1)))}),this.reverted(["connection.delete"],function(e){var t=e.context,n=t.connection,i=Oi(t.target),r=t.oldDI;r&&!ki(n,"dmn:Association")&&i.extensionElements.values.push(r)}),this.executed(["element.updateProperties"],function(e){r.update()}),this.reverted(["element.updateProperties"],function(e){r.update()}),this.reverted(["connection.reconnectEnd"],function(e){a.updateSemanticParent(e.context.connection.businessObject,e.context.oldTarget.businessObject)})}function Gf(e){yi.call(this),this._drdFactory=e}function Yf(e){this._modeling=e}qf.$inject=["moddle"],qf.prototype._needsId=function(e){return e.$instanceOf("dmn:DRGElement")||e.$instanceOf("dmn:Artifact")||e.$instanceOf("dmn:DMNElement")},qf.prototype._ensureId=function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},qf.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},qf.prototype.createDi=function(){return this.create("dmn:ExtensionElements",{values:[]})},qf.prototype.createDiBounds=function(e){return this.create("biodi:Bounds",e)},qf.prototype.createDiEdge=function(e,t){var n=this,i=[];return y(t||[],function(e){i.push(n.createDiWaypoint(e))}),this.create("biodi:Edge",{waypoints:i,source:e.id})},qf.prototype.createDiWaypoint=function(e){return this.create("biodi:Waypoint",e)},zt(Wf,Nf),Wf.$inject=["eventBus","drdFactory","connectionDocking","drdRules","definitionPropertiesView"],Wf.prototype.updateParent=function(e,t){var n=e.parent;ki(e,"dmn:DRGElement")||ki(e,"dmn:Artifact")||(n=t);var i=e.businessObject,r=n&&n.businessObject;this.updateSemanticParent(i,r),this.updateExtensionElements(i)},Wf.prototype.updateBounds=function(e){var t,n,i=this._drdFactory,r=Oi(e).extensionElements;r&&((n=(t=r.values)[0])?t[0]=R(n,{x:e.x,y:e.y,width:e.width,height:e.height}):t.push(i.createDiBounds({x:e.x,y:e.y,width:e.width,height:e.height})))},Wf.prototype.updateExtensionElements=function(e){var t=e.extensionElements;t&&!t.$parent&&(t.$parent=e)},Wf.prototype.updateSemanticParent=function(e,t){var n,i;e.$parent!==t&&(e.$instanceOf("dmn:DRGElement")?n="drgElements":e.$instanceOf("dmn:Artifact")?n="artifacts":e.$instanceOf("dmn:InformationRequirement")?n="informationRequirement":e.$instanceOf("dmn:AuthorityRequirement")?n="authorityRequirement":e.$instanceOf("dmn:KnowledgeRequirement")&&(n="knowledgeRequirement"),e.$parent&&Bn(i=e.$parent.get(n),e),t?(i=t.get(n))&&(i.push(e),e.$parent=t):e.$parent=null)},Wf.prototype.updateConnectionWaypoints=function(e){var t,r=this._drdFactory,n=e.connection,o=n.source,i=n.target;(t=ki(n,"dmn:Association")?n.businessObject.extensionElements:i.businessObject.extensionElements).values=x(t.values,function(i){return ki(i,"biodi:Edge")&&i.source===o.id&&(i.waypoints=[],y(n.waypoints,function(e,t){var n=r.createDiWaypoint(N(e,["x","y"]));(n.$parent=i).waypoints.push(n)})),i})},zt(Gf,yi),Gf.$inject=["drdFactory"],Gf.prototype.baseCreate=yi.prototype.create,Gf.prototype.create=function(e,t){return this.createDrdElement(e,t)},Gf.prototype.createDrdElement=function(e,t){var n,i=this._drdFactory,r=(t=t||{}).businessObject;if(!r){if(!t.type)throw new Error("no shape type specified");r=i.create(t.type)}return"root"===e||"connection"===e||r.extensionElements||(r.extensionElements=i.createDi()),n=this._getDefaultSize(r),t=R({businessObject:r,id:r.id},n,t),this.baseCreate(e,t)},Gf.prototype._getDefaultSize=function(e){return ki(e,"dmn:Decision")?{width:180,height:80}:ki(e,"dmn:InputData")?{width:125,height:45}:ki(e,"dmn:KnowledgeSource")?{width:100,height:63}:ki(e,"dmn:BusinessKnowledgeModel")?{width:135,height:46}:{width:100,height:80}},Yf.$inject=["modeling"],Yf.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape;i=e.shape=this._modeling.createShape(i,e.position,n,{attach:e.attach}),e.shape=i},Yf.prototype.postExecute=function(e){var t=e.connectionParent||e.shape.parent;!function(e,t){return w(e.outgoing,function(e){return e.target===t})}(e.source,e.shape)&&this._modeling.connect(e.source,e.shape,e.connection,t)};var Kf=Math.round;function Xf(e){this._canvas=e}function Jf(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}function Qf(e,t){this._canvas=e,this._modeling=t}function Zf(e,t,n){var i=Ir(t),r=Ir(n),o=Dr(e,i),a=o.x*(n.width/t.width),s=o.y*(n.height/t.height);return id({x:r.x+a,y:r.y+s})}function eh(e,t,n){var i=oh(e)[0];return Zf(i.original||i,n,t)}function th(e,t,n){var i=oh(e),r=i[i.length-1];return Zf(r.original||r,n,t)}function nh(e,t,n){return eh(e,t,rh(t,n))}function ih(e,t,n){return th(e,t,rh(t,n))}function rh(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function oh(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function ah(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function sh(e){this._modeling=e}function ch(e){this._modeling=e,this._helper=new sh(e)}function lh(e){this._modeling=e}function uh(e,t){this._modeling=e,this._rules=t}function ph(e){this._modeling=e}function dh(e){this._modeling=e}function fh(e){Xf.call(this,e)}Xf.$inject=["canvas"],Xf.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?R(t,n):R(t,{x:n.x-Kf(t.width/2),y:n.y-Kf(t.height/2)}),this._canvas.addShape(t,i,r),t},Xf.prototype.revert=function(e){this._canvas.removeShape(e.shape)},Qf.$inject=["canvas","modeling"],Qf.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Jf(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),Jf(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),Jf(n.children,function(e){!function(e){return e.waypoints}(e)?t.removeShape(e,{nested:!0}):t.removeConnection(e,{nested:!0})})},Qf.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=Fn(i.children,n),t.removeShape(n),n},Qf.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return Vn(i.children,n,r),t.addShape(n,i),n},ah.prototype.add=function(e,t){return this.addAll([e],t)},ah.prototype.addAll=function(e,t){return R(this,function(e,t,n){l(t)&&(t=!0),v(t)&&(n=t,t=!0);var i=Gn((n=n||{}).allShapes),r=Gn(n.allConnections),o=Gn(n.enclosedElements),a=Gn(n.enclosedConnections),s=Gn(n.topLevel,t&&C(e,function(e){return e.id}));function c(e){s[e.source.id]&&s[e.target.id]&&(s[e.id]=[e]),i[e.source.id]&&i[e.target.id]&&(a[e.id]=o[e.id]=e),r[e.id]=e}return Hn(e,function(e){if(!(o[e.id]=e).waypoints)return y((i[e.id]=e).incoming,c),y(e.outgoing,c),e.children;a[e.id]=r[e.id]=e}),{allShapes:i,allConnections:r,topLevel:s,enclosedConnections:a,enclosedElements:o}}(e,!!t,this)),this},sh.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},sh.prototype.moveClosure=function(e,i,r,t,n){var o=this._modeling,a=e.allShapes,s=e.allConnections,c=e.enclosedConnections,l=e.topLevel,u=!1;n&&n.parent===r&&(u=!0),y(a,function(e){o.moveShape(e,i,l[e.id]&&!u&&r,{recurse:!1,layout:!1})}),y(s,function(e){var t=!!a[e.source.id],n=!!a[e.target.id];c[e.id]&&t&&n?o.moveConnection(e,i,l[e.id]&&!u&&r):o.layoutConnection(e,{connectionStart:t&&nh(e,e.source,i),connectionEnd:n&&ih(e,e.target,i)})})},sh.prototype.getClosure=function(e){return(new ah).addAll(e,!0)},ch.$inject=["modeling"],ch.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=N(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=Bn(o.children,t),Vn(i.children,t,r),R(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},ch.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;!1!==i.layout&&(y(t.incoming,function(e){r.layoutConnection(e,{connectionEnd:ih(e,t,n)})}),y(t.outgoing,function(e){r.layoutConnection(e,{connectionStart:nh(e,t,n)})})),!1!==i.recurse&&this.moveChildren(e)},ch.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return Vn(n.children,t,i),R(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},ch.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},ch.prototype.getNewParent=function(e){return e.newParent||e.shape.parent},lh.$inject=["modeling"],lh.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},R(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},lh.prototype.postExecute=function(e){var t=e.shape,n=e.oldBounds,i=this._modeling;y(t.incoming,function(e){i.layoutConnection(e,{connectionEnd:th(e,t,n)})}),y(t.outgoing,function(e){i.layoutConnection(e,{connectionStart:eh(e,t,n)})})},lh.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return R(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},uh.$inject=["modeling","rules"],uh.prototype.preExecute=function(e){var i,r=this,t=this._modeling,o=this._rules,n=e.oldShape,a=e.newData,s=e.hints;function c(e,t,n,i){return o.allowed(e,{source:t,target:n,connection:i})}var l,u={x:a.x,y:a.y};i=e.newShape=e.newShape||r.createShape(a,u,n.parent,s),n.host&&t.updateAttachment(i,n.host),!1!==s.moveChildren&&(l=n.children.slice(),t.moveElements(l,{x:0,y:0},i));var p=n.incoming.slice(),d=n.outgoing.slice();y(p,function(e){var t=e.waypoints,n=t[t.length-1];c("connection.reconnectEnd",e.source,i,e)&&r.reconnectEnd(e,i,n)}),y(d,function(e){var t=e.waypoints[0],n=e.target;c("connection.reconnectStart",i,n,e)&&r.reconnectStart(e,i,t)})},uh.prototype.postExecute=function(e){var t=this._modeling,n=e.oldShape,i=e.newShape;y(i.incoming,function(e){t.layoutConnection(e,{endChanged:!0})}),y(i.outgoing,function(e){t.layoutConnection(e,{startChanged:!0})}),t.removeShape(n)},uh.prototype.execute=function(e){},uh.prototype.revert=function(e){},uh.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)},uh.prototype.reconnectStart=function(e,t,n){this._modeling.reconnectStart(e,t,n)},uh.prototype.reconnectEnd=function(e,t,n){this._modeling.reconnectEnd(e,t,n)},ph.$inject=["modeling"],ph.prototype.execute=function(e){var t=e.shape,n=t.children;return e.oldChildrenVisibility=function(e){var t={};return e.forEach(function(e){t[e.id]=e.hidden}),t}(n),t.collapsed=!t.collapsed,function(e,t){e.forEach(function(e){e.hidden=t})}(n,t.collapsed),[t].concat(n)},ph.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children;return function(e,t){e.forEach(function(e){e.hidden=t[e.id]})}(i,n),t.collapsed=!t.collapsed,[t].concat(i)},dh.$inject=["modeling"],dh.prototype.preExecute=function(e){var n=this._modeling,t=e.resizingShapes,i=e.delta,r=e.direction;y(t,function(e){var t=function(e,t,n){var i=n.x,r=n.y;switch(t){case"n":return{x:e.x,y:e.y+r,width:e.width,height:e.height-r};case"s":return{x:e.x,y:e.y,width:e.width,height:e.height+r};case"w":return{x:e.x+i,y:e.y,width:e.width-i,height:e.height};case"e":return{x:e.x,y:e.y,width:e.width+i,height:e.height};default:throw new Error("unrecognized direction: "+t)}}(e,r,i);n.resizeShape(e,t)})},dh.prototype.postExecute=function(e){var t=this._modeling,n=e.movingShapes,i=e.delta;t.moveElements(n,i,void 0,{autoResize:!1,attach:!1})},dh.prototype.execute=function(e){},dh.prototype.revert=function(e){},zt(fh,Xf),fh.$inject=["canvas"];var hh=Xf.prototype.execute;fh.prototype.execute=function(e){var t=e.shape;return function(t){["width","height"].forEach(function(e){void 0===t[e]&&(t[e]=0)})}(t),t.labelTarget=e.labelTarget,hh.call(this,e)};var mh=Xf.prototype.revert;function vh(e,t){this._canvas=e,this._layouter=t}function gh(e,t){this._canvas=e,this._modeling=t}function yh(){}function bh(e,t){this._layouter=e,this._canvas=t}function _h(){}function wh(){}function xh(e){this._helper=new sh(e)}function Eh(e,t){this._modeling=e,this._elementRegistry=t}function Ch(e){this._modeling=e}fh.prototype.revert=function(e){return e.shape.labelTarget=null,mh.call(this,e)},vh.$inject=["canvas","layouter"],vh.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,a=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,r,o),t},vh.prototype.revert=function(e){var t=e.connection;this._canvas.removeConnection(t),t.source=null,t.target=null},gh.$inject=["canvas","modeling"],gh.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Fn(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},gh.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,Vn(n.children,t,i),this._canvas.addConnection(t,n),t},yh.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=Bn(o.children,t),Vn(i.children,t,r),t.parent=i,y(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},yh.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,o=e.delta;return Bn(n.children,t),Vn(i.children,t,r),t.parent=i,y(t.waypoints,function(e){e.x-=o.x,e.y-=o.y,e.original&&(e.original.x-=o.x,e.original.y-=o.y)}),t},bh.$inject=["layouter","canvas"],bh.prototype.execute=function(e){var t=e.connection;return R(e,{oldWaypoints:t.waypoints}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},bh.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t},_h.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},_h.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t},wh.$inject=[],wh.prototype.execute=function(e){var t,n=e.newSource,i=e.newTarget,r=e.connection,o=e.dockingOrPoints,a=r.waypoints;if(!n&&!i)throw new Error("newSource or newTarget are required");if(n&&i)throw new Error("must specify either newSource or newTarget");return e.oldWaypoints=a,m(o)?t=o:(t=a.slice()).splice(n?0:-1,1,o),n&&(e.oldSource=r.source,r.source=n),i&&(e.oldTarget=r.target,r.target=i),r.waypoints=t,r},wh.prototype.revert=function(e){var t=e.newSource,n=e.newTarget,i=e.connection;return t&&(i.source=e.oldSource),n&&(i.target=e.oldTarget),i.waypoints=e.oldWaypoints,i},xh.$inject=["modeling"],xh.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},xh.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},Eh.$inject=["modeling","elementRegistry"],Eh.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry;y(e.elements,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})},Ch.$inject=["modeling"];var kh={x:"y",y:"x"};function Sh(e,t){this._modeling=e,this._canvas=t}function Th(e){this._modeling=e}function Oh(e,t){return Bn(e&&e.attachers,t)}function Ah(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),Vn(i,t,n)}}function Ih(t,e){y(e,function(e){t[e]&&delete t[e]})}function Dh(e,t,n,i,r,o){this._eventBus=e,this._canvas=t,this._selection=n,this._elementFactory=i,this._modeling=r,this._rules=o}function Ph(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}Ch.prototype.preExecute=function(e){var o=this._modeling,a=e.groups,s=e.axis,c=e.dimension;function l(e,t){e.range.min=Math.min(t[s],e.range.min),e.range.max=Math.max(t[s]+t[c],e.range.max)}function u(e){return e[s]+e[c]/2}function p(e){return e.length-1}function d(e){return e.max-e.min}var f,t,h=a[0],m=p(a),v=a[m],g=0;y(a,function(t,e){var n,i,r;t.elements.length<2?e&&e!==a.length-1&&(l(t,t.elements[0]),g+=d(t.range)):(i=(n=k(t.elements,s))[0],e===m&&(i=n[p(n)]),r=u(i),t.range=null,y(n,function(e){!function(e,t){var n={y:0};n[s]=e-u(t),n[s]&&(n[kh[s]]=0,o.moveElements([t],n,t.parent))}(r,e),null!==t.range?l(t,e):t.range={min:e[s],max:e[s]+e[c]}}),e&&e!==a.length-1&&(g+=d(t.range)))}),t=Math.abs(v.range.min-h.range.max),(f=Math.round((t-g)/(a.length-1)))<a.length-1||y(a,function(n,e){var i,r={};n!==h&&n!==v&&(i=a[e-1],n.range.max=0,y(n.elements,function(e,t){r[kh[s]]=0,r[s]=i.range.max-e[s]+f,n.range.min!==e[s]&&(r[s]+=e[s]-n.range.min),r[s]&&o.moveElements([e],r,e.parent),n.range.max=Math.max(e[s]+e[c],t?n.range.max:0)}))})},Ch.prototype.postExecute=function(e){},Sh.$inject=["modeling","canvas"],Sh.prototype.preExecute=function(e){var n=this._modeling,t=e.elements,i=e.alignment;y(t,function(e){var t={x:0,y:0};i.left?t.x=i.left-e.x:i.right?t.x=i.right-e.width-e.x:i.center?t.x=i.center-Math.round(e.width/2)-e.x:i.top?t.y=i.top-e.y:i.bottom?t.y=i.bottom-e.height-e.y:i.middle&&(t.y=i.middle-Math.round(e.height/2)-e.y),n.moveElements([e],t,e.parent)})},Sh.prototype.postExecute=function(e){},Th.$inject=["modeling"],Th.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=Oh(i,t),Ah(n,t),t.host=n,t},Th.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,Oh(n,t),Ah(i,t,r),t},Dh.$inject=["eventBus","canvas","selection","elementFactory","modeling","rules"],Dh.prototype.preExecute=function(e){var s=this._eventBus,c=this,l=e.tree,u=e.topParent,p=e.position;l.createdElements={},l.labels=[],y(l,function(e,t){var a=parseInt(t,10);isNaN(a)||(a||(e=x(e,function(e){return e.parent=u,e})),y(e=k(e,"priority"),function(e){var t,n=e.id,i=e.parent,r={},o=R({},e);if(a&&(o.parent=c._getCreatedElement(i,l)),i)if(s.fire("element.paste",{createdElements:l.createdElements,descriptor:o}),i=o.parent,o.waypoints)(o=c._createConnection(o,i,p,l))&&(l.createdElements[n]={element:o,descriptor:e});else{if(o.parent!==u&&(r.root=!1),o.host&&(r.attach=!0,i=c._getCreatedElement(o.host,l)),o.labelTarget)return l.labels.push(o);t={x:Math.round(p.x+o.delta.x+o.width/2),y:Math.round(p.y+o.delta.y+o.height/2)},Ih(o,["id","parent","delta","host","priority"]),(o=c._createShape(o,i,t,r))&&(l.createdElements[n]={element:o,descriptor:e})}}))})},Dh.prototype.postExecute=function(e){var o=this._modeling,t=this._selection,a=this,s=e.tree,n=s.labels,i=[];y(n,function(t){var e,n,i,r=a._getCreatedElement(t.labelTarget,s);!r||(e=r.labels)&&e.length&&(n={x:r.x,y:r.y},r.waypoints&&(n=r.waypoints[0]),y(e,function(e){i={x:Math.round(n.x-e.x+t.delta.x),y:Math.round(n.y-e.y+t.delta.y)},o.moveShape(e,i,r.parent)}))}),y(s[0],function(e){var t=e.id,n=s.createdElements[t];n&&i.push(n.element)}),t.select(i)},Dh.prototype._createConnection=function(n,e,i,t){var r,o,a=this._modeling,s=this._rules;return n.waypoints=x(n.waypoints,function(e,t){return{x:Math.round(i.x+n.delta[t].x),y:Math.round(i.y+n.delta[t].y)}}),r=this._getCreatedElement(n.source,t),o=this._getCreatedElement(n.target,t),r&&o&&s.allowed("element.paste",{source:r,target:o})?(Ih(n,["id","parent","delta","source","target","width","height","priority"]),a.createConnection(r,o,n,e)):null},Dh.prototype._createShape=function(e,t,n,i,r){var o=this._modeling,a=this._elementFactory;if(!this._rules.allowed("element.paste",{element:e,position:n,parent:t}))return null;var s=a.createShape(e);return o.createShape(s,n,t,i,r),s},Dh.prototype._getCreatedElement=function(e,t){return t.createdElements[e]&&t.createdElements[e].element},Ph.$inject=["eventBus","elementFactory","commandStack"],Ph.prototype.getHandlers=function(){return{"shape.append":Yf,"shape.create":Xf,"shape.delete":Qf,"shape.move":ch,"shape.resize":lh,"shape.replace":uh,"shape.toggleCollapse":ph,spaceTool:dh,"label.create":fh,"connection.create":vh,"connection.delete":gh,"connection.move":yh,"connection.layout":bh,"connection.updateWaypoints":_h,"connection.reconnectStart":wh,"connection.reconnectEnd":wh,"elements.move":xh,"elements.delete":Eh,"elements.distribute":Ch,"elements.align":Sh,"element.updateAttachment":Th,"elements.paste":Dh}},Ph.prototype.registerHandlers=function(n){y(this.getHandlers(),function(e,t){n.registerHandler(t,e)})},Ph.prototype.moveShape=function(e,t,n,i,r){"object"===qe(i)&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)},Ph.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},Ph.prototype.moveElements=function(e,t,n,i){var r,o=(i=i||{}).attach,a=n;!0===o?a=(r=n).parent:!1===o&&(r=null);var s={shapes:e,delta:t,newParent:a,newHost:r,hints:i};this._commandStack.execute("elements.move",s)},Ph.prototype.moveConnection=function(e,t,n,i,r){"object"===qe(i)&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)},Ph.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},Ph.prototype.createConnection=function(e,t,n,i,r,o){"object"===qe(n)&&(o=r,r=i,i=n,n=void 0);var a={source:e,target:t,parent:r,parentIndex:n,connection:i=this._create("connection",i),hints:o};return this._commandStack.execute("connection.create",a),a.connection},Ph.prototype.createShape=function(e,t,n,i,r){"number"!=typeof i&&(r=i,i=void 0);var o,a,s=(r=r||{}).attach;e=this._create("shape",e),s?(o=n.parent,a=n):o=n;var c={position:t,shape:e,parent:o,parentIndex:i,host:a,hints:r};return this._commandStack.execute("shape.create",c),c.shape},Ph.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},Ph.prototype.appendShape=function(e,t,n,i,r){r=r||{};var o={source:e,position:n,target:i,shape:t=this._create("shape",t),connection:r.connection,connectionParent:r.connectionParent,attach:r.attach};return this._commandStack.execute("shape.append",o),o.shape},Ph.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},Ph.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)},Ph.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},Ph.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},Ph.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},Ph.prototype.pasteElements=function(e,t,n){var i={tree:e,topParent:t,position:n};this._commandStack.execute("elements.paste",i)},Ph.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},Ph.prototype.resizeShape=function(e,t,n){var i={shape:e,newBounds:t,minBounds:n};this._commandStack.execute("shape.resize",i)},Ph.prototype.createSpace=function(e,t,n,i){var r={movingShapes:e,resizingShapes:t,delta:n,direction:i};this._commandStack.execute("spaceTool",r)},Ph.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},Ph.prototype.reconnectStart=function(e,t,n){var i={connection:e,newSource:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectStart",i)},Ph.prototype.reconnectEnd=function(e,t,n){var i={connection:e,newTarget:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectEnd",i)},Ph.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)},Ph.prototype._create=function(e,t){return t instanceof di?t:this._elementFactory.create(e,t)},Ph.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function Rh(e,t){this._elementRegistry=e,this._moddle=t}function Nh(e,t){return"id"in e&&e.id!==t.id}function Mh(n,e){y(e,function(e,t){n.set(t,e)})}function jh(e){this._moddle=e}function $h(e,t,n,i,r){this._canvas=e,this._drdRules=r,Ph.call(this,t,n,i)}function Lh(){}function Bh(){}function Vh(e,t){return e?e.original||e:od(t)}function Fh(e){return R({original:e.point.original||e.point},e.actual)}function Uh(e,t){this._elementRegistry=e,this._graphicsFactory=t}Rh.$inject=["elementRegistry","moddle"],Rh.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var i=this._elementRegistry,r=this._moddle.ids,o=t.businessObject,a=e.properties,s=e.oldProperties||function(n,e){return b(e,function(e,t){return e[t]=n.get(t),e},{})}(o,E(a));return Nh(a,o)&&(r.unclaim(o.id),i.updateId(t,a.id),r.claim(a.id,o)),"name"in a&&t.label&&n.push(t.label),Mh(o,a),e.oldProperties=s,e.changed=n},Rh.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return Mh(r,i),Nh(n,r)&&(a.unclaim(n.id),o.updateId(t,i.id),a.claim(i.id,r)),e.changed},jh.$inject=["moddle"],jh.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)},jh.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)},zt($h,Ph),$h.$inject=["canvas","eventBus","elementFactory","commandStack","drdRules"],$h.prototype.getHandlers=function(){var e=Ph.prototype.getHandlers.call(this);return e["element.updateProperties"]=Rh,e["id.updateClaim"]=jh,e},$h.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},$h.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},$h.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},$h.prototype.connect=function(e,t,n,i){var r=this._drdRules,o=this._canvas.getRootElement();return n||(n=r.canConnect(e,t)||{type:"dmn:Association"}),this.createConnection(e,t,n,o,i)},Lh.prototype.layoutConnection=function(e,t){return[(t=t||{}).connectionStart||od(e.source),t.connectionEnd||od(e.target)]},zt(Bh,Lh),Bh.prototype.layoutConnection=function(e,t){t=t||{};var n,i=e.source,r=e.target,o=e.waypoints,a=t.connectionStart,s=t.connectionEnd;return n=(o=o||[]).slice(1,o.length-1),a||(a=Vh(o&&o[0],i)),s||(s=Vh(o&&o[o.length-1],r)),[a].concat(n,[s])},Uh.$inject=["elementRegistry","graphicsFactory"],Uh.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),o=e.waypoints.slice(i.idx+1,r.idx);return o.unshift(Fh(i)),o.push(Fh(r)),o},Uh.prototype.getDockingPoint=function(e,t,n){var i,r,o=e.waypoints;return{point:r=o[i=n?0:o.length-1],actual:this._getIntersection(t,e,n)||r,idx:i}},Uh.prototype._getIntersection=function(e,t,n){return sd(this._getShapePath(e),this._getConnectionPath(t),n)},Uh.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},Uh.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},Uh.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};var Hh={__init__:["modeling","drdUpdater"],__depends__:[Lf,zf,gr,bf,sr,wf],drdFactory:["type",qf],drdUpdater:["type",Wf],elementFactory:["type",Gf],modeling:["type",$h],layouter:["type",Bh],connectionDocking:["type",Uh]};function zh(e,t,n){this._elementRegistry=e,this._canvas=t,this._styles=n}zh.$inject=["elementRegistry","canvas","styles"],zh.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},zh.prototype.addDragger=function(e,t){var n=this.getGfx(e),i=function(e){return e.cloneNode(!0)}(n),r=n.getBoundingClientRect();return function(e){return e.waypoints}(e)&&function t(e){e.children&&y(e.children,function(e){t(e)});e.style.markerStart="";e.style.markerEnd=""}(i),un(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),an(t,i),i},zh.prototype.addFrame=function(e,t){var n=xn("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return an(t,n),n};var qh={__init__:["previewSupport"],previewSupport:["type",zh]},Wh=Math.round;function Gh(e,r,a,o,s){function c(e,t,n,i){return s.allowed("elements.move",{shapes:e,delta:t,position:n,target:i})}function n(e,t,n){if(!t.waypoints&&t.parent){var i=function(e){return{x:e.x+Wh(e.width/2),y:e.y+Wh(e.height/2)}}(t);return r.init(e,i,"shape.move",{cursor:"grabbing",autoActivate:n,data:{shape:t,context:{}}}),!0}}e.on("shape.move.start",1500,function(e){var t=e.context,n=e.shape,i=o.get().slice();-1===i.indexOf(n)&&(i=[n]),R(t,{shapes:i=function(e){var t=C(e,"id");return g(e,function(e){for(;e=e.parent;)if(t[e.id])return!1;return!0})}(i),validatedShapes:i,shape:n})}),e.on("shape.move.start",1250,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=c(n)))return!1}),e.on("shape.move.move",500,function(e){var t,n=e.context,i=n.validatedShapes,r=e.hover,o={x:e.dx,y:e.dy};t=c(i,o,{x:e.x,y:e.y},r),n.delta=o,null!==(n.canExecute=t)?n.target=r:n.target=null}),e.on("shape.move.end",function(e){var t=e.context,n=t.delta,i=t.canExecute,r="attach"===i,o=t.shapes;if(!i)return!1;n.x=Wh(n.x),n.y=Wh(n.y),a.moveElements(o,n,t.target,{primaryShape:t.shape,attach:r})}),e.on("element.mousedown",function(e){var t=Yi(e);if(!t)throw new Error("must supply DOM mousedown event");return n(t,e.element)}),this.start=n}Gh.$inject=["eventBus","dragging","modeling","selection","rules"];var Yh="djs-dragging",Kh="drop-ok",Xh="drop-not-ok",Jh="new-parent",Qh="attach-ok";function Zh(e,t,a,s,c){function l(e){return function(t){return g(t,function(e){return!function(e){return e.waypoints}(e)||h(t,S({id:e.source.id}))&&h(t,S({id:e.target.id}))})}(u(e))}function u(e){var t=zn(e,!0),n=x(t,function(e){return(e.incoming||[]).concat(e.outgoing||[])});return d(t.concat(n))}function p(t,n){[Qh,Kh,Xh,Jh].forEach(function(e){e===n?a.addMarker(t,e):a.removeMarker(t,e)})}e.on("shape.move.start",499,function(e){var t=e.context,n=t.shapes,i=t.allDraggedElements,r=l(n);if(!t.dragGroup){var o=xn("g");un(o,s.cls("djs-drag-group",["no-events"])),an(a.getDefaultLayer(),o),t.dragGroup=o}r.forEach(function(e){c.addDragger(e,t.dragGroup)}),y(i=i?d([i,u(n)]):u(n),function(e){a.addMarker(e,Yh)}),t.allDraggedElements=i,t.differentParents=function(e){return 1!==function(e){return E(e).length}(C(e,function(e){return e.parent&&e.parent.id}))}(n)}),e.on("shape.move.move",499,function(e){var t=e.context,n=t.dragGroup,i=t.target,r=t.shape.parent,o=t.canExecute;i&&("attach"===o?p(i,Qh):t.canExecute&&i&&i.id!==r.id?p(i,Jh):p(i,t.canExecute?Kh:Xh)),bi(n,e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context.target;t&&p(t,null)}),e.on("shape.move.cleanup",function(e){var t=e.context,n=t.allDraggedElements,i=t.dragGroup;y(n,function(e){a.removeMarker(e,Yh)}),i&&yn(i)}),this.makeDraggable=function(e,t,n){c.addDragger(t,e.dragGroup),n&&a.addMarker(t,Yh),e.allDraggedElements?e.allDraggedElements.push(t):e.allDraggedElements=[t]}}Zh.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];var em={__depends__:[tr,sr,ir,Zu,Ju,qh],__init__:["move","movePreview"],move:["type",Gh],movePreview:["type",Zh]},tm=".djs-palette-toggle";function nm(e,t){this._eventBus=e,this._canvas=t,this._providers=[];var n=this;e.on("tool-manager.update",function(e){var t=e.tool;n.updateToolHighlight(t)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._providers.length&&(n._init(),n._update())})}nm.$inject=["eventBus","canvas"],nm.prototype.registerProvider=function(e){this._providers.push(e),this._diagramInitialized&&(this._container||this._init(),this._update())},nm.prototype.getEntries=function(){var n={};return y(this._providers,function(e){y(e.getPaletteEntries(),function(e,t){n[t]=e})}),n},nm.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),i=this._container=wt(nm.HTML_MARKUP),r=this;n.appendChild(i),_t.bind(i,".djs-palette-toggle, .entry","click",function(e){var t=e.delegateTarget;if(St(t,tm))return r.toggle();r.trigger("click",e)}),yt.bind(i,"mousedown",function(e){e.stopPropagation()}),_t.bind(i,".entry","dragstart",function(e){r.trigger("dragstart",e)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})},nm.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),i=this._container,r=this._eventBus,o=st(i);t="twoColumn"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),o.toggle("two-column",t),"open"in e&&o.toggle("open",e.open),r.fire("palette.changed",{twoColumn:t,open:this.isOpen()})},nm.prototype._update=function(){var a=Tt(".djs-palette-entries",this._container),e=this._entries=this.getEntries();lt(a),y(e,function(e,t){var n=e.group||"default",i=Tt("[data-group="+n+"]",a);i||(i=wt('<div class="group" data-group="'+n+'"></div>'),a.appendChild(i));var r=e.html||(e.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),o=wt(r);i.appendChild(o),e.separator||(nt(o,"data-action",t),e.title&&nt(o,"title",e.title),e.className&&function(e,t){var n=st(e);(m(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}(o,e.className),e.imageUrl&&o.appendChild(wt('<img src="'+e.imageUrl+'">')))}),this.open()},nm.prototype.trigger=function(e,t,n){var i,r,o,a=this._entries,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();(i=a[nt(s,"data-action")])&&(r=i.action,o=t.originalEvent||t,p(r)?"click"===e&&r(o,n):r[e]&&r[e](o,n),t.preventDefault())},nm.prototype._layoutChanged=function(){this._toggleState({})},nm.prototype._needsCollapse=function(e,t){return e<50+46*Object.keys(t).length},nm.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},nm.prototype.open=function(){this._toggleState({open:!0})},nm.prototype.toggle=function(e){this.isOpen()?this.close():this.open()},nm.prototype.isActiveTool=function(e){return e&&this._activeTool===e},nm.prototype.updateToolHighlight=function(i){var e;this._toolsContainer||(e=Tt(".djs-palette-entries",this._container),this._toolsContainer=Tt("[data-group=tools]",e)),y(this._toolsContainer.children,function(e){var t=e.getAttribute("data-action");if(t){var n=st(e);t=t.replace("-tool",""),n.contains("entry")&&t===i?n.add("highlighted-entry"):n.remove("highlighted-entry")}})},nm.prototype.isOpen=function(){return st(this._container).has("open")},nm.prototype._getParentContainer=function(){return this._canvas.getContainer()},nm.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';var im={__init__:["palette"],palette:["type",nm]};function rm(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}rm.$inject=["eventBus","dragging"],rm.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},rm.prototype.isActive=function(e){return e&&this._active===e},rm.prototype.length=function(e){return this._tools.length},rm.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},rm.prototype.bindEvents=function(t,e){var n=this._eventBus,i=this._dragging,r=[];n.on(e.tool+".init",function(e){if(!e.context.reactivate&&this.isActive(t))return this.setActive(null),void i.cancel();this.setActive(t)},this),y(e,function(e){r.push(e+".ended"),r.push(e+".canceled")}),n.on(r,250,function(e){var t=e.originalEvent;this._active&&(t&&ht(t.target,'.group[data-group="tools"]')||this.setActive(null))},this)};var om={__depends__:[Ju],__init__:["toolManager"],toolManager:["type",rm]};function am(n,i,e,r,t,o){this._selection=t,this._dragging=e;var a=this,s=function(e){var t,n=i.getDefaultLayer();un(t=e.frame=xn("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),an(n,t)},c=function(e){var t=e.frame,n=e.bbox;un(t,{x:n.x,y:n.y,width:n.width,height:n.height})},l=function(e){e.frame&&gn(e.frame)};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),n.on("lasso.selection.end",function(e){var t=e.originalEvent.target;(e.hover||t instanceof SVGElement)&&n.once("lasso.selection.ended",function(){a.activateLasso(e.originalEvent,!0)})}),n.on("lasso.end",function(e){var t=sm(e),n=r.filter(function(e){return e});a.select(n,t)}),n.on("lasso.start",function(e){var t=e.context;t.bbox=sm(e),s(t)}),n.on("lasso.move",function(e){var t=e.context;t.bbox=sm(e),c(t)}),n.on("lasso.cleanup",function(e){var t=e.context;l(t)}),n.on("element.mousedown",1500,function(e){if(function(e){var t=Yi(e)||e;return Ji(e)&&t.shiftKey}(e))return a.activateLasso(e.originalEvent),!0})}function sm(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:n.x<=t.x&&t.y<n.y||n.x<t.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&n.y<t.y||t.x<n.x&&n.y<=t.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:n.x<=t.x&&n.y<t.y||n.x<t.x&&n.y<=t.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}am.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],am.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:"crosshair",data:{context:{}}})},am.prototype.activateSelection=function(e){this._dragging.init(e,"lasso.selection",{trapClick:!1,cursor:"crosshair",data:{context:{}}})},am.prototype.select=function(e,t){var n=function(e,n){var i={};return y(e,function(e){var t=e;t.waypoints&&(t=qn(t)),!u(n.y)&&t.x>n.x&&(i[e.id]=e),!u(n.x)&&t.y>n.y&&(i[e.id]=e),t.x>n.x&&t.y>n.y&&(u(n.width)&&u(n.height)&&t.width+t.x<n.width+n.x&&t.height+t.y<n.height+n.y?i[e.id]=e:u(n.width)&&u(n.height)||(i[e.id]=e))}),i}(e,t);this._selection.select(function(e){return x(e,function(e){return e})}(n))},am.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},am.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};var cm={__depends__:[om],__init__:["lassoTool"],lassoTool:["type",am]};function lm(e,t,n,i,r){this._palette=e,this._create=t,this._elementFactory=n,this._lassoTool=i,this._translate=r,e.registerProvider(this)}lm.$inject=["palette","create","elementFactory","lassoTool","translate"],lm.prototype.getPaletteEntries=function(e){var t={},a=this._create,s=this._elementFactory,n=this._lassoTool;function i(n,e,t,i,r){function o(e){var t=s.createShape(R({type:n},r));a.start(e,t)}return{group:e,className:t,title:i,action:{dragstart:o,click:o}}}return R(t,{"lasso-tool":{group:"tools",className:"dmn-icon-lasso-tool",title:(0,this._translate)("Activate the lasso tool"),action:{click:function(e){n.activateSelection(e)}}},"tool-separator":{group:"tools",separator:!0},"create.decision":i("dmn:Decision","drd","dmn-icon-decision"),"create.input-data":i("dmn:InputData","drd","dmn-icon-input-data"),"create.knowledge-source":i("dmn:KnowledgeSource","drd","dmn-icon-knowledge-source"),"create.business-knowledge-model":i("dmn:BusinessKnowledgeModel","drd","dmn-icon-business-knowledge")}),t};var um={__depends__:[Wi,im,Id,cm],__init__:["paletteProvider"],paletteProvider:["type",lm]};function pm(e){Zr.call(this,e)}zt(pm,Zr),pm.prototype._modules=[].concat(pm.prototype._modules,pm.prototype._modelingModules=[yd,Ud,zd,Xd,Qd,lf,df,gf,Rf,Hh,em,um]);var dm=function(e,t,n){return t&&fm(e.prototype,t),n&&fm(e,n),e};function fm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var hm=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(mm,os),dm(mm,[{key:"componentWillMount",value:function(){this._eventBus=this.context.injector.get("eventBus")}},{key:"addRule",value:function(){this._eventBus.fire("addRule")}},{key:"render",value:function(){var e=this.props.cols,t=[Ho(1,"td","add-rule-add",Ho(1,"span","dmn-icon-plus action-icon",null,1,{title:"Add Rule"}),2)],n=this.sheet.getRoot().businessObject;n.input&&n.input.length||t.push(Ho(1,"td","input-cell",qo("-"),2));for(var i=0;i<e.length+1;i++){var r="add-rule",o=e[i]&&e[i].businessObject;o&&(o.$instanceOf("dmn:InputClause")&&(r+=" input-cell"),o.$instanceOf("dmn:OutputClause")&&(r+=" output-cell")),t.push(Ho(1,"td",r,qo("-"),2))}return Ho(1,"tfoot","actionable add-rule",Ho(1,"tr",null,t,0),2,{onClick:this.handleClick})}}]),mm);function mm(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,mm);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(mm.__proto__||Object.getPrototypeOf(mm)).call(this,e,t));return n.handleClick=function(e){e.stopPropagation(),n.addRule()},Is(n),n.addRule=n.addRule.bind(n),n}hm.$inject=["sheet"];function vm(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,vm),e.onGetComponent("table.foot",function(){return hm}),n.on("addRule",function(){t.trigger("addRule")})}function gm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}vm.$inject=["components","editorActions","eventBus"];var ym=(function(e,t,n){return t&&gm(e.prototype,t),n&&gm(e,n),e}(bm,[{key:"select",value:function(e){f(e)&&(e=this._elementRegistry.get(e));var t=this._selection;t!==e&&(this._selection=e,this._eventBus.fire("selection.changed",{oldSelection:t,selection:e}))}},{key:"deselect",value:function(){var e=this._selection;this._selection=void 0,this._eventBus.fire("selection.changed",{oldSelection:e,selection:this._selection})}},{key:"get",value:function(){return this._selection}},{key:"hasSelection",value:function(){return!!this._selection}}]),bm);function bm(e,t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,bm),this._elementRegistry=e,this._eventBus=t,this._renderer=n,this._selection=void 0,t.on("diagram.clear",function(){i._selection=void 0})}ym.$inject=["elementRegistry","eventBus","renderer"];function _m(i,e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_m),this._elementRegistry=i,this._renderer=t,this._selection=r,e.on(["cell.click","cell.contextmenu"],function(e){var t=e.id,n=i.get(t);n&&r.select(n)}),e.on("row.remove",function(e){var t=e.row,n=r.get();!n||t===n.row&&r.deselect()}),e.on("col.remove",function(e){var t=e.col,n=r.get();!n||t===n.col&&r.deselect()})}_m.$inject=["elementRegistry","eventBus","renderer","selection"];var wm={__init__:["selection","selectionBehavior"],selection:["type",ym],selectionBehavior:["type",_m]};function xm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Em=["click","dblclick","contextmenu","mousedown","mouseup","mouseenter","mouseleave","mouseout","mouseover","mousemove","focusin","focusout","drag","dragstart","dragend","dragover","dragenter","dragleave","drop"],Cm=(function(e,t,n){return t&&xm(e.prototype,t),n&&xm(e,n),e}(km,[{key:"_addEventListeners",value:function(e){var t=this,n=this._container;e.forEach(function(e){n.addEventListener(e,t._handleEvent)})}},{key:"_removeEventListeners",value:function(e){var t=this,n=this._container;e.forEach(function(e){n.removeEventListener(e,t._handleEvent)})}}]),km);function km(e,t){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,km),this._handleEvent=function(e){var t=e.target,n=e.type,i=function(e){return ht(e,"[data-element-id]",!0)}(t);if(i){var r=i.getAttribute("data-element-id");if(r){var o=a._eventBus.createEvent({id:r,event:e,node:i,target:i});a._eventBus.fire("cell."+n,o),o.defaultPrevented&&e.preventDefault(),o.cancelBubble&&e.stopPropagation()}}},this._eventBus=t,this._container=e.container,t.on("table.init",function(){a._addEventListeners(Em)}),t.on("table.destroy",function(){a._removeEventListeners(Em)})}Cm.$inject=["config.renderer","eventBus"];var Sm={__init__:["interactionEvents"],interactionEvents:["type",Cm]},Tm=function(e,t){return e^t};function Om(e,t){var n=function(e){for(var t=[],n=0;n<e.length;n++)~t.indexOf(e[n])||t.push(e[n]);return t}(function(e){return e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(Am,"").match(/[a-zA-Z_]\w*/g)||[]}(e));return t&&"string"==typeof t&&(t=function(t){return function(e){return t+e}}(t)),t?function(e,t,n){return e.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g,function(e){return"("==e[e.length-1]?n(e):~t.indexOf(e)?n(e):e})}(e,n,t):n}var Am=/\b(Array|Date|Object|Math|JSON)\b/g;var Im=Dm;function Dm(e,t){if(!(this instanceof Dm))return new Dm(e,t);if(this.node=this.start=this.peeked=e,this.root=t,this.closingTag=!1,this._revisit=!0,this._selects=[],this._rejects=[],e&&this.higher(e))throw new Error("root must be a parent or ancestor to node")}function Pm(a,s){var c="nextSibling"==a;return function(e,t,n){e=this.compile(e),t=t&&0<t?t:1;for(var i=this.node,r=this.closingTag,o=this._revisit;i;){if(Tm(c,r)&&i[s])i=i[s],r=!c;else if(1==i.nodeType&&!i[s]&&Tm(c,r)){if(r=c,!o)continue}else if(i[a])i=i[a],r=!c;else if(i=i.parentNode,r=c,!o)continue;if(!i||this.higher(i,this.root))break;if(e(i)&&this.selects(i,n)&&this.rejects(i,n)){if(--t)continue;return n||(this.node=i),this.closingTag=r,i}}return null}}Dm.prototype.reset=function(e){return this.node=e||this.start,this},Dm.prototype.revisit=function(e){return this._revisit=null==e||e,this},Dm.prototype.opening=function(){return 1==this.node.nodeType&&(this.closingTag=!1),this},Dm.prototype.atOpening=function(){return!this.closingTag},Dm.prototype.closing=function(){return 1==this.node.nodeType&&(this.closingTag=!0),this},Dm.prototype.atClosing=function(){return this.closingTag},Dm.prototype.next=Pm("nextSibling","firstChild"),Dm.prototype.previous=Dm.prototype.prev=Pm("previousSibling","lastChild"),Dm.prototype.select=function(e){return e=this.compile(e),this._selects.push(e),this},Dm.prototype.selects=function(e,t){var n=this._selects,i=n.length;if(!i)return!0;for(var r=0;r<i;r++)if(n[r].call(this,e,t))return!0;return!1},Dm.prototype.reject=function(e){return e=this.compile(e),this._rejects.push(e),this},Dm.prototype.rejects=function(e,t){var n=this._rejects,i=n.length;if(!i)return!0;for(var r=0;r<i;r++)if(n[r].call(this,e,t))return!1;return!0},Dm.prototype.higher=function(e){var t=this.root;if(!t)return!1;for(e=e.parentNode;e&&e!=t;)e=e.parentNode;return e!=t},Dm.prototype.compile=function(t){switch(qe(t)){case"number":return function(e){return t==e.nodeType};case"string":return new Function("node","return "+Om(t,"node."));case"function":return t;default:return function(){return!0}}},Dm.prototype.peak=Dm.prototype.peek=function(e,t){return 1==arguments.length&&(t=e,e=!0),(t=null==t?1:t)?0<t?this.next(e,t,!0):this.prev(e,Math.abs(t),!0):this.node},Dm.prototype.use=function(e){return e(this),this};var Rm=window.getSelection();function Nm(e){Rm.removeAllRanges(),Rm.addRange(e)}function Mm(e,t){Nm(function(e,t){var n,i=t.start,r=t.end,o=document.createRange(),a=Im(e.firstChild,e),s=a.node,c=!1,l=0;for(;s;){if(l===i&&(c?o.setStartAfter(s):o.setStartBefore(s)),l===r)return c?o.setEndAfter(s):o.setEndBefore(s),o;if(c||(Lm(s)||s.previousSibling&&(Bm(s)||Vm(s)))&&l++,$m(s)){if(n=s.textContent.length,l<=i&&i<l+n&&o.setStart(s,i-l),r<l+n)return o.setEnd(s,r-l),o;l+=n}s=a.next(),c=a.closingTag}l<=i&&(e.lastChild?o.setStartAfter(e.lastChild):o.setStart(e,0));e.lastChild?o.setEndAfter(e.lastChild):o.setEnd(e,0);return o}(e,t))}function jm(e){if(!function(e){if(!Rm.rangeCount)return null;var t=Rm.focusNode;return $m(t)&&(t=t.parentNode),e==t||e.contains(t)}(e))return null;var t,n,i=Rm.getRangeAt(0),r=i.startContainer,o=i.endContainer,a=i.startOffset,s=i.endOffset,c=Im(e.firstChild,e),l=c.node,u=!1,p=0;function d(e,t){return 1===arguments.length&&(t=e),e.parentNode===o&&t==o.childNodes[s]}function f(e,t){return 1===arguments.length&&(t=e),e.parentNode===r&&t==r.childNodes[a]}for(;l&&(f(l)&&(n=p),!d(l));){if(u||(Lm(l)||t&&t.nextSibling==l&&(Bm(l)||Vm(l)))&&p++,$m(l)){if(r===l&&(n=p+a),o===l){p+=s;break}p+=l.textContent.length}if(($m(l)||u)&&(f(l,l.nextSibling)&&(n=p),d(l,l.nextSibling)))break;t=l,l=c.next(),u=c.closingTag}return{start:void 0===n?p:n,end:p}}function $m(e){return 3===e.nodeType}function Lm(e){return 1===e.nodeType&&"BR"===e.nodeName}function Bm(e){return 1===e.nodeType&&"DIV"===e.nodeName}function Vm(e){return 1===e.nodeType&&"P"===e.nodeName}var Fm=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Um="[contenteditable]",Hm="[data-element-id]";function zm(e){return e.getAttribute("data-element-id")}function qm(e,t){return Tt('[data-element-id="'+up(e)+'"]',t)}function Wm(e){return ht(e,Hm,!0)}function Gm(e){var t=Um;return St(e,t)?e:Tt(t,e)}var Ym={above:!0,below:!0,right:!0,left:!0};function Km(e,n,t,i,r){var o=e.container,a=null;function s(e,t){n.fire("selection."+e+".changed",t),n.fire("cellSelection.changed",{elementId:e,selection:t})}function c(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];a!==e&&s(a,{selected:!1,focussed:!1}),(a=e)&&s(e,{selected:!0,focussed:t}),e?i.select(e):i.deselect()}n.on("cell.click",500,function(e){var t=e.target;if(!function(e){return ht(e,".no-deselect",!0)}(t)){var n=Wm(t);c(n&&zm(n),!e.defaultPrevented),e.stopPropagation()}}),n.on("cell.focusin",500,function(e){var t=zm(e.target),n=!e.defaultPrevented;return e.stopPropagation(),c(t,n)}),n.on("cell.focusout",500,function(e){s(zm(e.target),{focussed:!1})}),n.on("cellSelection.changed",function(e){var t=e.elementId,n=e.selection,i=qm(t,o);n.focussed&&i&&function(e){var t=Gm(e);if(t&&document.body.contains(t)&&document.activeElement!==t){t.focus();var n=jm(t);n&&0!==n.end||Mm(t,{start:5e3,end:5e3})}}(i)}),n.on("selection.changed",function(e){var t=e.selection,n=e.oldSelection,i=t&&t.id,r=n&&n.id;i&&i!==a?c(t.id):r&&r===a&&c()}),this.isCellSelected=function(){return!!a},this.getCellSelection=function(){return a},this.selectCell=function(e){if(a){if(!(e in Ym))throw new Error("direction must be any of { above, below, left, right }");var t=function(e){var t=e.getAttribute("data-coords");if(!t)return null;var n=t.split(":"),i=Fm(n,2);return{row:i[0],col:i[1]}}(qm(a,o));if(!t)return!1;var n=function(e,t){var n=e.row+":"+e.col;return Tt('[data-coords="'+up(n)+'"]',t)}(function(e,t){var n=e.row,i=e.col;if("above"===t||"below"===t){var r=parseInt(n,10);if(isNaN(r))return e;var o="above"===t?r-1:r+1;return{col:i,row:o}}if("left"!==t&&"right"!==t)throw new Error("invalid direction <"+t+">");var a=parseInt(i,10);if(isNaN(a))return e;return{row:n,col:"left"===t?a-1:a+1}}(t,e),o);if(!n)return!1;var i=zm(n);return i&&c(i,{focussed:!0,selected:!0}),!0}},n.on("contextMenu.close",function(){if(a)return c(a)})}Km.$inject=["config.renderer","eventBus","sheet","selection","elementRegistry"];var Xm={__depends__:[Sm,wm],__init__:["cellSelection"],cellSelection:["type",Km]};function Jm(){}Jm.prototype.get=function(){return this._data},Jm.prototype.set=function(e){this._data=e},Jm.prototype.clear=function(){var e=this._data;return delete this._data,e},Jm.prototype.isEmpty=function(){return!this._data};var Qm={clipboard:["type",Jm]},Zm=function(e,t,n){return t&&ev(e.prototype,t),n&&ev(e,n),e};function ev(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tv=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(nv,Bf),Zm(nv,[{key:"init",value:function(){var r=this;this.addRule("col.move",2e3,function(e){var t=e.col,n=e.index,i=r._sheet.getRoot().businessObject.input;return Si(t)?n<i.length:n>=i.length}),this.addRule("col.remove",2e3,function(e){var t=e.col,n=r._sheet.getRoot().cols;return!Ti(t)||1<n.filter(function(e){return Ti(e)}).length}),this.addRule("paste",2e3,function(e){var t=e.data,n=e.target;if(!t||!n)return!1;var i=t.root;return n instanceof ao?r.canPasteRows(i):n instanceof co&&r.canPasteCols(i,n)})}},{key:"canPasteRows",value:function(e){var n=this._sheet.getRoot().cols;return _(e,function(e){return"row"===e.type&&e.cells.length===n.length&&_(e.cells,function(e,t){return Si(n[t])?"dmn:UnaryTests"===e.businessObject.$type:"dmn:LiteralExpression"===e.businessObject.$type})})}},{key:"canPasteCols",value:function(e,t){var n=this._sheet.getRoot().rows;return _(e,function(e){return"col"===e.type&&e.cells.length===n.length&&(Si(t)?"dmn:InputClause"===e.businessObject.$type:"dmn:OutputClause"===e.businessObject.$type)})}}]),nv);function nv(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,nv);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(nv.__proto__||Object.getPrototypeOf(nv)).call(this,e));return n._sheet=t,n}tv.$inject=["eventBus","sheet"];var iv={__depends__:[{__depends__:[Zu]}],__init__:["decisionTableModelingRules"],decisionTableModelingRules:["type",tv]};function rv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ov=(function(e,t,n){return t&&rv(e.prototype,t),n&&rv(e,n),e}(av,[{key:"execute",value:function(e){var t=e.data;return e.oldData=this._clipboard.get(),this._clipboard.set(t),this._sheet.getRoot()}},{key:"postExecute",value:function(e){var t=this;e.elements.forEach(function(e){e instanceof ao?t._modeling.removeRow(e):e instanceof co&&t._modeling.removeCol(e)})}},{key:"revert",value:function(e){var t=e.oldData;return this._clipboard.set(t),this._sheet.getRoot()}}]),av);function av(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,av),this._clipboard=e,this._modeling=t,this._sheet=n}ov.$inject=["clipboard","modeling","sheet"];var sv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function cv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lv(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var uv=[function(e,t,n,i){var r=n,o=sv({},t,{type:function(e){if(e instanceof ao)return"row";if(e instanceof co)return"col";if(e instanceof uo)return"cell";throw new Error("cannot deduce element type: #"+e.id)}(e)});if(e instanceof ao||e instanceof co){var a=i(e.cells,r);o.cells=a.root,r=a.descriptorCache}return{root:o,descriptorCache:r}},function(e,t,n){var i=e.businessObject;if(!i)return{root:t,descriptorCache:n};var r=function i(r,o){var e,t;var n=r.id;if(n&&(e=o.boCache||{},t=e[n]))return{root:t,descriptorCache:o};var a={$type:r.$type};n&&(a.id=n,e=sv({},e,cv({},n,a)),o=sv({},o,{boCache:e}));r.$descriptor.properties.forEach(function(e){var t=r[e.name];if(t){if(m(t)&&(t=t.map(function(e){var t=i(e,o);return o=t.descriptorCache,t.root})),t.$type){var n=i(t,o);o=n.descriptorCache,t=n.root}a[e.name]=t}});return{root:a,descriptorCache:o}}(i,n);return{root:sv({},t,{businessObject:r.root}),descriptorCache:r.descriptorCache}}],pv=[function(e,t,n){var i=e.root.businessObject;if(!i)return{root:t,reviveCache:n};var r=function i(e,r){var o=e.root;var t=o.id;var a=void 0,n=void 0;if(t&&(a=r.boCache||{},n=a[t]))return{root:n,reviveCache:r};var s={};E(o).forEach(function(e){var t=void 0,n=void 0;o[e].$type?(n=i({root:o[e]},r),t=n.root,r=n.reviveCache,a=r.boCache||{}):t=m(o[e])?o[e].map(function(e){return n=i({root:e},r),r=n.reviveCache,a=r.boCache||{},n.root}):o[e],s[e]=t});var c=s.$type;delete s.$type;r._keepIds&&!r._model.ids.assigned(s.id)||delete s.id;var l=r._dmnFactory.create(c,s);y(s,function(e){e.$type&&(e.$parent=l),m(e)&&e.forEach(function(e){return e.$parent=l})});t&&(a=sv({},a,cv({},t,l)),r=sv({},r,{boCache:a}));return{root:l,reviveCache:r}}({root:i,descriptorCache:e.descriptorCache},n);return{root:sv({},t,{businessObject:r.root}),reviveCache:r.reviveCache}},function(e,t,n,i){var r=e.root,o=e.descriptorCache,a=sv({},t);t.businessObject&&t.businessObject.id&&(a.id=t.businessObject.id);if("row"===r.type||"col"===r.type){var s=i({root:r.cells,descriptorCache:o},n);a.cells=s.root,n=s.reviveCache}var c=new(function(e){switch(e.type){case"row":return ao;case"cell":return uo;case"col":return co;default:throw new Error("unknown element type: #"+e.type)}}(r))(a);c instanceof ao?c.cells.forEach(function(e){e.row=c}):c instanceof co&&c.cells.forEach(function(e){e.col=c});return{root:c,reviveCache:n}}];function dv(e,t,n){return n=n||uv,t=t||{},m(e)?function(e,t,s){return b(e,function(e,t){var n=e.descriptorCache,i=e.root,r=fv(t,n,s),o=r.root,a=r.descriptorCache;return{root:[].concat(lv(i),[o]),descriptorCache:sv({},n,a)}},{root:[],descriptorCache:t})}(e,t,n):fv(e,t,n)}function fv(e,t,n){var i=e.id,r={id:i},o=t.elements||{},a=o[i];if(a)return{root:a,descriptorCache:t};var s=function(n,e,i,t){function r(e,t){return dv(e,t,i)}return b(i,function(e,t){return t(n,e.root,e.descriptorCache,r)},{root:e,descriptorCache:t})}(e,r,n,sv({},t,{elements:o}));return{root:s.root,descriptorCache:sv({},s.descriptorCache,{elements:sv({},s.descriptorCache.elements,cv({},i,s.root))})}}function hv(e,t,n){return n=n||pv,t=t||{},m(e.root)?function(e,t,s){var n=e.root,c=e.descriptorCache;return b(n,function(e,t){var n=e.reviveCache,i=e.root,r=mv({root:t,descriptorCache:c},n,s),o=r.root,a=r.reviveCache;return{root:[].concat(lv(i),[o]),reviveCache:a}},{root:[],reviveCache:t})}(e,t,n):mv(e,t,n)}function mv(e,t,n){var i=e.root.id,r=t.elements||{},o=r[i];if(o)return{root:o,reviveCache:t};var a=function(n,e,i,t){function r(e,t){return hv(e,t,i)}return b(i,function(e,t){return t(n,e.root,e.reviveCache,r)},{root:e,reviveCache:t})}(e,{id:i},n,sv({},t,{elements:r}));return{root:a.root,reviveCache:sv({},a.reviveCache,{elements:sv({},a.reviveCache.elements,cv({},i,a.root))})}}function vv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var gv=(function(e,t,n){return t&&vv(e.prototype,t),n&&vv(e,n),e}(yv,[{key:"postExecute",value:function(e){var t=this,n=e.element,i=e.after,r=this._clipboard.get();if(!r)throw new Error("missing clipboard data");var o=this._sheet.getRoot(),a=hv(r.elements,{_dmnFactory:this._dmnFactory,_keepIds:r.keepIds,_model:this._model}).root;if(n instanceof ao){var s=o.rows.indexOf(n);if(-1===s)return;a.forEach(function(e){i&&s++,t._modeling.addRow(e,s)})}else if(n instanceof co){var c=o.cols.indexOf(n);if(-1===c)return;a.forEach(function(e){i&&c++,t._modeling.addCol(e,c)})}return e.oldElements=this._clipboard.get(),this._sheet.getRoot()}},{key:"revert",value:function(e){}}]),yv);function yv(e,t,n,i,r,o,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,yv),this._clipboard=e,this._dmnFactory=t,this._elementFactory=n,this._elementRegistry=i,this._eventBus=r,this._model=o,this._modeling=a,this._sheet=s}gv.$inject=["clipboard","dmnFactory","elementFactory","elementRegistry","eventBus","moddle","modeling","sheet"];var bv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function _v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var wv=(function(e,t,n){return t&&_v(e.prototype,t),n&&_v(e,n),e}(xv,[{key:"copy",value:function(e){m(e)||(e=[e]);var t={elements:dv(e)};this._eventBus.fire("copyCutPaste.copy",{data:t}),this._clipboard.set(t)}},{key:"cut",value:function(e){m(e)||(e=[e]);var t={elements:dv(e),keepIds:!0},n={elements:e,data:t};this._eventBus.fire("copyCutPaste.cut",{data:t}),this._commandStack.execute("cut",n)}},{key:"pasteBefore",value:function(e){return this._paste(e,{before:!0})}},{key:"pasteAfter",value:function(e){return this._paste(e,{after:!0})}},{key:"_paste",value:function(e,t){var n=this._clipboard.get();if(n)return!!this._rules.allowed("paste",{data:n.elements,target:e})&&(this._commandStack.execute("paste",bv({element:e},t)),!0)}},{key:"pasteAt",value:function(e){}}]),xv);function xv(e,t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,xv),this._clipboard=e,this._commandStack=t,this._eventBus=n,this._modeling=i,this._sheet=r,this._rules=o,t.registerHandler("cut",ov),t.registerHandler("paste",gv)}wv.$inject=["clipboard","commandStack","eventBus","modeling","sheet","rules"];var Ev={__depends__:[Qm,iv],__init__:["copyCutPaste"],copyCutPaste:["type",wv]};function Cv(n,e,i,r,t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Cv);var a={addRule:function(){return i.addRow({type:"dmn:DecisionRule"})},addRuleAbove:function(e){var t=e&&e.rule;if(t||r.hasSelection()){t=t||r.get().row;var n=o.getRoot().rows.indexOf(t);if(-1!==n)return i.addRow({type:"dmn:DecisionRule"},n)}},addRuleBelow:function(e){var t=e&&e.rule;if(t||r.hasSelection()){t=t||r.get().row;var n=o.getRoot().rows.indexOf(t);if(-1!==n)return i.addRow({type:"dmn:DecisionRule"},n+1)}},removeRule:function(e){var t=e&&e.rule;(t||r.hasSelection())&&(t=t||r.get().row,i.removeRow(t))},addInput:function(){var e=o.getRoot().businessObject.input;return i.addCol({type:"dmn:InputClause"},e?e.length:0)},addInputLeft:function(e){var t=e&&e.input;if(t||r.hasSelection()){t=t||r.get().col;var n=o.getRoot().cols.indexOf(t);if(-1!==n)return i.addCol({type:"dmn:InputClause"},n)}},addInputRight:function(e){var t=e&&e.input;if(t||r.hasSelection()){t=t||r.get().col;var n=o.getRoot().cols.indexOf(t);if(-1!==n)return i.addCol({type:"dmn:InputClause"},n+1)}},removeInput:function(e){var t=e&&e.input;(t||r.hasSelection())&&(t=t||r.get().col,i.removeCol(t))},addOutput:function(){var e=o.getRoot().businessObject,t=e.input,n=e.output;return i.addCol({type:"dmn:OutputClause"},t.length+n.length)},addOutputLeft:function(e){var t=e&&e.output;if(t||r.hasSelection()){t=t||r.get().col;var n=o.getRoot().cols.indexOf(t);if(-1!==n)return i.addCol({type:"dmn:OutputClause"},n)}},addOutputRight:function(e){var t=e&&e.output;if(t||r.hasSelection()){t=t||r.get().col;var n=o.getRoot().cols.indexOf(t);if(-1!==n)return i.addCol({type:"dmn:OutputClause"},n+1)}},removeOutput:function(e){var t=e&&e.output;(t||r.hasSelection())&&(t=t||r.get().col,i.removeCol(t))},addClause:function(){if(r.hasSelection()){var e=r.get().col;return ki(e,"dmn:InputClause")?a.addInput({input:e}):ki(e,"dmn:OutputClause")?a.addOutput({output:e}):void 0}},addClauseLeft:function(){if(r.hasSelection()){var e=r.get().col;return ki(e,"dmn:InputClause")?a.addInputLeft({input:e}):ki(e,"dmn:OutputClause")?a.addOutputLeft({output:e}):void 0}},addClauseRight:function(){if(r.hasSelection()){var e=r.get().col;return ki(e,"dmn:InputClause")?a.addInputRight({input:e}):ki(e,"dmn:OutputClause")?a.addOutputRight({output:e}):void 0}},removeClause:function(){if(r.hasSelection()){var e=r.get().col;return ki(e,"dmn:InputClause")?a.removeInput({input:e}):ki(e,"dmn:OutputClause")?a.removeOutput({output:e}):void 0}},selectCellAbove:function(){return t.selectCell("above")},selectCellBelow:function(){return t.selectCell("below")},copy:function(e){var t=e.element;n.copy(t)},cut:function(e){var t=e.element;n.cut(t)},pasteBefore:function(e){var t=e.element;return n.pasteBefore(t)},pasteAfter:function(e){var t=e.element;return n.pasteAfter(t)}};e.register(a)}function kv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Cv.$inject=["copyCutPaste","editorActions","modeling","selection","cellSelection","sheet"];var Sv="is not a registered action",Tv=(function(e,t,n){return t&&kv(e.prototype,t),n&&kv(e,n),e}(Ov,[{key:"trigger",value:function(e,t){if(!this._actions[e])throw Av(e,Sv);return this._actions[e](t)}},{key:"register",value:function(e,t){var n=this;if("string"==typeof e)return this._registerAction(e,t);y(e,function(e,t){n._registerAction(t,e)})}},{key:"_registerAction",value:function(e,t){if(this.isRegistered(e))throw Av(e,"is already registered");this._actions[e]=t}},{key:"unregister",value:function(e){if(!this.isRegistered(e))throw Av(e,Sv);this._actions[e]=void 0}},{key:"isRegistered",value:function(e){return!!this._actions[e]}}]),Ov);function Ov(e,t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ov),this._actions={undo:function(){e.undo()},redo:function(){e.redo()},select:function(e){var t=e.cell;n.select(t)},deselect:function(){n.deselect()},addRow:function(e){var t=e.attrs,n=e.index;i.addRow(t,n)},removeRow:function(e){var t=e.row;i.removeRow(t)},moveRow:function(e){var t=e.row,n=e.index;i.moveRow(t,n)},addCol:function(e){var t=e.attrs,n=e.index;i.addCol(t,n)},removeCol:function(e){var t=e.col;i.removeCol(t)},moveCol:function(e){var t=e.col,n=e.index;i.moveCol(t,n)}}}function Av(e,t){return new Error(e+" "+t)}Tv.$inject=["commandStack","eventBus","modeling","selection"];var Iv={__depends__:[wm],__init__:["editorActions"],editorActions:["type",Tv]},Dv={__depends__:[Xm,Ev,Iv,wm],__init__:["decisionTableEditorActions"],decisionTableEditorActions:["type",Cv]},Pv={__depends__:[Dv],__init__:["addRule"],addRule:["type",vm]},Rv=/["'&<>]/,Nv=function(e){var t,n=""+e,i=Rv.exec(n);if(!i)return n;var r="",o=0,a=0;for(o=i.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==o&&(r+=n.substring(a,o)),a=o+1,r+=t}return a!==o?r+n.substring(a,o):r};var Mv=function(e,t,n){var i=e.start,r=i,o=n.length-t.length,a=(n.length,t.length,t.substring(i));return n.lastIndexOf(a)===n.length-a.length&&(t=t.substring(0,t.length-a.length),n=n.substring(0,n.length-a.length)),(o=function(e,t){var n,i,r,o,a,s=0,c=0;for(o=t.length>e.length?(i=t,e):(i=e,t);s<i.length;)r=i.charAt(s),a=o.charAt(c),r!==a?n||(n={l_start:s,s_start:c}):(n&&!n.complete&&(n.l_end=s,n.s_end=c,n.complete=!0),c++),s++;if(n&&!n.complete&&(n.complete=!0,n.s_end=o.length,n.l_end=i.length),n)return t.length>e.length?{newStart:n.l_start,newEnd:n.l_end,type:"add"}:{newStart:n.s_start,newEnd:n.s_end,type:t.length<e.length?"remove":"replace"}}(t,n))&&(r="remove"===o.type?o.newStart:o.newEnd),jv(r)};function jv(e,t){return{start:e,end:void 0===t?e:t}}var $v=jv;Mv.range=$v;var Lv=function(e,t,n){return t&&Bv(e.prototype,t),n&&Bv(e,n),e};function Bv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Vv=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Fv,os),Lv(Fv,[{key:"componentWillUpdate",value:function(e,t){var n=this.node,i=t.focussed&&jm(n);this.selected=i&&{range:i,text:Uv(n)}}},{key:"componentDidUpdate",value:function(){var e=this.selected;if(e){var t=e.range,n=e.text,i=this.node,r=Uv(i);Mm(i,r!==n?Mv(t,n,r):t)}}},{key:"render",value:function(e){var t=this,n=e.value,i=e.className;return n=Nv(n).replace(/\r?\n/g,"<br/>")+"<br/>",Ho(1,"div",[i||"","content-editable"].join(" "),null,1,{contentEditable:"true",spellcheck:"false",onInput:this.onInput,onKeypress:this.onKeypress,onPaste:this.onPaste,onFocus:this.onFocus,onBlur:this.onBlur,onKeydown:this.onKeydown,dangerouslySetInnerHTML:{__html:n}},null,function(e){return t.node=e})}}]),Fv);function Fv(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Fv);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Fv.__proto__||Object.getPrototypeOf(Fv)).call(this,e,t));return i.onFocus=function(){var e=i.props.onFocus;i.setState({focussed:!0}),"function"==typeof e&&e()},i.onBlur=function(){var e=i.props.onBlur;i.setState({focussed:!1}),"function"==typeof e&&e()},i.onKeydown=function(e){if(13===e.which){if(e.preventDefault(),i.props.ctrlForNewline&&!function(e){return e.metaKey||e.ctrlKey}(e))return;e.stopPropagation(),function(){var e=Rm.getRangeAt(0);if(!e)return;var t=e.cloneRange(),n=document.createElement("br");t.deleteContents(),t.insertNode(n),t.setStartAfter(n),t.setEndAfter(n),Nm(t)}(),i.onInput(e)}},i.onInput=function(e){var t=i.props.onInput;"function"==typeof t&&t(Uv(i.node))},i.onPaste=Hv,i.onKeypress=Hv,i.state={},function(){var e=window.navigator.userAgent;return 0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")}()&&(i.onPaste=i.onKeypress=function(t){var n=i.node.innerHTML;setTimeout(function(){var e=i.node.innerHTML;n!==e&&i.onInput(t)},0)}),i}function Uv(e){return e.innerText.replace(/\n$/,"")}function Hv(){}var zv=function(e,t,n){return t&&qv(e.prototype,t),n&&qv(e,n),e};function qv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Wv=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Gv,os),zv(Gv,[{key:"getClassName",value:function(){var e=this.props.className,t=this.state;return e+=" editable",t.focussed&&(e+=" focussed"),t.invalid&&(e+=" invalid"),e}},{key:"getDisplayValue",value:function(){var e=this.props.value,t=this.state,n=t.focussed,i=t.changing;return"string"==typeof i&&(e=i),e||(e=n?"":"-"),e}},{key:"getEditor",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return zo(2,Vv,{className:e.className,ctrlForNewline:e.ctrlForNewline,onFocus:this.onFocus,onBlur:this.onBlur,onInput:this.onInput,value:this.getDisplayValue()})}}]),Gv);function Gv(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Gv);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Gv.__proto__||Object.getPrototypeOf(Gv)).call(this,e,t));i.onFocus=function(){i.setState({focussed:!0});var e=i.props.onFocus;"function"==typeof e&&e()},i.onBlur=function(e){i.setState({focussed:!1}),i.state.invalid&&i.setState({changing:!1,invalid:!1});var t=i.props.onBlur;"function"==typeof t&&t()},i.state={changing:!1,focussed:!1};var n=t.injector.get("debounceInput");return i.inputChanged=n(function(e){var t=i.props.onChange;"function"==typeof t&&t(e);var n=i.state.changing;i.setState({changing:n!==e&&n})}),i.onInput=function(e){var t=(i.props.validate||function(){})(e);i.setState({changing:e,invalid:t}),t||i.inputChanged(e)},i}var Yv=function(e,t,n){return t&&Kv(e.prototype,t),n&&Kv(e,n),e};function Kv(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jv(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}function Qv(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Zv=(Qv(eg,os),Yv(eg,[{key:"componentWillMount",value:function(){var e=this.props.row;this.changeSupport.onElementsChanged(e.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this.props.row;this.changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"render",value:function(){var e=this.props,t=e.row,n=e.rowIndex,i=t.businessObject,r=i.description,o=i.id;return zo(2,Us,{className:"annotation",onChange:this.setAnnotationValue,coords:n+":annotation",value:r,elementId:o+"__annotation","data-row-id":t.id,children:zo(2,tg,{ctrlForNewline:!0,className:"annotation-editor",onChange:this.setAnnotationValue,value:r})})}}]),eg);function eg(e,t){Xv(this,eg);var n=Jv(this,(eg.__proto__||Object.getPrototypeOf(eg)).call(this,e,t));return n.onElementsChanged=function(){n.forceUpdate()},n.setAnnotationValue=function(e){var t=n.props.row;n.modeling.editAnnotation(t.businessObject,e)},Is(n),n}Zv.$inject=["changeSupport","modeling"];var tg=(Qv(ng,Wv),Yv(ng,[{key:"render",value:function(){return Ho(1,"div",this.getClassName(),this.getEditor(),0)}}]),ng);function ng(){return Xv(this,ng),Jv(this,(ng.__proto__||Object.getPrototypeOf(ng)).apply(this,arguments))}function ig(e){e.onGetComponent("cell",function(e){var t=e.cellType;return"after-label-cells"===t?ks:"after-rule-cells"===t?Zv:void 0})}ig.$inject=["components"];function rg(t){return function(e){return!1===t?e:I(e,u(t)?t:300)}}rg.$inject=["config.debounceInput"];var og={debounceInput:["factory",rg]},ag={__depends__:[og],__init__:["annotationsProvider"],annotationsProvider:["type",ig]},sg=function(e,t,n){return t&&cg(e.prototype,t),n&&cg(e,n),e};function cg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ug(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}function pg(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var dg=(pg(fg,os),sg(fg,[{key:"componentDidMount",value:function(){this.eventBus.on("contextMenu.open",this.open),this.eventBus.on("contextMenu.close",this.close)}},{key:"componentWillUnmount",value:function(){this.eventBus.off("contextMenu.open",this.open),this.eventBus.off("contextMenu.close",this.close)}},{key:"render",value:function(){var e=this.state,t=e.isOpen,n=e.context,i=e.position;if(!t)return null;var r=this.components.getComponents("context-menu",n);return r.length?zo(2,mg,{className:"context-menu no-deselect",context:n,position:i,offset:n.offset||{x:0,y:0},autoFocus:!1!==n.autoFocus,autoClose:!1!==n.autoClose,components:r,onClose:this.triggerClose}):null}}]),fg);function fg(e,t){lg(this,fg);var n=ug(this,(fg.__proto__||Object.getPrototypeOf(fg)).call(this,e,t));return hg.call(n),n.state={isOpen:!1,position:{x:0,y:0}},Is(n),n}var hg=function(){var i=this;this.open=function(e){var t=e.position,n=e.context;i.close(),i.setState({isOpen:!0,position:t||{x:0,y:0},context:n||{}})},this.close=function(){i.state.isOpen&&i.setState({context:void 0,isOpen:!1,position:{x:0,y:0}})},this.triggerClose=function(){i.eventBus.fire("contextMenu.close")}};dg.$inject=["eventBus","components"];var mg=(pg(vg,os),sg(vg,[{key:"close",value:function(){var e=this.props.onClose;p(e)&&e()}},{key:"checkClose",value:function(e){if(this.props.autoClose){var t=this.node;!t||t!==e&&(t.contains(e)||this.close())}}},{key:"componentDidMount",value:function(){document.addEventListener("focusin",this.onFocusChanged),document.addEventListener("keydown",this.onGlobalKey),document.addEventListener("click",this.onGlobalClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("keydown",this.onGlobalKey),document.removeEventListener("click",this.onGlobalClick)}},{key:"updatePosition",value:function(){var e=this.props,t=e.position,n=e.offset,i=this.node.getBoundingClientRect();t.width||(t.width=0),t.height||(t.height=0);var r=this.renderer.getContainer(),o=r.getBoundingClientRect();o.width>o.height?(this.node.classList.add("horizontal"),this.node.classList.remove("vertical")):(this.node.classList.add("vertical"),this.node.classList.remove("horizontal"));var a=r.scrollLeft,s=r.scrollTop,c={};if(t.x+t.width/2>o.width/2){var l=t.x-o.left-i.width+n.x+a;l=gg(l,0+a,o.width-i.width+a),c.left=l+"px"}else{var u=window.scrollX-o.left+t.x+t.width-n.x+a;u=gg(u,0+a,o.width-i.width+a),c.left=u+"px"}var p=void 0;p=t.y+t.height/2>o.height/2?gg(p=t.y-o.top-i.height+n.y+s,0+s,o.height-i.height+s):gg(p=window.scrollY-o.top+t.y-n.y+s,0+s,o.height-i.height+s),c.top=p+"px",c.overflowY="auto",c.maxHeight=o.height-p+s+"px",R(this.node.style,c)}},{key:"render",value:function(){var e=this.props,n=e.context,t=e.components;return Ho(1,"div",e.className,t.map(function(e,t){return zo(2,e,{context:n},t)}),0,{onContextMenu:function(e){return e.preventDefault()}},null,this.setNode)}}]),vg);function vg(e,t){lg(this,vg);var n=ug(this,(vg.__proto__||Object.getPrototypeOf(vg)).call(this,e,t));return n.onGlobalClick=function(e){n.checkClose(e.target)},n.onGlobalKey=function(e){var t=e.which;13!==t&&27!==t||(e.stopPropagation(),e.preventDefault(),n.close())},n.onFocusChanged=function(e){n.checkClose(e.target)},n.setNode=function(e){n.node=e;var t=n.props.autoFocus;e&&(t&&function(e){var t=Tt(yg,e);t&&(t.focus(),t.selectionStart&&"text"===t.type?t.selectionStart=1e5:"contentEditable"in t&&Mm(t,{start:1e5,end:1e5}))}(e),n.updatePosition())},Is(n),n}function gg(e,t,n){return Math.max(t,Math.min(n,e))}mg.$inject=["renderer"];var yg="\n  input[type=text],\n  input[type=number],\n  input[type=button],\n  input[type=submit],\n  [contenteditable],\n  [tabindex],\n  a[href],\n  textarea,\n  button\n";function bg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _g=(function(e,t,n){return t&&bg(e.prototype,t),n&&bg(e,n),e}(wg,[{key:"open",value:function(e,t){this._eventBus.fire("contextMenu.open",{position:e,context:t})}},{key:"close",value:function(){this._eventBus.fire("contextMenu.close")}}]),wg);function wg(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,wg),this._eventBus=t,e.onGetComponent("table.before",function(){return dg})}_g.$inject=["components","eventBus","renderer"];var xg={__init__:["contextMenu"],contextMenu:["type",_g]};function Eg(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function Cg(e){return e.shiftKey}function kg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Sg=(function(e,t,n){return t&&kg(e.prototype,t),n&&kg(e,n),e}(Tg,[{key:"_getSelectedCell",value:function(){var e=this._cellSelection.getCellSelection();if(e){var t=this._elementRegistry.get(e);if(t){var n=qm(e,this._renderer.getContainer()),i=Gm(n);if(document.activeElement===i){var r=jm(n);if(!r||r.start===r.end)return t}}}}}]),Tg);function Tg(e,t,n,i,r,o,a){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Tg),this._clearClipboard=function(){s._clipboard.clear()},this._registerBindings=function(){[function(e,t){if(Eg(t)&&67===e){var n=s._getSelectedCell();if(!n)return;return Cg(t)?s._editorActions.trigger("copy",{element:n.col}):s._editorActions.trigger("copy",{element:n.row}),!0}},function(e,t){if(Eg(t)&&88===e){var n=s._getSelectedCell();if(!n)return;return Cg(t)?s._editorActions.trigger("cut",{element:n.col}):s._editorActions.trigger("cut",{element:n.row}),!0}},function(e,t){var n=void 0;if(Eg(t)&&86===e){var i=s._getSelectedCell();if(!i)return;Cg(t)?(n=s._editorActions.trigger("pasteAfter",{element:i.col}))&&s._cellSelection.selectCell("right"):(n=s._editorActions.trigger("pasteAfter",{element:i.row}))&&s._cellSelection.selectCell("below")}return void 0!==n}].forEach(function(e){s._keyboard.addListener(e)})},this._clipboard=n,this._cellSelection=i,this._elementRegistry=r,this._editorActions=o,this._keyboard=e.get("keyboard",!1),this._renderer=a,this._keyboard&&(t.on("keyboard.init",this._registerBindings),t.on("keyboard.bind",function(){yt.bind(document,"copy",s._clearClipboard,!0),yt.bind(document,"cut",s._clearClipboard,!0)}),t.on("keyboard.unbind",function(){yt.unbind(document,"copy",s._clearClipboard,!0),yt.unbind(document,"cut",s._clearClipboard,!0)}))}Sg.$inject=["injector","eventBus","clipboard","cellSelection","elementRegistry","editorActions","renderer"];var Og={__depends__:[Qm,Xm],__init__:["copyCutPasteKeyBindings"],copyCutPasteKeyBindings:["type",Sg]},Ag=function(e,t,n){return t&&Ig(e.prototype,t),n&&Ig(e,n),e};function Ig(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Dg=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Pg,os),Ag(Pg,[{key:"render",value:function(){return Ho(1,"th","input-cell create-inputs header actionable",[qo("Input "),Ho(1,"span","add-input dmn-icon-plus action-icon",null,1,{title:"Add Input"})],4,{onClick:this.onClick,rowspan:"3",title:"Add Input"})}}]),Pg);function Pg(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Pg);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Pg.__proto__||Object.getPrototypeOf(Pg)).call(this,e,t));return n.onClick=function(e){n.editorActions.trigger("addInput")},Is(n),n}Dg.$inject=["editorActions"];var Rg=function(e,t,n){return t&&Ng(e.prototype,t),n&&Ng(e,n),e};function Ng(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Mg=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(jg,os),Rg(jg,[{key:"render",value:function(){return Ho(1,"td","input-cell create-inputs",qo("-"),2,{onClick:this.onClick,title:"Add Input"})}}]),jg);function jg(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,jg);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(jg.__proto__||Object.getPrototypeOf(jg)).call(this,e,t));return n.onClick=function(e){n.editorActions.trigger("addInput")},Is(n),n}Mg.$inject=["editorActions"];function $g(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,$g),e.onGetComponent("cell",500,function(e){var t=e.cellType,n=i.getRoot().businessObject;if(!n.input||!n.input.length)return"before-label-cells"===t?Dg:"before-rule-cells"===t?Mg:void 0})}$g.$inject=["components","sheet"];var Lg={__depends__:[Dv],__init__:["createInputsProvider"],createInputsProvider:["type",$g]};function Bg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Vg=(function(e,t,n){return t&&Bg(e.prototype,t),n&&Bg(e,n),e}(Fg,[{key:"_getEntries",value:function(e){var t=this,n=function(e){t._editorActions.trigger("addRuleAbove",{rule:e}),t._contextMenu.close()},i=function(e){t._editorActions.trigger("addRuleBelow",{rule:e}),t._contextMenu.close()},r=function(e){t._editorActions.trigger("removeRule",{rule:e}),t._contextMenu.close()},o=function(e){t._editorActions.trigger("addInputLeft",{input:e}),t._contextMenu.close()},a=function(e){t._editorActions.trigger("addInputRight",{input:e}),t._contextMenu.close()},s=function(e){t._editorActions.trigger("removeInput",{input:e}),t._contextMenu.close()},c=function(e){t._editorActions.trigger("addOutputLeft",{output:e}),t._contextMenu.close()},l=function(e){t._editorActions.trigger("addOutputRight",{output:e}),t._contextMenu.close()},u=function(e){t._editorActions.trigger("removeOutput",{output:e}),t._contextMenu.close()},p=function(e){t._editorActions.trigger("copy",{element:e}),t._contextMenu.close()},d=function(e){t._editorActions.trigger("cut",{element:e}),t._contextMenu.close()},f=function(e){t._editorActions.trigger("pasteBefore",{element:e}),t._contextMenu.close()},h=function(e){t._editorActions.trigger("pasteAfter",{element:e}),t._contextMenu.close()},m=e&&e.id;if(!m)return null;var v=this._elementRegistry.get(m);if(!v)return null;var g=this._clipboard.get()||{},y=[];if(ki(v.row,"dmn:DecisionRule")){var b=this._rules.allowed("paste",{data:g.elements,target:v.row});y.push(Ho(1,"div","context-menu-group context-menu-group-rule",[Ho(1,"h4","context-menu-group-title",qo("Rule"),2),Ho(1,"div","context-menu-group-entry context-menu-entry-add-rule-above",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-up"),qo("Add Above")],4,{onClick:function(){return n(v.row)}}),Ho(1,"div","context-menu-group-entry context-menu-entry-add-rule-below",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-down"),qo("Add Below")],4,{onClick:function(){return i(v.row)}}),Ho(1,"div","context-menu-group-entry context-menu-entry-remove-rule",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-clear"),qo("Remove")],4,{onClick:function(){return r(v.row)}}),Ho(1,"div","context-menu-group-entry context-menu-entry-copy-rule",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-copy"),qo("Copy")],4,{onClick:function(){return p(v.row)}}),Ho(1,"div","context-menu-group-entry context-menu-entry-cut-rule",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-cut"),qo("Cut")],4,{onClick:function(){return d(v.row)}}),Ho(1,"div","context-menu-group-entry "+(b?"":"disabled")+" context-menu-entry-paste-rule-above",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-paste"),qo("Paste Above")],4,{onClick:function(){return f(v.row)}}),Ho(1,"div","context-menu-group-entry "+(b?"":"disabled")+" context-menu-entry-paste-rule-below",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-paste"),qo("Paste Below")],4,{onClick:function(){return h(v.row)}})],4))}if(ki(v,"dmn:InputClause")||ki(v.col,"dmn:InputClause")){var _=ki(v,"dmn:InputClause")?v:v.col,w=this._rules.allowed("col.remove",{col:v.col||v}),x=this._rules.allowed("paste",{data:g.elements,target:v.col||v});y.push(Ho(1,"div","context-menu-group context-menu-group-input",[Ho(1,"h4","context-menu-group-title",qo("Input"),2),Ho(1,"div","context-menu-group-entry context-menu-entry-add-input-left",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-left"),qo("Add Left")],4,{onClick:function(){return o(_)}}),Ho(1,"div","context-menu-group-entry context-menu-entry-add-input-right",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-right"),qo("Add Right")],4,{onClick:function(){return a(_)}}),Ho(1,"div","context-menu-group-entry "+(w?"":"disabled")+" context-menu-entry-remove-input",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-clear"),qo("Remove")],4,{onClick:function(){return s(_)}}),Ho(1,"div","context-menu-group-entry context-menu-entry-copy-input",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-copy"),qo("Copy")],4,{onClick:function(){return p(_)}}),Ho(1,"div","context-menu-group-entry "+(w?"":"disabled")+" context-menu-entry-cut-input",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-cut"),qo("Cut")],4,{onClick:function(){return d(_)}}),Ho(1,"div","context-menu-group-entry "+(x?"":"disabled")+" context-menu-entry-paste-input-left",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-paste"),qo("Paste Left")],4,{onClick:function(){return f(_)}}),Ho(1,"div","context-menu-group-entry "+(x?"":"disabled")+" context-menu-entry-paste-input-right",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-paste"),qo("Paste Right")],4,{onClick:function(){return h(_)}})],4))}else if(ki(v,"dmn:OutputClause")||ki(v.col,"dmn:OutputClause")){var E=ki(v,"dmn:OutputClause")?v:v.col,C=this._rules.allowed("col.remove",{col:v.col||v}),k=this._rules.allowed("paste",{data:g.elements,target:v.col||v});y.push(Ho(1,"div","context-menu-group context-menu-group-output",[Ho(1,"h4","context-menu-group-title",qo("Output"),2),Ho(1,"div","context-menu-group-entry context-menu-entry-add-output-left",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-left"),qo("Add Left")],4,{onClick:function(){return c(E)}}),Ho(1,"div","context-menu-group-entry context-menu-entry-add-output-right",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-right"),qo("Add Right")],4,{onClick:function(){return l(E)}}),Ho(1,"div","context-menu-group-entry "+(C?"":"disabled")+" context-menu-entry-remove-output",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-clear"),qo("Remove")],4,{onClick:function(){return u(E)}}),Ho(1,"div","context-menu-group-entry context-menu-entry-copy-output",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-copy"),qo("Copy")],4,{onClick:function(){return p(E)}}),Ho(1,"div","context-menu-group-entry "+(C?"":"disabled")+" context-menu-entry-cut-output",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-cut"),qo("Cut")],4,{onClick:function(){return d(E)}}),Ho(1,"div","context-menu-group-entry "+(k?"":"disabled")+" context-menu-entry-paste-output-left",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-paste"),qo("Paste Left")],4,{onClick:function(){return f(E)}}),Ho(1,"div","context-menu-group-entry "+(k?"":"disabled")+" context-menu-entry-paste-output-right",[Ho(1,"span","context-menu-group-entry-icon dmn-icon-paste"),qo("Paste Right")],4,{onClick:function(){return h(E)}})],4))}return y}}]),Fg);function Fg(r,i,e,t,n,o,a,s,c){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Fg),this._contextMenu=i,this._clipboard=e,this._editorActions=t,this._elementRegistry=o,this._eventBus=n,this._modeling=a,this._sheet=s,this._rules=c,this._getEntries=this._getEntries.bind(this),r.onGetComponent("context-menu",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"context-menu"===e.contextMenuType){var t=l._getEntries(e),n=function(e){return e instanceof uo}(l._elementRegistry.get(e.id))&&r.getComponents("context-menu-cell-additional",e);if(n&&n.length){var i=Ho(1,"div","context-menu-group context-menu-group-cell",[Ho(1,"h4","context-menu-group-title",qo("Cell"),2),n],0);return function(){return Ho(1,"div","context-menu-flex",(t||[]).concat([i]),0)}}return function(){return Ho(1,"div","context-menu-flex",t||[],0)}}}),n.on("cell.contextmenu",function(e){var t=e.event,n=e.id;e.node;t.preventDefault(),i.open({x:t.pageX,y:t.pageY},{contextMenuType:"context-menu",id:n})})}Vg.$inject=["components","contextMenu","clipboard","editorActions","eventBus","elementRegistry","modeling","sheet","rules"];function Ug(n,e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ug),e.on("commandStack.executed",function(e){var t=e.command;-1!==Hg.indexOf(t)&&n.close()}),e.on("commandStack.reverted",function(){n.close()})}var Hg=["row.add","row.remove","col.add","col.remove"];Ug.$inject=["contextMenu","eventBus"];var zg={__depends__:[Dv,xg,iv],__init__:["decisionTableContextMenu","contextMenuCloseBehavior"],decisionTableContextMenu:["type",Vg],contextMenuCloseBehavior:["type",Ug]},qg=function(e,t,n){return t&&Wg(e.prototype,t),n&&Wg(e,n),e};function Wg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Gg=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Yg,os),qg(Yg,[{key:"componentWillMount",value:function(){var e=this.context.injector;this._changeSupport=this.context.changeSupport,this._eventBus=e.get("eventBus"),this._elementRegistry=e.get("elementRegistry");var t=this.props.output;this._changeSupport.onElementsChanged(t.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this.props.output;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"render",value:function(){var e=this.props.output,t=e.get("label"),n=e.get("name");return Ho(1,"th","output-cell output-editor",[this.slotFills({type:"cell-inner",context:{cellType:"output-cell",col:this._elementRegistry.get(e.id)},col:e}),t?Ho(1,"span","output-label",t,0,{title:"Output Label"}):Ho(1,"span","output-name",n||"-",0,{title:"Output Expression"})],0,{"data-col-id":e.id,onClick:this.onClick,onContextmenu:this.onContextmenu})}}]),Yg);function Yg(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Yg);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Yg.__proto__||Object.getPrototypeOf(Yg)).call(this,e,t));return n.onClick=function(e){var t=n.props.output;n._eventBus.fire("output.edit",{event:e,output:t})},n.onContextmenu=function(e){var t=n.props.output.id;n._eventBus.fire("cell.contextmenu",{event:e,id:t})},n.onElementsChanged=function(){n.forceUpdate()},Ps(n,cc),n}var Kg=function(e,t,n){return t&&Xg(e.prototype,t),n&&Xg(e,n),e};function Xg(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Jg=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Qg,os),Kg(Qg,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.placeholder,i=e.type,r=e.value;return Ho(64,"input",[t||"","dms-input"].join(" "),null,1,{placeholder:n||"",onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,spellcheck:"false",type:i||"text",value:r})}}]),Qg);function Qg(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Qg);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Qg.__proto__||Object.getPrototypeOf(Qg)).call(this,e,t));return n.onInput=function(e){var t=n.props.onInput;"function"==typeof t&&t(e.target.value)},n.onKeyDown=function(e){var t=n.props.onKeyDown;"function"==typeof t&&t(e)},n.onKeyUp=function(e){var t=n.props.onKeyUp;"function"==typeof t&&t(e)},n}var Zg=function(e,t,n){return t&&ey(e.prototype,t),n&&ey(e,n),e};function ey(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ty=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ny,os),Zg(ny,[{key:"handleChange",value:function(e){var t=this.props.onChange;"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.label;return Ho(1,"div","dms-container ref-output-editor",[Ho(1,"p","dms-fill-row",[Ho(1,"label","dms-label",qo("Output Label"),2),zo(2,Jg,{className:"ref-output-label",value:n||"",onInput:this.setLabel})],4),Ho(1,"p","dms-fill-row",[Ho(1,"label","dms-label",qo("Output Name"),2),zo(2,Jg,{className:"ref-output-name",value:t||"",onInput:this.setName})],4)],4)}}]),ny);function ny(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ny);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(ny.__proto__||Object.getPrototypeOf(ny)).call(this,e,t));return n.setName=function(e){e=e||void 0,n.handleChange({name:e})},n.setLabel=function(e){e=e||void 0,n.handleChange({label:e})},n}var iy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ry=function(e,t,n){return t&&oy(e.prototype,t),n&&oy(e,n),e};function oy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ay=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(sy,os),ry(sy,[{key:"getValue",value:function(e){var t=this.props.context.output,n=this.state.unsaved;return n&&n[e]||t.get(e)}},{key:"render",value:function(){return Ho(1,"div","context-menu-container output-edit",zo(2,ty,{name:this.getValue("name"),label:this.getValue("label"),onChange:this.handleChange}),2)}}]),sy);function sy(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,sy);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(sy.__proto__||Object.getPrototypeOf(sy)).call(this,e,t));return n.persistChanges=function(){var e=n.props.context.output,t=n.state.unsaved;t&&(n.modeling.updateProperties(e,t),n.setState({unsaved:!1}))},n.handleChange=function(e){n.setState({unsaved:iy({},n.state.unsaved,e)},n.persistChanges)},n.state={},Is(n),n.persistChanges=n.debounceInput(n.persistChanges),n}ay.$inject=["debounceInput","modeling"];function cy(e,u,t,p){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,cy),e.onGetComponent("cell",function(e){if("output-header"===e.cellType)return Gg}),e.onGetComponent("context-menu",function(){if("output-edit"===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).contextMenuType)return ay}),t.on("output.edit",function(e){var t=e.event,n=e.output,i=t.target,r=ht(i,"th",!0).getBoundingClientRect(),o=r.left,a=r.top,s=r.width,c=r.height,l=p.getContainer();u.open({x:o+l.parentNode.scrollLeft,y:a+l.parentNode.scrollTop,width:s,height:c},{contextMenuType:"output-edit",output:n,offset:{x:4,y:4}})})}cy.$inject=["components","contextMenu","eventBus","renderer"];var ly=function(e,t,n){return t&&uy(e.prototype,t),n&&uy(e,n),e};function uy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var py=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(dy,os),ly(dy,[{key:"componentWillMount",value:function(){var e=this.context.injector;this._changeSupport=this.context.changeSupport,this._sheet=e.get("sheet"),this._eventBus=e.get("eventBus"),this._elementRegistry=e.get("elementRegistry");var t=this._sheet.getRoot(),n=this.props.input;this._changeSupport.onElementsChanged(t.id,this.onElementsChanged),this._changeSupport.onElementsChanged(n.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this._sheet.getRoot(),t=this.props.input;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged),this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}},{key:"render",value:function(){var e=this.props.input,t=e.inputExpression,n=e.get("label"),i=e.get("inputVariable"),r=t.get("expressionLanguage")||"FEEL",o=!n&&"FEEL"!=r;return Ho(1,"th","input-cell input-editor",[this.slotFills({type:"cell-inner",context:{cellType:"input-cell",col:this._elementRegistry.get(e.id)},col:e}),n?Ho(1,"span","input-label",n,0,{title:"Input Label"}):Ho(1,"span","input-expression",t.text||"-",0,{title:"Input Expression"}),i&&Ho(1,"span","dms-badge dmn-variable-name input-variable",i,0,{title:"Input Variable"}),o&&Ho(1,"span","dms-badge dmn-expression-language input-expression-language",[Ho(1,"span","dms-badge-icon dmn-icon-file-code"),Ho(1,"span","dms-badge-label",r,0)],4,{title:"Input Expression Language = "+r})],0,{"data-col-id":e.id,onClick:this.onClick,onContextmenu:this.onContextmenu})}}]),dy);function dy(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,dy);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(dy.__proto__||Object.getPrototypeOf(dy)).call(this,e,t));return n.onClick=function(e){var t=n.props.input;n._eventBus.fire("input.edit",{event:e,input:t})},n.onContextmenu=function(e){var t=n.props.input.id;n._eventBus.fire("cell.contextmenu",{event:e,id:t})},n.onElementsChanged=function(){n.forceUpdate()},Ps(n,cc),n}var fy=function(e,t,n){return t&&hy(e.prototype,t),n&&hy(e,n),e};function hy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var my=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(vy,os),fy(vy,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.onGlobalClick),document.addEventListener("focusin",this.onFocusChanged),this.keyboard.addListener(this.onKeyboard)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("focusin",this.onFocusChanged),document.removeEventListener("click",this.onGlobalClick),this.keyboard.removeListener(this.onKeyboard),this.removePortalEl()}},{key:"componentWillReceiveProps",value:function(e){var t=e.value;this.setState({value:t})}},{key:"componentWillUpdate",value:function(e,t){t.optionsVisible?this._portalEl||this.addPortalEl():this._portalEl&&this.removePortalEl()}},{key:"componentDidUpdate",value:function(){if(this.state.optionsVisible&&this.inputNode){var e=this.inputNode.getBoundingClientRect(),t=e.top,n=e.left,i=e.width,r=e.height;R(this._portalEl.style,{top:t+r+"px",left:n+"px",width:i+"px"})}}},{key:"addPortalEl",value:function(){this._portalEl=wt('<div class="dms-select-options"></div>'),this.renderer.getContainer().appendChild(this._portalEl)}},{key:"removePortalEl",value:function(){this._portalEl&&(At(this._portalEl),this._portalEl=null)}},{key:"focusInput",value:function(){var e=this.inputNode;e.focus(),"selectionStart"in e&&(e.selectionStart=1e5)}},{key:"checkClose",value:function(e){!this._portalEl||this._portalEl.contains(e)||this.parentNode.contains(e)||this.setOptionsVisible(!1)}},{key:"select",value:function(e){var t=this.props.options,n=this.state.value;if(t){var i=t.filter(function(e){return e.value===n})[0],r=i?t.indexOf(i):-1,o=-1===r?1===e?0:t.length-1:(r+e)%t.length,a=t[o<0?t.length+o:o];this.onChange(a.value)}}},{key:"setOptionsVisible",value:function(e){this.setState({optionsVisible:e})}},{key:"renderOptions",value:function(e,n){var i=this;return Ho(1,"div","options",e.map(function(t){return Ho(1,"div",["option",n===t?"active":""].join(" "),t.label,0,{"data-value":t.value,onClick:function(e){return i.onOptionClick(t.value,e)}})}),0)}},{key:"render",value:function(){var t=this,e=this.props,n=e.className,i=e.options,r=e.noInput,o=this.state,a=o.optionsVisible,s=o.value,c=!!i&&i.filter(function(e){return e.value===s})[0],l=c?c.label:s;return Ho(1,"div",[n||"","dms-input-select"].join(" "),[r?Ho(1,"div","dms-input",l,0,{tabindex:"0",onKeyDown:this.onKeyDown},null,function(e){return t.inputNode=e}):Ho(64,"input","dms-input",null,1,{onInput:this.onInput,onKeyDown:this.onKeyDown,spellcheck:"false",type:"text",value:s},null,function(e){return t.inputNode=e}),Ho(1,"span",["dms-input-select-icon",a?"dmn-icon-up":"dmn-icon-down"].join(" ")),a&&function(e,t){return Ho(1024,t,null,e,0,null,No(e)?null:e.key,null)}(this.renderOptions(i,c),this._portalEl)],0,{onClick:this.onInputClick},null,function(e){return t.parentNode=e})}}]),vy);function vy(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,vy);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(vy.__proto__||Object.getPrototypeOf(vy)).call(this,e,t));gy.call(n),Is(n);var i=e.value;return n.state={value:i,optionsVisible:!1},n._portalEl=null,n}var gy=function(){var i=this;this.onChange=function(e){i.setState({value:e});var t=i.props.onChange;"function"==typeof t&&t(e)},this.onInputClick=function(e){e.preventDefault(),e.stopPropagation(),i.setOptionsVisible(!i.state.optionsVisible),i.focusInput()},this.onInput=function(e){var t=e.target.value;i.onChange(t)},this.onOptionClick=function(e,t){t.preventDefault(),t.stopPropagation(),i.setOptionsVisible(!1),i.onChange(e),i.focusInput()},this.onFocusChanged=function(e){i.checkClose(e.target)},this.onGlobalClick=function(e){i.checkClose(e.target)},this.onKeyDown=function(e){var t=i.state.optionsVisible,n=e.which;40!==n&&38!==n||(e.stopPropagation(),e.preventDefault(),t?i.select(40===n?1:-1):i.setOptionsVisible(!0)),t&&(13!==n&&27!==n||(e.stopPropagation(),e.preventDefault(),i.setOptionsVisible(!1)))},this.onKeyboard=function(e){if(i.state.optionsVisible)return 27===e?(i.setOptionsVisible(!1),!0):void 0}};my.$inject=["keyboard","renderer"];var yy=function(e,t,n){return t&&by(e.prototype,t),n&&by(e,n),e};function by(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var _y=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(wy,os),yy(wy,[{key:"handleChange",value:function(e){var t=this.props.onChange;"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this.props,t=e.expressionLanguage,n=e.inputVariable,i=e.label,r=e.text,o=t||xy(r),a=[!xy(r)&&"","FEEL","JUEL","JavaScript","Groovy","Python"].filter(f).map(function(e){return{label:e,value:e}});return Ho(1,"div","dms-container ref-input-editor",[Ho(1,"p","dms-fill-row",[Ho(1,"label","dms-label",qo("Input Label"),2),zo(2,Jg,{className:"ref-input-label",value:i||"",onInput:this.handleLabelChange})],4),Ho(1,"hr","dms-hrule"),Ho(1,"h4","dms-heading",qo("Input Expression"),2),zo(2,Vv,{placeholder:"enter expression",ctrlForNewline:!0,className:["ref-text","dms-input",o?"dms-script-input script-editor":"","dms-fit-row"].join(" "),onInput:this.handleValue,value:r||""}),!o&&Ho(1,"p","dms-hint",[qo("Enter simple "),Ho(1,"code",null,qo("FEEL"),2),qo(" expression or "),Ho(1,"a","ref-make-script",qo("change to script"),2,{href:"#",onClick:this.makeScript}),qo(".")],4),o&&Ho(1,"p","dms-hint",qo("Enter script."),2),o&&Ho(1,"p",null,[Ho(1,"label","dms-label",qo("Expression Language"),2),zo(2,my,{className:"ref-language",value:t||"",onChange:this.handleLanguageChange,options:a})],4),Ho(1,"p","dms-fill-row",[Ho(1,"label","dms-label",qo("Input Variable"),2),zo(2,Jg,{className:"ref-input-variable",value:n||"",onInput:this.handleInputVariableChange,placeholder:"cellInput"})],4)],0)}}]),wy);function wy(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,wy);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(wy.__proto__||Object.getPrototypeOf(wy)).call(this,e,t));return i.setExpressionLanguage=function(e){i.handleChange({expressionLanguage:e})},i.makeScript=function(e){e.preventDefault(),e.stopPropagation(),i.setExpressionLanguage("FEEL")},i.handleValue=function(e){var t=i.props.expressionLanguage,n={text:e};xy(e)&&!t&&(n.expressionLanguage="FEEL"),xy(e)||"FEEL"!==t||(n.expressionLanguage=void 0),i.handleChange(n)},i.handleLanguageChange=function(e){i.setExpressionLanguage(e)},i.handleLabelChange=function(e){var t=e||void 0;i.handleChange({label:t})},i.handleInputVariableChange=function(e){var t=e||void 0;i.handleChange({inputVariable:t})},i}function xy(e){return e&&1<e.split(/\n/).length}var Ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cy=function(e,t,n){return t&&ky(e.prototype,t),n&&ky(e,n),e};function ky(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Sy=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Ty,os),Cy(Ty,[{key:"getValue",value:function(e){var t=this.props.context.input,n=this.state.unsaved,i=t;return"expressionLanguage"!==e&&"text"!==e||(i=i.inputExpression),n&&n[e]||i.get(e)}},{key:"render",value:function(){return Ho(1,"div","context-menu-container input-edit",zo(2,_y,{expressionLanguage:this.getValue("expressionLanguage"),inputVariable:this.getValue("inputVariable"),label:this.getValue("label"),text:this.getValue("text"),onChange:this.handleChange}),2)}}]),Ty);function Ty(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ty);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Ty.__proto__||Object.getPrototypeOf(Ty)).call(this,e,t));return a.persistChanges=function(){var e=a.props.context.input,t=a.state.unsaved;if(t){var n=t.inputVariable,i=t.label,r=function(e,t){var n={};for(var i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(t,["inputVariable","label"]),o={};"inputVariable"in t&&(o.inputVariable=n),"label"in t&&(o.label=i),function(e){return Object.keys(e).length}(r)&&(o.inputExpression=r),a.modeling.updateProperties(e,o),a.setState({unsaved:!1})}},a.handleChange=function(e){a.setState({unsaved:Ey({},a.state.unsaved,e)},a.persistChanges)},a.state={},Is(a),a.persistChanges=a.debounceInput(a.persistChanges),a}Sy.$inject=["debounceInput","modeling"];function Oy(e,u,t,p){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Oy),e.onGetComponent("cell",function(e){if("input-header"===e.cellType)return py}),e.onGetComponent("context-menu",function(){if("input-edit"===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).contextMenuType)return Sy}),t.on("input.edit",function(e){var t=e.event,n=e.input,i=t.target,r=ht(i,"th",!0).getBoundingClientRect(),o=r.left,a=r.top,s=r.width,c=r.height,l=p.getContainer();u.open({x:o+l.parentNode.scrollLeft,y:a+l.parentNode.scrollTop,width:s,height:c},{contextMenuType:"input-edit",input:n,offset:{x:4,y:4}})})}Oy.$inject=["components","contextMenu","eventBus","renderer"];var Ay=function(e,t,n){return t&&Iy(e.prototype,t),n&&Iy(e,n),e};function Iy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Dy=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Py,os),Ay(Py,[{key:"componentWillMount",value:function(){var e=this.context.injector;this._changeSupport=this.context.changeSupport,this._sheet=e.get("sheet"),this._eventBus=e.get("eventBus");var t=this.getTypeRefTarget();this._changeSupport.onElementsChanged(t.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this.getTypeRefTarget();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"getTypeRefTarget",value:function(){var e=this.props.element;return ki(e,"dmn:InputClause")?e.inputExpression:e}},{key:"render",value:function(){var e=this.props,t=e.element,n=(e.className||"")+" type-ref",i=ki(t,"dmn:LiteralExpression")?t.$parent.id:t.id;return Ho(1,"th",n,t.typeRef,0,{title:"Data Type","data-col-id":i,onClick:this.onClick,onContextmenu:this.onContextmenu})}}]),Py);function Py(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Py);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Py.__proto__||Object.getPrototypeOf(Py)).call(this,e));return i.onClick=function(e){var t=i.getTypeRefTarget();i._eventBus.fire("typeRef.edit",{event:e,element:t})},i.onContextmenu=function(e){var t=i.props.element,n=t;ki(t,"dmn:LiteralExpression")&&(n=t.$parent),i._eventBus.fire("cell.contextmenu",{event:e,node:e.node,id:n.id})},i.onElementsChanged=function(){i.forceUpdate()},i}var Ry=function(e,t,n){return t&&Ny(e.prototype,t),n&&Ny(e,n),e};function Ny(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var My=["string","boolean","integer","long","double","date"],jy=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}($y,os),Ry($y,[{key:"render",value:function(){var e=this.props.context.element,t=(ki(e,"dmn:InputClause")?e.inputExpression:e).typeRef,n=My.map(function(e){return{label:e,value:e}});return Ho(1,"div","type-ref-edit context-menu-container",[Ho(1,"label","dms-label",qo("Type:"),2),zo(2,my,{className:"type-ref-edit-select",onChange:this.onTypeChange,options:n,value:t})],4)}}]),$y);function $y(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,$y);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,($y.__proto__||Object.getPrototypeOf($y)).call(this,e));return r.onTypeChange=function(e){var t=r.props.context.element,n=ki(t,"dmn:LiteralExpression")?t.$parent:t,i=void 0;Si(n)?i={inputExpression:{typeRef:e}}:Ti(n)&&(i={typeRef:e}),r._modeling.updateProperties(n,i)},r._modeling=t.injector.get("modeling"),r}function Ly(e,u,t,p){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ly),e.onGetComponent("cell",function(e){var t=e.cellType;if("input-header-type-ref"===t||"output-header-type-ref"===t)return Dy}),e.onGetComponent("context-menu",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"type-ref-edit"===e.contextMenuType)return jy}),t.on("typeRef.edit",function(e){var t=e.event,n=e.element,i=t.target,r=ht(i,"th",!0).getBoundingClientRect(),o=r.left,a=r.top,s=r.width,c=r.height,l=p.getContainer();u.open({x:o+l.parentNode.scrollLeft,y:a+l.parentNode.scrollTop,width:s,height:c},{contextMenuType:"type-ref-edit",element:n,offset:{x:4,y:4}})})}Ly.$inject=["components","contextMenu","eventBus","renderer"];var By={__depends__:[xg],__init__:["typeRefEditingProvider"],typeRefEditingProvider:["type",Ly]};var Vy=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Fy,Nf),Fy);function Fy(e,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Fy);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Fy.__proto__||Object.getPrototypeOf(Fy)).call(this,e));return t.postExecuted("updateProperties",function(e){var t=e.context,n=t.element,i=t.properties,r=Si(n)?i.inputExpression:i;if(r&&r.typeRef&&"string"!==r.typeRef){var o=ki(n,"dmn:LiteralExpression")?n.$parent:n;a.editAllowedValues(o,null)}}),t}Vy.$inject=["eventBus","modeling"];var Uy=function(e,t,n){return t&&Hy(e.prototype,t),n&&Hy(e,n),e};function Hy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var zy=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(qy,os),Uy(qy,[{key:"componentWillReceiveProps",value:function(e){var t=e.items;this.setState({items:t})}},{key:"render",value:function(){var i=this,e=this.props,t=e.className,n=e.items,r=e.type,o=["dms-list-component"];t&&o.push(t);var a=function(e){var t=[];for(var n in e)t.push([n,e[n]]);return t}(C(n,"group"));return Ho(1,"div",o.join(" "),a.map(function(e){var t=e[0],n=e[1];return Ho(1,"div","group",[Ho(1,"h4","dms-heading",t,0),Ho(1,"ul","items no-wrap",n.map(function(e){return Ho(1,"li","item",[r&&Ho(64,"input","item-toggle",null,1,{type:r,checked:e.isChecked,onClick:i.getToggleClickHandler(e)}),qo(" "),e.value,e.isRemovable&&Ho(1,"span","remove dmn-icon-clear",null,1,{title:"Remove item",onClick:i.getRemoveClickHandler(e)})],0)}),0)],4)}),0)}}]),qy);function qy(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,qy);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(qy.__proto__||Object.getPrototypeOf(qy)).call(this,e,t));o.getRemoveClickHandler=function(t){return function(e){e.stopPropagation(),o.removeItem(t)}},o.getToggleClickHandler=function(t){return function(e){e.stopPropagation(),o.toggleItem(t)}},o.removeItem=function(t){var e=o.props.onChange,n=o.state.items.filter(function(e){return e!==t});o.setState({items:n}),e&&e(n)},o.toggleItem=function(t){var e=o.props,n=e.onChange,i=e.type,r=o.state.items.map(function(e){return e===t?e.isChecked=!e.isChecked:"radio"===i&&(e.isChecked=!1),e});o.setState({items:r}),n&&n(r)};var n=e.items;return o.state={items:n},o}var Wy=function(e,t,n){return t&&Gy(e.prototype,t),n&&Gy(e,n),e};function Gy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Yy=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Ky,os),Wy(Ky,[{key:"componentWillReceiveProps",value:function(e){var t=e.validate,n=e.value,i=t?t(n||""):void 0;this.setState({validationWarning:i,value:n})}},{key:"onInput",value:function(e){var t=this.props,n=t.onInput,i=t.validate,r=i?i(e):void 0;this.setState({validationWarning:r,value:e}),"function"!=typeof n||n&&n({isValid:!r,value:e})}},{key:"onKeyDown",value:function(e){var t=e.target.value,n=this.props,i=n.onKeyDown,r=n.validate,o=r?r(t):void 0;"function"==typeof i&&i({isValid:!o,value:t,event:e})}},{key:"onKeyUp",value:function(e){var t=e.target.value,n=this.props,i=n.onKeyUp,r=n.validate,o=r?r(t):void 0;"function"==typeof i&&i({isValid:!o,value:t,event:e})}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.type,i=e.className,r=this.state,o=r.validationWarning,a=r.value,s=["dms-validated-input",i].join(" "),c=[];return o&&c.push("invalid"),Ho(1,"div",s,[zo(2,Jg,{className:c,onInput:this.onInput,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,placeholder:t||"",type:n,value:a||""}),o&&Ho(1,"p","dms-hint dms-validation-warning",o,0)],0)}}]),Ky);function Ky(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Ky);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Ky.__proto__||Object.getPrototypeOf(Ky)).call(this,e,t)),i=e.validate,r=e.value,o=i?i(r||""):void 0;return n.state={validationWarning:o,value:r},n.onInput=n.onInput.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onKeyUp=n.onKeyUp.bind(n),n}function Xy(e){if(!e||function(e){return""===e}(e.trim()))return{values:[]};var t=e.split(","),n={values:[]},i="";return t.forEach(function(e){/^"[^"]*"$/.test((i+=e).trim())?(n.values.push(i.trim()),i=""):i+=","}),i?void 0:n}var Jy=function(e,t,n){return t&&Qy(e.prototype,t),n&&Qy(e,n),e};function Qy(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Zy=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(eb,os),Jy(eb,[{key:"componentWillMount",value:function(){var e=this.getAllowedValuesTarget();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this.getAllowedValuesTarget();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"getAllowedValuesTarget",value:function(){var e=this.props.context.element;return ki(e,"dmn:LiteralExpression")?e.$parent:e}},{key:"render",value:function(){var e=this.props.context.element,t=this.state,n=t.inputValue,i=t.values;return"string"===e.typeRef?Ho(1,"div","context-menu-container allowed-values-edit",[Ho(1,"hr","dms-hrule"),!nb(i)&&0<i.length&&zo(2,zy,{items:i,onChange:this.onListChange}),!nb(i)&&!i.length&&Ho(1,"div",null,[Ho(1,"h4","dms-heading",qo("Predefined Values"),2),Ho(1,"span","placeholder",qo("No values"),2)],4),!nb(i)&&Ho(1,"p","dms-hint",Ho(1,"a","del-values",qo("Clear predefined values."),2,{href:"#",onClick:this.handleRemovePredifinedValuesClick}),2),Ho(1,"h4","dms-heading",qo("Add Predefined Values"),2),zo(2,Yy,{onInput:this.onInput,onKeyDown:this.onKeyDown,placeholder:'"value", "value", ...',type:"text",validate:function(e){if(!Xy(e))return"Strings must be in double quotes."},value:n})],0):null}}]),eb);function eb(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,eb);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(eb.__proto__||Object.getPrototypeOf(eb)).call(this,e,t));tb.call(n),n._modeling=t.injector.get("modeling"),n._changeSupport=t.changeSupport;var i=n.getAllowedValuesTarget(),r=Xy(i.inputValues&&i.inputValues.text||i.outputValues&&i.outputValues.text||"");return n.state=r?{values:r.values.map(function(e){return{value:e,isCheckable:!1,isRemovable:!0,group:"Predefined Values"}}),inputValue:""}:{values:null,inputValue:""},n}var tb=function(){var s=this;this.onElementsChanged=function(){s.forceUpdate()},this.setPredefinedValues=function(e){var t=s.getAllowedValuesTarget();s.setState({values:e}),s._modeling.editAllowedValues(t,e&&function(e){return e.map(function(e){return e.value})}(e))},this.onListChange=function(e){s.setPredefinedValues(e)},this.onInput=function(e){e.isValid;var t=e.value;s.setState({inputValue:t})},this.onKeyDown=function(e){var t=e.isValid,n=e.event;if(function(e){return 13===e}(n.keyCode)&&(n.stopPropagation(),n.preventDefault(),t)){var i=s.state,r=i.inputValue,o=i.values,a=Xy(r);s.onListChange((o||[]).concat(a.values.map(function(e){return{value:e,isCheckable:!1,isRemovable:!0,group:"Predefined Values"}}))),s.setState({inputValue:""})}},this.handleRemovePredifinedValuesClick=function(e){e.stopPropagation(),s.removePredefinedValues()},this.removePredefinedValues=function(){s.setPredefinedValues(null)}};function nb(e){return null===e}function ib(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ib),e.onGetComponent("context-menu",500,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"type-ref-edit"===e.contextMenuType)return Zy})}ib.$inject=["components"];var rb={__init__:["allowedValuesUpdateBehavior","allowedValuesEditingProvider"],allowedValuesUpdateBehavior:["type",Vy],allowedValuesEditingProvider:["type",ib]},ob=function(e,t,n){return t&&ab(e.prototype,t),n&&ab(e,n),e};function ab(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var sb=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(cb,os),ob(cb,[{key:"componentWillMount",value:function(){var e=this.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"getRoot",value:function(){return this._sheet.getRoot()}},{key:"render",value:function(){var e=this.getRoot().businessObject.input;if(!e||!e.length)return null;var t=e.length;return Ho(1,"th","input-cell inputs-label actionable add-input header",[qo("Input "),Ho(1,"span","add-input dmn-icon-plus action-icon",null,1,{title:"Add Input"})],4,{onClick:this.handleClick,colspan:t})}}]),cb);function cb(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,cb);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(cb.__proto__||Object.getPrototypeOf(cb)).call(this,e,t));return n.onElementsChanged=function(){n.forceUpdate()},n.handleClick=function(e){e.stopPropagation(),n.add()},n.add=function(){n._eventBus.fire("addInput")},n._sheet=t.injector.get("sheet"),n._eventBus=t.injector.get("eventBus"),n._changeSupport=t.changeSupport,n}var lb=function(e,t,n){return t&&ub(e.prototype,t),n&&ub(e,n),e};function ub(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var pb=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(db,os),lb(db,[{key:"componentWillMount",value:function(){var e=this.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this.getRoot();this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"getRoot",value:function(){return this._sheet.getRoot()}},{key:"render",value:function(){var e=this.getRoot().businessObject.output.length;return Ho(1,"th","output-cell outputs-label add-output actionable header",[qo("Output "),Ho(1,"span","add-output dmn-icon-plus action-icon",null,1,{title:"Add Output"})],4,{onClick:this.handleClick,colspan:e})}}]),db);function db(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,db);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(db.__proto__||Object.getPrototypeOf(db)).call(this,e,t));return n.onElementsChanged=function(){n.forceUpdate()},n.handleClick=function(e){e.stopPropagation(),n.add()},n.add=function(){n._eventBus.fire("addOutput")},n._sheet=t.injector.get("sheet"),n._eventBus=t.injector.get("eventBus"),n._changeSupport=t.changeSupport,n}function fb(e,t,n){e.onGetComponent("cell",function(e){var t=e.cellType;return"input-label"===t?sb:"output-label"===t?pb:void 0}),n.on("addInput",function(){t.trigger("addInput")}),n.on("addOutput",function(){t.trigger("addOutput")})}fb.$inject=["components","editorActions","eventBus"];var hb={__depends__:[{__depends__:[Dv],__init__:["addInputOutputProvider"],addInputOutputProvider:["type",fb]},rb,xg,og,By],__init__:["inputEditingProvider","outputEditingProvider"],inputEditingProvider:["type",Oy],outputEditingProvider:["type",cy]};function mb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var vb=(function(e,t,n){return t&&mb(e.prototype,t),n&&mb(e,n),e}(gb,[{key:"_bindListeners",value:function(){yt.bind(document,"dragover",this.handleDragOver),yt.bind(document,"drop",this.handleDrop),yt.bind(document,"dragend",this.handleDragEnd)}},{key:"_unbindListeners",value:function(){yt.unbind(document,"dragover",this.handleDragOver),yt.unbind(document,"drop",this.handleDrop),yt.unbind(document,"dragend",this.handleDragEnd)}},{key:"_emit",value:function(e,t){return this._eventBus.fire(e,{dragContext:this._dragContext,originalEvent:t})}},{key:"startDrag",value:function(e,t){yb(t,!0),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData&&t.dataTransfer.setData("text","__DUMMY"),this._dragContext={draggedElement:e},this._bindListeners(),this._emit("dragAndDrop.dragStart",t)}}]),gb);function gb(e,t,n,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,gb),this.handleDragOver=function(e){yb(e);var t=e.target,n=ht(t,".dmn-decision-table-container td,\n   .dmn-decision-table-container th",!0),i=!!n,r=o._dragContext.hoverEl;r&&r!==n&&(o._emit("dragAndDrop.dragLeave",e),o._dragContext.targetEl=null,o._dragContext.hoverEl=null),n&&(n!==r&&(o._dragContext.hoverEl=n,!1!==(i=o._emit("dragAndDrop.dragEnter",e))&&(o._dragContext.targetEl=n)),i=o._emit("dragAndDrop.dragOver",e)),e.dataTransfer.dropEffect=!1!==i?"move":"none"},this.handleDrop=function(e){yb(e);var t=o._emit("dragAndDrop.drop",e);if(t){var n=o._dragContext.draggedElement;if(n instanceof ao){var i=o._sheet.getRoot().rows.indexOf(t);o._modeling.moveRow(n,i)}else if(n instanceof co){var r=o._sheet.getRoot().cols.indexOf(t);o._modeling.moveCol(n,r)}}o.handleDragEnd(e)},this.handleDragEnd=function(e){yb(e),o._unbindListeners(),o._emit("dragAndDrop.dragEnd",e),o._dragContext=null},this._eventBus=e,this._renderer=t,this._modeling=n,this._sheet=i,this._dragContext=null,e.on("table.destroy",function(){o._unbindListeners()})}function yb(e,t){e.stopPropagation(),!0!==t&&e.preventDefault()}vb.$inject=["eventBus","renderer","modeling","sheet"];var bb={__init__:["dragAndDrop"],dragAndDrop:["type",vb]};function _b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var wb="top",xb="right",Eb="bottom",Cb="left",kb=(function(e,t,n){return t&&_b(e.prototype,t),n&&_b(e,n),e}(Sb,[{key:"startDrag",value:function(e,t){var n=this._renderer.getContainer();this._dragImage=wt('<span style="\n          visibility: hidden;\n          position: fixed;\n          top: -10000px\n      "></span>'),document.body.appendChild(this._dragImage),t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(this._dragImage,0,0),e instanceof ao?function(e,t){y(Ot("[data-row-id="+e.id+"]",t),function(e){Pb(e)&&st(e).add("dragged")})}(e,n):e instanceof co&&function(e,t){y(Ot("[data-col-id="+e.id+"]",t),function(e){Pb(e)&&st(e).add("dragged")})}(e,n),this._dragAndDrop.startDrag(e,t)}}]),Sb);function Sb(e,t,n,i,r,o,a){var f=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Sb),this._cleanup=function(){var e=f._renderer.getContainer();Ab(e),function(e){y(Ot(".dragged",e),function(e){Pb(e)&&st(e).remove("dragged")})}(e),f._dragImage&&(At(f._dragImage),f._dragImage=null)},this._elementRegistry=t,this._dragAndDrop=i,this._renderer=r,this._rules=o,this._sheet=a,e.onGetComponent("cell-inner",function(e){var t=e.cellType,n=e.col,i=e.row;if("rule-index"===t)return function(){return Ho(1,"span","dmn-icon-drag vertical",qo(" "),2,{draggable:"true",onDragStart:function(e){return f.startDrag(i,e)},title:"Move rule"})};if("input-cell"===t||"output-cell"===t){var r="Move "+(Si(n)?"Input":"Output");return function(){return Ho(1,"span","dmn-icon-drag horizontal",null,1,{draggable:"true",onDragStart:function(e){return f.startDrag(n,e)},title:r})}}}),n.on("dragAndDrop.dragEnter",function(e){var t=e.dragContext,n=t.draggedElement,i=t.hoverEl;if(n instanceof ao)return!0;if(n instanceof co){var r=function(e,t,n){var i=t.get(e.dataset.colId);return i?n.getRoot().cols.indexOf(i):-1}(i,f._elementRegistry,f._sheet);return-1!==r&&f._rules.allowed("col.move",{col:n,index:r})}return!1}),n.on("dragAndDrop.dragLeave",function(e){e.dragContext.targetEl&&Ab(f._renderer.getContainer())}),n.on("dragAndDrop.dragOver",function(e){var t=e.dragContext,n=e.originalEvent,i=t.draggedElement,r=t.lastPosition,o=t.targetEl,a=f._renderer.getContainer();if(!o)return!1;var s=void 0;return i instanceof ao&&(s=Db(n,o)),i instanceof co&&(s=Ib(n,o)),r===s||(Ab(a),i instanceof ao&&Tb(o,a,s===wb?"top":"bottom"),i instanceof co&&Ob(o,a,s===Cb?"left":"right"),t.lastPosition=s),!0}),n.on("dragAndDrop.drop",function(e){var t=e.dragContext,n=e.originalEvent,i=t.draggedElement,r=t.targetEl;if(!r)return!1;if(i instanceof ao){var o=Db(n,r),a=r.dataset.rowId,s=f._elementRegistry.get(a);if(!s||s===i)return;var c=function(e,t,n,i){i.indexOf(e)>i.indexOf(t)&&(t=function(e,t){var n=t.indexOf(e);return t[Math.min(t.length-1,n+1)]}(t,i));return n===wb?function(e,t){var n=t.indexOf(e);return t[Math.max(0,n-1)]}(t,i):t}(i,s,o,f._sheet.getRoot().rows);if(c===i)return;return c}if(i instanceof co){var l=Ib(n,r),u=r.dataset.colId,p=f._elementRegistry.get(u);if(!p||p===i)return;var d=function(e,t,n,i){i.indexOf(e)>i.indexOf(t)&&(t=function(e,t){var n=t.indexOf(e);if(Si(e)){var i=t.filter(function(e){return Si(e)}),r=i[i.length-1],o=t.indexOf(r);return t[Math.min(o,n+1)]}return t[Math.min(t.length-1,n+1)]}(t,i));return n===Cb?function(e,t){var n=t.indexOf(e);if(Ti(e)){var i=t.filter(function(e){return Ti(e)})[0],r=t.indexOf(i);return t[Math.max(r,n-1)]}return t[Math.max(0,n-1)]}(t,i):t}(i,p,l,f._sheet.getRoot().cols);if(d===i)return;return d}}),n.on("dragAndDrop.dragEnd",this._cleanup)}function Tb(e,t,n){var i=e.dataset.rowId;i&&y(Ot("[data-row-id="+i+"]",t),function(e){Pb(e)&&(st(e).add("dragover"),st(e).add(n))})}function Ob(e,t,n){var i=e.dataset.colId;i&&y(Ot("[data-col-id="+i+"]",t),function(e){Pb(e)&&(st(e).add("dragover"),st(e).add(n))})}function Ab(e){y(Ot(".dragover",e),function(e){Pb(e)&&(st(e).remove("dragover"),st(e).remove("top"),st(e).remove("right"),st(e).remove("bottom"),st(e).remove("left"))})}function Ib(e,t){var n=t.getBoundingClientRect();return e.clientX<n.left+n.width/2?Cb:xb}function Db(e,t){var n=t.getBoundingClientRect();return e.clientY<n.top+n.height/2?wb:Eb}function Pb(e){return e&&(1===e.nodeType||11==e.nodeType)}kb.$inject=["components","elementRegistry","eventBus","dragAndDrop","renderer","rules","sheet"];var Rb={__depends__:[bb,iv],__init__:["dmnDragAndDrop"],dmnDragAndDrop:["type",kb]},Nb=function(e,t,n){return t&&Mb(e.prototype,t),n&&Mb(e,n),e};function Mb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}function Lb(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Bb=(Lb(Vb,os),Nb(Vb,[{key:"componentWillMount",value:function(){this._element&&this._changeSupport.onElementsChanged(this._element.id,this.onElementsChanged)}},{key:"componentDidMount",value:function(){this.props.context.autoFocus&&this.node&&function(e){return Tt(".content-editable",e)}(this.node).focus()}},{key:"componentWillUnmount",value:function(){if(this._element){this._changeSupport.offElementsChanged(this._element.id,this.onElementsChanged);var e=this._element.businessObject.description;f(e)&&!e.length&&this.changeDescription(null)}}},{key:"render",value:function(){var t=this;if(this._element){var e=this._element.businessObject.description;if(f(e))return Ho(1,"div","context-menu-container description-editor",zo(2,Fb,{className:"dms-input",onChange:this.changeDescription,value:e}),2,null,null,function(e){return t.node=e})}}}]),Vb);function Vb(e,t){jb(this,Vb);var n=$b(this,(Vb.__proto__||Object.getPrototypeOf(Vb)).call(this,e,t));n.onElementsChanged=function(){n.forceUpdate()},n.changeDescription=function(e){n._modeling.updateProperties(n._element,{description:e})},n._elementRegistry=t.injector.get("elementRegistry"),n._modeling=t.injector.get("modeling"),n._changeSupport=n.context.changeSupport;var i=n.props.context.id;return n._element=n._elementRegistry.get(i),n}var Fb=(Lb(Ub,Wv),Nb(Ub,[{key:"render",value:function(){return Ho(1,"div",this.getClassName(),this.getEditor(),0)}}]),Ub);function Ub(){return jb(this,Ub),$b(this,(Ub.__proto__||Object.getPrototypeOf(Ub)).apply(this,arguments))}function Hb(e,o,a,t,n,s){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Hb),this.addDescription=function(e){c._modeling.updateProperties(e,{description:""});var t=c._renderer.getContainer(),n=zb(t,qm(e.id,t).getBoundingClientRect());c._contextMenu.open(n,{contextMenuType:"cell-description",id:e.id,autoFocus:!0,offset:{x:4,y:4}})},this.removeDescription=function(e){c._modeling.updateProperties(e,{description:null}),c._contextMenu.close()},this._contextMenu=o,this._modeling=n,this._renderer=s,t.on("cell.click",750,function(e){if(!e.defaultPrevented){var t=e.target,n=e.id,i=a.get(n);if(i){qb(i)||e.preventDefault();var r=zb(s.getContainer(),t.getBoundingClientRect());o.open(r,{contextMenuType:"cell-description",autoFocus:!1,id:n,offset:{x:4,y:4}})}}}),e.onGetComponent("context-menu",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"cell-description"===e.contextMenuType&&f(qb(a.get(e.id))))return Bb}),e.onGetComponent("context-menu-cell-additional",500,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"context-menu"===e.contextMenuType){var t=e.id;if(!t)return;var n=a.get(t);if(!n)return;var i=n.businessObject.description,r=f(i),o=r?function(){return c.removeDescription(n)}:function(){return c.addDescription(n)};return Ho(1,"div","context-menu-group-entry "+(r?"remove-description":"add-description"),[Ho(1,"span","context-menu-group-entry-icon "+(r?"dmn-icon-clear":"dmn-icon-plus")),f(i)?"Remove":"Add",qo(" Description")],0,{onClick:o})}})}function zb(e,t){var n=t.top,i=t.left,r=t.width,o=t.height;return{x:i+e.parentNode.scrollLeft-26,y:n+e.parentNode.scrollTop,width:r+52,height:o}}function qb(e){return e&&e.businessObject&&e.businessObject.description}Hb.$inject=["components","contextMenu","elementRegistry","eventBus","modeling","renderer"];var Wb={__depends__:[xg,Sm],__init__:["description"],description:["type",Hb]};function Gb(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Yb=[{label:"FEEL",value:"feel"},{label:"JUEL",value:"juel"},{label:"JavaScript",value:"javascript"},{label:"Groovy",value:"groovy"},{label:"Python",value:"python"},{label:"JRuby",value:"jruby"}],Kb=(function(e,t,n){return t&&Gb(e.prototype,t),n&&Gb(e,n),e}(Xb,[{key:"onChange",value:function(e,t){this._modeling.editExpressionLanguage(e.businessObject,t)}}]),Xb);function Xb(e,r,t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Xb),this._modeling=t,e.onGetComponent("context-menu-cell-additional",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"context-menu"===e.contextMenuType){var t=e.id;if(!t)return;var n=r.get(t);if(!n)return;var i=n.businessObject.expressionLanguage||(Si(n.col)?"feel":"juel");return Ho(1,"div","context-menu-group-entry context-menu-entry-set-expression-language",[Ho(1,"div",null,[Ho(1,"span","context-menu-group-entry-icon dmn-icon-file-code"),qo("Expression Language")],4),zo(2,my,{className:"expression-language",onChange:function(e){return o.onChange(n,e)},options:Yb,value:i})],4)}})}Kb.$inject=["components","elementRegistry","modeling"];var Jb={__init__:["expressionLanguage"],expressionLanguage:["type",Kb]},Qb=/\s/,Zb=/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i,e_=/^[a-z_][\w-.]*$/i,t_=/\$\{([^}]*)\}/g;function n_(e,t){var n=e.$model.ids.assigned(t);return!t||n&&n!==e?"Element must have an unique id.":function(e){if(function(e){return Qb.test(e)}(e=function(e){return e.replace(t_,"$1")}(e)))return"Id must not contain spaces.";if(!e_.test(e))return Zb.test(e)?"Id must not contain prefix.":"Id must be a valid QName."}(t)}var i_=function(e,t,n){return t&&r_(e.prototype,t),n&&r_(e,n),e};function r_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a_(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}function s_(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c_=(s_(l_,os),i_(l_,[{key:"componentWillMount",value:function(){var e=this.context.injector;this.sheet=e.get("sheet"),this.modeling=e.get("modeling"),this.setupChangeListeners({bind:this.getBusinessObject().id})}},{key:"componentWillUnmount",value:function(){this.setupChangeListeners({unbind:this.getBusinessObject().id})}},{key:"setupChangeListeners",value:function(e){var t=e.bind,n=e.unbind;"string"==typeof n&&this.changeSupport.offElementsChanged(n,this.onElementsChanged),"string"==typeof t&&this.changeSupport.onElementsChanged(t,this.onElementsChanged)}},{key:"getBusinessObject",value:function(){return this.sheet.getRoot().businessObject.$parent}},{key:"render",value:function(){var e=this.getBusinessObject(),t=e.id,n=e.name;return Ho(1,"header","decision-table-properties",[zo(2,u_,{className:"decision-table-name",value:n,ctrlForNewline:!0,onChange:this.setDecisionTableName,elementId:"__decisionProperties_name",coords:"0:__decisionProperties"}),zo(2,d_,{className:"decision-table-id",value:t,ctrlForNewline:!0,validate:this.validateId,onChange:this.setDecisionTableId,elementId:"__decisionProperties_id",coords:"1:__decisionProperties"})],4)}}]),l_);function l_(e,t){o_(this,l_);var n=a_(this,(l_.__proto__||Object.getPrototypeOf(l_)).call(this,e,t));return n.onElementsChanged=function(){n.forceUpdate()},n.setDecisionTableName=function(e){n.modeling.editDecisionTableName(e)},n.setDecisionTableId=function(e){n.getBusinessObject().id!==e&&n.modeling.editDecisionTableId(e)},n.validateId=function(e){return n_(n.getBusinessObject(),e)},Is(n),n}c_.$inject=["sheet","modeling","changeSupport"];var u_=(s_(p_,Wv),i_(p_,[{key:"render",value:function(){return Ho(1,"h3",As(this.getSelectionClasses(),this.getClassName()),this.getEditor(),0,{"data-element-id":this.props.elementId,"data-coords":this.props.coords,title:"Decision Name"})}}]),p_);function p_(e,t){o_(this,p_);var n=a_(this,(p_.__proto__||Object.getPrototypeOf(p_)).call(this,e,t));return Ps(n,Rs),n}var d_=(s_(f_,Wv),i_(f_,[{key:"render",value:function(){return Ho(1,"h5",As(this.getSelectionClasses(),this.getClassName()),this.getEditor(),0,{title:"Decision Id","data-element-id":this.props.elementId,"data-coords":this.props.coords})}}]),f_);function f_(e,t){o_(this,f_);var n=a_(this,(f_.__proto__||Object.getPrototypeOf(f_)).call(this,e,t));return Ps(n,Rs),n}function h_(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h_),e.onGetComponent("table.before",function(){return c_})}h_.$inject=["components"];var m_={__depends__:[og],__init__:["decisionTableProperties"],decisionTableProperties:["type",h_]},v_=function(e,t,n){return t&&g_(e.prototype,t),n&&g_(e,n),e};function g_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y_=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(b_,os),v_(b_,[{key:"getRoot",value:function(){return this.sheet.getRoot()}},{key:"componentWillMount",value:function(){this.changeSupport.onElementsChanged(this.getRoot().id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){this.changeSupport.offElementsChanged(this.getRoot().id,this.onElementsChanged)}},{key:"render",value:function(){var e=this.getRoot().businessObject,t=e.hitPolicy;return Ho(1,"th","hit-policy header",[t.charAt(0),function(e){switch(e){case"SUM":return"+";case"MIN":return"<";case"MAX":return">";case"COUNT":return"#";default:return""}}(e.aggregation)],0,{"data-hit-policy":"true",title:"Hit Policy = "+t,onClick:this.onClick,rowspan:"3"})}}]),b_);function b_(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b_);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(b_.__proto__||Object.getPrototypeOf(b_)).call(this,e,t));return n.onClick=function(e){n.eventBus.fire("hitPolicy.edit",{event:e})},n.onElementsChanged=function(){n.forceUpdate()},Is(n),n}y_.$inject=["changeSupport","sheet","eventBus"];var __=function(e,t,n){return t&&w_(e.prototype,t),n&&w_(e,n),e};function w_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var x_=["UNIQUE","FIRST","PRIORITY","ANY","COLLECT","RULE ORDER","OUTPUT ORDER"],E_=["SUM","MIN","MAX","COUNT"],C_=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(k_,os),__(k_,[{key:"onHitPolicyChange",value:function(e){this._modeling.editHitPolicy(e,void 0)}},{key:"onAggregationChange",value:function(e){var t=""===e?void 0:e;this._modeling.editHitPolicy("COLLECT",t)}},{key:"onElementsChanged",value:function(){this.forceUpdate()}},{key:"componentWillMount",value:function(){var e=this.context.injector,t=this._changeSupport=this.context.changeSupport;this._sheet=e.get("sheet"),this._modeling=e.get("modeling");var n=this._sheet.getRoot(),i=n.businessObject,r=i.hitPolicy,o=i.aggregation;t.onElementsChanged(n.id,this.onElementsChanged),this.state={hitPolicy:r,aggregation:o}}},{key:"componentWillUnmount",value:function(){var e=this._sheet.getRoot();this._changeSupport.onElementsChanged(e.id,this.onElementsChanged)}},{key:"render",value:function(){var e=this._sheet.getRoot().businessObject,t=e.hitPolicy,n=e.aggregation,i=x_.map(function(e){return{label:e,value:e}}),r=E_.map(function(e){return{label:"NONE"===e?"-":e,value:e}});return Ho(1,"div","context-menu-container hit-policy-edit",[Ho(1,"p","hit-policy-edit-policy",[Ho(1,"label","dms-label",qo("Hit Policy:"),2),zo(2,my,{className:"hit-policy-edit-policy-select",onChange:this.onHitPolicyChange,options:i,value:t})],4),"COLLECT"===t&&Ho(1,"p","hit-policy-edit-operator",[Ho(1,"label","dms-label",qo("Aggregation:"),2),zo(2,my,{className:"hit-policy-edit-operator-select",onChange:this.onAggregationChange,options:r,value:n})],4)],0)}}]),k_);function k_(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k_);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(k_.__proto__||Object.getPrototypeOf(k_)).call(this,e,t));return n.onHitPolicyChange=n.onHitPolicyChange.bind(n),n.onAggregationChange=n.onAggregationChange.bind(n),n.onElementsChanged=n.onElementsChanged.bind(n),n}function S_(e,c,t,l){e.onGetComponent("cell",function(e){if("before-label-cells"===e.cellType)return y_}),e.onGetComponent("context-menu",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"hit-policy-edit"===e.contextMenuType)return C_}),t.on("hitPolicy.edit",function(e){var t=e.event,n=ht(t.target,"th",!0).getBoundingClientRect(),i=n.left,r=n.top,o=n.width,a=n.height,s=l.getContainer();c.open({x:i+s.parentNode.scrollLeft,y:r+s.parentNode.scrollTop,width:o,height:a},{contextMenuType:"hit-policy-edit",offset:{x:4,y:4}})})}S_.$inject=["components","contextMenu","eventBus","renderer"];var T_={__depends__:[xg],__init__:["hitPolicyProvider"],hitPolicyProvider:["type",S_]};function O_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var A_=(function(e,t,n){return t&&O_(e.prototype,t),n&&O_(e,n),e}(I_,[{key:"bind",value:function(e){this.unbind(),this._node=e,yt.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")}},{key:"getBinding",value:function(){return this._node}},{key:"_fire",value:function(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})}},{key:"_registerDefaultBindings",value:function(){var e=this._listeners,i=this._editorActions;e.push(function(e,t){if(Eg(t)&&!Cg(t)&&90===e)return i.trigger("undo"),!0}),e.push(function(e,t){if(Eg(t)&&(89===e||90===e&&Cg(t)))return i.trigger("redo"),!0}),e.push(function(e,t){if(13===e&&!Eg(t)&&Wm(t.target)){var n=Cg(t)?"selectCellAbove":"selectCellBelow";return i.trigger(n),!0}})}},{key:"addListener",value:function(e){this._listeners.unshift(e)}},{key:"removeListener",value:function(t){this._listeners=this._listeners.filter(function(e){return e!==t})}}]),I_);function I_(e,t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I_),this._init=function(){o._registerDefaultBindings(),o._fire("init")},this._destroy=function(){o._fire("destroy"),o.unbind(),o._listeners=null},this._keyHandler=function(e){var t,n,i=o._listeners,r=e.keyCode||e.charCode||-1;for(t=0;n=i[t];t++)if(n(r,e))return e.preventDefault(),void e.stopPropagation()},this.unbind=function(){var e=o._node;e&&(o._fire("unbind"),yt.unbind(e,"keydown",o._keyHandler,!0)),o._node=null},this._config=e||{},this._editorActions=n,this._eventBus=t,this._listeners=[],t.on("table.destroy",this._destroy),t.on("table.init",this._init),t.on("attach",function(){o._config.bindTo&&o.bind(e.bindTo)}),t.on("detach",this.unbind)}A_.$inject=["config.keyboard","eventBus","editorActions"];var D_={__depends__:[Dv],__init__:["keyboard"],keyboard:["type",A_]},P_=function(e,t,n){return t&&R_(e.prototype,t),n&&R_(e,n),e};function R_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var N_=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(M_,Nf),P_(M_,[{key:"updateRoot",value:function(n,i){var r=this,o=n.root,e=n.businessObject;if(ki(n,"dmn:DecisionRule")){if(i){var t=i.businessObject.get("rule"),a=t.indexOf(e);t.splice(a,1),e.$parent=null}if(o){var s=o.businessObject,c=o.rows.indexOf(n);s.get("rule").splice(c,0,e),e.$parent=s,n.cells.forEach(function(e,t){r.wireCell(e,n,t)})}}if(ki(n,"dmn:InputClause")||ki(n,"dmn:OutputClause")){var l=void 0,u=void 0;if(i){var p=i.businessObject,d=p.get("input"),f=p.get("output");if(ki(n,"dmn:InputClause")&&(u=(l=d).indexOf(e)),ki(n,"dmn:OutputClause")&&(u=(l=f).indexOf(e)),-1===u)throw new Error("inconsistent model: clause not in table");l.splice(u,1),e.$parent=null,n.cells.forEach(function(e,t){r.unwireCell(e,i.rows[t])})}if(o){var h=o.businessObject,m=h.get("input"),v=h.get("output"),g=o.cols.indexOf(n),y=void 0,b=void 0;ki(n,"dmn:InputClause")&&(b=m,y=g),ki(n,"dmn:OutputClause")&&(b=v,y=g-m.length),b.splice(y,0,e),e.$parent=h,n.cells.forEach(function(e,t){r.wireCell(e,o.rows[t],g)})}}}},{key:"unwireCell",value:function(e,t){var n,i=e.businessObject,r=t.businessObject,o=r.get("inputEntry"),a=r.get("outputEntry"),s=void 0;if(ki(e,"dmn:UnaryTests")&&(s=o),ki(e,"dmn:LiteralExpression")&&(s=a),-1===(n=s.indexOf(i)))throw new Error("cell not in row");s.splice(n,1),i.$parent=null}},{key:"wireCell",value:function(e,t,n){var i=e.businessObject,r=t.businessObject,o=r.get("inputEntry"),a=r.get("outputEntry"),s=void 0,c=void 0;i.$parent!==r&&(ki(e,"dmn:UnaryTests")&&(s=o,c=n),ki(e,"dmn:LiteralExpression")&&(s=a,c=n-o.length),s.splice(c,0,i),i.$parent=r)}}]),M_);function M_(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M_);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(M_.__proto__||Object.getPrototypeOf(M_)).call(this,e));return i.executed(["row.add","row.remove","col.add","col.remove"],j_(function(e){var t=e.context,n=t.row||t.col;i.updateRoot(n,t.oldRoot)})),i.reverted(["row.add","row.remove","col.add","col.remove"],j_(function(e){var t=e.context,n=t.row||t.col;i.updateRoot(n,t.newRoot)})),i}function j_(n){return function(e){var t=e.context;ki(t.row||t.col,"dmn:DMNElement")&&n(e)}}function $_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}N_.$inject=["eventBus","sheet"];var L_=(function(e,t,n){return t&&$_(e.prototype,t),n&&$_(e,n),e}(B_,[{key:"create",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this._model.create(e,t||{});return ki(n,"dmn:InputClause")&&(t.inputExpression?n.inputExpression=t.inputExpression:(n.inputExpression=this.create("dmn:LiteralExpression",{typeRef:"string"}),n.inputExpression.$parent=n)),ki(n,"dmn:OutputClause")&&(n.typeRef=t.typeRef||"string"),(ki(n,"dmn:UnaryTests")||ki(n,"dmn:LiteralExpression"))&&(n.text=t.text||""),this._ensureId(n),n}},{key:"_needsId",value:function(e){return ki(e,"dmn:DMNElement")}},{key:"_ensureId",value:function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))}}]),B_);function B_(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,B_),this._model=e}L_.$inject=["moddle"];var V_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},F_=function(e,t,n){return t&&U_(e.prototype,t),n&&U_(e,n),e};function U_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var H_=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(z_,vo),F_(z_,[{key:"create",value:function(e,t){var n=this._dmnFactory,i=t.businessObject,r=t.type,o=function(e,t){var n={};for(var i in e)0<=t.indexOf(i)||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(t,["businessObject","type"]);if(!i){if(!r){if("root"===e)r="dmn:DecisionTable";else if("cell"===e){var a=o.col;ki(a,"dmn:OutputClause")&&(r="dmn:LiteralExpression"),ki(a,"dmn:InputClause")&&(r="dmn:UnaryTests")}if(!r)throw new Error("cannot guess <type>")}i=n.create(r)}return function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(z_.prototype.__proto__||Object.getPrototypeOf(z_.prototype),"create",this).call(this,e,V_({businessObject:i,id:i.id},o))}}]),z_);function z_(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,z_);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(z_.__proto__||Object.getPrototypeOf(z_)).call(this));return t._dmnFactory=e,t}H_.$inject=["dmnFactory"];var q_=function(e,t,n){return t&&W_(e.prototype,t),n&&W_(e,n),e};function W_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var G_=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Y_,Nf),q_(Y_,[{key:"updateIds",value:function(e){var t=e.context,n=t.element,i=t.oldProperties,r=t.properties;ki(n,"dmn:DRGElement")&&function(e,t){return"id"in e&&"id"in t}(i,r)&&function(e){return e.$parent.drgElements}(n).forEach(function(e){!function(n,r,o){y({authorityRequirement:function(){n.authorityRequirement.forEach(function(e){var t=e.requiredAuthority,n=e.requiredDecision,i=e.requiredInput;t&&t.href==="#"+r&&(t.href="#"+o),n&&n.href==="#"+r&&(n.href="#"+o),i&&i.href==="#"+r&&(i.href="#"+o)})},informationRequirement:function(){n.informationRequirement.forEach(function(e){var t=e.requiredDecision,n=e.requiredInput;t&&t.href==="#"+r&&(t.href="#"+o),n&&n.href==="#"+r&&(n.href="#"+o)})},knowledgeRequirement:function(){n.knowledgeRequirement.forEach(function(e){var t=e.requiredKnowledge;t&&t.href==="#"+r&&(t.href="#"+o)})}},function(e,t){n[t]&&e()})}(e,i.id,r.id),function(e,t,n){e.extensionElements&&e.extensionElements.values.forEach(function(e){!ki(e,"biodi:Edge")||e.source===t&&(e.source=n)})}(e,i.id,r.id)})}}]),Y_);function Y_(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Y_);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Y_.__proto__||Object.getPrototypeOf(Y_)).call(this,e));return t.executed("updateProperties",t.updateIds.bind(t)),t}function K_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}G_.$inject=["eventBus"];var X_=(function(e,t,n){return t&&K_(e.prototype,t),n&&K_(e,n),e}(J_,[{key:"execute",value:function(e){var t=this._sheet,i=this._elementFactory,n=t.getRoot(),r=e.row,o=e.index;return void 0===o&&(o=e.index=n.rows.length),e.newRoot=n,r.cells.length||n.cols.forEach(function(e,t){var n=i.create("cell",{row:r,col:e});r.cells[t]=n}),t.addRow(r,o),t.getRoot()}},{key:"revert",value:function(e){var t=e.row,n=this._sheet;return n.removeRow(t),n.getRoot()}}]),J_);function J_(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,J_),this._sheet=e,this._elementFactory=t}function Q_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}X_.$inject=["sheet","elementFactory"];var Z_=(function(e,t,n){return t&&Q_(e.prototype,t),n&&Q_(e,n),e}(ew,[{key:"execute",value:function(e){var t=this._sheet,n=t.getRoot(),i=e.row,r=e.oldIndex=n.rows.indexOf(i);if(e.oldRoot=i.root,-1===r)throw new Error("row#"+i.id+" not in sheet");return t.removeRow(i),t.getRoot()}},{key:"revert",value:function(e){var t=e.row,n=e.oldIndex,i=this._sheet;return i.addRow(t,n),i.getRoot()}}]),ew);function ew(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ew),this._sheet=e}function tw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Z_.$inject=["sheet"];var nw=(function(e,t,n){return t&&tw(e.prototype,t),n&&tw(e,n),e}(iw,[{key:"preExecute",value:function(e){var t=e.row;this._modeling.removeRow(t)}},{key:"postExecute",value:function(e){var t=e.row,n=e.index;this._modeling.addRow(t,n)}}]),iw);function iw(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,iw),this._modeling=e}function rw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}nw.$inject=["modeling"];var ow=(function(e,t,n){return t&&rw(e.prototype,t),n&&rw(e,n),e}(aw,[{key:"execute",value:function(e){var t=this._sheet,i=this._elementFactory,n=t.getRoot(),r=e.col,o=e.index;return void 0===o&&(o=e.index=n.cols.length),e.newRoot=n,r.cells.length||n.rows.forEach(function(e,t){var n=i.create("cell",{row:e,col:r});r.cells[t]=n}),t.addCol(r,o),t.getRoot()}},{key:"revert",value:function(e){var t=e.col,n=this._sheet;return n.removeCol(t),n.getRoot()}}]),aw);function aw(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,aw),this._sheet=e,this._elementFactory=t}function sw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}ow.$inject=["sheet","elementFactory"];var cw=(function(e,t,n){return t&&sw(e.prototype,t),n&&sw(e,n),e}(lw,[{key:"execute",value:function(e){var t=this._sheet,n=e.col,i=e.oldRoot=n.root;if(-1===(e.oldIndex=i.cols.indexOf(n)))throw new Error("col#"+n.id+" not in sheet");return t.removeCol(n),t.getRoot()}},{key:"revert",value:function(e){var t=e.col,n=e.oldIndex,i=this._sheet;return i.addCol(t,n),i.getRoot()}}]),lw);function lw(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,lw),this._sheet=e,this._elementFactory=t}function uw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}cw.$inject=["sheet","elementFactory"];var pw=(function(e,t,n){return t&&uw(e.prototype,t),n&&uw(e,n),e}(dw,[{key:"preExecute",value:function(e){var t=e.col;this._modeling.removeCol(t)}},{key:"postExecute",value:function(e){var t=e.col,n=e.index;this._modeling.addCol(t,n)}}]),dw);function dw(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,dw),this._modeling=e}function fw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}pw.$inject=["modeling"];var hw=(function(e,t,n){return t&&fw(e.prototype,t),n&&fw(e,n),e}(mw,[{key:"execute",value:function(e){return e.cell}},{key:"revert",value:function(e){return e.cell}}]),mw);function mw(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,mw)}var vw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function gw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var yw=(function(e,t,n){return t&&gw(e.prototype,t),n&&gw(e,n),e}(bw,[{key:"getHandlers",value:function(){return bw._getHandlers()}},{key:"_create",value:function(e,t){return t instanceof io?t:this._elementFactory.create(e,t)}},{key:"addRow",value:function(e,t){var n=this._create("row",e),i={row:n,index:t};return this._commandStack.execute("row.add",i),n}},{key:"removeRow",value:function(e){this._commandStack.execute("row.remove",{row:e})}},{key:"moveRow",value:function(e,t){var n={row:e,index:t};this._commandStack.execute("row.move",n)}},{key:"addCol",value:function(e,t){var n=this._create("col",e),i={col:n,index:t};return this._commandStack.execute("col.add",i),n}},{key:"removeCol",value:function(e){this._commandStack.execute("col.remove",{col:e})}},{key:"moveCol",value:function(e,t){var n={col:e,index:t};this._commandStack.execute("col.move",n)}},{key:"editCell",value:function(e,t){var n=vw({cell:e},t);this._commandStack.execute("cell.edit",n)}}],[{key:"_getHandlers",value:function(){return{"row.add":X_,"row.remove":Z_,"row.move":nw,"col.add":ow,"col.remove":cw,"col.move":pw,"cell.edit":hw}}}]),bw);function bw(e,t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,bw),this._eventBus=e,this._elementFactory=t,this._commandStack=n,e.on("table.init",function(){!function(e,n){y(e,function(e,t){n.registerHandler(t,e)})}(i.getHandlers(),n)})}function _w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}yw.$inject=["eventBus","elementFactory","commandStack"];var ww=(function(e,t,n){return t&&_w(e.prototype,t),n&&_w(e,n),e}(xw,[{key:"execute",value:function(e){var t=e.element,n=e.allowedValues;return ki(t,"dmn:InputClause")?(t.inputValues?e.oldAllowedValues=t.inputValues.text:Ew(n)||(t.inputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),Ew(n)?t.inputValues&&delete t.inputValues:t.inputValues.text=n.join(",")):(t.outputValues&&t?e.oldAllowedValues=t.outputValues.text:Ew(n)||(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),Ew(n)?t.outputValues&&delete t.outputValues:t.outputValues.text=n.join(",")),t}},{key:"revert",value:function(e){var t=e.element,n=e.oldAllowedValues;return ki(t,"dmn:InputClause")?n?(t.inputValues||(t.inputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.inputValues.text=n):delete t.inputValues:n?(t.outputValues||(t.outputValues=this._dmnFactory.create("dmn:UnaryTests",{text:""})),t.outputValues.text=n):delete t.outputValues,t}}]),xw);function xw(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,xw),this._dmnFactory=e,this._moddle=t,this._modeling=n}function Ew(e){return null===e}ww.$inject=["dmnFactory","moddle","modeling"];var Cw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function kw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Sw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tw(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Ow=(function(e,t,n){return t&&kw(e.prototype,t),n&&kw(e,n),e}(Aw,[{key:"execute",value:function(e){var t=e.element,n=e.properties,i=Oi(t),r=this.updateProperties(i,n),o=r.changed,a=r.oldProperties;return e.oldProperties=a,[].concat(Tw(o),[t])}},{key:"revert",value:function(e){var t=e.element,n=e.oldProperties,i=Oi(t),r=this.updateProperties(i,n).changed;return[].concat(Tw(r),[t])}},{key:"updateProperties",value:function(s,e){var c=this,l=this._moddle.ids;return b(e,function(e,t,n){var i=s.get(n);if(Iw(t)){if(!Iw(i))throw new Error("non-existing property <"+n+">: cannot update values");var r=c.updateProperties(i,t),o=r.changed,a=r.oldProperties;return{changed:[].concat(Tw(e.changed),Tw(o),[i]),oldProperties:Cw({},e.oldProperties,Sw({},n,a))}}return"id"===n&&function(e,t){return e.id!==t}(s,t)&&(l.unclaim(s.id),c._elementRegistry.updateId(s,t),l.claim(t,s)),s.set(n,t),{changed:e.changed,oldProperties:Cw({},e.oldProperties,Sw({},n,i))}},{changed:[],oldProperties:{}})}}]),Aw);function Aw(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Aw),this._elementRegistry=e,this._moddle=t}function Iw(e){return c(e)&&v(e)}function Dw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Ow.$inject=["elementRegistry","moddle"];var Pw=(function(e,t,n){return t&&Dw(e.prototype,t),n&&Dw(e,n),e}(Rw,[{key:"execute",value:function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)}},{key:"revert",value:function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)}}]),Rw);function Rw(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Rw),this._moddle=e}Pw.$inject=["moddle"];var Nw=function(e,t,n){return t&&Mw(e.prototype,t),n&&Mw(e,n),e};function Mw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var jw=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}($w,yw),Nw($w,[{key:"getHandlers",value:function(){return $w._getHandlers()}},{key:"editDecisionTableName",value:function(e){var t={element:this._sheet.getRoot().businessObject.$parent,properties:{name:e}};this._commandStack.execute("updateProperties",t)}},{key:"editDecisionTableId",value:function(e){var t={element:this._sheet.getRoot().businessObject.$parent,properties:{id:e}};this._commandStack.execute("updateProperties",t)}},{key:"editHitPolicy",value:function(e,t){var n={element:this._sheet.getRoot().businessObject,properties:{hitPolicy:e,aggregation:t}};this._commandStack.execute("updateProperties",n)}},{key:"updateProperties",value:function(e,t){var n={element:e,properties:t};this._commandStack.execute("updateProperties",n)}},{key:"editInputExpression",value:function(e,t){var n={element:e,properties:t};this._commandStack.execute("updateProperties",n)}},{key:"editOutputName",value:function(e,t){var n={element:e,properties:{name:t}};this._commandStack.execute("updateProperties",n)}},{key:"editInputExpressionTypeRef",value:function(e,t){var n={element:e,properties:{typeRef:t}};this._commandStack.execute("updateProperties",n)}},{key:"editOutputTypeRef",value:function(e,t){var n={element:e,properties:{typeRef:t}};this._commandStack.execute("updateProperties",n)}},{key:"editCell",value:function(e,t){var n={element:e,properties:{text:t}};this._commandStack.execute("updateProperties",n)}},{key:"editAnnotation",value:function(e,t){var n={element:e,properties:{description:t}};this._commandStack.execute("updateProperties",n)}},{key:"editAllowedValues",value:function(e,t){var n={element:e,allowedValues:t};this._commandStack.execute("editAllowedValues",n)}},{key:"editExpressionLanguage",value:function(e,t){var n={element:e,properties:{expressionLanguage:t}};this._commandStack.execute("updateProperties",n)}},{key:"claimId",value:function(e,t){var n={id:e,element:t,claiming:!0};this._commandStack.execute("id.updateClaim",n)}},{key:"unclaimId",value:function(e,t){var n={id:e,element:t};this._commandStack.execute("id.updateClaim",n)}}],[{key:"_getHandlers",value:function(){return R({},function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}($w.__proto__||Object.getPrototypeOf($w),"_getHandlers",this).call(this),{editAllowedValues:ww,updateProperties:Ow,"id.updateClaim":Pw})}}]),$w);function $w(e,t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,$w);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,($w.__proto__||Object.getPrototypeOf($w)).call(this,e,t,n));return r._eventBus=e,r._elementFactory=t,r._commandStack=n,r._sheet=i,r}jw.$inject=["eventBus","elementFactory","commandStack","sheet"];var Lw=function(e,t,n){return t&&Bw(e.prototype,t),n&&Bw(e,n),e};function Bw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Vw=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Fw,Nf),Lw(Fw,[{key:"claimId",value:function(n){var i=this;n.id&&!this._ids.assigned(n.id)&&this._modeling.claimId(n.id,n),n.$descriptor.properties.forEach(function(e){var t=n[e.name];t&&(m(t)&&t.forEach(function(e){return i.claimId(e)}),t.$type&&i.claimId(t))})}}]),Fw);function Fw(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Fw);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Fw.__proto__||Object.getPrototypeOf(Fw)).call(this,e));return i._ids=t.ids,i._modeling=n,i.preExecute(["row.add","col.add"],function(e){var t=e.context,n=t.row||t.col;i.claimId(n.businessObject),n.cells&&n.cells.forEach(function(e){return i.claimId(e.businessObject)})}),i}Vw.$inject=["eventBus","moddle","modeling"];var Uw=function(e,t,n){return t&&Hw(e.prototype,t),n&&Hw(e,n),e};function Hw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var zw=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(qw,Nf),Uw(qw,[{key:"unclaimId",value:function(n){var i=this;n.id&&this._modeling.unclaimId(n.id,n),n.$descriptor.properties.forEach(function(e){var t=n[e.name];t&&(m(t)&&t.forEach(function(e){return i.unclaimId(e)}),t.$type&&i.unclaimId(t))})}}]),qw);function qw(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,qw);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(qw.__proto__||Object.getPrototypeOf(qw)).call(this,e));return i._modeling=t,i.preExecute(["row.remove","col.remove"],function(e){var t=e.context,n=t.row||t.col;i.unclaimId(n.businessObject),n.cells&&n.cells.forEach(function(e){return i.unclaimId(e.businessObject)})}),i}zw.$inject=["eventBus","modeling"];var Ww={__init__:["dmnUpdater","idChangeBehavior","modeling"],__depends__:[{__init__:["idClaimBehavior","idUnclaimBehavior"],idClaimBehavior:["type",Vw],idUnclaimBehavior:["type",zw]},bf],dmnUpdater:["type",N_],dmnFactory:["type",L_],elementFactory:["type",H_],idChangeBehavior:["type",G_],modeling:["type",jw]},Gw=function(e,t,n){return t&&Yw(e.prototype,t),n&&Yw(e,n),e};function Yw(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Kw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xw(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}function Jw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Qw={feel:"FEEL",juel:"JUEL",python:"Python",javascript:"JavaScript",groovy:"Groovy",jruby:"JRuby"},Zw=(Jw(ex,os),Gw(ex,[{key:"onElementsChanged",value:function(){this.forceUpdate()}},{key:"componentWillMount",value:function(){var e=this.context.injector,t=this.props.cell,n=this._changeSupport=this.context.changeSupport;this._modeling=e.get("modeling"),n.onElementsChanged(t.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this.props.cell;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"changeCellValue",value:function(e){var t=this.props.cell;this._modeling.editCell(t.businessObject,e)}},{key:"onFocus",value:function(){this.setState({isFocussed:!0})}},{key:"onBlur",value:function(){this.setState({isFocussed:!1})}},{key:"render",value:function(){var e=this.props,t=e.cell,n=e.rowIndex,i=e.row,r=e.col,o=e.colIndex,a=this.state.isFocussed,s=ki(t,"dmn:UnaryTests")?"input-cell":"output-cell",c=t.businessObject;return zo(2,Us,{className:s,elementId:t.id,coords:n+":"+o,"data-row-id":i.id,"data-col-id":r.id,children:zo(2,tx,{className:"cell-editor",ctrlForNewline:!0,onFocus:this.onFocus,onBlur:this.onBlur,isFocussed:a,onChange:this.changeCellValue,value:c.text,businessObject:c})})}}]),ex);function ex(e,t){Kw(this,ex);var n=Xw(this,(ex.__proto__||Object.getPrototypeOf(ex)).call(this,e,t));return n.state={isFocussed:!1},n.changeCellValue=n.changeCellValue.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n.onElementsChanged=n.onElementsChanged.bind(n),n}var tx=(Jw(nx,Wv),Gw(nx,[{key:"isDefaultExpressionLanguage",value:function(e){var t=e.expressionLanguage,n=ki(e,"dmn:UnaryTests"),i=this.context.injector.get("config"),r=i.defaultInputExpressionLanguage,o=i.defaultOutputExpressionLanguage;return n?!t&&!r||t===(r||"feel"):!t&&!o||t===(o||"juel")}},{key:"getDescription",value:function(e){return e.description}},{key:"getExpressionLanguageLabel",value:function(e){var t=e.expressionLanguage;return ki(e,"dmn:UnaryTests")?t?Qw[e.expressionLanguage.toLowerCase()]:"FEEL":t?Qw[e.expressionLanguage.toLowerCase()]:"JUEL"}},{key:"isScript",value:function(e){return ki(e,"dmn:UnaryTests")&&("FEEL"!==(e.expressionLanguage||"FEEL")||-1!==e.text.indexOf("\n"))}},{key:"render",value:function(){var e=this.props,t=e.businessObject,n=e.isFocussed,i=this.getDescription(t),r=this.isDefaultExpressionLanguage(t),o=this.getExpressionLanguageLabel(t)||t.expressionLanguage,a=this.isScript(t);return Ho(1,"div",this.getClassName(),[f(i)&&!n&&Ho(1,"div","description-indicator"),this.getEditor({className:a?"script-editor":null}),!r&&!n&&Ho(1,"span","dms-badge dmn-expression-language",[Ho(1,"span","dms-badge-icon dmn-icon-file-code"),Ho(1,"span","dms-badge-label",o,0)],4,{title:"Expression Language = "+o})],0)}}]),nx);function nx(){return Kw(this,nx),Xw(this,(nx.__proto__||Object.getPrototypeOf(nx)).apply(this,arguments))}function ix(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ix),e.onGetComponent("cell",1500,function(e){if("rule"===e.cellType)return Zw})}ix.$inject=["components"];var rx={__depends__:[og,Xc],__init__:["decisionRulesEditor"],decisionRulesEditor:["type",ix]},ox=function(e,t,n){return t&&ax(e.prototype,t),n&&ax(e,n),e};function ax(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var sx=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(cx,os),ox(cx,[{key:"updatePosition",value:function(){var e=this.state.selection;if(e&&this.node){var t=this._container=this._renderer.getContainer(),n=qm(e.id,t).getBoundingClientRect(),i=this.node.getBoundingClientRect(),r=t.getBoundingClientRect(),o=t.scrollLeft,a=t.scrollTop,s={};n.left+n.width/2>r.width/2?s.left=window.scrollX-r.left+n.left-i.width+4+o+"px":s.left=window.scrollX-r.left+n.left+n.width-4+o+"px",n.top+n.height/2>r.height/2?s.top=window.scrollY-r.top+n.top-i.height+4+a+"px":s.top=window.scrollY-r.top+n.top-4+a+"px",R(this.node.style,s)}}},{key:"onClick",value:function(){if(!this.state.isDisabled){var e=this._selection.get();e&&(this._eventBus.fire("simpleMode.open",{element:e,node:qm(e.id,this._container)}),this.setState({isVisible:!1}))}}},{key:"render",value:function(){var t=this,e=this.state,n=e.isDisabled,i=e.isVisible,r=e.top,o=e.left,a=["simple-mode-button","no-deselect"];return n&&a.push("disabled"),i?Ho(1,"div",a.join(" "),Ho(1,"span","dmn-icon-edit"),2,{onClick:this.onClick,style:{top:r,left:o},title:n?"Editing not supported for set expression language":"Edit"},null,function(e){return t.node=e}):null}}]),cx);function cx(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,cx);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(cx.__proto__||Object.getPrototypeOf(cx)).call(this,e,t));i.state={top:0,left:0,isVisible:!1,isDisabled:!0};var n=t.injector,r=i._eventBus=n.get("eventBus"),o=n.get("simpleMode");return i._renderer=n.get("renderer"),i._selection=t.injector.get("selection"),i.updatePosition=i.updatePosition.bind(i),r.on("selection.changed",function(e){var t,n=e.selection;n&&o.canSimpleEdit(n)?(i.setState({isVisible:!0,selection:n},i.updatePosition),t=!function(e,t){{if(Si(e.col))return!t||"feel"===t;if(Ti(e.col))return!t||"juel"===t}}(n,function(e){return e.businessObject.expressionLanguage}(n)),i.setState({isVisible:!0,selection:n,isDisabled:t},i.updatePosition)):i.setState({isVisible:!1})}),i.onClick=i.onClick.bind(i),i}function lx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ux=(function(e,t,n){return t&&lx(e.prototype,t),n&&lx(e,n),e}(px,[{key:"registerProvider",value:function(e){this._providers.push(e)}},{key:"canSimpleEdit",value:function(n){return this._providers.reduce(function(e,t){return e||t(n)},!1)}}]),px);function px(e,c,o,a,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,px),this._providers=[],e.onGetComponent("table.before",function(){return sx}),a.on("simpleMode.open",function(e){var t=e.element,n=e.node.getBoundingClientRect(),i=n.left,r=n.top,o=n.width,a=n.height,s=l.getContainer();c.open({x:i+s.parentNode.scrollLeft,y:r+s.parentNode.scrollTop,width:o,height:a},{contextMenuType:"simple-mode-edit",element:t,offset:{x:4,y:4}})}),a.on("cell.click",function(e){var t=e.event,n=e.node,i=e.id;if(function(e){if(e.altKey)return!1;return e.ctrlKey||e.metaKey}(t)){var r=o.get(i);r&&a.fire("simpleMode.open",{node:n,element:r}),e.preventDefault()}})}ux.$inject=["components","contextMenu","elementRegistry","eventBus","renderer"];var dx={__depends__:[xg,Xm],__init__:["simpleMode"],simpleMode:["type",ux]};var fx=function(e,t,n){return t&&hx(e.prototype,t),n&&hx(e,n),e};function hx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var mx=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(vx,os),fx(vx,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onChange",value:function(e){var t=this.props.context.element;this.editCell(t.businessObject,"none"===e?"":e),this.setState({value:e})}},{key:"render",value:function(){var e=this.state.value,t=[{label:"-",value:"none"},{label:"Yes",value:"true"},{label:"No",value:"false"}];return Ho(1,"div","simple-boolean-edit context-menu-container",[Ho(1,"h3","dms-heading",qo("Edit Boolean"),2),Ho(1,"h4","dms-heading",qo("Set Value"),2),zo(2,my,{noInput:!0,className:"dms-block",onChange:this.onChange,options:t,value:e})],4)}}]),vx);function vx(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,vx);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(vx.__proto__||Object.getPrototypeOf(vx)).call(this,e,t));n._modeling=t.injector.get("modeling");var i=function(e){return!e||function(e){return""===e}(e)?"none":"true"===e.trim()?"true":"false"===e.trim()?"false":void 0}(n.props.context.element.businessObject.text);return n.state={value:i||"none"},n.editCell=n.editCell.bind(n),n.onChange=n.onChange.bind(n),n}function gx(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,gx),t.registerProvider(function(e){return(Si(e.col)||Ti(e.col))&&"boolean"===yx(e)}),e.onGetComponent("context-menu",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if("boolean"===yx(e.element))return mx}})}function yx(e){return Si(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}gx.$inject=["components","simpleMode"];var bx={__depends__:[D_,dx],__init__:["simpleBooleanEdit"],simpleBooleanEdit:["type",gx]},_x=/^\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d$/,wx=/^\[date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)..date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"/,xx=/^(<|>)\s*date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)/,Ex=/^date and time\("(\d{4}(?:-\d\d){2}T(?:\d\d:){2}\d\d)"\)$/;function Cx(e){if(!_x.test(e.trim()))return"Date must match pattern yyyy-MM-ddTHH:mm:ss."}function kx(e,t){return"exact"===e?'date and time("'+t[0]+'")':"before"===e?'< date and time("'+t[0]+'")':"after"===e?'> date and time("'+t[0]+'")':"between"===e?'[date and time("'+t[0]+'")..date and time("'+t[1]+'")]':void 0}function Sx(){var e=new Date;return e.setUTCHours(0,0,0,0),e.toISOString().slice(0,-5)}function Tx(e){if(!e||""===e.trim())return{type:"exact",date:""};var t=e.match(wx);return t?{type:"between",dates:[t[1],t[2]]}:(t=e.match(xx))?{type:"<"===t[1]?"before":"after",date:t[2]}:(t=e.match(Ex))?{type:"exact",date:t[1]}:void 0}var Ox=function(e,t,n){return t&&Ax(e.prototype,t),n&&Ax(e,n),e};function Ax(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Ix="between",Dx=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Px,os),Ox(Px,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onTypeChange",value:function(e){var t=this.props.context.element,n=this.state.dates;this.setState({type:e}),Tx(kx(e,n))&&this.editCell(t.businessObject,kx(e,n))}},{key:"onSetStartDateTodayClick",value:function(){var e=this.props.context.element,t=this.state,n=t.dates,i=t.type,r=Sx();this.setState({dates:[r,n[1]]}),Tx(kx(i,[r,n[1]]))&&this.editCell(e.businessObject,kx(i,[r,n[1]]))}},{key:"onSetEndDateTodayClick",value:function(){var e=this.props.context.element,t=this.state,n=t.dates,i=t.type,r=Sx();this.setState({dates:[n[0],r]}),Tx(kx(i,[n[0],r]))&&this.editCell(e.businessObject,kx(i,[n[0],r]))}},{key:"onStartDateInput",value:function(e){var t=e.isValid,n=e.value;if(t){var i=this.props.context.element,r=this.state,o=r.dates,a=r.type;this.setState({dates:[n,o[1]]}),this.debouncedEditCell(i.businessObject,kx(a,[n,o[1]]))}}},{key:"onEndDateInput",value:function(e){var t=e.isValid,n=e.value;if(t){var i=this.props.context.element,r=this.state,o=r.dates,a=r.type;this.setState({dates:[o[0],n]}),this.debouncedEditCell(i.businessObject,kx(a,[o[0],n]))}}},{key:"render",value:function(){var e=this.state,t=e.dates,n=e.type,i=[{label:"Exactly",value:"exact"},{label:"Before",value:"before"},{label:"After",value:"after"},{label:"Between",value:Ix}];return Ho(1,"div","context-menu-container simple-date-edit",[Ho(1,"h3","dms-heading",qo("Edit Date"),2),Ho(1,"div","dms-fill-row",zo(2,my,{noInput:!0,onChange:this.onTypeChange,options:i,value:n}),2),Ho(1,"h4","dms-heading",n===Ix?"Edit Start Date":"Set Date",0),Ho(1,"div",null,[zo(2,Yy,{className:"start-date-input dms-block",onInput:this.onStartDateInput,placeholder:"e.g. "+Sx(),validate:Cx,value:t[0]}),Ho(1,"p","dms-hint",[Ho(1,"a","use-today",qo("Use today"),2,{href:"#",onClick:this.onSetStartDateTodayClick}),qo(".")],4)],4),n===Ix&&Ho(1,"h4","dms-heading",qo("Edit End Date"),2),n===Ix&&Ho(1,"div",null,[zo(2,Yy,{className:"end-date-input dms-block",onInput:this.onEndDateInput,placeholder:"e.g. "+Sx(),validate:Cx,value:t[1]}),Ho(1,"p","dms-hint",[Ho(1,"a","use-today",qo("Use today"),2,{href:"#",onClick:this.onSetEndDateTodayClick}),qo(".")],4)],4)],0)}}]),Px);function Px(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Px);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Px.__proto__||Object.getPrototypeOf(Px)).call(this,e,t));n._modeling=t.injector.get("modeling");var i=Tx(n.props.context.element.businessObject.text);if(i){var r=void 0;r=i.date?[i.date,""]:i.dates?i.dates:["",""],n.state={type:i.type,dates:r}}else n.state={type:"exact",dates:["",""]};var o=t.injector.get("debounceInput");return n.debouncedEditCell=o(n.editCell.bind(n)),n.editCell=n.editCell.bind(n),n.onTypeChange=n.onTypeChange.bind(n),n.onSetStartDateTodayClick=n.onSetStartDateTodayClick.bind(n),n.onSetEndDateTodayClick=n.onSetEndDateTodayClick.bind(n),n.onStartDateInput=n.onStartDateInput.bind(n),n.onEndDateInput=n.onEndDateInput.bind(n),n}var Rx=function(e,t,n){return t&&Nx(e.prototype,t),n&&Nx(e,n),e};function Nx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Mx=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(jx,os),Rx(jx,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onClick",value:function(){var e=this.props.context.element,t=Sx();this.setState({date:t}),this.editCell(e.businessObject,'date and time("'+t+'")')}},{key:"onInput",value:function(e){var t=e.isValid,n=e.value;if(t){var i=this.props.context.element;this.setState({date:n}),this.debouncedEditCell(i.businessObject,'date and time("'+n+'")')}}},{key:"render",value:function(){var e=this.state.date;return Ho(1,"div","context-menu-container simple-date-edit",[Ho(1,"h3","dms-heading",qo("Edit Date"),2),Ho(1,"h4","dms-heading",qo("Set Date"),2),Ho(1,"div",null,[zo(2,Yy,{onInput:this.onInput,placeholder:"e.g. "+Sx(),validate:Cx,value:e,className:"dms-block"}),Ho(1,"p","dms-hint",[qo("Set date "),Ho(1,"a","use-today",qo("to today"),2,{href:"#",onClick:this.onClick}),qo(".")],4)],4)],4)}}]),jx);function jx(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,jx);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(jx.__proto__||Object.getPrototypeOf(jx)).call(this,e,t));n._modeling=t.injector.get("modeling");var i=Tx(n.props.context.element.businessObject.text);n.state={date:i?i.date:""};var r=t.injector.get("debounceInput");return n.debouncedEditCell=r(n.editCell.bind(n)),n.editCell=n.editCell.bind(n),n.onClick=n.onClick.bind(n),n.onInput=n.onInput.bind(n),n}function $x(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,$x),t.registerProvider(function(e){var t=Lx(e);return(Si(e.col)||Ti(e.col))&&Bx(t)}),e.onGetComponent("context-menu",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(Bx(Lx(e.element))){if(Si(e.element.col))return Dx;if(Ti(e.element.col))return Mx}}})}function Lx(e){return Si(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}function Bx(e){return"date"===e}$x.$inject=["components","simpleMode"];var Vx={__depends__:[D_,dx],__init__:["simpleDateEdit"],simpleDateEdit:["type",$x]},Fx=/^(-?(?:[0-9]|\.[0-9])+)$|^((?:<|>|=){0,2})\s*(-?(?:[0-9]|\.[0-9])+)$/,Ux=/^(\[|\]){1}(-?(?:[0-9]|\.[0-9])+){1,}\.\.(-?(?:[0-9]|\.[0-9])+){1,}(\[|\]){1}$/,Hx={equals:"=",less:"<",lessEquals:"<=",greater:">",greaterEquals:">="};function zx(e){if(!e||function(e){return""===e}(e.trim()))return{type:"comparison"};var t=e.match(Fx),n=e.match(Ux);if(t){if(function(e){return e[0]&&e[1]&&!e[2]&&!e[3]}(t))return{type:"comparison",value:parseFloat(t[1]),operator:"equals"};if(function(e){return e[0]&&!e[1]&&e[2]&&e[3]}(t))return{type:"comparison",value:parseFloat(t[3]),operator:function(t){return E(Hx).filter(function(e){return t===Hx[e]})[0]}(t[2])}}else if(n)return{type:"range",values:[n[2],n[3]].map(function(e){return parseFloat(e)}),start:"]"===n[1]?"exclude":"include",end:"["===n[4]?"exclude":"include"}}function qx(e,t){return"equals"===e?""+t:Hx[e]+" "+t}function Wx(e,t,n,i){return("exclude"===n?"]":"[")+e+".."+t+("exclude"===i?"[":"]")}var Gx=function(e,t,n){return t&&Yx(e.prototype,t),n&&Yx(e,n),e};function Yx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Kx="comparison",Xx="range",Jx=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Qx,os),Gx(Qx,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onTypeChange",value:function(e){var t=this.props.context.element,n=this.state,i=n.comparisonOperator,r=n.comparisonValue,o=n.rangeStartValue,a=n.rangeEndValue,s=n.rangeStartType,c=n.rangeEndType;e===Kx?this.editCell(t.businessObject,qx(i,r)):this.editCell(t.businessObject,Wx(o,a,s,c)),this.setState({type:e})}},{key:"onComparisonOperatorChange",value:function(e){var t=this.props.context.element,n=this.state,i=n.type,r=n.comparisonValue;i===Kx&&(this.editCell(t.businessObject,qx(e,r)),this.setState({comparisonOperator:e}))}},{key:"onComparisonValueChange",value:function(e){var t=this.props.context.element,n=this.state,i=n.type,r=n.comparisonOperator;i===Kx&&(this.debouncedEditCell(t.businessObject,qx(r,e)),this.setState({comparisonValue:e}))}},{key:"onRangeStartTypeChange",value:function(e){var t=this.props.context.element,n=this.state,i=n.type,r=n.rangeStartValue,o=n.rangeEndValue,a=n.rangeEndType;i===Xx&&(this.editCell(t.businessObject,Wx(r,o,e,a)),this.setState({rangeStartType:e}))}},{key:"onRangeStartValueChange",value:function(e){var t=this.props.context.element,n=this.state,i=n.type,r=n.rangeEndValue,o=n.rangeStartType,a=n.rangeEndType;i===Xx&&(this.editCell(t.businessObject,Wx(e,r,o,a)),this.setState({rangeStartValue:e}))}},{key:"onRangeEndTypeChange",value:function(e){var t=this.props.context.element,n=this.state,i=n.type,r=n.rangeStartValue,o=n.rangeEndValue,a=n.rangeStartType;i===Xx&&(this.editCell(t.businessObject,Wx(r,o,a,e)),this.setState({rangeEndType:e}))}},{key:"onRangeEndValueChange",value:function(e){var t=this.props.context.element,n=this.state,i=n.type,r=n.rangeStartValue,o=n.rangeStartType,a=n.rangeEndType;i===Xx&&(this.editCell(t.businessObject,Wx(r,e,o,a)),this.setState({rangeEndValue:e}))}},{key:"renderComparison",value:function(e,t){return Ho(1,"div","comparison",[Ho(1,"h4","dms-heading",qo("Value"),2),Ho(1,"div","dms-fill-row",[zo(2,my,{noInput:!0,onChange:this.onComparisonOperatorChange,options:[{label:"Equals",value:"equals"},{label:"Less",value:"less"},{label:"Less or equals",value:"lessEquals"},{label:"Greater",value:"greater"},{label:"Greater or equals",value:"greaterEquals"}],value:e}),qo(" "),zo(2,Jg,{className:"comparison-number-input",onInput:this.onComparisonValueChange,type:"number",value:t})],4)],4)}},{key:"renderRange",value:function(e,t,n,i){var r=[{label:"Include",value:"include"},{label:"Exclude",value:"exclude"}];return Ho(1,"div","range",[Ho(1,"h4","dms-heading",qo("Start Value"),2),Ho(1,"div","dms-fill-row",[zo(2,my,{noInput:!0,onChange:this.onRangeStartTypeChange,options:r,value:n}),qo(" "),zo(2,Jg,{className:"range-start-number-input",onInput:this.onRangeStartValueChange,type:"number",value:e})],4),Ho(1,"h4","dms-heading",qo("End Value"),2),Ho(1,"div","dms-fill-row",[zo(2,my,{noInput:!0,onChange:this.onRangeEndTypeChange,options:r,value:i}),qo(" "),zo(2,Jg,{className:"range-end-number-input",onInput:this.onRangeEndValueChange,type:"number",value:t})],4)],4)}},{key:"render",value:function(){var e=this.state,t=e.type,n=e.comparisonOperator,i=e.comparisonValue,r=e.rangeStartValue,o=e.rangeEndValue,a=e.rangeStartType,s=e.rangeEndType,c=[{label:"Comparison",value:Kx},{label:"Range",value:Xx}];return Ho(1,"div","context-menu-container simple-number-edit",[Ho(1,"h3","dms-heading",qo("Edit Number"),2),Ho(1,"div","dms-fill-row",zo(2,my,{noInput:!0,onChange:this.onTypeChange,options:c,value:t}),2),t===Kx&&this.renderComparison(n,i),t===Xx&&this.renderRange(r,o,a,s)],0)}}]),Qx);function Qx(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Qx);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(Qx.__proto__||Object.getPrototypeOf(Qx)).call(this,e,t));n._modeling=t.injector.get("modeling");var i=zx(n.props.context.element.businessObject.text);n.state=i?{type:i.type,comparisonOperator:i.operator||"equals",comparisonValue:i.value||0,rangeStartValue:i.values?i.values[0]:0,rangeEndValue:i.values?i.values[1]:0,rangeStartType:i.start||"include",rangeEndType:i.end||"include"}:{type:Kx,comparisonOperator:"equals",comparisonValue:0,rangeStartValue:0,rangeEndValue:0,rangeStartType:"include",rangeEndType:"include"};var r=t.injector.get("debounceInput");return n.debouncedEditCell=r(n.editCell.bind(n)),n.editCell=n.editCell.bind(n),n.onComparisonOperatorChange=n.onComparisonOperatorChange.bind(n),n.onComparisonValueChange=n.onComparisonValueChange.bind(n),n.onTypeChange=n.onTypeChange.bind(n),n.onRangeStartTypeChange=n.onRangeStartTypeChange.bind(n),n.onRangeStartValueChange=n.onRangeStartValueChange.bind(n),n.onRangeEndTypeChange=n.onRangeEndTypeChange.bind(n),n.onRangeEndValueChange=n.onRangeEndValueChange.bind(n),n}var Zx=function(e,t,n){return t&&eE(e.prototype,t),n&&eE(e,n),e};function eE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tE=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(nE,os),Zx(nE,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onInput",value:function(e){var t=this.props.context.element;this.debouncedEditCell(t.businessObject,e),this.setState({value:e})}},{key:"render",value:function(){var e=this.state.value;return Ho(1,"div","context-menu-container simple-number-edit",[Ho(1,"h3","dms-heading",qo("Edit Number"),2),Ho(1,"h4","dms-heading",qo("Set Value"),2),zo(2,Jg,{onInput:this.onInput,type:"number",value:e})],4)}}]),nE);function nE(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,nE);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(nE.__proto__||Object.getPrototypeOf(nE)).call(this,e,t));n._modeling=t.injector.get("modeling");var i=zx(n.props.context.element.businessObject.text);n.state=i?{value:i.value}:{value:""};var r=t.injector.get("debounceInput");return n.debouncedEditCell=r(n.editCell.bind(n)),n.editCell=n.editCell.bind(n),n.onInput=n.onInput.bind(n),n}function iE(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,iE),t.registerProvider(function(e){var t=rE(e);return(Si(e.col)||Ti(e.col))&&("integer"===t||"long"===t||"double"===t)}),e.onGetComponent("context-menu",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if(function(e){return"integer"===e||"long"===e||"double"===e}(rE(e.element))){if(Si(e.element.col))return Jx;if(Ti(e.element.col))return tE}}})}function rE(e){return Si(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}iE.$inject=["components","simpleMode"];var oE={__depends__:[D_,dx],__init__:["simpleNumberEdit"],simpleNumberEdit:["type",iE]};function aE(e){if(!e||sE(e.trim()))return{type:"disjunction",values:[]};var t=e.split(","),n={type:"disjunction",values:[]},i="";if(t.forEach(function(e){/^"[^"]*"$/.test((i+=e).trim())?(n.values.push(i.trim()),i=""):i+=","}),!i)return n;n.type="negation",n.values=[],i="";var r=e.match(/^\s*not\((.*)\)\s*$/);return r&&((t=r[1].split(",")).forEach(function(e){/^"[^"]*"$/.test((i+=e).trim())?(n.values.push(i.trim()),i=""):i+=","}),!i)?n:void 0}function sE(e){return""===e}var cE=function(e,t,n){return t&&lE(e.prototype,t),n&&lE(e,n),e};function lE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var uE="disjunction",pE="negation",dE=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(fE,os),cE(fE,[{key:"editCell",value:function(e,t){this._modeling.editCell(e,t)}},{key:"onUnaryTestsTypeChange",value:function(e){var t=hE(this.state.items),n=this.props.context.element;e===uE?(this.editCell(n.businessObject,t.join(",")),this.setState({unaryTestsType:uE})):(this.editCell(n.businessObject,"not("+t.join(",")+")"),this.setState({unaryTestsType:pE}))}},{key:"onUnaryTestsListChanged",value:function(e){var t=hE(e),n=this.props.context.element;this.state.unaryTestsType===uE?this.editCell(n.businessObject,t.join(",")):this.editCell(n.businessObject,"not("+t.join(",")+")"),this.setState({items:e,isOutputValueInputChecked:!1})}},{key:"onOutputValueInputClick",value:function(){var e=this.props.context.element,t=this.state,n=t.inputValue,i=t.items,r=aE(n);!r||1<r.values.length||(this.editCell(e.businessObject,""+r.values.join("")),this.setState({items:i.map(function(e){return e.isChecked=!1,e}),isOutputValueInputChecked:!0}))}},{key:"onInput",value:function(e){var t=e.isValid,n=e.value,i=this.state.isOutputValueInputChecked;this.setState({inputValue:n});var r=this.props.context.element;!Si(r)&&t&&i&&this.debouncedEditCell(r.businessObject,n)}},{key:"onKeyDown",value:function(e){var t=e.isValid,n=e.event;if(function(e){return 13===e}(n.keyCode)){var i=Si(this.props.context.element.col);!i&&t||(n.stopPropagation(),n.preventDefault()),t&&(i?this.addUnaryTestsListItem():this.onOutputValueInputClick())}}},{key:"addUnaryTestsListItem",value:function(){var e=this.state,t=e.inputValue,n=e.items,i=e.unaryTestsType,r=aE(t);if(r){var o=this.props.context.element,a=hE(n),s=[].concat(a,r.values);i===uE?this.editCell(o.businessObject,s.join(",")):this.editCell(o.businessObject,"not("+s.join(",")+")");var c=n.concat(r.values.map(function(e){return{value:e,isChecked:!0,isRemovable:!0,group:"Custom Values"}}));this.setState({items:c,inputValue:""})}}},{key:"render",value:function(){var t=this,e=this.props.context.element,n=this.state,i=n.inputValue,r=n.isOutputValueInputChecked,o=n.items,a=n.unaryTestsType,s=[{label:"Match one",value:uE},{label:"Match none",value:pE}],c=Si(e.col),l=a===pE,u=!c&&0<o.length;return Ho(1,"div","simple-string-edit context-menu-container",[Ho(1,"h3","dms-heading",qo("Edit String"),2),c&&Ho(1,"p",null,zo(2,my,{noInput:!0,onChange:this.onUnaryTestsTypeChange,options:s,value:l?pE:uE},null,function(e){return t.selectNode=e}),2),zo(2,zy,{onChange:this.onUnaryTestsListChanged,items:o,type:c?"checkbox":"radio"}),Ho(1,"h4","dms-heading",qo(c?"Add Values":"Set Value"),2),Ho(1,"div","dms-fill-row",[u&&Ho(64,"input","cursor-pointer",null,1,{checked:r,onClick:this.onOutputValueInputClick,type:"radio",style:{marginRight:"8px"}}),zo(2,Yy,{className:"dms-block",onKeyDown:this.onKeyDown,onInput:this.onInput,placeholder:c?'"value", "value", ...':'"value"',type:"text",validate:function(e){if(!aE(e))return"Strings must be in double quotes."},value:i})],0)],0)}}]),fE);function fE(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,fE);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(fE.__proto__||Object.getPrototypeOf(fE)).call(this,e,t));n._modeling=t.injector.get("modeling");var i=aE(e.context.element.businessObject.text);i||(i={values:[],type:uE});var r=function(e){var t=Si(e)?e.inputValues:e.outputValues;return!t||sE(t.text)?[]:t.text.split(",").map(function(e){return e.trim()})}(e.context.element.col.businessObject),o=i.values.filter(function(e){return!mE(r,e)}),a=Si(e.context.element.col),s=r.map(function(e){return{value:e,isChecked:mE(i.values,e),isRemovable:!1,group:"Predefined Values"}});a&&(s=s.concat(o.map(function(e){return{value:e,isChecked:!0,isRemovable:!0,group:"Custom Values"}})));var c="";a||!i.values.length||mE(r,i.values[0])||(c=i.values[0]),n.state={items:s,unaryTestsType:i.type,inputValue:c,isOutputValueInputChecked:""!==c};var l=t.injector.get("debounceInput");return n.debouncedEditCell=l(n.editCell.bind(n)),n.editCell=n.editCell.bind(n),n.addUnaryTestsListItem=n.addUnaryTestsListItem.bind(n),n.onInput=n.onInput.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onOutputValueInputClick=n.onOutputValueInputClick.bind(n),n.onUnaryTestsListChanged=n.onUnaryTestsListChanged.bind(n),n.onUnaryTestsTypeChange=n.onUnaryTestsTypeChange.bind(n),n}function hE(e){return e.filter(function(e){return e.isChecked}).map(function(e){return e.value})}function mE(e,t){return-1!==e.indexOf(t)}function vE(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,vE),t.registerProvider(function(e){return(Si(e.col)||Ti(e.col))&&"string"===gE(e)}),e.onGetComponent("context-menu",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(e.contextMenuType&&"simple-mode-edit"===e.contextMenuType){if(!e.element)return;if("string"===gE(e.element))return dE}})}function gE(e){return Si(e.col)?e.col&&e.col.businessObject.inputExpression.typeRef:e.col&&e.col.businessObject.typeRef}vE.$inject=["components","simpleMode"];var yE={__depends__:[D_,dx],__init__:["simpleStringEdit"],simpleStringEdit:["type",vE]},bE=function(e,t,n){return t&&_E(e.prototype,t),n&&_E(e,n),e};function _E(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wE(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var xE=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(EE,kl),bE(EE,[{key:"getModules",value:function(){return[].concat(wE(kl._getModules()),wE(EE._getModules()))}}],[{key:"_getModules",value:function(){return[Pv,ag,Xm,xg,Ev,Og,Lg,zg,Dv,hb,Rb,Wb,Jb,D_,hb,m_,Iv,T_,Sm,Ww,rx,wm,dx,bx,Vx,oE,yE]}}]),EE);function EE(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EE),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(EE.__proto__||Object.getPrototypeOf(EE)).apply(this,arguments))}var CE=function(e,t,n){return t&&kE(e.prototype,t),n&&kE(e,n),e};function kE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function SE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TE(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}function OE(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var AE=(OE(IE,os),CE(IE,[{key:"componentWillUnmount",value:function(){this.setupChangeListeners({unbind:this.getDecision().id})}},{key:"getDecision",value:function(){return this._viewer.getDecision()}},{key:"setupChangeListeners",value:function(e){var t=e.bind,n=e.unbind,i=this.context.changeSupport;"string"==typeof n&&i.offElementsChanged(n,this.onElementsChanged),"string"==typeof t&&i.onElementsChanged(t,this.onElementsChanged)}},{key:"render",value:function(){var e=this.getDecision(),t=e.name,n=e.id;return Ho(1,"header","decision-properties",[zo(2,DE,{className:"decision-name editor",value:t,onChange:this.setDecisionName}),zo(2,RE,{className:"decision-id editor",value:n,validate:this.validateId,onChange:this.setDecisionId})],4)}}]),IE);function IE(e,t){SE(this,IE);var n=TE(this,(IE.__proto__||Object.getPrototypeOf(IE)).call(this,e,t));return n.onElementsChanged=function(){n.forceUpdate()},n.setDecisionName=function(e){n._modeling.editDecisionName(e)},n.setDecisionId=function(e){n.getDecision().id!==e&&n._modeling.editDecisionId(e)},n.validateId=function(e){return n_(n.getDecision(),e)},n._viewer=t.injector.get("viewer"),n._modeling=t.injector.get("modeling"),n.setupChangeListeners({bind:n.getDecision().id}),n}var DE=(OE(PE,Wv),CE(PE,[{key:"render",value:function(){return Ho(1,"h3",this.getClassName(),this.getEditor(),0)}}]),PE);function PE(){return SE(this,PE),TE(this,(PE.__proto__||Object.getPrototypeOf(PE)).apply(this,arguments))}var RE=(OE(NE,Wv),CE(NE,[{key:"render",value:function(){return Ho(1,"h5",this.getClassName(),this.getEditor(),0)}}]),NE);function NE(){return SE(this,NE),TE(this,(NE.__proto__||Object.getPrototypeOf(NE)).apply(this,arguments))}function ME(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ME),e.onGetComponent("viewer",2e3,function(){return AE})}ME.$inject=["components"];var jE={__depends__:[og],__init__:["decisionProperties"],decisionProperties:["type",ME]};function $E(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var LE="is not a registered action",BE=(function(e,t,n){return t&&$E(e.prototype,t),n&&$E(e,n),e}(VE,[{key:"trigger",value:function(e,t){if(!this._actions[e])throw FE(e,LE);return this._actions[e](t)}},{key:"register",value:function(e,t){var n=this;if("string"==typeof e)return this._registerAction(e,t);y(e,function(e,t){n._registerAction(t,e)})}},{key:"_registerAction",value:function(e,t){if(this.isRegistered(e))throw FE(e,"is already registered");this._actions[e]=t}},{key:"unregister",value:function(e){if(!this.isRegistered(e))throw FE(e,LE);this._actions[e]=void 0}},{key:"isRegistered",value:function(e){return!!this._actions[e]}}]),VE);function VE(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,VE),this._actions={undo:function(){e.undo()},redo:function(){e.redo()}}}function FE(e,t){return new Error(e+" "+t)}BE.$inject=["commandStack","eventBus"];var UE={__init__:["editorActions"],editorActions:["type",BE]};function HE(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function zE(e){return e.shiftKey}function qE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var WE=(function(e,t,n){return t&&qE(e.prototype,t),n&&qE(e,n),e}(GE,[{key:"bind",value:function(e){this.unbind(),this._node=e,yt.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")}},{key:"getBinding",value:function(){return this._node}},{key:"_fire",value:function(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})}},{key:"_registerDefaultBindings",value:function(){var e=this._listeners,n=this._editorActions;e.push(function(e,t){if(HE(t)&&!zE(t)&&90===e)return n.trigger("undo"),!0}),e.push(function(e,t){if(HE(t)&&(89===e||90===e&&zE(t)))return n.trigger("redo"),!0})}},{key:"addListener",value:function(e){this._listeners.unshift(e)}},{key:"removeListener",value:function(t){this._listeners=this._listeners.filter(function(e){return e!==t})}}]),GE);function GE(e,t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GE),this._init=function(){o._registerDefaultBindings(),o._fire("init")},this._destroy=function(){o._fire("destroy"),o.unbind(),o._listeners=null},this._keyHandler=function(e){var t,n,i=o._listeners,r=e.keyCode||e.charCode||-1;for(t=0;n=i[t];t++)if(n(r,e))return e.preventDefault(),void e.stopPropagation()},this.unbind=function(){var e=o._node;e&&(o._fire("unbind"),yt.unbind(e,"keydown",o._keyHandler,!0)),o._node=null},this._config=e||{},this._eventBus=t,this._editorActions=n,this._listeners=[],t.on("viewer.destroy",this._destroy),t.on("viewer.init",this._init),t.on("attach",function(){o._config.bindTo&&o.bind(e.bindTo)}),t.on("detach",this.unbind)}WE.$inject=["config.keyboard","eventBus","editorActions"];var YE={__depends__:[UE],__init__:["keyboard"],keyboard:["type",WE]},KE=function(e,t,n){return t&&XE(e.prototype,t),n&&XE(e,n),e};function XE(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var JE=[{label:"FEEL",value:"feel"},{label:"JUEL",value:"juel"},{label:"JavaScript",value:"javascript"},{label:"Groovy",value:"groovy"},{label:"Python",value:"python"},{label:"JRuby",value:"jruby"}],QE=[{label:"string",value:"string"},{label:"boolean",value:"boolean"},{label:"integer",value:"integer"},{label:"long",value:"long"},{label:"double",value:"double"},{label:"date",value:"date"}],ZE=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(eC,os),KE(eC,[{key:"setVariableName",value:function(e){this._modeling.editVariableName(e),this.setState({name:e})}},{key:"setVariableType",value:function(e){""===e?(this._modeling.editVariableType(void 0),this.setState({typeRef:void 0})):(this._modeling.editVariableType(e),this.setState({typeRef:e}))}},{key:"setExpressionLanguage",value:function(e){""===e?(this._modeling.editExpressionLanguage(void 0),this.setState({expressionLanguage:void 0})):(this._modeling.editExpressionLanguage(e),this.setState({expressionLanguage:e}))}},{key:"render",value:function(){var e=this.state,t=e.expressionLanguage,n=e.name,i=e.typeRef;return Ho(1,"div","literal-expression-properties",Ho(1,"table",null,[Ho(1,"tr",null,[Ho(1,"td",null,qo("Variable Name:"),2),Ho(1,"td",null,zo(2,Jg,{className:"variable-name-input",onInput:this.setVariableName,placeholder:"name",value:n||""}),2)],4),Ho(1,"tr",null,[Ho(1,"td",null,qo("Variable Type:"),2),Ho(1,"td",null,Ho(1,"div","dms-fill-row",zo(2,my,{onChange:this.setVariableType,options:QE,value:i,className:"variable-type-select dms-block"}),2),2)],4),Ho(1,"tr",null,[Ho(1,"td",null,qo("Expression Language:"),2),Ho(1,"td",null,Ho(1,"div","dms-fill-row",zo(2,my,{onChange:this.setExpressionLanguage,options:JE,value:t,className:"expression-language-select dms-block"}),2),2)],4)],4),2)}}]),eC);function eC(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,eC);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(eC.__proto__||Object.getPrototypeOf(eC)).call(this,e,t));n._viewer=t.injector.get("viewer"),n._modeling=t.injector.get("modeling");var i=n._viewer.getDecision();return n.state={name:i.variable.name,typeRef:i.variable.typeRef,expressionLanguage:function(e){return e&&e.expressionLanguage?e.expressionLanguage.toLowerCase():void 0}(i.literalExpression)},n.setVariableName=n.setVariableName.bind(n),n.setVariableType=n.setVariableType.bind(n),n.setExpressionLanguage=n.setExpressionLanguage.bind(n),n}function tC(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,tC),e.onGetComponent("viewer",500,function(){return ZE})}tC.$inject=["components"];var nC={__depends__:[og,YE],__init__:["literalExpressionProperties"],literalExpressionProperties:["type",tC]};function iC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var rC=(function(e,t,n){return t&&iC(e.prototype,t),n&&iC(e,n),e}(oC,[{key:"getHandlers",value:function(){return oC._getHandlers()}},{key:"getDecision",value:function(){return this._viewer.getDecision()}},{key:"editDecisionName",value:function(e){var t={element:this.getDecision(),properties:{name:e}};this._commandStack.execute("updateProperties",t)}},{key:"editDecisionId",value:function(e){var t={element:this.getDecision(),properties:{id:e}};this._commandStack.execute("updateProperties",t)}},{key:"editLiteralExpressionText",value:function(e){var t={element:this.getDecision().literalExpression,properties:{text:e}};this._commandStack.execute("updateProperties",t)}},{key:"editExpressionLanguage",value:function(e){var t={element:this.getDecision().literalExpression,properties:{expressionLanguage:e}};this._commandStack.execute("updateProperties",t)}},{key:"editVariableName",value:function(e){var t={element:this.getDecision().variable,properties:{name:e}};this._commandStack.execute("updateProperties",t)}},{key:"editVariableType",value:function(e){var t={element:this.getDecision().variable,properties:{typeRef:e}};this._commandStack.execute("updateProperties",t)}}],[{key:"_getHandlers",value:function(){return{updateProperties:Ow}}}]),oC);function oC(e,t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,oC),this._commandStack=e,this._viewer=t,(this._eventBus=n).on("viewer.init",function(){!function(e,n){y(e,function(e,t){n.registerHandler(t,e)})}(i.getHandlers(),e)})}rC.$inject=["commandStack","viewer","eventBus"];var aC={__init__:["idChangeBehavior","modeling"],commandStack:["type",yf],idChangeBehavior:["type",G_],modeling:["type",rC]},sC=function(e,t,n){return t&&cC(e.prototype,t),n&&cC(e,n),e};function cC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function lC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}function pC(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var dC=(pC(fC,os),sC(fC,[{key:"getLiteralExpression",value:function(){return this._viewer.getDecision().literalExpression}},{key:"onElementsChanged",value:function(){this.forceUpdate()}},{key:"editLiteralExpressionText",value:function(e){this._modeling.editLiteralExpressionText(e)}},{key:"render",value:function(){var e=this.getLiteralExpression().text;return zo(2,hC,{className:"textarea editor",value:e,onChange:this.editLiteralExpressionText})}}]),fC);function fC(e,t){lC(this,fC);var n=uC(this,(fC.__proto__||Object.getPrototypeOf(fC)).call(this,e,t));n._modeling=t.injector.get("modeling"),n._viewer=t.injector.get("viewer"),n.editLiteralExpressionText=n.editLiteralExpressionText.bind(n),n.onElementsChanged=n.onElementsChanged.bind(n);var i=n.getLiteralExpression().id;return t.changeSupport.onElementsChanged(i,n.onElementsChanged),n}var hC=(pC(mC,Wv),sC(mC,[{key:"render",value:function(){return Ho(1,"div",this.getClassName(),this.getEditor(),0)}}]),mC);function mC(){return lC(this,mC),uC(this,(mC.__proto__||Object.getPrototypeOf(mC)).apply(this,arguments))}function vC(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,vC),e.onGetComponent("viewer",function(){return dC})}vC.$inject=["components"];var gC={__depends__:[og],__init__:["textarea"],textarea:["type",vC]},yC=function(e,t,n){return t&&bC(e.prototype,t),n&&bC(e,n),e};function bC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _C(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var wC=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(xC,Ru),yC(xC,[{key:"getModules",value:function(){return[].concat(_C(Ru._getModules()),_C(xC._getModules()))}}],[{key:"_getModules",value:function(){return[jE,YE,nC,aC,gC]}}]),xC);function xC(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,xC),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(xC.__proto__||Object.getPrototypeOf(xC)).apply(this,arguments))}var EC=function(e,t,n){return t&&CC(e.prototype,t),n&&CC(e,n),e};function CC(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var kC=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+qe(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(SC,zu),EC(SC,[{key:"_getViewProviders",value:function(){return[{id:"drd",constructor:pm,opens:"dmn:Definitions"},{id:"decisionTable",constructor:xE,opens:function(e){return ki(e,"dmn:Decision")&&e.decisionTable}},{id:"literalExpression",constructor:wC,opens:function(e){return ki(e,"dmn:Decision")&&e.literalExpression}}]}},{key:"_getInitialView",value:function(e){for(var t,n=0;n<e.length;n++){var i=e[n],r=i.element;if(ki(r,"dmn:Decision"))return i;if(ki(r,"dmn:Definitions")&&(t=i,Mu(r)))return i}return t||e[0]}}]),SC);function SC(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SC),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==qe(t)&&"function"!=typeof t?e:t}(this,(SC.__proto__||Object.getPrototypeOf(SC)).apply(this,arguments))}var TC=document.addEventListener;document.addEventListener=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("focusin"!==t[0])return TC.apply(document,t)},OC.Modeler=kC,OC.NavigatedViewer=$u}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:146}],60:[function(e,t,n){"use strict";t.exports=["$animate","$rootScope",function(s,c){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(e,t,a){return function(t,n){var i,r;function o(e){i&&(s.leave(i),i=void 0),r&&(r.$destroy(),r=void 0),e&&(r=t.$new(),a(r,function(e){i=e,s.enter(e,n.parent(),n)}))}t.$on("authentication.changed",function(e,t){o(t)}),o(c.authentication)}}}}]},{}],61:[function(e,t,n){"use strict";t.exports=["$animate","$rootScope",function(s,c){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(e,t,a){return function(t,n){var i,r;function o(e){i&&(s.leave(i),i=void 0),r&&(r.$destroy(),r=void 0),e&&(r=t.$new(),a(r,function(e){i=e,s.enter(e,n.parent(),n)}))}t.$on("authentication.changed",function(e,t){o(!t)}),o(!c.authentication)}}}}]},{}],62:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular");e("angular-route"),e("angular-resource"),e("angular-translate");var r=e("../util/index"),o=e("./page/login"),a=e("./directives/camIfLoggedIn"),s=e("./directives/camIfLoggedOut"),c=e("./service/authenticationService"),l=i.module("cam.commons.auth",[i.module("ngRoute").name,r.name,"pascalprecht.translate"]);l.config(o).run(["$rootScope","$location",function(n,i){var r;n.$on("authentication.login.required",function(t){n.$evalAsync(function(){var e=i.url();"/login"===e||t.defaultPrevented||(r=e,i.url("/login"))})}),n.$on("authentication.login.success",function(e){n.$evalAsync(function(){e.defaultPrevented||(i.url(r||"/").replace(),r=null)})})}]).run(["$cacheFactory","$rootScope","$location","$timeout","Notifications","$translate",function(t,n,i,r,o,a){n.$on("authentication.logout.success",function(e){n.$evalAsync(function(){e.defaultPrevented||(t.get("$http").removeAll(),i.url("/login"))}),r(function(){o.addMessage({status:a.instant("AUTH_LOGOUT_SUCCESSFUL"),message:a.instant("AUTH_LOGOUT_THANKS",{dayContext:a.instant(function(){var e=new Date;if(5<=e.getDay())return"AUTH_DAY_CONTEXT_WEEKEND";var t=e.getHours();switch(!0){case 4<=t&&t<7:return"AUTH_DAY_CONTEXT_MORNING";case 7<=t&&t<12:return"AUTH_DAY_CONTEXT_DAY";case 12<=t&&t<17:return"AUTH_DAY_CONTEXT_AFTERNOON";case 17<=t&&t<22:return"AUTH_DAY_CONTEXT_EVENING";case 22<=t||t<4:return"AUTH_DAY_CONTEXT_NIGHT"}return"AUTH_DAY_CONTEXT_DAY"}())}),exclusive:!0})})})}]).run(["$rootScope","Notifications","$translate","shouldDisplayAuthenticationError",function(e,t,n,i){e.$on("authentication.login.required",function(){i()&&t.addError({status:n.instant("AUTH_FAILED_TO_DISPLAY_RESOURCE"),message:n.instant("AUTH_AUTHENTICATION_FAILED"),http:!0,exclusive:["http"]})})}]).run(["AuthenticationService",function(){}]).directive("camIfLoggedIn",a).directive("camIfLoggedOut",s).service("AuthenticationService",c),t.exports=l},{"../util/index":100,"./directives/camIfLoggedIn":60,"./directives/camIfLoggedOut":61,"./page/login":63,"./service/authenticationService":64,"angular-resource":"angular-resource","angular-route":"angular-route","angular-translate":"angular-translate","camunda-bpm-sdk-js/vendor/angular":53}],63:[function(e,t,n){"use strict";var s=e("jquery"),i=["$scope","$rootScope","AuthenticationService","Notifications","$location","$translate",function(t,e,n,i,r,o){if(e.authentication)return r.path("/");e.showBreadcrumbs=!1;var a=s('form[name="signinForm"] [autofocus]')[0];a&&a.focus(),t.login=function(){return n.login(t.username,t.password).then(function(){i.clearAll()}).catch(function(e){delete t.username,delete t.password,i.addError({status:o.instant("PAGE_LOGIN_FAILED"),message:e.data&&e.data.message||o.instant("PAGE_LOGIN_ERROR_MSG"),scope:t,exclusive:!0})})}}];t.exports=["$routeProvider",function(e){e.when("/login",{template:'\x3c!-- # CE - camunda-commons-ui/lib/auth/page/login.html --\x3e\n<div class="form-signin-container">\n  <form class="form-signin"\n        ng-submit="login()"\n        name="signinForm"\n        request-aware>\n    <h2 class="form-signin-heading">\n      {{ \'PAGE_LOGIN_PLEASE_SIGN_IN\' | translate }}\n    </h2>\n\n    <div notifications-panel\n         ng-if="signinForm.$dirty"\n         class="notifications-panel"></div>\n\n    <input autofocus\n           tabindex="1"\n           type="text"\n           class="form-control"\n           placeholder="{{ \'PAGE_LOGIN_USERNAME\' | translate }}"\n           auto-fill\n           required\n           ng-model="username"></input>\n    <input tabindex="2"\n           type="password"\n           class="form-control"\n           placeholder="{{ \'PAGE_LOGIN_PASSWORD\' | translate }}"\n           auto-fill\n           required\n           ng-model="password"></input>\n    <button tabindex="3"\n            class="btn btn-lg btn-primary"\n            type="submit">{{ \'PAGE_LOGIN_SIGN_IN_ACTION\' | translate }}</button>\n  </form>\n</div>\n\x3c!-- / CE - camunda-commons-ui/lib/auth/page/login.html --\x3e\n',controller:i})}]},{jquery:"jquery"}],64:[function(e,t,n){"use strict";e("camunda-bpm-sdk-js/vendor/angular");var p=e("jquery"),d=e("../util/authentication");t.exports=["$rootScope","$q","$http","Uri","$route",function(i,r,o,a,n){function s(e,t,n){i.$broadcast(e,t,n)}function c(e){if(200!==e.status)return r.reject(e);var t=e.data;return new d({name:t.userId,authorizedApps:t.authorizedApps})}function l(e){s("authentication.changed",i.authentication=e)}var u;this.updateAuthentication=l,this.login=function(e,t){var n=p.param({username:e,password:t});return o({method:"POST",url:a.appUri("admin://auth/user/:engine/login/:appName"),data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(c).then(function(e){return l(e),s("authentication.login.success",e),e},function(e){return s("authentication.login.failure",e),r.reject(e)})},this.logout=function(e){return o.post(a.appUri("admin://auth/user/"+(e||":engine")+"/logout")).then(function(e){l(null),s("authentication.logout.success",e)},function(e){return s("authentication.logout.failure",e),r.reject(e)})},i.$on("authentication.changed",function(e,t){u=r[t?"when":"reject"](t),n.reload()}),this.getAuthentication=function(){return u||(u=i.authentication?r.when(i.authentication):o.get(a.appUri("admin://auth/user/:engine")).then(c).then(function(e){return l(e),e})),u},i.$on("$routeChangeStart",function(e,t){t.authentication&&(t.resolve||(t.resolve={}),t.resolve.authentication||(t.resolve.authentication=["AuthenticationService",function(e){return e.getAuthentication().catch(function(e){return"optional"===t.authentication?null:(s("authentication.login.required",t),r.reject(e))})}]))})}]},{"../util/authentication":65,"camunda-bpm-sdk-js/vendor/angular":53,jquery:"jquery"}],65:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular");function r(e){i.extend(this,e)}r.prototype.canAccess=function(e){return this.authorizedApps&&-1!==this.authorizedApps.indexOf(e)},t.exports=r},{"camunda-bpm-sdk-js/vendor/angular":53}],66:[function(e,t,n){"use strict";function b(e,t){var n=Math.ceil(e/t),i=""+n;return(n=(parseInt(i[0],10)+1)*Math.pow(10,i.length-1))*t}function i(){}function _(e){return Math.log(e)/Math.log(10)}function r(e){this.moment=e.moment,this.abbreviateNumber=e.abbreviateNumber,this.resize(e.width,e.height,e.disableSelection),this.lineColors=e.lineColors,this.rulersColor=e.rulersColor||"#666",this.selectingColor=e.selectingColor||"rgba(0,0,64,0.1)",this.unselectedColor=e.unselectedColor||"rgba(0,0,0,0.1)",this.handleColorHover=e.handleColorHover||"#999",this.handleColor=e.handleColor||"#aaa",this.fontSize=e.fontSize||12,this.fontFamily=e.fontFamily||"Arial",this.lineWidth=e.lineWidth||1,this.isLogScale=e.isLogScale||!1,this.valueLabelsCount=e.valueLabelsCount||8,this.timespan=e.timespan||"day",this.interval=e.interval||900,this.handleWidth=e.handleWidth||4,this.timestampFormat=e.timestampFormat||"YYYY-MM-DDTHH:mm:ss",this.timeLabelFormats=e.timeLabelFormats||{day:"HH:mm",week:"dd DD",month:"DD MMM"},this.tickSize=e.tickSize||10,this.textPadding=e.textPadding||3,this.onselection=e.onselection||i}var o=(t.exports=r).prototype;o._mouseIsDown=!1,o._selectedIn=null,o._selectedOut=null,o._eventHandlers={},o._eventHandlers.mouseout=function(e){this.drawMouseHint().drawSelection(e)},o._eventHandlers.mousemove=function(e){var t=this.cursorPosition(e);this._hoveredSelectionHandle=this.hoveredSelectionHandle(e),this.canvas.style.cursor=this._hoveredSelectionHandle?"ew-resize":"default","in"===this._grabbedSelectionHandle?this._selectedIn=t.left:"out"===this._grabbedSelectionHandle&&(this._selectedOut=t.left),this.drawMouseHint(t.left,t.top).drawSelection(e)},o._eventHandlers.mousedown=function(e){var t=this.cursorPosition(e),n=this.verticalScaleX(),i=this.innerW();this._hoveredSelectionHandle=this.hoveredSelectionHandle(e),this.canvas.style.cursor=this._hoveredSelectionHandle?"ew-resize":"default",this._hoveredSelectionHandle?this._grabbedSelectionHandle=this._hoveredSelectionHandle:(this._mouseIsDown||(this._selectedIn=Math.min(Math.max(t.left,n),n+i),this._selectedOut=null),this._mouseIsDown=!0),this.drawMouseHint(t.left,t.top).drawSelection(e)},o._eventHandlers.mouseup=function(e){var t=this.cursorPosition(e),n=this.verticalScaleX(),i=this.innerW();this._grabbedSelectionHandle&&(this._grabbedSelectionHandle=!1),this._mouseIsDown&&(this._selectedOut=Math.max(Math.min(t.left,n+i),n)),this._mouseIsDown=!1,Math.abs(this._selectedIn-this._selectedOut)<=1&&(this._selectedIn=this._selectedOut=null,this.onselection({start:null,end:null,in:null,out:null})),this.drawMouseHint(t.left,t.top).drawSelection(e),this._selectedIn&&this._selectedOut&&this.onselection({start:this.momentAtX(this._selectedIn),end:this.momentAtX(this._selectedOut),in:this._selectedIn,out:this._selectedOut})},o._eventHandlers.wheel=function(e){if(this._selectedIn&&this._selectedOut){e.preventDefault();var t=this.cursorPosition(e);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var n=Math.max(Math.round(Math.abs(this._selectedOut-this._selectedIn)/10),1);0<e.deltaY?(this._selectedIn+=n,this._selectedOut-=n):(this._selectedIn-=n,this._selectedOut+=n),this.drawMouseHint(t.left,t.top).drawSelection(e),this.onselection({start:this.momentAtX(this._selectedIn),end:this.momentAtX(this._selectedOut),in:this._selectedIn,out:this._selectedOut})}},o.cursorPosition=function(e){var t=this.canvas.getBoundingClientRect();return{left:e.clientX-t.left,top:e.clientY-t.top}},o.bindEvents=function(){return Object.keys(o._eventHandlers).forEach(function(e){this.canvas.addEventListener(e,o._eventHandlers[e].bind(this),!1)},this),this},o.unbindEvents=function(){return Object.keys(o._eventHandlers).forEach(function(e){this.canvas.removeEventListener(e,o._eventHandlers[e].bind(this),!1)},this),this},o._clearCache=function(){this._verticalLabels=null,this._verticalScaleX=null,this._horizontalScaleY=null,this._innerW=null,this._innerH=null,this._selectedIn=null,this._selectedOut=null},o.resize=function(e,t,n){return this._clearCache(),this.canvas||(this.canvas=document.createElement("canvas"),this.offCanvas=document.createElement("canvas"),n||this.bindEvents()),this.canvas.width=this.offCanvas.width=e,this.canvas.height=this.offCanvas.height=t,this.ctx=this.canvas.getContext("2d"),this.offCtx=this.offCanvas.getContext("2d"),this._selectedIn=null,this._selectedOut=null,"function"==typeof this.onselection&&this.onselection({start:null,end:null,in:null,out:null}),this},o.max=function(e){var n=0;return arguments.length?(this.data[e]||[]).forEach(function(e){n=Math.max(e.value,n)},this):(this.data||[]).forEach(function(e,t){n=Math.max(n,this.max(t))},this),n},o.min=function(e){var n=this.max();return arguments.length?(n=this.max(e),(this.data[e]||[]).forEach(function(e){n=Math.min(e.value,n)},this)):(this.data||[]).forEach(function(e,t){n=Math.min(n,this.min(t))},this),n},o.momentAtX=function(e){var t=this.moment,n=this.labelFrom,i=(this.labelTo-n)/this.innerW();return t(new Date(i*(e-this.verticalScaleX())+this.labelFrom),t.ISO_8601)},o.valueAtY=function(e){return e},o.setData=function(e,t,n){this._clearCache();var r=this.moment,i=this.abbreviateNumber;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.offCtx.clearRect(0,0,this.offCanvas.width,this.offCanvas.height),t&&(this.timespan=t),n&&(this.interval=n);var o=[[{value:0,timestamp:r().format(this.dateformat)}]];e&&e.length&&e[0]||(e=o),this.data=e;var a,s=this.timespan,c=this.timestampFormat,l=b(this.max(),this.valueLabelsCount),u=this.timeLabelFormats;this.isLogScale&&(this.valueLabelsCount=this.maxLog()+1),this.valueLabels=[];for(var p=this.valueLabelsCount;0<=p;p--)a=this.isLogScale?p&&Math.pow(10,p-1):i(p*l/this.valueLabelsCount)||0,this.valueLabels.push(a);if(this.timeLabels=[],e.length&&e[0]&&e[0].length&&e[0][0].timestamp){var d=r(),f=this.labelTo=d.clone();"day"===s?f.startOf("hour").add(1,"hour"):"week"===s?f.startOf("day").add(1,"day"):"month"===s&&f.startOf("week").add(1,"week");var h,m,v=this.labelFrom=f.clone().subtract(1,s),g=1;"day"===s?(h=12,m="hour",g=2):"week"===s?(h=7,m="day"):"month"===s&&(h=4,m="week");for(var y=0;y<=h;y++)this.timeLabels.push(v.clone().add(y*g,m).format(u[s]))}return this.data=e.map(function(e){e&&e.length||(e=[{value:0}]),1===e.length&&(e=[e[0],e[0]]);var n=r(e[e.length-1].timestamp,c),i=n-void 0;return e.map(function(e){var t=r(e.timestamp,c);return e.positionPercent=(n-t)/i,e})}),this.draw()},o._verticalLabels=null,o.verticalLabels=function(){if(this._verticalLabels)return this._verticalLabels;var t=this.ctx,e=this.timeLabels,n=this.textPadding,i=0,r=this.innerW();return e.forEach(function(e){i+=t.measureText(e).width+2*n}),this._verticalLabels=r<i,this._verticalLabels},o._innerW=null,o.innerW=function(){if(this._innerW)return this._innerW;var e=this.lineWidth,t=Math.max(2*e,10),n=this.ctx,i=n.canvas.width,r=0,o=this.textPadding;return this.timeLabels.forEach(function(e){r=Math.max(r,n.measureText(e).width+2*o)}),this._innerW=i-(t+this.verticalScaleX()),this.verticalLabels()||(this._innerW-=r/2),this._innerW},o._innerH=null,o.innerH=function(){if(this._innerH)return this._innerH;var e=this.lineWidth,t=Math.max(2*e,10),n=this.ctx.canvas.height;return this._innerH=n-(t+this.horizontalScaleY()),this._innerH},o._verticalScaleX=null,o.verticalScaleX=function(){if(this._verticalScaleX)return this._verticalScaleX;var t=0,n=this.ctx,e=this.valueLabels,i=this.textPadding,r=this.tickSize;return e.forEach(function(e){t=Math.max(t,n.measureText(e||"0").width+4*i+r)}),t=Math.round(Math.max(t,r+i))+.5,this._verticalScaleX=t},o._horizontalScaleY=null,o.horizontalScaleY=function(){if(this._horizontalScaleY)return this._horizontalScaleY;var t=this.ctx,e=this.timeLabels,n=this.fontSize,i=this.tickSize,r=this.textPadding,o=this.verticalLabels(),a=0;return a=o?(e.forEach(function(e){a=Math.max(a,t.measureText(e).width+4*r+i)}),Math.round(Math.max(a,i+r))):n+2*r+i,this._horizontalScaleY=a},o.drawMouseHint=function(e,t){var n=this.ctx,i=this.innerW(),r=n.canvas.height,o=n.canvas.width,a=Math.max(2*this.lineWidth,10),s=this.verticalScaleX(),c=this.horizontalScaleY(),l=this.tickSize;if(n.strokeStyle=this.rulersColor,n.fillStyle=this.rulersColor,n.lineWidth=1,n.lineCap="round",n.lineJoin="round",n.font=this.fontSize+"px "+this.fontFamily,n.clearRect(0,0,o,r),n.drawImage(this.offCanvas,0,0,o,r,0,0,o,r),e&&s<e&&e<=s+i){var u=this.momentAtX(e).format(this.timestampFormat),p=n.measureText(u).width+2*a,d=o-a<e+p?o-(a+p):e,f=a<t?t:a;n.fillText(u,d,f),n.beginPath(),n.moveTo(e+.5,r-(c+l)),n.lineTo(e+.5,r-c),n.stroke(),n.closePath()}return this},o.drawSelection=function(e){var t=this.ctx,n=this.innerH(),i=this.innerW(),r=this.verticalScaleX(),o=Math.max(2*this.lineWidth,10),a=this.cursorPosition(e),s=this.handleWidth,c=this.selectingColor,l=this.unselectedColor,u=t.fillStyle;if(this._mouseIsDown)return t.fillStyle=c,this._selectedIn<a.left?t.fillRect(this._selectedIn,o,Math.min(a.left-this._selectedIn,r+i-this._selectedIn),n):t.fillRect(Math.max(a.left,r),o,Math.min(this._selectedIn-a.left,i),n),t.fillStyle=u,this;if(this._selectedIn&&this._selectedOut){var p=t.lineWidth,d=t.strokeStyle;if(this._selectedIn<r&&(this._selectedIn=r),this._selectedOut>r+i&&(this._selectedOut=r+i),t.fillStyle=l,this._selectedOut&&this._selectedIn>this._selectedOut){var f=this._selectedOut;this._selectedOut=this._selectedIn,this._selectedIn=f}t.fillRect(r,o,this._selectedIn-r,n),t.fillRect(this._selectedOut,o,i+r-this._selectedOut,n),t.beginPath(),t.moveTo(this._selectedIn+.5,n+o),t.lineTo(this._selectedIn+.5,o+.5),t.lineTo(this._selectedOut+.5,o+.5),t.lineTo(this._selectedOut+.5,n+o),t.stroke(),t.lineWidth=s+2,t.strokeStyle=this.rulersColor,t.beginPath(),t.moveTo(this._selectedIn,o+10),t.lineTo(this._selectedIn,80),t.stroke(),t.closePath(),t.lineWidth=s,t.strokeStyle="in"===this._hoveredSelectionHandle?this.handleColorHover:this.handleColor,t.beginPath(),t.moveTo(this._selectedIn,o+10),t.lineTo(this._selectedIn,80),t.stroke(),t.lineWidth=s+2,t.strokeStyle="#333",t.beginPath(),t.moveTo(this._selectedOut,o+10),t.lineTo(this._selectedOut,80),t.stroke(),t.closePath(),t.lineWidth=s,t.strokeStyle="out"===this._hoveredSelectionHandle?this.handleColorHover:this.handleColor,t.beginPath(),t.moveTo(this._selectedOut,o+10),t.lineTo(this._selectedOut,80),t.stroke(),t.lineWidth=p,t.fillStyle=u,t.strokeStyle=d}return this},o.hoveredSelectionHandle=function(e){if(!this._selectedIn||!this._selectedOut)return!1;var t=this.cursorPosition(e),n=this.ctx,i=Math.max(2*this.lineWidth,10),r=!1,o=this.handleWidth+4,a=n.lineWidth,s=n.strokeStyle;return n.lineWidth=1,n.strokeStyle="rgba(0,0,0,0)",n.beginPath(),n.rect(this._selectedIn-o/2,i+10,o,80),n.stroke(),n.closePath(),n.isPointInPath(t.left,t.top)&&(r="in"),n.beginPath(),n.rect(this._selectedOut-o/2,i+10,o,80),n.stroke(),n.closePath(),n.isPointInPath(t.left,t.top)&&(r="out"),n.lineWidth=a,n.strokeStyle=s,r},o.maxLog=function(){var e=this.max()||1;return Math.ceil(_(e))},o.drawRulers=function(){var e,t,n,i,r,o=this.offCtx,a=this.lineWidth,s=Math.max(2*a,10),c=this.abbreviateNumber,l=this.timeLabels,u=this.valueLabels,p=o.canvas.height,d=this.textPadding,f=this.tickSize,h=this.verticalScaleX(),m=this.horizontalScaleY(),v=this.innerW(),g=this.innerH(),y=this.verticalLabels();o.strokeStyle=this.rulersColor,o.fillStyle=this.rulersColor,o.lineWidth=1,o.lineCap="round",o.lineJoin="round",o.font=this.fontSize+"px "+this.fontFamily;var b=p-m+.5;for(o.beginPath(),o.moveTo(h-f,b),o.lineTo(h+v,b),o.stroke(),o.beginPath(),o.moveTo(h,s),o.lineTo(h,b+f),o.stroke(),y?(o.textAlign="right",o.textBaseline="middle"):(o.textAlign="center",o.textBaseline="top"),l.forEach(function(e,t){var n=h+t*(v/(l.length-1));o.beginPath(),o.moveTo(n,b),o.lineTo(n,b+f),o.stroke(),y?(o.save(),o.translate(n,p-(m-(f+d))),o.rotate(-Math.PI/2),o.fillText(l[t],0,0),o.restore()):o.fillText(l[t],n,p-(m-(f+d)))}),e=g/(u.length-1),i=this.maxLog(),o.textAlign="right",o.textBaseline="middle",t=0;t<u.length;t++)n=u[t],r=this.isLogScale?g-(n&&g/(i+1)*(_(n)+1))+s:Math.round(s+e*t)-.5,o.fillText(c(n)||0,h-(f+d),r),t<u.length-1&&(o.beginPath(),o.moveTo(h-f,r),o.lineTo(h,r),o.stroke());return this},o.draw=function(){var c=this.offCtx,l=this.lineWidth,n=Math.max(2*l,10),e=c.canvas.width,u=c.canvas.height,p=this.verticalScaleX(),d=this.horizontalScaleY(),t=this.innerW(),i=this.innerH();c.clearRect(0,0,e,u);var f=this.labelFrom,r=this.labelTo-f,h=this.interval,o=u-d+.5,a=this.isLogScale,s=this.max(),m=this.maxLog(),v=b(s,this.valueLabelsCount);function g(e){if(!e)return o;var t=e&&i/(m+1)*(_(e)+1);return a?i-t+n:i-i/v*e+n}function y(e){return p+(e-f)/r*t}return this.data.forEach(function(e,t){var n,i,r,o,a=this.moment,s=this.lineColors[t];c.lineWidth=l,c.strokeStyle=s,c.beginPath(),e.forEach(function(e,t){(r=a(e.timestamp,a.ISO_8601))<=f?o=e:(0===t&&f<r&&(c.moveTo(p,u-d),c.lineTo(y(r.clone().subtract(h,"seconds")),u-d)),o&&(n=p,i=g(o.value),c.lineTo(n,i),o=null),n=y(r),i=g(e.value),c.lineTo(n,i))}),a()-r>=1e3*h&&(n=y(r.clone().add(h,"seconds")),i=u-d,c.lineTo(n,i),n=y(a()),c.lineTo(n,i)),c.stroke(),c.closePath(),1<=e.length&&(c.beginPath(),c.fillStyle=s,c.arc(n,i,2*l,0,2*Math.PI),c.fill(),c.closePath())},this),this.ctx.drawImage(this.offCanvas,0,0,e,u,0,0,e,u),this.drawRulers().drawMouseHint()},o.remove=function(){this.unbindEvents(),this.canvas.parentNode.removeChild(this.canvas)}},{}],67:[function(e,t,n){"use strict";t.exports=["$interval",function(o){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){var r=o(function(){var e=t.val();e!==i.$viewValue&&(i.$setViewValue(e),i.$setPristine()),"function"!=typeof document.contains||document.contains(t[0])?"function"!=typeof document.contains&&o.cancel(r):o.cancel(r)},500)}}}]},{}],68:[function(e,t,n){"use strict";t.exports=["$compile","$parse",function(r,o){return{restrict:"A",link:function(e,t,n){var i=o(n.ngBindHtml);e.$watch(function(){return(i(e)||"").toString()},function(){r(t.contents())(e)})}}}]},{}],69:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){var r=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;i.$parsers.unshift(function(e){return r.test(e)||!e?(i.$setValidity("email",!0),e):(i.$setValidity("email",!1),null)})}}}},{}],70:[function(e,t,n){"use strict";var l=e("camunda-bpm-sdk-js/vendor/angular"),r=e("jquery"),i=["$scope","$http","$location","$window","Uri","Notifications","$translate",function(t,e,n,i,r,o,a){var s=r.appUri(":engine"),c={};e.get(r.appUri("engine://engine/")).then(function(e){t.engines=e.data,l.forEach(t.engines,function(e){c[e.name]=e}),t.currentEngine=c[s],t.currentEngine||(o.addError({status:a.instant("DIRECTIVE_ENGINE_SELECT_STATUS_NOT_FOUND"),message:a.instant("DIRECTIVE_ENGINE_SELECT_MESSAGE_NOT_FOUND"),scope:t}),n.path("/dashboard"))}).catch(l.noop)}];t.exports=function(){return{template:'<li class="dropdown engine-select"\n    ng-show="engines.length > 1 && currentEngine"\n    uib-dropdown>\n\x3c!-- # CE - camunda-commons-ui/lib/directives/engineSelect.html --\x3e\n  <a href\n     class="dropdown-toggle"\n     uib-dropdown-toggle>\n    <span class="glyphicon glyphicon-info-sign glyphicon glyphicon-info-sign "\n          uib-tooltip="{{ \'DIRECTIVE_ENGINE_SELECT_TOOLTIP\' | translate }}"\n          tooltip-placement="bottom"></span>\n    {{ currentEngine.name }}\n  </a>\n  <ul uib-dropdown-menu class="dropdown-menu dropdown-menu-right">\n    <li ng-repeat="(id, engine) in engines"\n        ng-class="{ active: currentEngine.name === engine.name }">\n      <a ng-href="{{ \'app://../\' + engine.name + \'/\' | uri }}">\n        {{ engine.name }}\n      </a>\n    </li>\n  </ul>\n\x3c!-- / CE - camunda-commons-ui/lib/directives/engineSelect.html --\x3e\n</li>\n',replace:!0,controller:i,link:function(e,t,n){var i;e.$watch(n.ngShow,function(e){e&&!i&&(i=r('<li class="divider-vertical"></li>').insertAfter(t)),!e&&i&&(i.remove(),i=null)}),e.$on("$destroy",function(){i&&i.remove()})}}}},{"camunda-bpm-sdk-js/vendor/angular":53,jquery:"jquery"}],71:[function(e,t,n){"use strict";var r=e("camunda-bpm-sdk-js/vendor/angular");t.exports=["$translate",function(i){return{restrict:"E",scope:{unserializeCallback:"@unserialize",serializeCallback:"@serialize",initializeCallback:"@initialize",enterCallback:"@enter",validateCallback:"@validate",submitCallback:"@submit",successCallback:"@success",errorCallback:"@error",leaveCallback:"@leave",context:"=",property:"@",defaultValue:"@default"},template:'\x3c!-- # CE - camunda-commons-ui/lib/directives/inPlaceTextField.html --\x3e\n<div in-place-text-field-root>\n  <div ng-if="!editing">\n    {{ context[property] }}\n    <span class="edit-toggle"\n          ng-click="enter()">\n      <span class="glyphicon glyphicon-pencil"></span>\n    </span>\n  </div>\n\n  <form ng-if="editing"\n        ng-submit="submit()"\n        class="inline-edit"\n        name="inPlaceTextFieldForm"\n        novalidate\n        request-aware>\n\n    <fieldset>\n      \x3c!-- {{ value }} --\x3e\n      <input name="value"\n             ng-model="value"\n             type="text"\n             class="in-place-edit form-control"\n             placeholder="{{ placeholder }}"\n             autofocus\n             ng-required="isRequired">\n    </fieldset>\n\n    <div class="inline-edit-footer">\n\n      <p class="error" ng-show="error">\n        {{ error.message }}\n      </p>\n\n      <div class="btn-group">\n        <button type="submit"\n                class="btn btn-sm btn-primary"\n                ng-disabled="inPlaceTextFieldForm.$invalid">\n          <span class="glyphicon glyphicon-ok "></span>\n        </button>\n        <button type="button"\n                class="btn btn-sm btn-default"\n                ng-click="leave()">\n          <span class="glyphicon glyphicon-ban-circle"></span>\n        </button>\n      </div>\n    </div>\n\n  </form>\n</div>\n\x3c!-- / CE - camunda-commons-ui/lib/directives/inPlaceTextField.html --\x3e\n',link:function(e,t,n){if(e.isRequired=null!==n.required&&void 0!==n.required,!e.property)throw new Error(i.instant("DIRECTIVE_INPLACE_TEXTFIELD_ERROR_MSG"));(e.initializeCallback?e.$parent[e.initializeCallback]:function(e,t){t()})(e,function(){!function(e){e.value=e.context[e.property]||e.defaultValue||null,e.enter=function(){e.editing=!0,e.value=e.context[e.property]},e.submit=function(){e.context[e.property]!==this.value&&(e.context[e.property]=this.value,r.isFunction(e.$parent[e.submitCallback])&&e.$parent[e.submitCallback](this)),e.leave()},e.leave=function(){e.editing=!1}}(e)})}}}]},{"camunda-bpm-sdk-js/vendor/angular":53}],72:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular"),r=e("./email"),o=e("./engineSelect"),a=e("./autoFill"),s=e("./inPlaceTextField"),c=e("./notificationsPanel"),l=e("./passwordRepeat"),u=e("./showIfAuthorized"),p=e("./compileTemplate"),d=e("./nl2br"),f=e("./instantTypeahead"),h=e("../util/index");e("../../vendor/ui-bootstrap-tpls-2.5.0-camunda");var m=i.module("camunda.common.directives",["ui.bootstrap",h.name]);m.directive("email",r),m.directive("autoFill",a),m.directive("engineSelect",o),m.directive("camInPlaceTextField",s),m.directive("notificationsPanel",c),m.directive("passwordRepeat",l),m.directive("showIfAuthorized",u),m.directive("compileTemplate",p),m.directive("nl2br",d),m.directive("instantTypeahead",f),m.config(["$uibModalProvider","$uibTooltipProvider",function(e,t){e.options={animation:!0,backdrop:!0,keyboard:!0},t.options({animation:!0,popupDelay:100,appendToBody:!0})}]),t.exports=m},{"../../vendor/ui-bootstrap-tpls-2.5.0-camunda":135,"../util/index":100,"./autoFill":67,"./compileTemplate":68,"./email":69,"./engineSelect":70,"./inPlaceTextField":71,"./instantTypeahead":73,"./nl2br":74,"./notificationsPanel":75,"./passwordRepeat":76,"./showIfAuthorized":77,"camunda-bpm-sdk-js/vendor/angular":53}],73:[function(e,t,n){"use strict";var r="[$empty$]";t.exports=[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$parsers.unshift(function(e){var t=e||r;return i.$viewValue=t}),i.$parsers.push(function(e){return e===r?"":e}),e.instantTypeahead=function(e,t){return t===r||-1<(""+e).toLowerCase().indexOf((""+t).toLowerCase())},t.bind("click",function(){i.$setViewValue(" "===i.$viewValue?"":" "),t.triggerHandler("input")}),t.bind("input",function(){i.$setViewValue(i.$viewValue)})}}}]},{}],74:[function(e,t,n){"use strict";t.exports=[function(){return{scope:{original:"=nl2br"},link:function(e,t){t.text(e.original||"");var n=t.html().replace(/\n/g,"<br/>");t.html(n)}}}]},{}],75:[function(e,t,n){"use strict";e("angular-sanitize");t.exports=["Notifications","$filter","$sce",function(r,o,a){return{restrict:"EA",scope:{filter:"=notificationsFilter"},template:'<div class="notifications">  <div uib-alert ng-repeat="notification in notifications" class="alert" ng-class="notificationClass(notification)">    <button type="button" class="close" ng-click="removeNotification(notification)">&times;</button>    <strong class="status" ng-bind-html="trustHTML(notification.status)" compile-template></strong>     <strong ng-if="notification.message">:</strong>    <span class="message" ng-bind-html="trustHTML(notification.message)" compile-template></span>  </div></div>',link:function(e){var t=e.filter;var n=e.notifications=[],i={add:function(e){return!!function(e){return!t||!!o("filter")([e],t).length}(e)&&(n.push(e),!0)},remove:function(e){var t=n.indexOf(e);-1!=t&&n.splice(t,1)}};r.registerConsumer(i),e.removeNotification=function(e){n.splice(n.indexOf(e),1)},e.notificationClass=function(e){var t="info";return-1<["danger","error","success","warning","info"].indexOf(e.type)&&(t=e.type),"alert-"+t},e.trustHTML=function(e){return a.trustAsHtml(e)},e.$on("$destroy",function(){r.unregisterConsumer(i)})}}}]},{"angular-sanitize":"angular-sanitize"}],76:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",require:"ngModel",link:function(n,e,t,i){var r=t.passwordRepeat;i.$parsers.unshift(function(e){var t=e==n.$eval(r);return i.$setValidity("passwordRepeat",t),e}),n.$watch(r,function(e){var t=e==i.$viewValue;i.$setValidity("passwordRepeat",t),t||i.$setViewValue(i.$viewValue)})}}}},{}],77:[function(e,t,n){"use strict";var d={application:0,user:1,group:2,"group membership":3,authorization:4};t.exports=["$animate","AuthorizationResource",function(u,p){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(e,c,l){return function(t,n){var i,r,e=c.authPermission,o=c.authResourceName,a=t.$eval(c.authResourceId),s="true"===c.authInverse;p.check(function(e,t,n){var i={};return i.permissionName=e,i.resourceName=t,i.resourceType=d[t],n&&(i.resourceId=n),i}(e,o,a)).$promise.then(function(e){i&&(u.leave(i),i=void 0),r&&(r.$destroy(),r=void 0),(e.authorized&&!s||!e.authorized&&s)&&(r=t.$new(),l(r,function(e){i=e,u.enter(e,n.parent(),n)}))}).catch(function(){})}}}}]},{}],78:[function(e,t,n){"use strict";t.exports=function(){return function(e,t){if(e)return e<950?e:(t||(t=1),function(e,t){t=Math.pow(10,t);for(var n=["k","M","G","T","P","E","Z","Y"],i=n.length-1;0<=i;i--){var r=Math.pow(10,3*(i+1));if(r<=e)return 1e3==(e=Math.round(e*t/r)/t)&&i<n.length-1&&(e=1,i++),e+=n[i]}return e}(e,t))}}},{}],79:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular"),r=e("camunda-bpm-sdk-js/vendor/moment");e("angular-translate");var o=i.module("cam.commons.filter.date",["pascalprecht.translate"]);o.provider("camDateFormat",function(){var n={normal:"LLL",short:"LL",long:"LLLL"};this.setDateFormat=function(e,t){n[t=t||"normal"]=e},this.$get=function(){return function(e){return n[e=e||"normal"]}}}),o.config(["$filterProvider",function(e){e.register("camDate",["$translate","camDateFormat",function(e,n){return function(e,t){return e?("number"==typeof e&&(e=new Date(e)),r(e,r.ISO_8601).format(n(t))):""}}])}]),t.exports=o},{"angular-translate":"angular-translate","camunda-bpm-sdk-js/vendor/angular":53,"camunda-bpm-sdk-js/vendor/moment":55}],80:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular"),r=e("./auth/index"),o=e("./util/index"),a=e("./pages/index"),s=e("./plugin/index"),c=e("./directives/index"),l=e("./resources/index"),u=e("./search/index"),p=e("./services/index"),d=e("./widgets/index"),f=e("./filter/date/index");e("../vendor/ui-bootstrap-tpls-2.5.0-camunda"),e("angular-translate"),e("angular-cookies"),e("angular-animate"),t.exports=i.module("cam.commons",[r.name,o.name,a.name,s.name,c.name,l.name,u.name,p.name,d.name,f.name,"ui.bootstrap","pascalprecht.translate","ngCookies","ngAnimate"])},{"../vendor/ui-bootstrap-tpls-2.5.0-camunda":135,"./auth/index":62,"./directives/index":72,"./filter/date/index":79,"./pages/index":81,"./plugin/index":82,"./resources/index":86,"./search/index":87,"./services/index":95,"./util/index":100,"./widgets/index":115,"angular-animate":"angular-animate","angular-cookies":"angular-cookies","angular-translate":"angular-translate","camunda-bpm-sdk-js/vendor/angular":53}],81:[function(e,t,n){"use strict";var l=e("camunda-bpm-sdk-js/vendor/angular");e("angular-route");var d=e("jquery"),i=l.module("camunda.common.pages",["ngRoute"]);var r=["$rootScope","$location","Notifications","AuthenticationService","shouldDisplayAuthenticationError","$translate",function(a,s,t,c,l,u){function p(e){e.http=!0,e.exclusive=["http"],t.addError(e)}a.$on("httpError",function(e,t){var n=t.status,i=t.data;switch(n){case 500:i&&i.message?p({status:u.instant("PAGES_STATUS_SERVER_ERROR"),message:i.message,exceptionType:i.exceptionType}):p({status:u.instant("PAGES_STATUS_SERVER_ERROR"),message:u.instant("PAGES_MSG_SERVER_ERROR")});break;case 0:p({status:u.instant("PAGES_STATUS_REQUEST_TIMEOUT"),message:u.instant("PAGES_MSG_REQUEST_TIMEOUT")});break;case 401:-1!==s.absUrl().indexOf("/setup/#")?s.path("/setup"):(function(e){var t="camunda Login";-1!==e.indexOf("/cockpit/")?t="camunda Cockpit":-1!==e.indexOf("/tasklist/")?t="camunda Tasklist":-1!==e.indexOf("/admin/")&&(t="camunda Admin"),d("head title").text(t)}(s.absUrl()),c.updateAuthentication(null),a.$broadcast("authentication.login.required"));break;case 403:if("AuthorizationException"==i.type){var r;if(i.resourceId)r=u.instant("PAGES_MSG_ACCESS_DENIED_RESOURCE_ID",{permissionName:i.permissionName.toLowerCase(),resourceName:i.resourceName.toLowerCase(),resourceId:i.resourceId});else{var o=i.missingAuthorizations.map(function(e){return"'"+e.permissionName+"' "+e.resourceName+"s"});r=u.instant("PAGES_MSG_ACCESS_DENIED",{missingAuths:o.join()})}p({status:u.instant("PAGES_STATUS_ACCESS_DENIED"),message:r})}else p({status:u.instant("PAGES_STATUS_ACCESS_DENIED"),message:u.instant("PAGES_MSG_ACTION_DENIED")});break;case 404:l()&&p({status:u.instant("PAGES_STATUS_NOT_FOUND"),message:u.instant("PAGES_MSG_NOT_FOUND")});break;default:p({status:u.instant("PAGES_STATUS_COMMUNICATION_ERROR"),message:u.instant("PAGES_MSG_COMMUNICATION_ERROR",{status:n})})}})}],o=["$scope","$http","$location","$window","Uri","Notifications","$translate",function(t,e,n,i,r,o,a){var s=r.appUri(":engine"),c={};e.get(r.appUri("engine://engine/")).then(function(e){t.engines=e.data,l.forEach(t.engines,function(e){c[e.name]=e}),t.currentEngine=c[s],t.currentEngine||(o.addError({status:a.instant("PAGES_STATUS_NOT_FOUND"),message:a.instant("PAGES_MSG_ENGINE_NOT_EXISTS"),scope:t}),n.path("/"))}).catch(l.noop),t.$watch("currentEngine",function(e){e&&s!==e.name&&(i.location.href=r.appUri("app://../"+e.name+"/"))})}];t.exports=i.run(r).controller("ProcessEngineSelectionController",o).controller("AuthenticationController",["$scope","$window","$cacheFactory","$location","Notifications","AuthenticationService",function(e,t,n,i,r,o){e.logout=function(){o.logout()}}]).controller("NavigationController",["$scope","$location",function(e,t){e.activeClass=function(e){return-1!=t.absUrl().indexOf(e)?"active":""}}])},{"angular-route":"angular-route","camunda-bpm-sdk-js/vendor/angular":53,jquery:"jquery"}],82:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular"),r=e("./view"),o=e("./service"),a=i.module("cockpit.plugin",[]);r(a),o(a),t.exports=a},{"./service":83,"./view":84,"camunda-bpm-sdk-js/vendor/angular":53}],83:[function(e,t,n){"use strict";var c=e("camunda-bpm-sdk-js/vendor/angular"),l=e("jquery");t.exports=function(i){var r;i._camPlugins={};var n=[],e=l("base").attr("cam-exclude-plugins")||"";function o(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}e&&(c.forEach(e.split(","),function(e){var t="*";2<=(e=e.split(":")).length&&o(e[1])&&(t=o(e.pop())),(e=o(e.shift()))&&n.push(e+":"+t)}),r=new RegExp("("+n.join("|")+")","i"));var t=[function(){var o={};this.registerPlugin=function(e,t,n){(i._camPlugins[t+":"+n.id]=!1,r&&r.test(t+":"+n.id))||(i._camPlugins[t+":"+n.id]=!0,function(e,t,n){!function(e,t){for(var n,i=void 0!==t.priority?t.priority:-1/0,r=0;n=e[r];r++)if(void 0===n.priority||n.priority<i)return e.splice(r,0,t);e.push(t)}(n[e]=n[e]||[],t)}(t,n,o[e]=o[e]||{}))},this.$get=["$filter",function(r){return{getAllProviders:function(e){return o[e]||{}},getProviders:function(e,t){if(!e)throw new Error("No type given");var n=t.component;if(!n)throw new Error("No component given");var i=(o[e]||{})[n];return t.id&&(i=r("filter")(i,{id:t.id})),i||[]},getProvider:function(e,t){return(this.getProviders(e,t)||[])[0]}}}]}];i.provider("Plugins",t);var a=["PluginsProvider",function(n){this.registerDefaultView=function(e,t){r&&r.test(e+":"+t.id)||n.registerPlugin("view",e,t)},this.registerView=function(e,t){n.registerPlugin("view",e,t)},this.$get=["Uri","Plugins",function(t,n){var e=!1;function i(){e||(function(e){c.forEach(e,function(e){c.forEach(e,function(e){e.url&&(e.url=t.appUri(e.url))})})}(n.getAllProviders("view")),e=!0)}return{getProviders:function(e){return i(),n.getProviders("view",e)},getProvider:function(e){return(this.getProviders(e)||[])[0]}}}]}];i.provider("Views",a);var s=["PluginsProvider",function(n){this.registerData=function(e,t){n.registerPlugin("data",e,t)},this.$get=["Plugins","$injector",function(t,i){return{getProviders:function(e){return t.getProviders("data",e)},getProvider:function(e){return(this.getProviders(e)||[])[0]},instantiateProviders:function(e,t){var n=this.getProviders({component:e});c.forEach(n,function(e){i.instantiate(e.controller,t)})}}}]}];i.provider("Data",s)}},{"camunda-bpm-sdk-js/vendor/angular":53,jquery:"jquery"}],84:[function(e,t,n){"use strict";var h=e("camunda-bpm-sdk-js/vendor/angular");t.exports=function(e){e.directive("view",["$q","$http","$templateCache","$anchorScroll","$compile","$controller",function(n,i,u,p,d,f){return{restrict:"ECA",terminal:!0,link:function(a,s,e){var c;function l(){c&&(c.$destroy(),c=null)}function t(){s.html(""),l()}a.$watch(e.provider,function(){var r=a.$eval(e.provider),o=a.$eval(e.vars)||{};if(!r)return void t();n.when(function(e){var t=e.template;if(t)return t;var n=e.url;return i.get(n,{cache:u}).then(function(e){return e.data}).catch(h.noop)}(r)).then(function(e){s.html(e),l();var t,n=d(s.contents()),i={};c=a.$new(!0),o&&(o.read&&h.forEach(o.read,function(t){c[t]=a[t],a.$watch(t,function(e){c[t]=e})}),o.write&&h.forEach(o.write,function(t){c.$watch(t,function(e){a[t]=e})})),r.controller&&(i.$scope=c,t=f(r.controller,i),s.children().data("$ngControllerController",t)),n(c),c.$emit("$pluginContentLoaded"),p()},function(e){throw t(),e})})}}}])}},{"camunda-bpm-sdk-js/vendor/angular":53}],85:[function(e,t,n){"use strict";t.exports=["$resource","Uri",function(e,t){return e(t.appUri("engine://engine/:engine/authorization/:action"),{action:"@action"},{check:{method:"GET",params:{action:"check"},cache:!0},count:{method:"GET",params:{action:"count"}},create:{method:"POST",params:{action:"create"}}})}]},{}],86:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular"),r=e("./authorizationResource"),o=i.module("camunda.common.resources",[]);o.factory("AuthorizationResource",r),t.exports=o},{"./authorizationResource":85,"camunda-bpm-sdk-js/vendor/angular":53}],87:[function(e,t,n){"use strict";var o=e("camunda-bpm-sdk-js/vendor/angular"),i=["$location","$rootScope",function(i,n){var r=!1;n.$on("$routeUpdate",function(e,t){r?r=!1:n.$broadcast("$routeChanged",t)}),n.$on("$routeChangeSuccess",function(){r=!1});function e(){return i.search.apply(i,arguments)}return e.updateSilently=function(e,t){var n=i.absUrl();o.forEach(e,function(e,t){i.search(t,e)}),i.absUrl()!=n&&(r=!0),t&&i.replace()},e}],r=o.module("camunda.common.search",[]);r.factory("search",i),t.exports=r},{"camunda-bpm-sdk-js/vendor/angular":53}],88:[function(e,t,n){"use strict";var l=e("camunda-bpm-sdk-js/vendor/angular"),r=e("camunda-bpm-sdk-js/lib/angularjs/index");t.exports=["$rootScope","$timeout","$q","$cookies",function(a,s,i,c){function t(e){this._wrapped=new r.Client.HttpClient(e)}return l.forEach(["post","get","load","put","del","options","head"],function(n){t.prototype[n]=function(e,t){var r=s(function(){},1e5);!function(e){var t=e.headers=e.headers||{},n=c.get("XSRF-TOKEN");n&&(t["X-XSRF-TOKEN"]=n)}(t);var o=l.isFunction(t.done)?t.done:l.noop;return t.done=function(e,t){function n(){if(e&&401===e.status)return a.$broadcast("authentication.changed",null),a.authentication=null,void a.$broadcast("authentication.login.required");o(e,t)}var i=a.$$phase;"$apply"!==i&&"$digest"!==i?a.$apply(n):n(),s.cancel(r)},i.when(this._wrapped[n](e,t))}}),l.forEach(["on","once","off","trigger"],function(e){t.prototype[e]=function(){this._wrapped[e].apply(this,arguments)}}),t}]},{"camunda-bpm-sdk-js/lib/angularjs/index":7,"camunda-bpm-sdk-js/vendor/angular":53}],89:[function(e,t,n){"use strict";t.exports=["$rootScope",function(e){var t=0;return{logStarted:function(){t||e.$broadcast("requestStarted"),t++},logFinished:function(){--t||e.$broadcast("requestFinished")}}}]},{}],90:[function(e,t,n){"use strict";t.exports=["$route","$q","$location","Notifications","$translate",function(l,u,p,d,f){return{getByRouteParam:function(e,o){var a=u.defer(),s=l.current.params[e],t=o.resolve,c=o.name||"entity";function n(e){a.resolve(e)}function i(e){var t,n,i,r=!1;404===e.status?(t=f.instant("SERVICES_RESOURCE_RESOLVER_ID_NOT_FOUND",{resourceName:c,id:s}),n=!0,"function"==typeof(i=o.redirectTo||"/dashboard")&&(r=!0,i(e))):i=401===e.status?(t=f.instant("SERVICES_RESOURCE_RESOLVER_AUTH_FAILED"),"/login"):(t=f.instant("SERVICES_RESOURCE_RESOLVER_RECEIVED_STATUS",{status:e.status}),"/dashboard"),r||(p.path(i),n&&p.replace(),d.addError({status:f.instant("SERVICES_RESOURCE_RESOLVER_DISPLAY_FAILED",{resourceName:c}),message:t,http:!0,exclusive:["http"]})),a.reject(t)}var r=t(s);if(r.$promise&&r.$promise.then)r=r.$promise.then(function(e){n(e)},i);else{if(!r.then)throw new Error(f.instant("SERVICES_RESOURCE_RESOLVER_NO_PROMISE"));r=r.then(n,i)}return a.promise}}}]},{}],91:[function(e,t,n){"use strict";t.exports=["$window",function(e){var n=e.localStorage,i=JSON.parse(n.getItem("camunda")||"{}");return{get:function(e,t){return void 0!==i[e]?i[e]:t},set:function(e,t){i[e]=t,n.setItem("camunda",JSON.stringify(i))},remove:function(e){delete i[e],n.setItem("camunda",JSON.stringify(i))}}}]},{}],92:[function(e,t,n){"use strict";t.exports=["$timeout",function(a){return function(n,i){var r,o=function(){var e=this,t=arguments;o.$loading=!0,r&&a.cancel(r),r=a(function(){r=null,o.$loading=!1,n.apply(e,t)},i)};return o}}]},{}],93:[function(e,t,n){"use strict";t.exports=function(){return function(e){return encodeURIComponent(e).replace(/%2F/g,"%252F").replace(/\*/g,"%2A").replace(/%5C/g,"%255C")}}},{}],94:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/moment");t.exports=function(){return function(e){return e?i(e,i.ISO_8601).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):e}}},{"camunda-bpm-sdk-js/vendor/moment":55}],95:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular"),r=e("./../util/index"),o=e("./escape"),a=e("./debounce"),s=e("./RequestLogger"),c=e("./ResourceResolver"),l=e("./HttpClient"),u=e("./unescape"),p=e("./fixDate"),d=e("./unfixDate"),f=e("./shouldDisplayAuthenticationError"),h=i.module("camunda.common.services",[r.name]);h.filter("escape",o),h.factory("debounce",a),h.factory("RequestLogger",s),h.factory("ResourceResolver",c),h.factory("camAPIHttpClient",l),h.factory("unescape",u),h.factory("fixDate",p),h.factory("unfixDate",d),h.factory("shouldDisplayAuthenticationError",f),h.config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","RequestLogger",function(n,i,r){return r.logStarted(),{response:function(e){return r.logFinished(),e},responseError:function(e){r.logFinished();var t={status:parseInt(e.status),response:e,data:e.data};return n.$broadcast("httpError",t),i.reject(e)}}}])}]),h.config(["$httpProvider","$windowProvider",function(e,t){var n=t.$get().location.href.match(/\/app\/([\w-]+)\/([\w-]+)\//);if(!n)throw new Error("no process engine selected");e.defaults.headers.get={"X-Authorized-Engine":n[2]}}]),t.exports=h},{"./../util/index":100,"./HttpClient":88,"./RequestLogger":89,"./ResourceResolver":90,"./debounce":92,"./escape":93,"./fixDate":94,"./shouldDisplayAuthenticationError":96,"./unescape":97,"./unfixDate":98,"camunda-bpm-sdk-js/vendor/angular":53}],96:[function(e,t,n){"use strict";t.exports=["$location",function(t){return function(){var e=t.path();return"/login"!==e&&"/dashboard"!==e&&"/"!==e&&"/welcome"!==e}}]},{}],97:[function(e,t,n){"use strict";t.exports=function(){return function(e){var t=e.replace(/%252F/g,"%2F").replace(/%255C/g,"%5C").replace(/%2A/g,"*");return decodeURIComponent(t)}}},{}],98:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/moment");t.exports=function(){return function(e){return e?i(e,i.ISO_8601).format("YYYY-MM-DDTHH:mm:ss"):e}}},{"camunda-bpm-sdk-js/vendor/moment":55}],99:[function(e,t,n){"use strict";var i=["http://www.omg.org/spec/DMN/20151101/dmn11.xsd"];function r(e,t){return e.replace('xmlns="'+t+'"','xmlns="http://www.omg.org/spec/DMN/20151101/dmn.xsd"')}t.exports=function(e){return i.reduce(r,e)}},{}],100:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular"),r=e("./uriFilter"),o=e("./uriProvider"),a=e("./notifications");t.exports=i.module("cam.commons.util",[]).filter("uri",r).provider("Uri",o).service("Notifications",a)},{"./notifications":102,"./uriFilter":103,"./uriProvider":104,"camunda-bpm-sdk-js/vendor/angular":53}],101:[function(e,t,n){"use strict";t.exports={load:function(){return requirejs.s.contexts._.defined}}},{}],102:[function(e,t,n){"use strict";var l=e("camunda-bpm-sdk-js/vendor/angular");function u(e){var t=document.createTextNode(e),n=document.createElement("div");return n.appendChild(t),n.innerHTML}t.exports=["$filter","$timeout",function(r,c){return{notifications:[],consumers:[],addError:function(e){e.type||(e.type="danger"),this.add(e)},addMessage:function(e){e.type||(e.type="info"),this.add(e)},add:function(t){var e=this,n=this.notifications,i=this.consumers,r=t.exclusive;if(t.unsafe||(t.status=u(t.status),t.message=u(t.message||"")),r)if("boolean"==typeof r)this.clearAll();else{var o={};l.forEach(r,function(e){o[e]=t[e]}),e.clear(o)}n.push(t);for(var a,s=i.length-1;(a=i[s])&&!a.add(t);s--);t.duration&&c(function(){t.scope&&delete t.scope,e.clear(t)},t.duration),t.scope&&t.scope.$on("$destroy",function(){delete t.scope,e.clear(t)})},clear:function(e){var n=this.notifications,i=this.consumers,t=[];"string"==typeof e&&(e={status:e}),(t=r("filter")(n,e)).push(e),l.forEach(t,function(t){var e=n.indexOf(t);-1!=e&&n.splice(e,1),l.forEach(i,function(e){e.remove(t)})})},clearAll:function(){for(var e=this.notifications;e.length;){var t=e.pop();this.clear(t)}},registerConsumer:function(e){this.consumers.push(e)},unregisterConsumer:function(e){var t=this.consumers,n=t.indexOf(e);-1!=n&&t.splice(n,1)}}}]},{"camunda-bpm-sdk-js/vendor/angular":53}],103:[function(e,t,n){"use strict";t.exports=["Uri",function(t){return function(e){return t.appUri(e)}}]},{}],104:[function(e,t,n){"use strict";var r=e("camunda-bpm-sdk-js/vendor/angular");t.exports=function(){var t=/[\w]+:\/\/|:[\w]+/g,i={};this.replace=function(e,t){i[e]=t},this.$get=["$injector",function(n){return{appUri:function(e){return e.replace(t,function(e){var t=i[e];return void 0===t?e:((r.isFunction(t)||r.isArray(t))&&(t=n.invoke(t)),t)})}}}]}},{"camunda-bpm-sdk-js/vendor/angular":53}],105:[function(e,t,n){"use strict";var i=e("../../bpmn-js"),r={};t.exports={generateViewer:function(e){var t=e.key&&r[e.key];if(t)return t.cached=!0,t;var n=i;e.disableNavigation&&(n=Object.getPrototypeOf(i.prototype).constructor);return new n(e)},cacheViewer:function(e){return e.key&&(r[e.key]=e.viewer)}}},{"../../bpmn-js":57}],106:[function(e,t,n){"use strict";var A=e("../../util/moduleLoader"),I=e("camunda-bpm-sdk-js/vendor/angular"),D=e("../../util/viewer");t.exports=["$q","$document","$compile","$location","$rootScope","search","debounce",function(x,E,C,k,S,T,O){return{scope:{diagramData:"=",key:"@",control:"=?",disableNavigation:"&",onLoad:"&",onClick:"&",onMouseEnter:"&",onMouseLeave:"&",bpmnJsConf:"=?"},template:'<div uib-alert class="alert alert-danger"\n     ng-if="error">\n  <span>\n    <strong>{{ \'CAM_WIDGET_BPMN_VIEWER_ERROR\' | translate }}</strong>\n  </span>\n  <span>\n   {{ error.message }}\n  </span>\n</div>\n\n<div ng-show="!error">\n\n  <div ng-if="!loaded" class="placeholder-container">\n    <div class="placeholder-content">\n      <span class="glyphicon glyphicon-refresh animate-spin"></span>\n      <span class="loading-text">{{ \'CAM_WIDGET_BPMN_VIEWER_LOADING\' | translate }}</span>\n    </div>\n  </div>\n\n  <div class="diagram-holder" ng-class=\'{"diagram-holder": true, "grab-cursor": !disableNavigation && !grabbing, "djs-cursor-move": !disableNavigation && grabbing}\'></div>\n\n  <div class="actions"></div>\n\n  <div ng-if="!disableNavigation"\n       class="navigation zoom">\n    <button class="btn btn-default in"\n            title="zoom in"\n            ng-click="zoomIn()">\n      <span class="glyphicon glyphicon-plus"></span>\n    </button>\n    <button class="btn btn-default out"\n            title="zoom out"\n            ng-click="zoomOut()">\n      <span class="glyphicon glyphicon-minus"></span>\n    </button>\n  </div>\n\n  <div ng-if="!disableNavigation"\n       class="navigation reset">\n    <button class="btn btn-default"\n            title="reset zoom"\n            ng-click="resetZoom()">\n      <span class="glyphicon glyphicon-screenshot"></span>\n    </button>\n  </div>\n</div>\n',link:function(o,i){var r,s=null,c=null,e=i[0].querySelector(".diagram-holder");function t(){e.appendChild(s._container)}o.grabbing=!1,o.disableNavigation=o.$eval(o.disableNavigation),o.control=o.control||{},o.control.highlight=function(e){c.addMarker(e,"highlight"),i.find('[data-element-id="'+e+'"]>.djs-outline').attr({rx:"14px",ry:"14px"})},o.control.clearHighlight=function(e){c.removeMarker(e,"highlight")},o.control.isHighlighted=function(e){return c.hasMarker(e,"highlight")},o.control.createBadge=function(e,t){var n,i=s.get("overlays");t.html?n=t.html:(n=document.createElement("span"),t.color&&(n.style["background-color"]=t.color),t.tooltip&&(n.setAttribute("tooltip",t.tooltip),n.setAttribute("tooltip-placement","top")),t.text&&n.appendChild(document.createTextNode(t.text)));var r=i.add(e,{position:t.position||{bottom:0,right:0},show:{minZoom:-1/0,maxZoom:1/0},html:n});return C(n)(o),r},o.control.removeBadges=function(e){s.get("overlays").remove({element:e})},o.control.removeBadge=function(e){s.get("overlays").remove(e)},o.control.getViewer=function(){return s},o.control.scrollToElement=function(e){var t,n,i,r,o=s.get("elementRegistry").get(e),a=c.viewbox();t=Math.max(a.height,o.height),n=Math.max(a.width,o.width),i=Math.min(Math.max(a.x,o.x-a.width+o.width),o.x),r=Math.min(Math.max(a.y,o.y-a.height+o.height),o.y),c.viewbox({x:i,y:r,width:n,height:t})},o.control.getElement=function(e){return s.get("elementRegistry").get(e)},o.control.getElements=function(e){return s.get("elementRegistry").filter(e)},o.loaded=!1,o.control.isLoaded=function(){return o.loaded},o.control.addAction=function(e){var t=i.find(".actions"),n=e.html;t.append(n),C(n)(o)},o.control.addImage=function(r,o,a){return function(e){var t=E[0].body,n=x.defer(),i=I.element("<img>").css("position","absolute").css("left","-9999em").css("top","-9999em").attr("src",e)[0];return i.onload=function(){n.resolve(i)},i.onerror=function(){n.reject(i)},t.appendChild(i),n.promise}(r).then(function(e){var t=e.offsetWidth,n=e.offsetHeight,i=E[0].createElementNS("http://www.w3.org/2000/svg","image");return i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r),i.setAttributeNS(null,"width",t),i.setAttributeNS(null,"height",n),i.setAttributeNS(null,"x",o),i.setAttributeNS(null,"y",a),E[0].body.removeChild(e),c._viewport.appendChild(i),I.element(i)},function(e){E[0].body.removeChild(e)})};var n=o.bpmnJsConf,a=[];n&&n.additionalModules&&I.forEach(A.load(),function(e,t){n.additionalModules[t]&&a.push(e)}),(s=D.generateViewer({width:"100%",height:"100%",canvas:{deferUpdate:!1},key:o.key,disableNavigation:o.disableNavigation,additionalModules:a,moddleExtensions:window.bpmnJsModdleExtensions||{}})).cached||t();var l=s.get("overlays").show.bind(s.get("overlays"));s.get("overlays").show=function(){s.get("eventBus").fire("overlays.show"),l()};var u=s.get("overlays").hide.bind(s.get("overlays"));s.get("overlays").hide=function(){s.get("eventBus").fire("overlays.hide"),u()};var p=O(function(){s.get("overlays").show()},300),d=s.get("canvas")._viewboxChanged.bind(s.get("canvas")),f=O(function(){d(),s.get("overlays").hide(),p()},0);s.get("canvas")._viewboxChanged=function(){f()};var h=null;function m(){c=s.get("canvas"),r=s._definitions,function(){var e=s.get("eventBus");e.on("element.click",g),e.on("element.hover",y),e.on("element.out",b),e.on("element.mousedown",_),e.on("canvas.viewbox.changed",w)}(),function(){if(c){var e=JSON.parse((k.search()||{}).viewbox||"{}")[r.id];e?c.viewbox(e):c.zoom("fit-viewport","auto")}}(),o.loaded=!0}o.$watch("diagramData",function(e){e&&(h=e,function(){{if(s.cached)return t(),m(),o.onLoad();if(h){o.loaded=!1;var i="object"==typeof h,e=(i?s.importDefinitions:s.importXML).bind(s);e(h,function(e,t){var n=i?function(e){e()}:o.$apply.bind(o);n(function(){if(!e)return o.warn=t,m(),o.onLoad();o.error=e})})}}}())});var v=function(){o.grabbing=!1,document.removeEventListener("mouseup",v),o.$apply()};function g(e){o.onClick({element:e.element,$event:e.originalEvent})}function y(e){o.onMouseEnter({element:e.element,$event:e.originalEvent})}function b(e){o.onMouseLeave({element:e.element,$event:e.originalEvent})}function _(){o.grabbing=!0,document.addEventListener("mouseup",v),o.$apply()}var w=O(function(e){var t=JSON.parse((k.search()||{}).viewbox||"{}");t[r.id]={x:e.viewbox.x,y:e.viewbox.y,width:e.viewbox.width,height:e.viewbox.height},T.updateSilently({viewbox:JSON.stringify(t)});var n=S.$$phase;"$apply"!==n&&"$digest"!==n?o.$apply(function(){k.replace()}):k.replace()},500);o.zoomIn=function(){s.get("zoomScroll").zoom(1,{x:i[0].offsetWidth/2,y:i[0].offsetHeight/2})},o.zoomOut=function(){s.get("zoomScroll").zoom(-1,{x:i[0].offsetWidth/2,y:i[0].offsetHeight/2})},o.resetZoom=function(){c.resized(),c.zoom("fit-viewport","auto")},o.control.resetZoom=o.resetZoom,o.control.refreshZoom=function(){c.resized(),c.zoom(c.zoom(),"auto")},o.$on("$destroy",function(){e.removeChild(s._container),function(){var e=s.get("eventBus");e.off("element.click",g),e.off("element.hover",y),e.off("element.out",b),e.off("element.mousedown",_),e.off("canvas.viewbox.changed",w)}(),s.get("overlays").clear(),D.cacheViewer({key:o.key,viewer:s})})}}}]},{"../../util/moduleLoader":101,"../../util/viewer":105,"camunda-bpm-sdk-js/vendor/angular":53}],107:[function(e,t,n){"use strict";t.exports=["$location",function(t){return{restrict:"A",template:'<div cam-widget-clipboard="getLink()" icon="glyphicon-link" tooltip-text="{{ \'CAM_WIDGET_COPY_LINK\' | translate }}">\n</div>\n',link:function(e){e.getLink=t.absUrl.bind(t)}}}]},{}],108:[function(e,t,n){"use strict";var c=e("lodash").throttle,l=e("./../../chart/line"),u=e("camunda-bpm-sdk-js/vendor/moment"),p=e("./../../filter/abbreviateNumber")();t.exports=["$window",function(s){return{restrict:"A",scope:{fontFamily:"=?",fontSize:"=?",handleColor:"=?",handleColorHover:"=?",handleWidth:"=?",interval:"=?",lineColors:"=?",lineWidth:"=?",rulersColor:"=?",selectingColor:"=?",selection:"&onSelection",textPadding:"=?",tickSize:"=?",timeLabelFormats:"=?",timespan:"=?",timestampFormat:"=?",unselectedColor:"=?",valueLabelsCount:"=?",values:"=",disableSelection:"=",isLogScale:"="},link:function(t,e){var n=e[0],i=s.getComputedStyle(n);function r(){return Math.min(Math.max(.75*n.clientWidth,180),300)}t.timespan=t.timespan||"day",t.interval=t.interval||900;var o=t.chart=new l({moment:u,abbreviateNumber:p,onselection:function(e){t.$apply(function(){t.selection({info:e})})},width:n.clientWidth,height:r(),fontFamily:t.fontFamily||i.fontFamily,fontSize:t.fontSize,handleColor:t.handleColor,handleColorHover:t.handleColorHover,handleWidth:t.handleWidth,lineColors:t.lineColors,lineWidth:t.lineWidth,rulersColor:t.rulersColor||i.color,selectingColor:t.selectingColor,textPadding:t.textPadding,tickSize:t.tickSize,timeLabelFormats:t.timeLabelFormats,timestampFormat:t.timestampFormat,unselectedColor:t.unselectedColor,valueLabelsCount:t.valueLabelsCount,disableSelection:t.disableSelection,isLogScale:t.isLogScale});t.$watch("values",function(){var e=n.className.replace("no-data","");t.values&&t.values.length&&t.values[0]&&t.values[0].length?o.setData(t.values,t.timespan,t.interval):(e+=" no-data",o.setData([[]],t.timespan,t.interval)),n.className=e}),n.appendChild(o.canvas);var a=c(function(){o.resize(n.clientWidth,r()).draw()},100);s.addEventListener("resize",a),t.$on("$destroy",function(){s.removeEventListener("resize",a)})},template:"\x3c!-- keule!! pech jehabt! --\x3e"}}]},{"./../../chart/line":66,"./../../filter/abbreviateNumber":78,"camunda-bpm-sdk-js/vendor/moment":55,lodash:"lodash"}],109:[function(e,t,n){"use strict";var l=e("clipboard");t.exports=["$timeout","$translate",function(s,c){return{transclude:!0,template:'<span ng-transclude></span>\n<a ng-if="!noTooltip"\n   uib-tooltip="{{ tooltipText }}"\n   tooltip-append-to-body="true"\n   ng-class="{\'copy-ok\': copyStatus === true, \'copy-error\': copyStatus === false}"\n   class="glyphicon {{icon}}"></a>\n<a ng-if="noTooltip"\n   ng-class="{\'copy-ok\': copyStatus === true, \'copy-error\': copyStatus === false}"\n   class="glyphicon {{icon}}"></a>\n',scope:{value:"=camWidgetClipboard"},link:function(t,o,e){var n,i;function r(){t.$apply(),i=s(function(){t.copyStatus=null},1200,!0)}function a(){var e=o[0].querySelector("[ng-transclude]"),t=o[0].querySelector("a.glyphicon-copy"),n=window.getComputedStyle(o[0]),i=1,r=0;e&&t&&(i=e.offsetWidth+t.offsetWidth,r=parseInt(n.width)-parseInt(n.paddingRight)-parseInt(n.paddingLeft)),0<i-r?-1===e.className.indexOf("resize")&&(e.className+=" resize"):e.className=e.className.replace(" resize","")}t.noTooltip=void 0!==e.noTooltip,t.copyStatus=null,t.icon=e.icon||"glyphicon-copy",t.$watch("value",function(){t.tooltipText=e.tooltipText||c.instant("CAM_WIDGET_COPY",{value:t.value})}),s(function(){var e=o[0].querySelector("a."+t.icon);e&&(window.addEventListener("resize",a),a(),(n=new l(e,{text:function(){return t.value}})).on("success",function(){t.copyStatus=!0,r()}),n.on("error",function(){t.copyStatus=!1,r()}))}),t.$on("$destroy",function(){window.removeEventListener("resize",a),n&&n.destroy&&n.destroy(),i&&s.cancel(i)})}}}]},{clipboard:"clipboard"}],110:[function(e,t,n){"use strict";var y=e("../../../cmmn-js/index.js");t.exports=["$compile","$location","$rootScope","search","debounce",function(f,h,m,v,g){return{scope:{diagramData:"=",control:"=?",disableNavigation:"&",onLoad:"&",onClick:"&",onMouseEnter:"&",onMouseLeave:"&"},template:'<div uib-alert class="alert alert-danger"\n     ng-if="error">\n  <span>\n    <strong>{{ \'CAM_WIDGET_CMMN_VIEWER_ERROR\' | translate }}</strong>\n  </span>\n  <span>\n   {{ error.message }}\n  </span>\n</div>\n\n<div ng-show="!error">\n\n  <div ng-if="!loaded" class="placeholder-container">\n    <div class="placeholder-content">\n      <span class="glyphicon glyphicon-refresh animate-spin"></span>\n      <span class="loading-text">{{ \'CAM_WIDGET_CMMN_VIEWER_LOADING\' | translate }}</span>\n    </div>\n  </div>\n\n  <div class="diagram-holder" ng-class=\'{"diagram-holder": true, "grab-cursor": !disableNavigation && !grabbing, "djs-cursor-move": !disableNavigation && grabbing}\'></div>\n\n  <div class="actions"></div>\n\n  <div ng-if="!disableNavigation"\n       class="navigation zoom">\n    <button class="btn btn-default in"\n            title="zoom in"\n            ng-click="zoomIn()">\n      <span class="glyphicon glyphicon-plus"></span>\n    </button>\n    <button class="btn btn-default out"\n            title="zoom out"\n            ng-click="zoomOut()">\n      <span class="glyphicon glyphicon-minus"></span>\n    </button>\n  </div>\n\n  <div ng-if="!disableNavigation"\n       class="navigation reset">\n    <button class="btn btn-default"\n            title="reset zoom"\n            ng-click="resetZoom()">\n      <span class="glyphicon glyphicon-screenshot"></span>\n    </button>\n  </div>\n</div>\n',link:function(o,i){var r;o.grabbing=!1,o.disableNavigation=o.$eval(o.disableNavigation),o.control=o.control||{},o.control.highlight=function(e){o.control.addMarker(e,"highlight");var t=e.id||e;i.find('[data-element-id="'+t+'"]>.djs-outline').attr({rx:"14px",ry:"14px"})},o.control.clearHighlight=function(e){o.control.removeMarker(e,"highlight")},o.control.isHighlighted=function(e){return o.control.hasMarker(e,"highlight")},o.control.addMarker=function(e,t){p.addMarker(e,t)},o.control.removeMarker=function(e,t){p.removeMarker(e,t)},o.control.hasMarker=function(e,t){return p.hasMarker(e,t)},o.control.createBadge=function(e,t){var n,i=s.get("overlays");t.html?n=t.html:(n=document.createElement("span"),t.color&&(n.style["background-color"]=t.color),t.tooltip&&(n.setAttribute("tooltip",t.tooltip),n.setAttribute("tooltip-placement","top")),t.text&&n.appendChild(document.createTextNode(t.text)));var r=i.add(e,{position:t.position||{bottom:0,right:0},show:{minZoom:-1/0,maxZoom:1/0},html:n});return f(n)(o),r},o.control.removeBadges=function(e){s.get("overlays").remove({element:e})},o.control.removeBadge=function(e){s.get("overlays").remove(e)},o.control.getViewer=function(){return s},o.control.scrollToElement=function(e){var t,n,i,r,o=s.get("elementRegistry").get(e),a=p.viewbox();t=Math.max(a.height,o.height),n=Math.max(a.width,o.width),i=Math.min(Math.max(a.x,o.x-a.width+o.width),o.x),r=Math.min(Math.max(a.y,o.y-a.height+o.height),o.y),p.viewbox({x:i,y:r,width:n,height:t})},o.control.getElement=function(e){return s.get("elementRegistry").get(e)},o.control.getElements=function(e){return s.get("elementRegistry").filter(e)},o.loaded=!1,o.control.isLoaded=function(){return o.loaded},o.control.addAction=function(e){var t=i.find(".actions"),n=e.html;t.append(n),f(n)(o)},o.control.addImage=function(e,t,n){return p._viewport.image(e,t,n)};var e=y;o.disableNavigation&&(e=Object.getPrototypeOf(y.prototype).constructor);var s=new e({container:i[0].querySelector(".diagram-holder"),width:"100%",height:"100%",canvas:{deferUpdate:!1}}),t=s.get("overlays").show.bind(s.get("overlays"));s.get("overlays").show=function(){s.get("eventBus").fire("overlays.show"),t()};var n=s.get("overlays").hide.bind(s.get("overlays"));s.get("overlays").hide=function(){s.get("eventBus").fire("overlays.hide"),n()};var a=g(function(){s.get("overlays").show()},300),c=s.get("canvas")._viewboxChanged.bind(s.get("canvas")),l=g(function(){c(),s.get("overlays").hide(),a()},0);s.get("canvas")._viewboxChanged=function(){l()};var u=null,p=null;o.$watch("diagramData",function(e){e&&(u=e,function(){if(u){o.loaded=!1;var i="object"==typeof u,e=(i?s.importDefinitions:s.importXML).bind(s);e(u,function(e,t){var n=i?function(e){e()}:o.$apply.bind(o);n(function(){e?o.error=e:(o.warn=t,p=s.get("canvas"),r=s._definitions,function(){if(p){var e=JSON.parse((h.search()||{}).viewbox||"{}")[r.id];e?p.viewbox(e):p.zoom("fit-viewport","auto")}}(),function(){var e=s.get("eventBus");e.on("element.click",function(e){o.onClick({element:e.element,$event:e.originalEvent})}),e.on("element.hover",function(e){o.onMouseEnter({element:e.element,$event:e.originalEvent})}),e.on("element.out",function(e){o.onMouseLeave({element:e.element,$event:e.originalEvent})}),e.on("element.mousedown",function(){o.grabbing=!0,document.addEventListener("mouseup",d),o.$apply()}),e.on("canvas.viewbox.changed",g(function(e){var t=JSON.parse((h.search()||{}).viewbox||"{}");t[r.id]={x:e.viewbox.x,y:e.viewbox.y,width:e.viewbox.width,height:e.viewbox.height},v.updateSilently({viewbox:JSON.stringify(t)});var n=m.$$phase;"$apply"!==n&&"$digest"!==n?o.$apply(function(){h.replace()}):h.replace()},500))}(),o.loaded=!0,o.onLoad())})})}}())});var d=function(){o.grabbing=!1,document.removeEventListener("mouseup",d),o.$apply()};o.zoomIn=function(){s.get("zoomScroll").zoom(1,{x:i[0].offsetWidth/2,y:i[0].offsetHeight/2})},o.zoomOut=function(){s.get("zoomScroll").zoom(-1,{x:i[0].offsetWidth/2,y:i[0].offsetHeight/2})},o.resetZoom=function(){p.resized(),p.zoom("fit-viewport","auto")},o.control.resetZoom=o.resetZoom,o.control.refreshZoom=function(){p.resized(),p.zoom(p.zoom(),"auto")}}}}]},{"../../../cmmn-js/index.js":58}],111:[function(e,t,n){"use strict";t.exports=[function(){return{template:'<div class="debug">\n  <div class="col-xs-2">\n    <button class="btn btn-default btn-round"\n            ng-click="toggleOpen()"\n            uib-tooltip="{{tooltip}}"\n            tooltip-placement="{{tooltipPlacement}}">\n      <span class="glyphicon"\n            ng-class="{\'glyphicon-eye-open\': !open, \'glyphicon-eye-close\': open}"></span>\n    </button>\n  </div>\n  <div class="col-xs-10"\n       ng-show="open">\n    <span ng-show="extended" cam-widget-clipboard="extendedInfo"\n          no-tooltip>\n      <code>{{ extensionName }}</code>\n    </span>\n    <pre ng-show="extended">{{ extendedInfo }}</pre>\n    <span cam-widget-clipboard="debugged | json "\n          no-tooltip>\n      <code>{{ varName }}</code>\n    </span>\n    <pre>{{ debugged | json }}</pre>\n  </div>\n</div>\n',scope:{debugged:"=",displayName:"@displayName",extensionName:"@extensionName",open:"@",extendedInfo:"=",tooltip:"@camWidgetDebugTooltip",tooltipPlacement:"@camWidgetDebugTooltipPlacement"},link:function(e,t,n){e.varName=n.displayName||n.debugged,e.extended=void 0!==n.extended,e.toggleOpen=function(){e.open=!e.open}}}}]},{}],112:[function(e,t,n){"use strict";var u=e("camunda-bpm-sdk-js/vendor/angular"),p=e("../../../dmn-js/index.js").NavigatedViewer,d=e("../../../dmn-js/index.js").Modeler,f=e("../../util/change-dmn-namespace");t.exports=["$window",function(l){return{scope:{xml:"=",table:"@",width:"=",height:"=",control:"=?",editMode:"=",showDetails:"=",disableNavigation:"=",enableDrdNavigation:"=",disableLoader:"=",onLoad:"&",onClick:"&",onDblClick:"&"},template:'<div uib-alert class="alert alert-danger"\n     ng-if="error">\n  <strong>{{ \'CAM_WIDGET_DMN_VIEWER_ERROR\' | translate }}</strong><br/>\n  {{ error.message }}\n</div>\n\n<div ng-show="!error"\n     ng-if="!loaded && !disableLoader"\n     class="placeholder-container">\n  <div class="placeholder-content">\n    {{ \'CAM_WIDGET_DMN_VIEWER_LOADING\' | translate }}<br />\n    <span class="glyphicon glyphicon-refresh animate-spin"></span>\n  </div>\n</div>\n\n<div ng-show="!error"\n     ng-class="{\n      \'grab-cursor\': isDrd && !grabbing,\n      \'cursor-move\': isDrd && grabbing\n     }"\n     class="table-holder">\n</div>\n\n<div ng-if="!error && !disableNavigation && isDrd">\n  <div class="navigation zoom">\n    <button class="btn btn-default in"\n            title="zoom in"\n            ng-click="zoomIn()">\n      <span class="glyphicon glyphicon-plus"></span>\n    </button>\n    <button class="btn btn-default out"\n            title="zoom out"\n            ng-click="zoomOut()">\n      <span class="glyphicon glyphicon-minus"></span>\n    </button>\n  </div>\n\n  <div class="navigation reset">\n    <button class="btn btn-default"\n            title="reset zoom"\n            ng-click="resetZoom()">\n      <span class="glyphicon glyphicon-screenshot"></span>\n    </button>\n  </div>\n</div>\n',link:function(i,t){var n,e=l.document;i.isDrd=!1,i.grabbing=!1,i.control=i.control||{},i.control.getViewer=function(){return r},i.control.getElement=function(e){return r.getActiveViewer().get("elementRegistry").get(e)},i.loaded=!1,i.control.isLoaded=function(){return i.loaded},i.control.highlightRow=function(e,t){var n="[data-row-id = "+e+"]";u.element(n).parent().addClass(t)},i.control.highlightElement=function(e){n&&r.getActiveViewer().get("elementRegistry").get(e)&&(n.addMarker(e,"highlight"),t.find('[data-element-id="'+e+'"]>.djs-outline').attr({rx:"14px",ry:"14px"}))},i.control.clearAllElementsHighlight=function(){n&&n.getRootElement().children.forEach(function(e){var t=e.id;n.hasMarker(t,"highlight")&&n.removeMarker(t,"highlight")})},i.control.clearElementHighlight=function(e){n&&n.removeMarker(e,"highlight")},i.control.isElementHighlighted=function(e){if(n)return n.hasMarker(e,"highlight")},i.control.getElements=function(e){if(n)return r.getActiveViewer().get("elementRegistry").filter(e)},i.control.createBadge=function(e,t){n&&function(e,t){r.getActiveViewer().get("overlays").add(e,{position:t.position||{bottom:10,right:10},show:{minZoom:-1/0,maxZoom:1/0},html:t.html})}(e,t)},i.control.resetZoom=c,i.control.refreshZoom=function(){n.resized(),n.zoom(n.zoom(),"auto")};var r=new(i.editMode?d:p)({container:t[0].querySelector(".table-holder"),width:i.width,height:i.height,hideDetails:!i.showDetails,tableViewOnly:i.table,drd:{drillDown:{enabled:i.enableDrdNavigation}}}),o=null;i.$watch("xml",function(e){e&&(o=e,function(){if(o){var e=f(o);i.loaded=!1,r.importXML(e,function(e){i.isDrd=1<r.getDefinitions().drgElements.length&&!i.table,i.isDrd&&((n=r.getActiveViewer().get("canvas")).zoom("fit-viewport","auto"),i.control.getElements(function(e){return"dmn:Decision"===e.type}).forEach(function(e){n.addMarker(e.id,"decision-element")})),i.$apply(s),i.$apply(function(){e&&(i.error=e)})})}}())}),r.on("import.done",function(){r.getActiveViewer().on("element.click",function(e){i.$apply(function(){i.onClick({element:e.element,$event:e.originalEvent})})}),r.getActiveViewer().on("element.dblclick",function(e){i.$apply(function(){i.onDblClick({element:e.element,$event:e.originalEvent})})})});var a=i.$apply.bind(i,function(){i.grabbing=!1,e.removeEventListener("mouseup",a)});function s(){if(i.table){var e=/^[0-9]+$/.test(i.table);i.table=e?+i.table:i.table;var t=r.getViews().filter(function(e){return u.isString(i.table)&&e.element.id===i.table||e.element.name===i.table})[0];r.open(t,function(){i.loaded=!0,i.onLoad()})}else var n=i.$watch("table",function(e){e&&(n(),s())})}function c(){n&&(n.resized(),n.zoom("fit-viewport","auto"))}r.on("element.mousedown",i.$apply.bind(i,function(){i.grabbing=!0,e.addEventListener("mouseup",a)})),i.zoomIn=function(){r.getActiveViewer().get("zoomScroll").zoom(1,{x:t[0].offsetWidth/2,y:t[0].offsetHeight/2})},i.zoomOut=function(){r.getActiveViewer().get("zoomScroll").zoom(-1,{x:t[0].offsetWidth/2,y:t[0].offsetHeight/2})},i.resetZoom=c,l.addEventListener("resize",i.resetZoom),i.$on("destroy",function(){l.removeEventListener("resize",i.resetZoom),e.removeEventListener("mouseup",a)})}}}]},{"../../../dmn-js/index.js":59,"../../util/change-dmn-namespace":99,"camunda-bpm-sdk-js/vendor/angular":53}],113:[function(e,t,n){"use strict";t.exports=[function(){return{template:'<div class="container-fluid">\n  <div class="row">\n    <div class="col-xs-6" style="text-align: left;">\n      {{ \'CAM_WIDGET_FOOTER_TIMEZONE\' | translate }} <i>{{timezoneName}}</i>\n    </div>\n    <div class="col-xs-6">\n      {{ \'CAM_WIDGET_FOOTER_POWERED_BY\' | translate }} <a href="http://camunda.org">camunda BPM</a> /\n      <span class="version">{{version}}</span>\n    </div>\n  </div>\n</div>\n',scope:{version:"@"},link:function(e){e.timezoneName=Intl.DateTimeFormat().resolvedOptions().timeZone}}}]},{}],114:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular"),r={welcome:{label:"Welcome"},admin:{label:"Admin"},cockpit:{label:"Cockpit"},tasklist:{label:"Tasklist"}};t.exports=["$translate",function(n){return{transclude:!0,template:'<div class="navbar-header">\n  <button type="button"\n          class="navbar-toggle"\n          ng-class="{open: !!navbarOpen}"\n          ng-click="navbarOpen = !navbarOpen">\n    <em class="sr-only">{{ toggleNavigation }}</em>\n    <span></span>\n    <span></span>\n    <span></span>\n  </button>\n\n  <a class="navbar-brand"\n     href="#/"\n     title="{{ brandName }} {{ appName }}">\n    <span class="brand-logo"></span>\n    <span class="brand-name" ng-cloak>{{ brandName }}</span>\n  </a>\n\n  <div class="small-screen-warning">\n    <span class="glyphicon glyphicon-exclamation-sign"\n          uib-tooltip="{{ smallScreenWarning }}"\n          tooltip-placement="bottom"></span>\n  </div>\n</div>\n\n<nav class="cam-nav app-menu">\n  <ul ng-class="{collapse: !navbarOpen}">\n\n    <li engine-select></li>\n\n    <li class="account dropdown"\n        ng-if="authentication.name"\n        ng-cloak\n        uib-dropdown>\n      <a href\n         class="dropdown-toggle"\n         uib-dropdown-toggle>\n        <span class="glyphicon glyphicon-user "></span>\n        {{ (userName || authentication.name) }}\n      </a>\n\n      <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n        <li class="profile"\n            ng-if="currentApp !== \'welcome\'">\n          <a ng-href="{{ \'../../welcome/:engine/\' | uri }}">\n            {{ myProfile | translate }}\n          </a>\n        </li>\n\n        <li class="divider"\n            ng-if="currentApp !== \'welcome\'"></li>\n\n        <li class="logout">\n          <a href\n             ng-click="logout()">\n            {{ signOut | translate }}\n          </a>\n        </li>\n      </ul>\n    </li>\n\n    <li class="divider-vertical"\n        ng-if="authentication.name"\n        ng-cloak></li>\n\n    <li class="app-switch dropdown"\n        ng-if="showAppDropDown"\n        uib-dropdown>\n      <a href\n         class="dropdown-toggle"\n         uib-dropdown-toggle>\n        <span class="glyphicon glyphicon-home"></span>\n        <span class="caret"></span>\n      </a>\n\n      <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n        <li ng-repeat="(appName, app) in apps"\n            ng-class="appName">\n          <a ng-href="{{ (\'../../\' + appName + \'/:engine/\' | uri) + getTargetRoute() }}">\n            {{ app.label }}\n          </a>\n        </li>\n      </ul>\n    </li>\n  </ul>\n</nav>\n\n<div ng-transclude\n     class="sections-menu"\n     ng-class="{collapse: !navbarOpen}"></div>\n',scope:{authentication:"=",userName:"=?",currentApp:"@",signOut:"@?",toggleNavigation:"@?",myProfile:"@?",smallScreenWarning:"@?",brandName:"@"},compile:function(e,t){t.toggleNavigation||(t.toggleNavigation=n.instant("CAM_WIDGET_HEADER_TOGGLE_NAVIGATION")),t.myProfile||(t.myProfile=n.instant("CAM_WIDGET_HEADER_MY_PROFILE")),t.signOut||(t.signOut=n.instant("CAM_WIDGET_HEADER_SIGN_OUT")),t.brandName||(t.brandName="Camunda"),t.smallScreenWarning||(t.smallScreenWarning=n.instant("CAM_WIDGET_HEADER_SMALL_SCREEN_WARNING"))},controller:["$scope","AuthenticationService",function(n,e){function t(){var t=i.copy(r);n.currentApp&&("welcome"===n.currentApp&&n.authentication?t={}:delete t[n.currentApp]),n.authentication&&n.authentication.name&&(delete t.welcome,Object.keys(t).forEach(function(e){n.authentication.authorizedApps.indexOf(e)<0&&delete t[e]})),n.showAppDropDown=0<Object.keys(t).length,n.apps=t}n.logout=e.logout,n.getTargetRoute=function(){return n.authentication?"":"#/login"},n.$watch("currentApp",t),n.$watch("authentication",t)}]}}]},{"camunda-bpm-sdk-js/vendor/angular":53}],115:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular"),r=e("./inline-field/cam-widget-inline-field"),o=e("./search-pill/cam-widget-search-pill"),a=e("./search-pill/cam-query-component"),s=e("./header/cam-widget-header"),c=e("./footer/cam-widget-footer"),l=e("./loader/cam-widget-loader"),u=e("./chart-line/cam-widget-chart-line"),p=e("./debug/cam-widget-debug"),d=e("./clipboard/cam-widget-clipboard"),f=e("./variable/cam-widget-variable"),h=e("./variables-table/cam-widget-variables-table"),m=e("./variables-table/cam-render-var-template"),v=e("./search/cam-widget-search"),g=e("./bpmn-viewer/cam-widget-bpmn-viewer"),y=e("./cmmn-viewer/cam-widget-cmmn-viewer"),b=e("./dmn-viewer/cam-widget-dmn-viewer"),_=e("../filter/date/index"),w=e("../directives/index"),x=e("../search/index"),E=e("./variable/cam-variable-validator"),C=e("./../services/cam-local-configuration"),k=e("./cam-share-link/cam-share-link"),S=e("./password/cam-widget-password");e("../../vendor/ui-bootstrap-tpls-2.5.0-camunda");var T=i.module("camunda.common.widgets",[_.name,w.name,x.name,"ui.bootstrap"]);T.factory("widgetLocalConf",C),T.directive("camWidgetInlineField",r),T.directive("camWidgetSearchPill",o),T.directive("camWidgetHeader",s),T.directive("camWidgetFooter",c),T.directive("camWidgetLoader",l),T.directive("camWidgetChartLine",u),T.directive("camWidgetDebug",p),T.directive("camWidgetClipboard",d),T.directive("camWidgetVariable",f),T.directive("camWidgetVariablesTable",h),T.directive("camRenderVarTemplate",m),T.directive("camWidgetSearch",v),T.directive("camWidgetBpmnViewer",g),T.directive("camWidgetCmmnViewer",y),T.directive("camWidgetDmnViewer",b),T.directive("camShareLink",k),T.directive("camWidgetPassword",S),T.directive("camVariableValidator",E),T.filter("camQueryComponent",a),t.exports=T},{"../../vendor/ui-bootstrap-tpls-2.5.0-camunda":135,"../directives/index":72,"../filter/date/index":79,"../search/index":87,"./../services/cam-local-configuration":91,"./bpmn-viewer/cam-widget-bpmn-viewer":106,"./cam-share-link/cam-share-link":107,"./chart-line/cam-widget-chart-line":108,"./clipboard/cam-widget-clipboard":109,"./cmmn-viewer/cam-widget-cmmn-viewer":110,"./debug/cam-widget-debug":111,"./dmn-viewer/cam-widget-dmn-viewer":112,"./footer/cam-widget-footer":113,"./header/cam-widget-header":114,"./inline-field/cam-widget-inline-field":116,"./loader/cam-widget-loader":117,"./password/cam-widget-password":118,"./search-pill/cam-query-component":119,"./search-pill/cam-widget-search-pill":120,"./search/cam-widget-search":121,"./variable/cam-variable-validator":123,"./variable/cam-widget-variable":124,"./variables-table/cam-render-var-template":125,"./variables-table/cam-widget-variables-table":126,"camunda-bpm-sdk-js/vendor/angular":53}],116:[function(e,t,n){"use strict";var g=e("camunda-bpm-sdk-js/vendor/angular"),y=e("jquery");t.exports=["$timeout","$filter","$document",function(m,t,v){return{scope:{varValue:"=value",varType:"@type",validator:"&validate",change:"&",onStart:"&onStartEditing",onCancel:"&onCancelEditing",placeholder:"@",options:"=?",allowNonOptions:"@",flexible:"@",disableAutoselect:"=?"},template:'<span ng-show="!editing"\n      ng-click="startEditing()"\n      ng-transclude\n      class="view-value">\n</span>\n\n<span ng-if="editing && (varType === \'datetime\' || varType === \'date\' || varType === \'time\')"\n      class="preview">\n  {{ dateValue | camDate }}\n</span>\n\n<span ng-if="editing"\n      ng-form\n      name="inlineForm"\n      class="edit">\n\n  <input ng-if="simpleField && !isNumber"\n         class="form-control"\n         type="{{ varType }}"\n         ng-model="editValue"\n         ng-keydown="handleKeydown($event)"\n         placeholder="{{ placeholder }}" />\n\n   <input ng-if="isNumber"\n          name="numberField"\n          class="form-control"\n          ng-pattern="/^[0-9]{1,7}$/"\n          ng-model="editValue"\n          ng-keydown="handleKeydown($event)"\n          placeholder="{{ placeholder }}" />\n\n\n  <span ng-show="varType === \'datetime\' || varType === \'date\' || varType === \'time\'"\n        class="cam-widget-inline-field field-control">\n\n    <div class="datepicker"\n                uib-datepicker\n                ng-if="varType === \'datetime\' || varType === \'date\'"\n                type="text"\n                ng-required="true"\n                is-open="datePickerOptions.isOpen"\n                show-button-bar="false"\n                ng-click="$event.stopPropagation()"\n                ng-keydown="trapKeyboard($event, true); cancelOnEsc($event);"\n\n                ng-model="dateValue"\n                ng-change="changeDate(this)"></div>\n\n    <div class="timepicker"\n                uib-timepicker\n                ng-if="varType === \'datetime\' || varType === \'time\'"\n                show-meridian="false"\n\n                ng-model="dateValue"\n                ng-keydown="cancelOnEsc($event);"\n                ng-change="changeDate(this)"></div>\n  </span>\n\n  <input ng-if="varType === \'option\' && options[0].value"\n         class="form-control"\n         type="text"\n         ng-model="editValue"\n         ng-keydown="handleKeydown($event)"\n         uib-typeahead="option as option.value for option in options | filter:$viewValue:instantTypeahead"\n         typeahead-on-select="saveSelection($item)"\n         typeahead-focus-first="!disableAutoselect"\n         instant-typeahead />\n  <input ng-if="varType === \'option\' && !options[0].value"\n         class="form-control"\n         type="text"\n         ng-model="editValue"\n         ng-keydown="handleKeydown($event)"\n         uib-typeahead="option for option in options | filter:$viewValue:instantTypeahead"\n         typeahead-on-select="saveSelection($item)"\n         typeahead-focus-first="!disableAutoselect"\n         instant-typeahead />\n\n  <span ng-show="varType !== \'option\'"\n        class="cam-widget-inline-field btn-group">\n    <button type="button"\n            class="btn btn-xs btn-default"\n            ng-click="changeType()"\n            ng-if="flexible">\n      <span class="glyphicon"\n            ng-class="\'glyphicon-\' + (varType === \'text\' ? \'calendar\' : \'pencil\')"></span>\n    </button>\n\n    <button type="button"\n            class="btn btn-xs btn-default"\n            ng-style="{visibility: !isNumber || inlineForm.numberField.$valid ? \'visible\' : \'hidden\'}"\n            ng-click="applyChange($event);"\n            ng-keydown="cancelOnEsc($event);">\n      <span class="glyphicon glyphicon-ok"></span>\n    </button>\n\n    <button type="button"\n            class="btn btn-xs btn-default"\n            ng-click="cancelChange($event)"\n            ng-keydown="trapKeyboard($event); cancelOnEsc($event);">\n      <span class="glyphicon glyphicon-remove"></span>\n    </button>\n  </span>\n</span>\n',link:function(i,a){var r,o,n=y("body"),s=t("date"),l=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(?:.(\d\d\d)| )?$/;function c(){return-1<["datetime","date","time"].indexOf(i.varType)}function u(){return-1<["color","email","month","number","range","tel","text","time","url","week"].indexOf(i.varType)}function e(){if(i.editing=!1,i.invalid=!1,i.editValue=i.varValue,i.validator=i.validator||function(){},i.onStart=i.onStart||function(){},i.onCancel=i.onCancel||function(){},i.change=i.change||function(){},i.options=i.options||[],i.allowNonOptions=i.allowNonOptions||!1,i.flexible=i.flexible||!1,i.varType=i.varType?i.varType:"text",i.simpleField=u(),c()){var e=i.varValue,t=null;t=e?function(e){var t,n,i,r,o,a,s,c=l.exec(e);if(c)return t=parseInt(c[1]||0,10),n=parseInt(c[2]||0,10)-1,i=parseInt(c[3]||0,10),r=parseInt(c[4]||0,10),o=parseInt(c[5]||0,10),a=parseInt(c[6]||0,10),s=parseInt(c[7]||0,10),new Date(t,n,i,r,o,a,s)}(e):(new Date).setSeconds(0,0),i.dateValue=t}}function p(e){if(!e||!e.length)return!1;var t=e.parent();return!(!t||!t.length)&&"body"===t[0].tagName.toLowerCase()}function d(){var e=y(a).offset();if(c()?r.addClass("datepicker-control").show().css({left:e.left+(o.outerWidth()-r.outerWidth()),top:e.top+o.outerHeight()}):r.removeClass("datepicker-control").show().css({left:e.left+(y(a).outerWidth()-r.outerWidth()),top:e.top-r.outerHeight()}),o.show().css({left:e.left,top:e.top+y(a).outerHeight()}),c()){var t=o[0].querySelector(".uib-daypicker");t&&t.focus()}}function f(e){m(function(){i.editing&&!e||(r&&r.remove&&r.remove(),r=null,o&&o.remove&&o.remove(),o=null)},50)}function h(e){if(i.editing&&!function(e){return a[0].contains(e.target)||r&&r.length&&r[0].contains(e.target)||o&&o.length&&o[0].contains(e.target)}(e)){var t=y(e.target),n="ng-binding text-muted";if(!t.hasClass(n))t.children().hasClass(n)||i.$apply(i.cancelChange)}}i.editing=!1,i.isNumber="number"===i.varType,i.$on("$locationChangeSuccess",function(){i.cancelChange()}),i.$on("$destroy",function(){f(!0)}),i.$watch("editing",function(e,t){e!==t&&(i.editing?(p(o=(o&&o.length?o:y(a[0].querySelector(".field-control"))).hide())||n.append(o),p(r=(r&&r.length?r:y(a[0].querySelector(".btn-group"))).hide())||n.append(r),m(d,50),a.addClass("inline-editing")):(f(),a.removeClass("inline-editing")))}),i.changeType=function(){"datetime"===i.varType?i.varType="text":i.varType="datetime",e(),i.editing=!0,a[0].attributes.type.value=i.varType,i.simpleField=u()},i.startEditing=function(){if(!i.editing){e(),i.editing=!0,i.onStart(i);var o=i.editValue;i.simpleField||(i.editValue=""),m(function(){m(function(){if(i.editValue=o){var r="object"==typeof o;r&&g.element(a[0].querySelector('[ng-model="editValue"]')).val(o.value),m(function(){for(var e=y(a[0].querySelector("li[ng-mouseenter]")),t=r?o.value:o,n=0;n<e.length;n++){var i=e[n];if(0===i.innerText.indexOf(t))return void y(i).trigger("mouseenter")}})}})}),m(function(){g.element(a[0].querySelector('[ng-model="editValue"]')).triggerHandler("click"),m(function(){y('[ng-model="editValue"]').focus(),y('[ng-model="editValue"]').select(),v.bind("click",h)},50)})}},i.applyChange=function(e,t){if(i.invalid=i.validator(i),!i.invalid){if(i.simpleField)i.editValue=function(e){if("number"!==i.varType)return e;if(0<e.length)return+e;return null}(y('[ng-model="editValue"]').val()),i.varValue=i.editValue;else if("option"===i.varType){if(-1===i.options.indexOf(e)&&!i.allowNonOptions)return void i.cancelChange();i.editValue=e||y('[ng-model="editValue"]').val(),i.varValue=i.editValue}else c()&&(i.varValue=s(i.dateValue,"yyyy-MM-dd'T'HH:mm:ss"));i.$event=t,i.change(i),i.editing=!1,v.unbind("click",h)}},i.cancelChange=function(){i.editing&&(i.editing=!1,i.onCancel(i),v.unbind("click",h))},i.changeDate=function(e){i.editValue=i.dateValue=e.dateValue},i.selectNextInlineField=function(t){for(var n=y("[cam-widget-inline-field][type='text'], [cam-widget-inline-field][type='option']"),i=t*(n.length-1);i!==!t*(n.length-1);i+=2*!t-1)if(n[i]===a[0])return void m(function(){var e=y(n[i+2*!t-1]);e.find(".view-value").click(),m(function(){e.find("input").select()})});m(function(){y(n[t*n.length-1]).find(".view-value").click()})},i.trapKeyboard=function(e,t){c()&&9===e.keyCode&&(t||e.shiftKey?t&&e.shiftKey&&(y('.cam-widget-inline-field.btn-group > button[ng-click="cancelChange($event)"]')[0].focus(),e.preventDefault()):(y(".cam-widget-inline-field.field-control > .datepicker > table")[0].focus(),e.preventDefault()))},i.cancelOnEsc=function(e){c()&&27===e.keyCode&&i.cancelChange()},i.handleKeydown=function(e){13===e.keyCode?(i.applyChange(i.selection,e),e.preventDefault()):27===e.keyCode?(i.cancelChange(e),e.preventDefault()):9===e.keyCode&&(i.applyChange(i.selection,e),i.selectNextInlineField(e.shiftKey),e.preventDefault()),i.selection=null},i.selection=null,i.saveSelection=function(e){i.selection=e,m(function(){i.selection===e&&i.applyChange(e)})}},transclude:!0}}]},{"camunda-bpm-sdk-js/vendor/angular":53,jquery:"jquery"}],117:[function(e,t,n){"use strict";var i=e("camunda-bpm-sdk-js/vendor/angular");t.exports=[function(){return{transclude:!0,template:'<div class="loader-state loaded"\n     ng-show="loadingState === \'LOADED\'"\n     ng-transclude></div>\n\n<div class="loader-state loading"\n     ng-if="loadingState === \'LOADING\'">\n  <span class="glyphicon glyphicon-refresh animate-spin"></span>\n  {{ textLoading }}\n</div>\n\n<div class="loader-state empty"\n     ng-if="loadingState === \'EMPTY\'">\n  {{ textEmpty }}\n</div>\n\n<div uib-alert class="loader-state alert alert-danger"\n     ng-if="loadingState === \'ERROR\'">\n  {{ textError }}\n</div>\n',scope:{loadingState:"@",textEmpty:"@",textError:"@",textLoading:"@"},compile:function(e,t){i.isDefined(t.textLoading)||(t.textLoading="Loading…"),i.isDefined(t.loadingState)||(t.loadingState="INITIAL")}}}]},{"camunda-bpm-sdk-js/vendor/angular":53}],118:[function(e,t,n){"use strict";var u=e("camunda-bpm-sdk-js/vendor/angular");t.exports=["camAPI","debounce","$translate","$sce",function(a,s,c,l){return{scope:{password:"=camWidgetPasswordPassword",isValid:"=?camWidgetPasswordValid"},link:function(n){var e=a.resource("password-policy"),t=!1;n.loadingState="DEACTIVATED",n.tooltipText="";var i=c.instant("PASSWORD_POLICY_TOOLTIP");e.get().then(function(e){if(!e)return t=!1,n.isValid=!0,void(n.loadingState="DEACTIVATED");t=!0,i+="<ul>",e.rules.forEach(function(e){i+="<li>"+c.instant(e.placeholder,e.parameter)+"</li>"}),i+="</ul>",n.tooltipText=l.trustAsHtml(i),r()});var r=function(){if(t){if(n.isValid=!1,!n.password)return n.tooltipText=l.trustAsHtml(i),void(n.loadingState="NOT_OK");n.loadingState="LOADING",o()}},o=s(function(){n.password&&e.validate(n.password,function(e,t){if(e)return n.loadingState="NOT_OK",void(n.tooltipText=l.trustAsHtml(c.instant("PASSWORD_POLICY_TOOLTIP_ERROR")));t.valid?(n.loadingState="OK",n.isValid=!0):(n.loadingState="NOT_OK",n.isValid=!1,n.tooltipText=c.instant("PASSWORD_POLICY_TOOLTIP_PARTIAL"),n.tooltipText+="<ul>",t.rules.forEach(function(e){e.valid||(n.tooltipText+="<li>"+c.instant(e.placeholder,e.parameter)+"</li>")}),n.tooltipText+="</ul>",n.tooltipText=l.trustAsHtml(n.tooltipText))}).catch(u.noop)},1e3);n.$watch("[password]",r,!0)},template:'<div class="password-input right-addon">\n  <i ng-if="loadingState === \'NOT_OK\' && password.length > 0" class="glyphicon glyphicon-remove-circle"></i>\n  <i ng-if="loadingState === \'OK\'" class="glyphicon glyphicon-ok-circle"></i>\n  <i ng-if="loadingState === \'LOADING\'" class="glyphicon glyphicon-refresh animate-spin"></i>\n  <input id="inputPassword"\n    name="inputPassword"\n    class="form-control"\n    type="password"\n    ng-model="password"\n    ng-invalid="true"\n    uib-popover-html="tooltipText"\n    popover-enable="loadingState === \'NOT_OK\'"\n    popover-is-open="loadingState === \'NOT_OK\' && password.length > 0"\n    popover-trigger="\'focus\'"\n    required></input>\n</div>\n'}}]},{"camunda-bpm-sdk-js/vendor/angular":53}],119:[function(e,t,n){"use strict";t.exports=["$filter",function(e){var t=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(?:.(\d\d\d)| )?$/;var n=e("camDate");return function(e){return e&&function(e){return e.match(t)}(e)?n(e):e||"??"}}]},{}],120:[function(e,t,n){"use strict";var a=e("jquery");t.exports=["$timeout",function(o){return{restrict:"A",scope:{valid:"=",extended:"=",basic:"=",allowDates:"=",enforceDates:"=",enforceString:"=",options:"=",invalidText:"@",deleteText:"@",type:"=",name:"=",potentialNames:"=?",operator:"=",value:"=",onChange:"&",onDelete:"&",disableTypeaheadAutoselect:"=?",allowNonOptions:"@?"},link:function(r,t){r.valueType=i(),r.potentialNames=r.potentialNames||[],r.changeSearch=function(e,t,n){var i=r[e].value;r[e].value=t,r[e].inEdit=!1,"function"==typeof r.onChange&&r.onChange({field:e,before:i,value:t,$event:n})},r.clearEditTrigger=function(e){r[e].inEdit=!1},r.onKeydown=function(e,t){13===e.keyCode&&e.target===e.currentTarget&&(r[t].inEdit=!0)},r.$watch("allowDates",function(e){e||(r.valueType=i())}),r.$watch("enforceDates",function(e){e&&(r.valueType=i())}),r.$watch("enforceString",function(e){e&&(r.valueType=i())});function n(e){o(function(){a(t[0].querySelectorAll("[cam-widget-inline-field][value='"+e+".value']")).find(".view-value").click()})}function i(){return r.options?"option":r.enforceDates?"datetime":"text"}r.$watch("value",function(e){return e&&e.inEdit&&n("value")},!0),r.$watch("name",function(e){return e&&e.inEdit&&n("name")},!0),r.$watch("type",function(e){return e&&e.inEdit&&n("type")},!0),r.$watch("operator",function(e){return e&&!e.value&&1===e.values.length&&(e.value=e.values[0]),e&&e.inEdit&&n("operator")},!0)},template:'\x3c!-- CE # camunda-commons-ui/lib/widgets/search-pill/search-pill.html --\x3e\n<span class="search-label"\n      ng-class="{\'invalid\': !valid}">\n  <a href\n     ng-click="onDelete()"\n     tooltip-placement="top"\n     uib-tooltip="{{ deleteText | translate }}"\n     class="remove-search glyphicon glyphicon-remove">\n  </a>\n\n  <span cam-widget-inline-field\n        class="set-value type-field"\n        tabindex="0"\n        ng-keydown="onKeydown($event, \'type\')"\n        type="option"\n        options="type.values"\n        change="changeSearch(\'type\', varValue, $event)"\n        on-start-editing="clearEditTrigger(\'type\')"\n        value="type.value">\n    <span ng-if="type.tooltip"\n          tooltip-placement="top"\n          uib-tooltip="{{ type.tooltip | translate }}">\n      {{ type.value.value | camQueryComponent }}\n    </span>\n    <span ng-if="!type.tooltip">\n      {{ type.value.value | camQueryComponent }}\n    </span>\n  </span>\n\n  <span ng-if="extended">:</span>\n\n  <span ng-if="extended && potentialNames.length <= 0 && !!name.value.value"\n        cam-widget-inline-field\n        class="set-value name-field"\n        type="text"\n        tabindex="0"\n        ng-keydown="onKeydown($event,\'name\')"\n        change="changeSearch(\'name\', varValue, $event)"\n        on-start-editing="clearEditTrigger(\'name\')"\n        value="name.value.value">\n    <span ng-if="name.tooltip"\n          tooltip-placement="top"\n          uib-tooltip="{{name.tooltip | translate }}">\n        {{ name.value.value | camQueryComponent }}\n    </span>\n    <span ng-if="!name.tooltip">\n        {{ name.value.value | camQueryComponent }}\n    </span>\n  </span>\n\n  <span ng-if="extended && potentialNames.length <= 0 && !name.value.value"\n        cam-widget-inline-field\n        class="set-value name-field"\n        tabindex="0"\n        ng-keydown="onKeydown($event, \'name\')"\n        type="text"\n        change="changeSearch(\'name\', varValue, $event)"\n        on-start-editing="clearEditTrigger(\'name\')"\n        value="name.value">\n    <span ng-if="name.tooltip"\n          tooltip-placement="top"\n          uib-tooltip="{{name.tooltip | translate }}">\n        {{ name.value | camQueryComponent }}\n    </span>\n    <span ng-if="!name.tooltip">\n        {{ name.value | camQueryComponent }}\n    </span>\n  </span>\n\n  <span ng-if="extended && potentialNames.length > 0"\n        cam-widget-inline-field\n        class="set-value name-field"\n        tabindex="0"\n        ng-keydown="onKeydown($event, \'name\')"\n        type="option"\n        options="potentialNames"\n        allow-non-options="true"\n        disable-autoselect="disableTypeaheadAutoselect"\n        change="changeSearch(\'name\', varValue, $event)"\n        on-start-editing="clearEditTrigger(\'name\')"\n        value="name.value">\n    <span ng-if="extended && name.tooltip && name.value.key">\n      {{ name.value.value | camQueryComponent }}\n    </span>\n    <span ng-if="extended && name.tooltip && !name.value.key">\n      {{ name.value | camQueryComponent }}\n    </span>\n    <span ng-if="extended && !name.tooltip && name.value.key">\n      {{ name.value.value | camQueryComponent }}\n    </span>\n    <span ng-if="extended && !name.tooltip && !name.value.key">\n      {{ name.value | camQueryComponent }}\n    </span>\n  </span>\n\n  <span ng-if="!basic && operator.values.length > 1"\n        cam-widget-inline-field\n        class="set-value operator-field"\n        tabindex="0"\n        ng-keydown="onKeydown($event, \'operator\')"\n        type="option"\n        options="operator.values"\n        change="changeSearch(\'operator\', varValue, $event)"\n        on-start-editing="clearEditTrigger(\'operator\')"\n        value="operator.value">\n    <span ng-if="operator.tooltip"\n          tooltip-placement="top"\n          uib-tooltip="{{operator.tooltip | translate }}">\n      {{ operator.value.value | camQueryComponent }}\n    </span>\n    <span ng-if="!operator.tooltip">\n      {{ operator.value.value | camQueryComponent }}\n    </span>\n  </span>\n\n  <span ng-if="operator.values.length < 2 && operator.tooltip"\n        tooltip-placement="top"\n        uib-tooltip="{{operator.tooltip | translate }}"\n        class="operator-field">\n    {{ operator.value.value | camQueryComponent }}\n  </span>\n  <span ng-if="operator.values.length < 2 && !operator.tooltip"\n        class="operator-field">\n    {{ operator.value.value | camQueryComponent }}\n  </span>\n\n  <span cam-widget-inline-field\n        class="set-value value-field"\n        tabindex="0"\n        ng-keydown="onKeydown($event, \'value\')"\n        type="{{ valueType }}"\n        change="changeSearch(\'value\', varValue, $event)"\n        on-start-editing="clearEditTrigger(\'value\')"\n        ng-if="!basic"\n        options="options"\n        allow-non-options="allowNonOptions"\n        value="value.value"\n        flexible="{{ allowDates }}">\n    <span class="visible-whitespace"\n          ng-if="value.tooltip"\n          tooltip-placement="top"\n          uib-tooltip="{{value.tooltip | translate }}">{{ value.value | camQueryComponent }}</span>\n    <span class="visible-whitespace"\n          ng-if="!value.tooltip">{{ value.value | camQueryComponent }}</span>\n  </span>\n</span>\n\x3c!-- CE / camunda-commons-ui/lib/widgets/search-pill/search-pill.html --\x3e\n'}}]},{jquery:"jquery"}],121:[function(e,t,n){"use strict";var S=e("camunda-bpm-sdk-js/vendor/angular"),T=S.copy,O=e("jquery"),i=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(?:.(\d\d\d)| )?$/;function A(e){return e&&"string"==typeof e&&e.match(i)?"date":typeof e}function I(e){return e.type.value&&(!e.extended||e.name.value)&&(e.basic||e.operator.value)&&(e.basic||e.value.value)&&("date"===A(e.value.value)||!e.enforceDates)}function D(e){if(e.value){var t=e.values.map(function(e){return e.key}).indexOf(e.value.key);e.value=e.values[-1===t?0:t]}else e.value=e.values[0]}var P=!1;t.exports=["$timeout","$location","search","widgetLocalConf",function(x,E,C,k){return{restrict:"A",scope:{types:"=camWidgetSearchTypes",translations:"=camWidgetSearchTranslations",operators:"=camWidgetSearchOperators",searches:"=?camWidgetSearchSearches",validSearches:"=?camWidgetSearchValidSearches",storageGroup:"=?camWidgetSearchStorageGroup",searchId:"@camWidgetSearchId",total:"=?camWidgetSearchTotal",matchAny:"=?camWidgetSearchMatchAny",variableCaseHandling:"=?camWidgetSearchVariableCaseHandling",disableTypeaheadAutoselect:"=?camWidgetSearchDisableTypeaheadAutoselect"},link:function(s,c){s.isMatchAnyActive=void 0!==s.matchAny,s.isVariableCaseHandlingActive=void 0!==s.variableCaseHandling,s.isVariableCaseHandlingActive&&(s.caseHandeling={},s.caseHandeling.ignoreValues="values"===s.variableCaseHandling||"all"===s.variableCaseHandling,s.caseHandeling.ignoreNames="names"===s.variableCaseHandling||"all"===s.variableCaseHandling),s.switchMatchType=function(){s.isMatchAnyActive&&(s.matchAny=!s.matchAny)},s.focused=!1;var e=S.element(c).find("form")[0];e.addEventListener("focus",function(){x(function(){s.focused=!0})},!0),e.addEventListener("blur",function(){x(function(){s.focused=!1})},!0);function i(){var t=!1;return S.forEach(s.searches,function(e){-1<["caseInstanceVariables","taskVariables","processVariables"].indexOf(e.type.value.key)&&(t=!0)}),t}s.searchHasVariableQuery=i(),function(n){x(function(){var e=document.createElement("input");e.setAttribute("type","text"),e.setAttribute("placeholder","set");var t=!1;e.addEventListener("input",function(){t=!0}),document.body.appendChild(e),e.focus(),document.body.removeChild(e),x(function(){n(t)})},0,!1)}(function(e){if(e){var t=document.createElement("div");t.textContent=s.translations.inputPlaceholder+":",c[0].insertBefore(t,c[0].firstChild),s.$root.$broadcast("plugin:search:change")}else c[0].querySelector("input.main-field").setAttribute("placeholder",s.translations.inputPlaceholder)}),s.searchTypes=s.types.map(function(e){return e.id}),s.getRightPadding=function(){return 400<c.width()?"125px":"12px"};function r(){var i=s.searches.map(function(e){return e.type.value.key}).reduce(function(e,t){return-1===e.indexOf(t)&&e.push(t),e},[]).map(function(e){return u(e)?u(e).groups:null}).filter(function(e){return!!e}).reduce(function(e,t){if(e){if(0===e.length)return S.copy(t);for(var n=0;n<e.length;n++)-1===t.indexOf(e[n])&&(e.splice(n,1),n--);return 0===e.length?null:e}return null},[]);return null===i?[]:0===i.length?s.searchTypes:s.searchTypes.filter(function(e){var t=u(e.key).groups;if(!t)return!0;for(var n=0;n<t.length;n++)if(-1<i.indexOf(t[n]))return!0;return!1})}function l(e,t){return e.operators||s.operators[A(function(e,t){return t?""+e:isNaN(e)||""===e.trim()?"true"===e||"false"!==e&&("NULL"===e?null:e):+e}(t,e.enforceString))]}function o(e){return e.map(function(n){var e=u(n.type);if(e){var t={extended:e.extended,basic:e.basic,type:{values:r(),value:r().reduce(function(e,t){return e||(t.key===n.type?t:null)},null),tooltip:s.translations.type},name:{value:n.name,tooltip:s.translations.name},options:e.options,operator:{tooltip:s.translations.operator},value:{value:n.value,tooltip:s.translations.value},allowDates:e.allowDates,enforceDates:e.enforceDates,potentialNames:e.potentialNames||[],enforceString:e.enforceString};return t.operator.values=l(e,t.value.value),t.operator.value=t.operator.values.reduce(function(e,t){return e||(t.key===n.operator?t:null)},null),t.valid=I(t),t}}).filter(function(e){return e})}function n(){var e=JSON.parse((E.search()||{})[p+"Query"]||"[]");return o(e)}var a=s.types.reduce(function(e,t){return e||(t.default?t:null)},null),u=function(n){return s.types.reduce(function(e,t){return e||(t.id.key===n?t:null)},null)},p=s.searchId||"search";s.searches=s.searches||[],s.searches=n(),s.validSearchesBuffer=s.searches.reduce(function(e,t){return t.valid&&e.push(t),e},[]),s.validSearches=S.copy(s.validSearchesBuffer);s.createSearch=function(e){if(e||s.inputQuery){var t=e?"":s.inputQuery;e=e&&u(e.key)||a;var n=l(e,t);s.searches.push({extended:e.extended,basic:e.basic,type:{values:r(),value:e.id,tooltip:s.translations.type},name:{value:"",inEdit:e.extended,tooltip:s.translations.name},operator:{value:n[0],values:n,tooltip:s.translations.operator},options:e.options,value:{value:t,inEdit:!e.extended&&!t,tooltip:s.translations.value},allowDates:e.allowDates,enforceDates:e.enforceDates,potentialNames:e.potentialNames,enforceString:e.enforceString});var i=s.searches[s.searches.length-1];i.valid=I(i),t?s.inputQuery="":x(function(){x(function(){s.inputQuery="",O(c[0].querySelector(".search-container > input")).blur()})})}},s.deleteSearch=function(e){s.searches.splice(e,1),x(function(){O(c[0].querySelector(".search-container > input")).focus()})},s.handleChange=function(e,t,n,i,r){var o,a=s.searches[e];"type"===t?(o=u(i.key),a.extended=o.extended,a.basic=o.basic,a.allowDates=o.allowDates,!a.enforceDates&&o.enforceDates&&(a.value.value=""),a.enforceDates=o.enforceDates,a.operator.values=l(o,a.value.value),D(a.operator)):"value"===t&&(e===s.searches.length-1&&x(function(){O(c[0].querySelector(".search-container > input")).focus()}),(o=u(a.type.value.key)).operators||(a.operator.values=l(o,a.value.value),D(a.operator))),a.valid=I(a),r&&13===r.keyCode&&function(e,t){var n=s.searches[e];if(!n.valid){if(n.extended&&!n.name.value&&"name"!==t)return n.name.inEdit=!0;if("value"!==t)return n.value.inEdit=!0}for(var i=1;i<s.searches.length;i++){var r=(i+e)%s.searches.length;if(!(n=s.searches[r]).valid)return n.extended&&!n.name.value?n.name.inEdit=!0:n.value.inEdit=!0}}(e,t)},s.onKeydown=function(e){-1===[38,40,13].indexOf(e.keyCode)||0===O(c[0].querySelectorAll('.dropdown-menu[id^="typeahead"]')).length&&x(function(){S.element(e.target).triggerHandler("input")})};function d(e){var t=[];return S.forEach(e,function(e){t.push({type:e.type.value.key,operator:e.operator.value.key,value:e.value.value,name:e.name.value})}),t}function f(){var n=s.searches;S.forEach(n,function(e){e.valid&&-1===s.validSearchesBuffer.indexOf(e)&&s.validSearchesBuffer.push(e)}),S.forEach(s.validSearchesBuffer,function(e,t){e.valid&&-1!==n.indexOf(e)||s.validSearchesBuffer.splice(t,1)});var e,t={};if(t[p+"Query"]=JSON.stringify(d(s.validSearchesBuffer)),s.isMatchAnyActive&&(s.matchAny&&!E.search().hasOwnProperty(p+"OrQuery")?e=E.url()+"&"+p+"OrQuery":s.matchAny||(e=E.url().replace("&"+p+"OrQuery","")),E.url(e),E.replace()),s.isVariableCaseHandlingActive){s.searchHasVariableQuery=i();s.variableCaseHandling=["none","names","values","all"][!!s.caseHandeling.ignoreNames+2*!!s.caseHandeling.ignoreValues],t.variableCaseHandling=s.variableCaseHandling}P=!0,C.updateSilently(t,!E.search()[p+"Query"]),x(function(){P=!1}),h()}var t;s.$watch("[searches, matchAny, caseHandeling]",f,!0),s.$on("$locationChangeSuccess",function(){if(s.matchAny=E.search().hasOwnProperty(p+"OrQuery"),!P&&E.search().hasOwnProperty(p+"Query")){var t=n();S.equals(t,s.validSearchesBuffer)||(S.forEach(s.searches,function(e){e.valid||t.push(e)}),s.validSearchesBuffer=[],s.searches=t)}}),s.$watch("validSearchesBuffer",function(){x.cancel(t),t=x(function(){s.validSearches=S.copy(s.validSearchesBuffer)})},!0);var h=function(){var e=r();s.dropdownTypes=e;for(var t=0;t<s.searches.length;t++)s.searches[t].type.values=e};s.$watch("types",function(){s.searchTypes=s.types.map(function(e){return e.id}),s.dropdownTypes=r(),S.forEach(s.searches,function(e){e.potentialNames=u(e.type.value.key)?u(e.type.value.key).potentialNames||[]:null})},!0),s.dropdownTypes=r();for(var m=s.searchCriteriaStorage={group:null,nameInput:"",available:{}},v={},g=s.storageGroup?[s.storageGroup]:s.types.map(function(e){return e.groups}).reduce(function(e,t){return(e||[]).concat(t)}).filter(function(e){return e}),y=[],b=0;b<g.length;b++)y.indexOf(g[b])<0&&g[b]&&y.push(g[b]);function _(){if(m.available={},m.group)return s.isSearchCriteriaStorageGrouped=!1,void(m.available=T(v[m.group]));s.isSearchCriteriaStorageGrouped=!0,y.forEach(function(e){m.available[e]=T(v[e]||{})})}function w(e,t){return t?{group:t,name:e}:m.group?{group:m.group,name:e}:void 0}!y.length&&s.storageGroup&&y.push(s.storageGroup),y.forEach(function(e){v[e]={}}),s.$watch("validSearches",function(){if(s.storageGroup)return m.group=s.storageGroup,void _();var n=null;s.validSearches.forEach(function(e){if(!n){var t=e.type.value.key;s.types.forEach(function(e){n||e.id.key===t&&1===(e.groups||[]).length&&(n=(e.groups||[])[0])})}}),m.group=n,_()},!0),v=k.get("searchCriteria",v),_(),s.$watch("storageGroup",function(){s.storageGroup&&y.indexOf(s.storageGroup)<0||(m.group=s.storageGroup,_())}),s.storedCriteriaInputClick=function(e){e.stopPropagation()},s.searchCriteriaInputKeydown=function(e){if(13===e.keyCode)return s.storedCriteriaSaveClick(e)},s.hasCriteriaSets=function(){return!!Object.keys(m.available||{}).length},s.loadCriteriaSet=function(e,t,n){var i=w(t,n);if(i){var r=v[i.group][i.name];s.searches=o(r),s.isMatchAnyActive&&(s.matchAny=r[r.length-1].matchAny),s.isVariableCaseHandlingActive&&(s.caseHandeling=r[r.length-1].caseHandeling),f()}},s.dropCriteriaSet=function(e,t,n){e.stopPropagation();var i=w(t,n);i&&(delete v[i.group][i.name],k.set("searchCriteria",v),_())},s.storedCriteriaSaveClick=function(e){e.stopPropagation();var t=m.nameInput;t&&(v[m.group]=v[m.group]||{},v[m.group][t]=d(s.validSearchesBuffer),s.isMatchAnyActive&&v[m.group][t].push({matchAny:s.matchAny}),s.isVariableCaseHandlingActive&&v[m.group][t].push({caseHandeling:S.copy(s.caseHandeling)}),k.set("searchCriteria",v),_(),m.nameInput="")}},template:'<div class="search-field">\n  <form ng-submit="createSearch()"\n        ng-class="{\'has-search\': searches.length, \'focused\': focused}">\n\n    <div class="form-container search-container"\n         ng-style="{\'padding-right\': getRightPadding()}"\n         ng-class="{\'has-icon\': !!mode}">\n      <div ng-if="isMatchAnyActive && searches.length > 0"\n           class="match-any">\n        <button ng-click="switchMatchType()"\n                type="button"\n                class="btn btn-default btn-xs"\n                ng-disabled="searches.length < 2">\n          {{ (matchAny ? \'CAM_WIDGET_SEARCH_MATCH_TYPE_ANY\' : \'CAM_WIDGET_SEARCH_MATCH_TYPE_ALL\') | translate }}\n        </button>\n        <span ng-disabled="searches.length < 2">{{ \'CAM_WIDGET_SEARCH_MATCH_TYPE\' | translate }}</span>\n        </div>\n        <span ng-if="mode" class="search-type glyphicon" ng-class="\'glyphicon-\' + mode"></span>\n      <span cam-widget-search-pill\n            ng-repeat="search in searches"\n            extended="search.extended"\n            basic="search.basic"\n            allow-dates="search.allowDates"\n            enforce-dates="search.enforceDates"\n            valid="search.valid"\n            name="search.name"\n            potential-names="search.potentialNames"\n            type="search.type"\n            operator="search.operator"\n            value="search.value"\n            options="search.options"\n            allow-non-values="search.allowNonValues"\n            invalid-text="{{ translations.invalid }}"\n            delete-text="{{ translations.deleteSearch }}"\n            on-change="handleChange($index, field, before, value, $event)"\n            on-delete="deleteSearch($index)"\n            disable-typeahead-autoselect="disableTypeaheadAutoselect"></span>\n\n\n      <div class="ignore-case" ng-if="searchHasVariableQuery && isVariableCaseHandlingActive">\n        {{\'CAM_WIDGET_SEARCH_VARIABLE_CASE_ATTRIBUTE\' | translate }}\n          <label>\n            <input type="checkbox" ng-model="caseHandeling.ignoreNames" >\n            {{\'CAM_WIDGET_SEARCH_VARIABLE_CASE_NAME\' | translate}}\n          </label>\n          <label>\n            <input type="checkbox" ng-model="caseHandeling.ignoreValues">\n            {{\'CAM_WIDGET_SEARCH_VARIABLE_CASE_VALUE\' | translate}}\n          </label>.\n      </div>\n\n      <input class="form-control main-field"\n             type="text"\n             ng-model="inputQuery"\n             ng-keydown="onKeydown($event)"\n             uib-typeahead="type as type.value for type in dropdownTypes | filter:$viewValue:instantTypeahead"\n             typeahead-on-select="createSearch($item)"\n             instant-typeahead />\n\n\n    </div>\n  </form>\n  <div class="controls">\n    <span ng-if="total"\n          class="total-results"\n          uib-tooltip="{{ \'CAM_WIDGET_SEARCH_TOTAL_NUMBER_RESULTS\' | translate }}">\n      {{total}}\n    </span>\n\n    <span cam-share-link></span>\n\n    <span class="dropdown stored-criteria" uib-dropdown>\n      <button ng-disabled="!searches.length && !hasCriteriaSets()"\n              class="dropdown-toggle btn btn-default" uib-dropdown-toggle>\n        <span class="glyphicon glyphicon-floppy-disk"></span>\n        <span class="caret"></span>\n      </button>\n\n      <ul class="dropdown-menu dropdown-menu-right"\n          ng-if="searchCriteriaStorage.group || hasCriteriaSets()" uib-dropdown-menu>\n        <li ng-if="searchCriteriaStorage.group">\n          <div class="input-group input-group-sm">\n            <input type="text"\n                   class="form-control"\n                   ng-model="searchCriteriaStorage.nameInput"\n                   ng-click="storedCriteriaInputClick($event)"\n                   ng-keydown="searchCriteriaInputKeydown($event)" />\n            <span class="input-group-btn">\n              <button ng-disabled="!searchCriteriaStorage.nameInput"\n                      ng-click="storedCriteriaSaveClick($event)"\n                      class="btn btn-default"\n                      type="button">\n                <span class="glyphicon glyphicon-ok"></span>\n              </button>\n            </span>\n          </div>\n        </li>\n\n        <li role="separator"\n            class="divider"\n            ng-if="searchCriteriaStorage.group && hasCriteriaSets()"></li>\n\n        <li class="stored-criteria-set"\n            ng-if="hasCriteriaSets() && !isSearchCriteriaStorageGrouped"\n            ng-repeat="(key, value) in searchCriteriaStorage.available">\n          <div>\n            <a class="glyphicon glyphicon-remove-sign"\n               ng-click="dropCriteriaSet($event, key)"\n               href></a>\n\n            <a href\n               ng-click="loadCriteriaSet($event, key)">{{ key }}</a>\n          </div>\n        </li>\n\n        <li class="stored-criteria-set"\n            ng-if="hasCriteriaSets() && isSearchCriteriaStorageGrouped"\n            ng-repeat="(group, values) in searchCriteriaStorage.available">\n          <div ng-repeat="(name, value) in values">\n            <a class="glyphicon glyphicon-remove-sign"\n              ng-click="dropCriteriaSet($event, name, group)"\n              href></a>\n\n            <a href\n              ng-click="loadCriteriaSet($event, name, group)">{{ group }} : {{ name }}</a>\n          </div>\n        </li>\n      </ul>\n    </span>\n  </div>\n</div>\n'}}]},{"camunda-bpm-sdk-js/vendor/angular":53,jquery:"jquery"}],122:[function(e,t,n){"use strict";var r=e("camunda-bpm-sdk-js/vendor/angular"),i=e("camunda-bpm-sdk-js/lib/forms/type-util"),o={};function a(e){return(e=e||new Date).toISOString().slice(0,-5)}o.camundaFormattedDate=a,o.templateDialog='\x3c!-- # CE - camunda-commons-ui/lib/widgets/variable/cam-widget-variable-dialog.html --\x3e\n<div class="modal-header">\n  <h3 translate="CAM_WIDGET_VARIABLE_DIALOG_INSPECT"\n      translate-values="{name: variable.name}"></h3>\n</div>\n\n<div class="modal-body">\n  <div ng-if="readonly"\n       class="form-group">\n    <label>{{ \'CAM_WIDGET_VARIABLE_DIALOG_LABEL_OBJECT_TYPE\' | translate }}</label>\n    <code class="form-control-static"\n          cam-widget-clipboard="variable.valueInfo.objectTypeName">{{ variable.valueInfo.objectTypeName }}</code>\n  </div>\n\n  <div ng-if="readonly"\n       class="form-group">\n    <label>{{ \'CAM_WIDGET_VARIABLE_DIALOG_LABEL_SERIALIZATION\' | translate }}</label>\n    <code class="form-control-static"\n          cam-widget-clipboard="variable.valueInfo.serializationDataFormat">{{ variable.valueInfo.serializationDataFormat }}</code>\n  </div>\n\n  <div ng-if="!readonly"\n       class="form-group">\n    <label for="object-type-name"\n           cam-widget-clipboard="variable.valueInfo.objectTypeName">{{ \'CAM_WIDGET_VARIABLE_DIALOG_LABEL_OBJECT_TYPE\' | translate }}</label>\n    <input type="text"\n           id="object-type-name"\n           class="form-control"\n           ng-model="variable.valueInfo.objectTypeName" />\n  </div>\n\n  <div ng-if="!readonly"\n       class="form-group">\n    <label for="serialization-data-format"\n           cam-widget-clipboard="variable.valueInfo.serializationDataFormat">{{ \'CAM_WIDGET_VARIABLE_DIALOG_LABEL_SERIALIZATION\' | translate }}</label>\n    <input type="text"\n           id="serialization-data-format"\n           class="form-control"\n           ng-model="variable.valueInfo.serializationDataFormat" />\n  </div>\n\n  <div class="form-group">\n    <label for="serialized-value"\n           cam-widget-clipboard="variable.value"\n           no-tooltip\n           ng-class="{hovered: hovered === \'var-value\'}">{{ \'CAM_WIDGET_VARIABLE_DIALOG_LABEL_SERIALIZED_VALUE\' | translate }}</label>\n    <textarea ng-model="variable.value"\n              id="serialized-value"\n              rows="10"\n              class="form-control"\n              ng-readonly="readonly"\n              ng-mouseenter="toggleHover(\'var-value\')"\n              ng-mouseleave="toggleHover()"></textarea>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-default"\n          ng-click="$dismiss(\'close\')">\n    {{ \'CAM_WIDGET_VARIABLE_DIALOG_BTN_CLOSE\' | translate }}\n  </button>\n\n  <button class="btn btn-primary"\n          ng-if="!readonly"\n          ng-readonly="!hasChanged(\'serialized\')"\n          ng-click="$close(variable)">\n    {{ \'CAM_WIDGET_VARIABLE_DIALOG_BTN_CHANGE\' | translate }}\n  </button>\n</div>\n\x3c!-- / CE - camunda-commons-ui/lib/widgets/variable/cam-widget-variable-dialog.html --\x3e\n',o.templateStringDialog='\x3c!-- # CE - camunda-commons-ui/lib/widgets/variable/cam-widget-variable-dialog.html --\x3e\n<div class="modal-header">\n  <h3 translate="CAM_WIDGET_STRING_DIALOG_TITLE"\n      translate-values="{name: variable.name}"></h3>\n</div>\n\n<div class="modal-body">\n  <div class="form-group">\n    <label for="value"\n           cam-widget-clipboard="variable.value"\n           no-tooltip\n           ng-class="{hovered: hovered === \'var-value\'}">\n      {{ \'CAM_WIDGET_STRING_DIALOG_LABEL_VALUE\' | translate }}\n    </label>\n    <textarea ng-model="variable.value"\n              id="value"\n              rows="10"\n              class="form-control cam-string-variable"\n              ng-readonly="readonly"\n              ng-mouseenter="toggleHover(\'var-value\')"\n              ng-mouseleave="toggleHover()"></textarea>\n  </div>\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-default"\n          ng-click="$dismiss(\'close\')">\n    {{ \'CAM_WIDGET_STRING_DIALOG_LABEL_CLOSE\' | translate }}\n  </button>\n</div>\n\x3c!-- / CE - camunda-commons-ui/lib/widgets/variable/cam-widget-variable-dialog.html --\x3e\n',o.modalCtrl=["$scope","variable","readonly",function(t,e,n){t.hovered=!1,t.toggleHover=function(e){t.hovered=e},t.variable=e,t.readonly=n;var i=r.copy(e);t.hasChanged=function(){return i.valueInfo=i.valueInfo||{},e.valueInfo=e.valueInfo||{},i.value!==e.value||i.valueInfo.serializationDataFormat!==e.valueInfo.serializationDataFormat||i.valueInfo.objectTypeName!==e.valueInfo.objectTypeName}}],o.typeUtils=i,o.types=["Boolean","Bytes","File","Date","Double","Integer","Long","Null","Object","Short","String","Json","Xml"],o.defaultValues={Boolean:!1,Bytes:null,File:null,Date:a(),Double:0,Integer:0,Long:0,Null:"",Short:0,String:"",Object:{},Json:"",Xml:""},o.isPrimitive=function(t){return function(e){return!e&&!t.variable||(!(e=e||t.variable.type)||0<=["Boolean","Date","Double","Integer","Long","Short","String"].indexOf(e))}},o.isBinary=function(t){return function(e){return!(!e&&!t.variable)&&(!!(e=e||t.variable.type)&&0<=["Bytes","File"].indexOf(e))}},o.useCheckbox=function(t){return function(e){return!(!e&&!t.variable)&&"Boolean"===(e=e||t.variable.type)}},o.validate=function(t){return function(){var e;(t.variable.name&&t.variable.type?null===t.variable.value||-1<["String","Object","Null"].indexOf(t.variable.type)?t.valid=!0:t.valid=i.isType(t.variable.value,t.variable.type):t.valid=!1,!t.valid)||t.variable.type&&null!==t.variable.value&&t.isPrimitive(t.variable.type)&&(e="Boolean"!==t.variable.type?i.convertToType(t.variable.value,t.variable.type):!!t.variable.value&&"false"!==t.variable.value,typeof t.variable.value!=typeof e&&(t.variable.value=e))}},t.exports=o},{"camunda-bpm-sdk-js/lib/forms/type-util":49,"camunda-bpm-sdk-js/vendor/angular":53}],123:[function(e,t,n){"use strict";var o=e("camunda-bpm-sdk-js/lib/forms/type-util");t.exports=[function(){return{require:"ngModel",link:function(e,t,n,i){function r(e){var t=n.camVariableValidator;return-1!==["String","Object","Null"].indexOf(t)?i.$setValidity("camVariableValidator",!0):i.$setValidity("camVariableValidator",!!o.isType(e,t)),e}i.$parsers.unshift(r),i.$formatters.push(r),n.$observe("camVariableValidator",function(){return r(i.$viewValue)})}}}]},{"camunda-bpm-sdk-js/lib/forms/type-util":49}],124:[function(e,t,n){"use strict";var a=e("camunda-bpm-sdk-js/vendor/angular"),s=e("./cam-variable-utils"),c=s.types,l=s.modalCtrl;t.exports=["$uibModal",function(n){return{template:'<div ng-if="display && isShown(\'type\')"\n     class="type">{{ variable.type }}</div>\n<div ng-if="display && isShown(\'name\')"\n     class="name">{{ variable.name }}</div>\n<div ng-if="display && isShown(\'value\') && isPrimitive()"\n     ng-class="{null: isNull()}"\n     class="value">\n  <span ng-if="isNull()"\n        class="null-symbol">{{ \'CAM_WIDGET_VARIABLE_NULL\' | translate }}</span>\n  {{ (variable.value === null ? \'\' : variable.value.toString()) }}\n</div>\n<div ng-if="display && isShown(\'value\') && variable.type === \'Object\'"\n     ng-class="{null: isNull()}"\n     class="value">\n  <a ng-click="editVariableValue()">\n    {{ variable.valueInfo.objectTypeName }}\n  </a>\n</div>\n\n\n<div ng-if="!display"\n     class="input-group editing">\n  <div ng-if="isShown(\'type\')"\n       class="input-group-btn type">\n    <select class="form-control"\n            ng-model="variable.type"\n            ng-options="variableType for variableType in variableTypes track by variableType"\n            ng-disabled="isDisabled(\'type\')"\n            required>\n    </select>\n  </div>\x3c!-- /btn-group --\x3e\n\n  <input ng-if="isShown(\'name\')"\n         type="text"\n         class="form-control name"\n         ng-model="variable.name"\n         placeholder="varName"\n         ng-disabled="isDisabled(\'name\')"\n         required />\n\n  <div ng-if="isShown(\'value\') && !isNull()"\n       class="value-wrapper input-group"\n       ng-class="{checkbox: useCheckbox()}">\n    <div ng-if="variable.type !== \'Null\'"\n         class="input-group-btn">\n      <a ng-click="setNull()"\n         class="btn btn-default set-null"\n         ng-disabled="isDisabled(\'value\')"\n         uib-tooltip="{{ \'CAM_WIDGET_VARIABLE_SET_VALUE_NULL\' | translate }}">\n        <span class="glyphicon glyphicon-remove"></span>\n      </a>\n    </div>\n\n    <input ng-if="isPrimitive() && !useCheckbox()"\n           type="text"\n           class="form-control value"\n           ng-model="variable.value"\n           ng-disabled="isDisabled(\'value\')"\n           placeholder="{{ \'CAM_WIDGET_VARIABLE_VALUE\' | translate }}"\n           cam-variable-validator="{{variable.type}}" />\n\n    <input ng-if="useCheckbox()"\n           type="checkbox"\n           class="value"\n           ng-model="variable.value"\n           ng-disabled="isDisabled(\'value\')"\n           placeholder="{{ \'CAM_WIDGET_VARIABLE_VALUE\' | translate }}"\n           cam-variable-validator="{{variable.type}}" />\n\n    <div ng-if="variable.type === \'Object\'"\n         class="value form-control-static">\n      <a ng-click="editVariableValue()" ng-disabled="isDisabled(\'value\')">\n        {{ (variable.valueInfo.objectTypeName || \'CAM_WIDGET_VARIABLE_UNDEFINED\') | translate }}\n      </a>\n    </div>\n  </div>\n\n  <div ng-if="variable.type !== \'Null\' && isShown(\'value\') && isNull()"\n       ng-click="setNonNull()"\n       class="value-wrapper value null-value btn btn-default"\n       ng-disabled="isDisabled(\'value\')"\n       uib-tooltip="{{ \'CAM_WIDGET_VARIABLE_RESET\' | translate }}">\n    <span class="null-symbol">{{ \'CAM_WIDGET_VARIABLE_NULL\' | translate }}</span>\n  </div>\n\n  <div ng-if="variable.type === \'Null\'"\n       ng-disabled="isDisabled(\'value\')"\n       class="value-wrapper value btn no-click null-value">\n    <span class="null-symbol">{{ \'CAM_WIDGET_VARIABLE_NULL\' | translate }}</span>\n  </div>\n</div>\n',scope:{variable:"=camVariable",display:"@?",shown:"=?",disabled:"=?",hiddenTypes:"=?"},link:function(i,r){i.variableTypes=c.filter(function(e){return!Array.isArray(i.hiddenTypes)||!i.hiddenTypes.length||-1===i.hiddenTypes.indexOf(e)});var e=s.defaultValues;i.isPrimitive=s.isPrimitive(i),i.useCheckbox=s.useCheckbox(i),i.isShown=function(e){return!Array.isArray(i.shown)||!i.shown.length||-1<i.shown.indexOf(e)},i.isDisabled=function(e){return!(!Array.isArray(i.disabled)||!i.disabled.length)&&-1<i.disabled.indexOf(e)},i.shownClasses=function(){return Array.isArray(i.shown)&&i.shown.length?i.shown.map(function(e){return"show-"+e}).join(" "):""},i.$watch("shown",function(){r.removeClass("show-type show-name show-value").addClass(i.shownClasses())});var t=s.validate(i);i.valid=!0,i.$watch("variable.value",t),i.$watch("variable.name",t),i.$watch("variable.type",t),t();var o=i.variable.value;i.$watch("variable.type",function(e,t){"Boolean"===e?null!==i.variable.value&&(o=i.variable.value,i.variable.value="false"!==i.variable.value&&!!i.variable.value):"Boolean"===t&&(i.variable.value=o);var n=r[0].classList;t&&n.remove("var-type-"+t.toLowerCase()),e&&n.add("var-type-"+e.toLowerCase())}),i.isNull=function(){return null===i.variable.value},i.setNonNull=function(){i.variable.value=o||e[i.variable.type]},i.setNull=function(){o=i.variable.value,i.variable.value=null},i.editVariableValue=function(){n.open({template:s.templateDialog,controller:l,windowClass:"cam-widget-variable-dialog",resolve:{variable:function(){return a.copy(i.variable)},readonly:function(){return i.display}}}).result.then(function(e){i.variable.value=e.value,i.variable.valueInfo=e.valueInfo}).catch(a.noop)}}}}]},{"./cam-variable-utils":122,"camunda-bpm-sdk-js/vendor/angular":53}],125:[function(e,t,n){"use strict";var o=e("jquery");t.exports=["$compile",function(r){return{template:"<div></div>",scope:{info:"=",headerName:"="},link:function(e,t){var n=e.info.additions[e.headerName]||{};for(var i in n.scopeVariables=n.scopeVariables||{},n.scopeVariables)e[i]=n.scopeVariables[i];e.variable=e.info.variable,t.html("<div>"+n.html+"</div>"),r(o("div",t)[0])(e)}}}]},{jquery:"jquery"}],126:[function(e,t,n){"use strict";var u=e("camunda-bpm-sdk-js/vendor/angular"),p=e("../variable/cam-variable-utils"),d=p.typeUtils,f={variable:{name:null,type:null,value:null,valueInfo:{}},additions:{}};function h(t){return{then:function(e){e(u.copy(t.variable))}}}t.exports=["$uibModal","$translate",function(c,l){return{template:'<table class="cam-table">\n  <thead>\n  <tr>\n    <td ng-repeat="column in headers" ng-class="col-{{column.class}}">\n      <span class="{{column.class}}">{{column.content}}</span>\n      <a ng-if="column.sortable === true"\n         ng-click="changeOrder(column.request)">\n        <span class="glyphicon" ng-class="orderClass(column.request)"></span>\n      </a>\n    </td>\n    <td class="actions"\n        ng-if="editable.length">\n      Actions\n    </td>\n  </tr>\n  </thead>\n\n  <tbody>\n    <tr ng-repeat="(v, info) in variables"\n        ng-class="rowClasses(info, v)">\n      <td ng-repeat="headerClass in headerClasses track by $index"\n          ng-init="variable=info.variable"\n          ng-class="colClasses(info, headerClass, v)"\n          ng-switch on="headerClass">\n        \x3c!-- ................................................................................... --\x3e\n        <div ng-switch-when="type"\n             ng-if="!isEditable(\'type\', info)">\n          {{ variable.type }}\n        </div>\n        <select class="form-control"\n                ng-switch-when="type"\n                ng-if="isEditable(\'type\', info)"\n                ng-model="variable.type"\n                ng-options="variableType for variableType in variableTypes track by variableType"\n                required>\n        </select>\n        \x3c!-- ................................................................................... --\x3e\n\n\n        \x3c!-- ................................................................................... --\x3e\n        <div ng-switch-when="name"\n             ng-if="!isEditable(\'name\', info)">\n          <span cam-widget-clipboard="variable.name">{{ variable.name }}</span>\n        </div>\n\n        <input class="form-control"\n               ng-switch-when="name"\n               ng-model="variable.name"\n               ng-if="isEditable(\'name\', info)" />\n        \x3c!-- ................................................................................... --\x3e\n\n\n        \x3c!-- ................................................................................... --\x3e\n        <a ng-switch-when="value"\n           ng-if="!isEditable(\'value\', info) && isBinary(variable.type)"\n           ng-href="{{ downloadLink(info) }}"\n           download="{{ variable.name }}-data">\n          Download\n        </a>\n\n        <div ng-switch-when="value"\n             ng-if="!isEditable(\'value\', info) && variable.type === \'Object\'"\n             class="read-only value-wrapper">\n          <span ng-if="variable.valueInfo.objectTypeName"\n                cam-widget-clipboard="variable.valueInfo.objectTypeName">\n            <a ng-click="editVariableValue(v)"\n               href>{{ variable.valueInfo.objectTypeName }}</a>\n          </span>\n          <a ng-if="!variable.valueInfo.objectTypeName"\n             ng-click="editVariableValue(v)"\n             href>&lt;undefined&gt;</a>\n        </div>\n        <div ng-switch-when="value"\n             ng-if="!isEditable(\'value\', info) && (variable.type === \'Json\' || variable.type === \'Xml\')"\n             class="read-only value-wrapper">\n          <span cam-widget-clipboard="variable.value">\n            <a ng-click="editVariableValue(v)"\n               href>{{ variable.value }}</a>\n          </span>\n        </div>\n\n        <div ng-switch-when="value"\n             ng-if="!isEditable(\'value\', info) && variable.type === \'String\'"\n             class="read-only value-wrapper">\n          <span cam-widget-clipboard="variable.value">\n            <span ng-click="readStringVar(v)">{{ variable.value }}</span>\n          </span>\n        </div>\n\n        <div ng-switch-when="value"\n             ng-if="!isEditable(\'value\', info) && !hasEditDialog(variable.type)"\n             class="read-only value-wrapper">\n          <span ng-if="variable.type !== \'Bytes\' && variable.type !== \'Date\'"\n                cam-widget-clipboard="variable.value">{{ variable.value }}</span>\n          <span ng-if="variable.type === \'Bytes\'">{{ variable.value }}</span>\n          <span ng-if="variable.type === \'Date\'"\n                cam-widget-clipboard="variable.value">{{ variable.value | camDate }}</span>\n        </div>\n\n        <div class="value-wrapper"\n             ng-switch-when="value"\n             ng-if="isEditable(\'value\', info)">\n          <a ng-click="setNull(v)"\n             ng-if="!isNull(v)"\n             class="set-null"\n             tooltip-append-to-body="true"\n             uib-tooltip="{{ \'CAM_WIDGET_VARIABLES_TABLE_TOOLTIP_SET_NULL\' | translate }}">\n            <span class="glyphicon glyphicon-remove"></span>\n          </a>\n\n          <input ng-if="isPrimitive(variable.type) && !useCheckbox(variable.type) && !isNull(v)"\n                 type="text"\n                 class="form-control"\n                 ng-model="variable.value"\n                 placeholder="{{ \'CAM_WIDGET_VARIABLES_TABLE_PLACEHOLDER_VALUE\' | translate }}" />\n\n          <input ng-if="useCheckbox(variable.type)"\n                 type="checkbox"\n                 ng-model="variable.value"\n                 placeholder="{{ \'CAM_WIDGET_VARIABLES_TABLE_PLACEHOLDER_VALUE\' | translate }}" />\n\n          <a ng-if="variable.type === \'Object\' && !isNull(v)"\n             ng-click="editVariableValue(v)">\n            {{ variable.valueInfo.objectTypeName || \'&lt;undefined&gt;\' }}\n          </a>\n\n          <a ng-if="(variable.type === \'Json\' || variable.type === \'Xml\') && !isNull(v)"\n             ng-click="editVariableValue(v)">\n            {{ variable.value || \'&lt;undefined&gt;\' }}\n          </a>\n\n          <a ng-if="variable.type !== \'Null\' && !isBinary(variable.type) && isNull(v)"\n             ng-click="setNonNull(v)"\n             class="null-value"\n             tooltip-append-to-body="true"\n             uib-tooltip="{{ \'CAM_WIDGET_VARIABLES_TABLE_TOOLTIP_DEFAULT_VALUE\' | translate }}">\n            <span class="null-symbol">&lt;null&gt;</span>\n          </a>\n\n          <a ng-if="isBinary(variable.type)"\n             ng-click="uploadVariable(v)"\n             tooltip-append-to-body="true"\n             uib-tooltip="{{ \'CAM_WIDGET_VARIABLES_TABLE_TOOLTIP_UPLOAD\' | translate }}">\n            Upload\n          </a>\n\n          <span ng-if="variable.type === \'Null\'"\n                class="null-value">\n            <span class="null-symbol">{{ \'CAM_WIDGET_VARIABLES_TABLE_NULL\' | translate }}</span>\n          </span>\n        </div>\x3c!-- / value-wrapper --\x3e\n        \x3c!-- ................................................................................... --\x3e\n\n\n        <div ng-switch-default\n             cam-render-var-template\n             info="info"\n             header-name="headerClass">\n        </div>\n      </td>\n\n      <td class="actions"\n          ng-if="editable.length">\n        <div ng-if="!info.editMode"\n             class="btn-group">\n          <button class="btn btn-xs btn-primary"\n                  ng-disabled="!canEditVariable(info, v)"\n                  ng-click="info.editMode = true"\n                  tooltip-append-to-body="true"\n                  uib-tooltip="{{ \'CAM_WIDGET_VARIABLES_TABLE_EDIT_VARIABLE\' | translate }}">\n            <span class="glyphicon glyphicon-pencil"></span>\n          </button>\n          <button class="btn btn-xs btn-default"\n                  ng-disabled="!canEditVariable(info, v)"\n                  ng-click="deleteVariable(v)"\n                  tooltip-append-to-body="true"\n                  uib-tooltip="{{ \'CAM_WIDGET_VARIABLES_TABLE_DELETE_VARIABLE\' | translate }}">\n            <span class="glyphicon glyphicon glyphicon-trash"></span>\n          </button>\n        </div>\n\n        <div ng-if="info.editMode"\n             class="btn-group">\n          <button class="btn btn-xs btn-primary"\n                  ng-disabled="!info.valid || !info.changed"\n                  ng-click="saveVariable(v)"\n                  tooltip-append-to-body="true"\n                  uib-tooltip="{{ \'CAM_WIDGET_VARIABLES_TABLE_SAVE_VARIABLE\' | translate }}">\n            <span class="glyphicon glyphicon-ok"></span>\n          </button>\n          <button class="btn btn-xs btn-default"\n                  ng-click="info.editMode = false"\n                  tooltip-append-to-body="true"\n                  uib-tooltip="{{ \'CAM_WIDGET_VARIABLES_TABLE_REVERT_VARIABLE\' | translate }}">\n            <span class="glyphicon glyphicon-remove"></span>\n          </button>\n        </div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n',scope:{variables:"=?camVariables",headers:"=?camHeaders",editable:"=?camEditable",isVariableEditable:"=?",deleteVar:"=?onDelete",saveVar:"=?onSave",editVar:"=?onEdit",downloadVar:"=?onDownload",uploadVar:"=?onUpload",onSortChange:"&",defaultSort:"=?"},link:function(r){var o=[];function i(e){return(r.variables[e]||{}).variable}r.headerClasses=[],r.headers.forEach(function(e){r.headerClasses.push(e.class)}),r.editable=r.editable||r.headerClasses,r.variableTypes=u.copy(p.types),r.defaultValues=p.defaultValues,r.isPrimitive=p.isPrimitive(r),r.isBinary=p.isBinary(r),r.useCheckbox=p.useCheckbox(r),["uploadVar","deleteVar","saveVar"].forEach(function(e){r[e]=u.isFunction(r[e])?r[e]:h}),r.sortObj=r.defaultSort,r.orderClass=function(e){return"glyphicon-"+{none:"minus",desc:"chevron-down",asc:"chevron-up"}[(e=e||r.sortObj.sortBy)===r.sortObj.sortBy?r.sortObj.sortOrder:"none"]},r.changeOrder=function(e){r.sortObj.sortBy=e,r.sortObj.sortOrder="desc"===r.sortObj.sortOrder?"asc":"desc",r.onSortChange({sortObj:r.sortObj})};function n(e,t,n){return{template:t,controller:p.modalCtrl,windowClass:"cam-widget-variable-dialog",resolve:{variable:function(){return u.copy(i(e))},readonly:n}}}function a(e,t){var n;(e.variable.name&&e.variable.type?null===e.variable.value||-1<["String","Object","Null"].indexOf(e.variable.type)?e.valid=!0:e.valid=d.isType(e.variable.value,e.variable.type):e.valid=!1,!e.valid)||e.variable.type&&null!==e.variable.value&&r.isPrimitive(e.variable.type)&&(n="Boolean"!==e.variable.type?d.convertToType(e.variable.value,e.variable.type):!!e.variable.value&&"false"!==e.variable.value,typeof e.variable.value!=typeof n&&(e.variable.value=n));e.changed=function(e){if(!r.variables||!r.variables[e]||!r.variables[e]._copy)return!1;var t=i(e),n=r.variables[e]._copy;return!t||!n||t.name!==n.name||t.type!==n.type||t.value!==n.value}(t)}function e(){(r.variables||[]).forEach(function(n,e){n.valid=!0;var t="variables["+e+"].variable";function i(){a(n,e)}r.$watch(t+".value",i),r.$watch(t+".name",i),r.$watch(t+".type",i),r.$watch("variables["+e+"].editMode",function(e,t){u.isUndefined(e)||(!0===e?n._copy=function(e){return JSON.parse(JSON.stringify(e))}(n.variable):!1===e&&!0===t&&n._copy&&(n.variable.type=n._copy.type,n.variable.name=n._copy.name,n.variable.value=n._copy.value,delete n._copy))}),a(n,e),o[e]=n.variable.value})}r.editVar=u.isFunction(r.editVar)?r.editVar:function(e,t){return c.open(n(t,p.templateDialog,function(){return!r.isEditable("value",r.variables[t])})).result},r.readStringVar=u.isFunction(r.readStringVar)?r.readStringVar:function(e){return c.open(n(e,p.templateStringDialog,function(){return!0})).result},r.downloadLink=u.isFunction(r.downloadVar)?r.downloadVar:function(e){return"/camunda/api/engine/engine/default/variable-instance/"+e.variable.id+"/data"},r.$watch("variables",e),e(),r.canEditVariable=u.isFunction(r.isVariableEditable)?r.isVariableEditable:function(){return!0},r.isEditable=function(e,t){return t.editMode&&-1<r.editable.indexOf(e)},r.hasEditDialog=function(e){return e&&-1<["object","string","json","xml"].indexOf(e.toLowerCase())},r.rowClasses=function(e){return[e.editMode?"editing":null,e.valid?null:"ng-invalid",e.valid?null:"ng-invalid-cam-variable-validator"]},r.colClasses=function(e,t){return[r.isEditable(t,e)?"editable":null,"type-"+(e.variable.type||"").toLowerCase(),"col-"+t]},r.isNull=function(e){return null===r.variables[e].variable.value},r.setNull=function(e){var t=i(e);o[e]=t.value,t.value=null},r.setNonNull=function(e){var t=i(e);t.value=o[e]||r.defaultValues[t.type]},r.editVariableValue=function(t){var e=r.variables[t];r.editVar(e,t).then(function(e){i(t).value=e.value,i(t).valueInfo=e.valueInfo}).catch(u.noop)},r.addVariable=function(){r.variables.push(u.copy(f))},r.deleteVariable=function(t){var n=r.variables[t];c.open({controller:["$scope",function(e){e.body=l.instant("CAM_WIDGET_VARIABLES_TABLE_DIALOGUE",{name:n.variable.name}),e.submit=function(){e.$close(),s(t)},e.dismiss=function(){e.$close()}}],template:'<div class="modal-header">\n    <h3 class="modal-title">{{ \'CAM_WIDGET_VARIABLES_TABLE_DELETE\' | translate  }}</h3>\n</div>\n\n<div class="modal-body">\n  {{ body }}\n</div>\n\n<div class="modal-footer">\n    <button ng-click="dismiss()"\n          class="btn btn-default">\n    {{ \'CAM_WIDGET_VARIABLES_TABLE_ABORT\' | translate }}\n  </button>\n  <button ng-click="submit()"\n          class="btn btn-primary"\n          ng-hide="status === \'DONE\'">\n    \n    {{ \'CAM_WIDGET_VARIABLES_TABLE_DELETE\' | translate }} \n  </button> \n</div>\n\n'}).result.catch(u.noop)};var s=function(e){var t=r.variables[e];r.deleteVar(t,e).then(function(){r.variables.splice(r.variables.indexOf(t),1)},function(){})};r.saveVariable=function(e){var t=r.variables[e];t.editMode=!1,r.saveVar(t,e).then(function(e){t.variable.name=e.name,t.variable.type=e.type,t.variable.value=e.value,t.variable.valueInfo=e.valueInfo,delete t._copy},function(){t.editMode=!0})},r.uploadVariable=function(e){var t=r.variables[e];r.uploadVar(t,e).then(function(){delete t._copy,t.editMode=!1},function(){t.editMode=!1})}}}}]},{"../variable/cam-variable-utils":122,"camunda-bpm-sdk-js/vendor/angular":53}],127:[function(e,t,n){"use strict";t.exports=e("camunda-bpm-sdk-js/vendor/angular")},{"camunda-bpm-sdk-js/vendor/angular":53}],128:[function(e,t,n){t.exports=e("bootstrap")},{bootstrap:"bootstrap"}],129:[function(e,t,n){"use strict";t.exports=e("../bpmn-js")},{"../bpmn-js":57}],130:[function(e,t,n){"use strict";t.exports=e("camunda-bpm-sdk-js/lib/angularjs/index")},{"camunda-bpm-sdk-js/lib/angularjs/index":7}],131:[function(e,t,n){"use strict";t.exports=e("camunda-bpm-sdk-js")},{"camunda-bpm-sdk-js":4}],132:[function(e,t,n){"use strict";t.exports=e("lodash")},{lodash:"lodash"}],133:[function(e,t,n){"use strict";t.exports=e("camunda-bpm-sdk-js/vendor/moment")},{"camunda-bpm-sdk-js/vendor/moment":55}],134:[function(e,t,n){(function(e){var u="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},i=function(){var l=/\blang(?:uage)?-(?!\*)(\w+)\b/i,x=u.Prism={util:{encode:function(e){return e instanceof s?new s(e.type,x.util.encode(e.content),e.alias):"Array"===x.util.type(e)?e.map(x.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){switch(x.util.type(e)){case"Object":var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=x.util.clone(e[n]));return t;case"Array":return e.map&&e.map(function(e){return x.util.clone(e)})}return e}},languages:{extend:function(e,t){var n=x.util.clone(x.languages[e]);for(var i in t)n[i]=t[i];return n},insertBefore:function(n,e,t,i){var r=(i=i||x.languages)[n];if(2==arguments.length){for(var o in t=e)t.hasOwnProperty(o)&&(r[o]=t[o]);return r}var a={};for(var s in r)if(r.hasOwnProperty(s)){if(s==e)for(var o in t)t.hasOwnProperty(o)&&(a[o]=t[o]);a[s]=r[s]}return x.languages.DFS(x.languages,function(e,t){t===i[n]&&e!=n&&(this[e]=a)}),i[n]=a},DFS:function(e,t,n){for(var i in e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],n||i),"Object"===x.util.type(e[i])?x.languages.DFS(e[i],t):"Array"===x.util.type(e[i])&&x.languages.DFS(e[i],t,i))}},plugins:{},highlightAll:function(e,t){for(var n,i=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),r=0;n=i[r++];)x.highlightElement(n,!0===e,t)},highlightElement:function(e,t,n){for(var i,r,o=e;o&&!l.test(o.className);)o=o.parentNode;o&&(i=(o.className.match(l)||[,""])[1],r=x.languages[i]),e.className=e.className.replace(l,"").replace(/\s+/g," ")+" language-"+i,o=e.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(l,"").replace(/\s+/g," ")+" language-"+i);var a=e.textContent,s={element:e,language:i,grammar:r,code:a};if(a&&r)if(x.hooks.run("before-highlight",s),t&&u.Worker){var c=new Worker(x.filename);c.onmessage=function(e){s.highlightedCode=e.data,x.hooks.run("before-insert",s),s.element.innerHTML=s.highlightedCode,n&&n.call(s.element),x.hooks.run("after-highlight",s),x.hooks.run("complete",s)},c.postMessage(JSON.stringify({language:s.language,code:s.code,immediateClose:!0}))}else s.highlightedCode=x.highlight(s.code,s.grammar,s.language),x.hooks.run("before-insert",s),s.element.innerHTML=s.highlightedCode,n&&n.call(e),x.hooks.run("after-highlight",s),x.hooks.run("complete",s);else x.hooks.run("complete",s)},highlight:function(e,t,n){var i=x.tokenize(e,t);return s.stringify(x.util.encode(i),n)},tokenize:function(e,t){var n=x.Token,i=[e],r=t.rest;if(r){for(var o in r)t[o]=r[o];delete t.rest}e:for(var o in t)if(t.hasOwnProperty(o)&&t[o]){var a=t[o];a="Array"===x.util.type(a)?a:[a];for(var s=0;s<a.length;++s){var c=a[s],l=c.inside,u=!!c.lookbehind,p=0,d=c.alias;c=c.pattern||c;for(var f=0;f<i.length;f++){var h=i[f];if(i.length>e.length)break e;if(!(h instanceof n))if(c.lastIndex=0,m=c.exec(h)){u&&(p=m[1].length);var m,v=m.index-1+p,g=v+(m=m[0].slice(p)).length,y=h.slice(0,v+1),b=h.slice(g+1),_=[f,1];y&&_.push(y);var w=new n(o,l?x.tokenize(m,l):m,d);_.push(w),b&&_.push(b),Array.prototype.splice.apply(i,_)}}}}return i},hooks:{all:{},add:function(e,t){var n=x.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=x.hooks.all[e];if(n&&n.length)for(var i,r=0;i=n[r++];)i(t)}}},s=x.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(s.stringify=function(t,n,e){if("string"==typeof t)return t;if("Array"===x.util.type(t))return t.map(function(e){return s.stringify(e,n,t)}).join("");var i={type:t.type,content:s.stringify(t.content,n,e),tag:"span",classes:["token",t.type],attributes:{},language:n,parent:e};if("comment"==i.type&&(i.attributes.spellcheck="true"),t.alias){var r="Array"===x.util.type(t.alias)?t.alias:[t.alias];Array.prototype.push.apply(i.classes,r)}x.hooks.run("wrap",i);var o="";for(var a in i.attributes)o+=(o?" ":"")+a+'="'+(i.attributes[a]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+o+">"+i.content+"</"+i.tag+">"},!u.document)return u.addEventListener&&u.addEventListener("message",function(e){var t=JSON.parse(e.data),n=t.language,i=t.code,r=t.immediateClose;u.postMessage(x.highlight(i,x.languages[n],n)),r&&u.close()},!1),u.Prism;var e=document.getElementsByTagName("script");return(e=e[e.length-1])&&(x.filename=e.src,document.addEventListener&&!e.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",x.highlightAll)),u.Prism}();void 0!==t&&t.exports&&(t.exports=i),void 0!==e&&(e.Prism=i),i.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},i.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),i.languages.xml=i.languages.markup,i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},i.languages.css.atrule.inside.rest=i.util.clone(i.languages.css),i.languages.markup&&(i.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:i.languages.markup.tag.inside},rest:i.languages.css},alias:"language-css"}}),i.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:i.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:i.languages.css}},alias:"language-css"}},i.languages.markup.tag)),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),i.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),i.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}}}),i.languages.markup&&i.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:i.languages.markup.tag.inside},rest:i.languages.javascript},alias:"language-javascript"}}),i.languages.js=i.languages.javascript,i.languages.groovy=i.languages.extend("clike",{keyword:/\b(as|def|in|abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|native|new|package|private|protected|public|return|short|static|strictfp|super|switch|synchronized|this|throw|throws|trait|transient|try|void|volatile|while)\b/,string:/("""|''')[\W\w]*?\1|("|'|\/)(?:\\?.)*?\2|(\$\/)(\$\/\$|[\W\w])*?\/\$/,number:/\b(?:0b[01_]+|0x[\da-f_]+(?:\.[\da-f_p\-]+)?|[\d_]+(?:\.[\d_]+)?(?:e[+-]?[\d]+)?)[glidf]?\b/i,operator:{pattern:/(^|[^.])(~|==?~?|\?[.:]?|\*(?:[.=]|\*=?)?|\.[@&]|\.\.<|\.{1,2}(?!\.)|-[-=>]?|\+[+=]?|!=?|<(?:<=?|=>?)?|>(?:>>?=?|=)?|&[&=]?|\|[|=]?|\/=?|\^=?|%=?)/,lookbehind:!0},punctuation:/\.+|[{}[\];(),:$]/}),i.languages.insertBefore("groovy","string",{shebang:{pattern:/#!.+/,alias:"comment"}}),i.languages.insertBefore("groovy","punctuation",{"spock-block":/\b(setup|given|when|then|and|cleanup|expect|where):/}),i.languages.insertBefore("groovy","function",{annotation:{pattern:/(^|[^.])@\w+/,lookbehind:!0}}),i.hooks.add("wrap",function(e){if("groovy"===e.language&&"string"===e.type){var t=e.content[0];if("'"!=t){var n=/([^\\])(\$(\{.*?\}|[\w\.]+))/;"$"===t&&(n=/([^\$])(\$(\{.*?\}|[\w\.]+))/),e.content=i.highlight(e.content,{expression:{pattern:n,lookbehind:!0,inside:i.languages.groovy}}),e.classes.push("/"===t?"regex":"gstring")}}}),i.languages.java=i.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),i.languages.php=i.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),i.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),i.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,package:{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),i.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),i.languages.markup&&(i.hooks.add("before-highlight",function(t){"php"===t.language&&(t.tokenStack=[],t.backupCode=t.code,t.code=t.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(e){return t.tokenStack.push(e),"{{{PHP"+t.tokenStack.length+"}}}"}))}),i.hooks.add("before-insert",function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)}),i.hooks.add("after-highlight",function(e){if("php"===e.language){for(var t,n=0;t=e.tokenStack[n];n++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(n+1)+"}}}",i.highlight(t,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}}),i.hooks.add("wrap",function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),i.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:i.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),i.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(i)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],135:[function(e,t,n){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(f,h,m,e){var v=e.has("$animateCss")?e.get("$animateCss"):null;return{link:function(t,n,e){var i=m(e.expanding),r=m(e.expanded),o=m(e.collapsing),a=m(e.collapsed),s=!1,c={},l={};function u(e){return s?{width:e.scrollWidth+"px"}:{height:e.scrollHeight+"px"}}function p(){n.removeClass("collapsing").addClass("collapse").css(c),r(t)}function d(){n.css(l),n.removeClass("collapsing").addClass("collapse"),a(t)}!function(){l=(s=!!("horizontal"in e))?(c={width:""},{width:"0"}):(c={height:""},{height:"0"});t.$eval(e.uibCollapse)||n.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(c)}(),t.$watch(e.uibCollapse,function(e){e?function(){if(!n.hasClass("collapse")&&!n.hasClass("in"))return d();h.resolve(o(t)).then(function(){n.css(u(n[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),v?v(n,{removeClass:"in",to:l}).start().finally(d):f.removeClass(n,"in",{to:l}).then(d)},angular.noop)}():n.hasClass("collapse")&&n.hasClass("in")||h.resolve(i(t)).then(function(){n.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),v?v(n,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:u(n[0])}).start().finally(p):f.addClass(n,"in",{css:{overflow:"hidden"},to:u(n[0])}).then(p)},angular.noop)})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(e,t,n){n.$observe("disabled",function(e){n.$set("tabindex",e?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(e,n,i){this.groups=[],this.closeOthers=function(t){(angular.isDefined(n.closeOthers)?e.$eval(n.closeOthers):i.closeOthers)&&angular.forEach(this.groups,function(e){e!==t&&(e.isOpen=!1)})},this.addGroup=function(t){var n=this;this.groups.push(t),t.$on("$destroy",function(e){n.removeGroup(t)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(t,n,e,i){n.addClass("panel"),i.addGroup(t),t.openClass=e.openClass||"panel-open",t.panelClass=e.panelClass||"panel-default",t.$watch("isOpen",function(e){n.toggleClass(t.openClass,!!e),e&&i.closeOthers(t)}),t.toggleOpen=function(e){t.isDisabled||e&&32!==e.which||(t.isOpen=!t.isOpen)};var r="accordiongroup-"+t.$id+"-"+Math.floor(1e4*Math.random());t.headingId=r+"-tab",t.panelId=r+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(e,t,n,i,r){i.setHeading(r(e,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(e,n,t,i){e.$watch(function(){return i[t.uibAccordionTransclude]},function(e){if(e){var t=angular.element(n[0].querySelector("uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"));t.html(""),t.append(e)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(e,t,n,i,r){e.closeable=!!n.close,t.addClass("alert"),n.$set("role","alert"),e.closeable&&t.addClass("alert-dismissible");var o=angular.isDefined(n.dismissOnTimeout)?i(n.dismissOnTimeout)(e.$parent):null;o&&r(function(){e.close()},parseInt(o,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(s){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(t,n,i,e){var r=e[0],o=e[1],a=s(i.uibUncheckable);n.find("input").css({display:"none"}),o.$render=function(){n.toggleClass(r.activeClass,angular.equals(o.$modelValue,t.$eval(i.uibBtnRadio)))},n.on(r.toggleEvent,function(){if(!i.disabled){var e=n.hasClass(r.activeClass);e&&!angular.isDefined(i.uncheckable)||t.$apply(function(){o.$setViewValue(e?null:t.$eval(i.uibBtnRadio)),o.$render()})}}),i.uibUncheckable&&t.$watch(a,function(e){i.$set("uncheckable",e?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(n,e,t,i){var r=i[0],o=i[1];function a(){return s(t.btnCheckboxTrue,!0)}function s(e,t){return angular.isDefined(e)?n.$eval(e):t}e.find("input").css({display:"none"}),o.$render=function(){e.toggleClass(r.activeClass,angular.equals(o.$modelValue,a()))},e.on(r.toggleEvent,function(){t.disabled||n.$apply(function(){o.$setViewValue(e.hasClass(r.activeClass)?s(t.btnCheckboxFalse,!1):a()),o.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(r,o,t,e,a){var n,i,s=this,c=s.slides=r.slides=[],l="uib-slideDirection",u=r.active,p=!1;function d(e){for(var t=0;t<c.length;t++)c[t].slide.active=t===e}function f(e){for(var t=0;t<c.length;t++)if(c[t].slide===e)return t}function h(){n&&(t.cancel(n),n=null)}function m(){h();var e=+r.interval;!isNaN(e)&&0<e&&(n=t(v,e))}function v(){var e=+r.interval;i&&!isNaN(e)&&0<e&&c.length?r.next():r.pause()}o.addClass("carousel"),s.addSlide=function(e,t){c.push({slide:e,element:t}),c.sort(function(e,t){return+e.slide.index-+t.slide.index}),e.index!==r.active&&(1!==c.length||angular.isNumber(r.active))||(r.$currentTransition&&(r.$currentTransition=null),u=e.index,r.active=e.index,d(u),s.select(c[f(e)]),1===c.length&&r.play())},s.getCurrentIndex=function(){for(var e=0;e<c.length;e++)if(c[e].slide.index===u)return e},s.next=r.next=function(){var e=(s.getCurrentIndex()+1)%c.length;if(0!=e||!r.noWrap())return s.select(c[e],"next");r.pause()},s.prev=r.prev=function(){var e=s.getCurrentIndex()-1<0?c.length-1:s.getCurrentIndex()-1;if(!r.noWrap()||e!=c.length-1)return s.select(c[e],"prev");r.pause()},s.removeSlide=function(e){var t=f(e);c.splice(t,1),0<c.length&&u===t?t>=c.length?(u=c.length-1,d(r.active=u),s.select(c[c.length-1])):(u=t,d(r.active=u),s.select(c[t])):t<u&&(u--,r.active=u),0===c.length&&(u=null,r.active=null)},s.select=r.select=function(e,t){var n=f(e.slide);void 0===t&&(t=n>s.getCurrentIndex()?"next":"prev"),e.slide.index===u||r.$currentTransition||function(e,t,n){if(p)return;if(angular.extend(e,{direction:n}),angular.extend(c[u].slide||{},{direction:n}),a.enabled(o)&&!r.$currentTransition&&c[t].element&&1<s.slides.length){c[t].element.data(l,e.direction);var i=s.getCurrentIndex();angular.isNumber(i)&&c[i].element&&c[i].element.data(l,e.direction),r.$currentTransition=!0,a.on("addClass",c[t].element,function(e,t){"close"===t&&(r.$currentTransition=null,a.off("addClass",e))})}r.active=e.index,u=e.index,d(t),m()}(e.slide,n,t)},r.indexOfSlide=function(e){return+e.slide.index},r.isActive=function(e){return r.active===e.slide.index},r.isPrevDisabled=function(){return 0===r.active&&r.noWrap()},r.isNextDisabled=function(){return r.active===c.length-1&&r.noWrap()},r.pause=function(){r.noPause||(i=!1,h())},r.play=function(){i||(i=!0,m())},o.on("mouseenter",r.pause),o.on("mouseleave",r.play),r.$on("$destroy",function(){p=!0,h()}),r.$watch("noTransition",function(e){a.enabled(o,!e)}),r.$watch("interval",m),r.$watchCollection("slides",function(e){e.length||(r.$currentTransition=null)}),r.$watch("active",function(e){if(angular.isNumber(e)&&u!==e){for(var t=0;t<c.length;t++)if(c[t].slide.index===e){e=t;break}c[e]&&(d(e),s.select(c[e]),u=e)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(r){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(e,t,n,i){t.addClass("item"),i.addSlide(e,t),e.$on("$destroy",function(){i.removeSlide(e)}),e.$watch("active",function(e){r[e?"addClass":"removeClass"](t,"active")})}}}]).animation(".item",["$animateCss",function(a){var s="uib-slideDirection";function c(e,t,n){e.removeClass(t),n&&n()}return{beforeAddClass:function(e,t,n){if("active"===t){var i=e.data(s),r="next"===i?"left":"right",o=c.bind(this,e,r+" "+i,n);return e.addClass(i),a(e,{addClass:r}).start().done(o),function(){!0}}n()},beforeRemoveClass:function(e,t,n){if("active"===t){var i="next"===e.data(s)?"left":"right",r=c.bind(this,e,i,n);return a(e,{addClass:i}).start().done(r),function(){!0}}n()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function(m,v,n,g,t){var y,b,_=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function i(e){return t(b,{key:e},!0)[0]}function o(e,t,n){return function(){return e.substr(t+1,n-t-1)}}function a(e,t){for(var n=e.substr(t),i=0;i<b.length;i++)if(new RegExp("^"+b[i].key).test(n)){var r=b[i];return{endIdx:t+r.key.length,parser:r.formatter}}return{endIdx:t+1,parser:function(){return n.charAt(0)}}}function s(e){return parseInt(e,10)}function r(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function c(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function l(e,t,n){n=n?-1:1;var i=e.getTimezoneOffset();return c(e,n*(r(t,i)-i))}this.init=function(){y=v.id,this.parsers={},this.formatters={},b=[{key:"yyyy",regex:"\\d{4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(e){e=+e,this.year=e<69?e+2e3:e+1900},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){var t=e.getMonth();return/^[0-9]$/.test(t)?n(e,"MM"):n(e,"M")}},{key:"MMMM",regex:v.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=v.DATETIME_FORMATS.MONTH.indexOf(e)},formatter:function(e){return n(e,"MMMM")}},{key:"MMM",regex:v.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=v.DATETIME_FORMATS.SHORTMONTH.indexOf(e)},formatter:function(e){return n(e,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){var t=e.getDate();return/^[1-9]$/.test(t)?n(e,"dd"):n(e,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"d")}},{key:"EEEE",regex:v.DATETIME_FORMATS.DAY.join("|"),formatter:function(e){return n(e,"EEEE")}},{key:"EEE",regex:v.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(e){return n(e,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e},formatter:function(e){return n(e,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"s")}},{key:"a",regex:v.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)},formatter:function(e){return n(e,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(e){var t=e.match(/([+-])(\d{2})(\d{2})/),n=t[1],i=t[2],r=t[3];this.hours+=s(n+i),this.minutes+=s(n+r)},formatter:function(e){return n(e,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(e){return n(e,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(e){return n(e,"w")}},{key:"GGGG",regex:v.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(e){return n(e,"GGGG")}},{key:"GGG",regex:v.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GGG")}},{key:"GG",regex:v.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GG")}},{key:"G",regex:v.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"G")}}],1<=angular.version.major&&4<angular.version.minor&&b.push({key:"LLLL",regex:v.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(e){this.month=v.DATETIME_FORMATS.STANDALONEMONTH.indexOf(e)},formatter:function(e){return n(e,"LLLL")}})},this.init(),this.getParser=function(e){var t=i(e);return t&&t.apply||null},this.overrideParser=function(e,t){var n=i(e);n&&angular.isFunction(t)&&(this.parsers={},n.apply=t)}.bind(this),this.filter=function(n,e){return angular.isDate(n)&&!isNaN(n)&&e?(e=v.DATETIME_FORMATS[e]||e,v.id!==y&&this.init(),this.formatters[e]||(this.formatters[e]=function(e){for(var t,n,i=[],r=0;r<e.length;)if(angular.isNumber(n)){if("'"===e.charAt(r))(r+1>=e.length||"'"!==e.charAt(r+1))&&(i.push(o(e,n,r)),n=null);else if(r===e.length)for(;n<e.length;)t=a(e,n),i.push(t),n=t.endIdx;r++}else"'"!==e.charAt(r)?(t=a(e,r),i.push(t.parser),r=t.endIdx):(n=r,r++);return i}(e)),this.formatters[e].reduce(function(e,t){return e+t(n)},"")):""},this.parse=function(e,t,n){if(!angular.isString(e)||!t)return e;t=(t=v.DATETIME_FORMATS[t]||t).replace(_,"\\$&"),v.id!==y&&this.init(),this.parsers[t]||(this.parsers[t]=function(r){var o=[],a=r.split(""),e=r.indexOf("'");if(-1<e){var t=!1;r=r.split("");for(var n=e;n<r.length;n++)t?("'"===r[n]&&(n+1<r.length&&"'"===r[n+1]?(r[n+1]="$",a[n+1]=""):(a[n]="",t=!1)),r[n]="$"):"'"===r[n]&&(r[n]="$",t=!(a[n]=""));r=r.join("")}return angular.forEach(b,function(e){var t=r.indexOf(e.key);if(-1<t){r=r.split(""),a[t]="("+e.regex+")",r[t]="$";for(var n=t+1,i=t+e.key.length;n<i;n++)a[n]="",r[n]="$";r=r.join(""),o.push({index:t,key:e.key,apply:e.apply,matcher:e.regex})}}),{regex:new RegExp("^"+a.join("")+"$"),map:g(o,"index")}}(t));var i=this.parsers[t],r=i.regex,o=i.map,a=e.match(r),s=!1;if(a&&a.length){var c,l;c=angular.isDate(n)&&!isNaN(n.getTime())?{year:n.getFullYear(),month:n.getMonth(),date:n.getDate(),hours:n.getHours(),minutes:n.getMinutes(),seconds:n.getSeconds(),milliseconds:n.getMilliseconds()}:(n&&m.warn("dateparser:","baseDate is not a valid date"),{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var u=1,p=a.length;u<p;u++){var d=o[u-1];"Z"===d.matcher&&(s=!0),d.apply&&d.apply.call(c,a[u])}var f=s?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,h=s?Date.prototype.setUTCHours:Date.prototype.setHours;return function(e,t,n){if(n<1)return!1;if(1===t&&28<n)return 29===n&&(e%4==0&&e%100!=0||e%400==0);return 3!==t&&5!==t&&8!==t&&10!==t||n<31}(c.year,c.month,c.date)&&(!angular.isDate(n)||isNaN(n.getTime())||s?(l=new Date(0),f.call(l,c.year,c.month,c.date),h.call(l,c.hours||0,c.minutes||0,c.seconds||0,c.milliseconds||0)):(l=new Date(n),f.call(l,c.year,c.month,c.date),h.call(l,c.hours,c.minutes,c.seconds,c.milliseconds))),l}},this.toTimezone=function(e,t){return e&&t?l(e,t):e},this.fromTimezone=function(e,t){return e&&t?l(e,t,!0):e},this.timezoneToOffset=r,this.addDateMinutes=c,this.convertTimezoneToLocal=l}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(u){var a=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,p=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(e,t){var r=[],s=[],c={},n=t.uibIsClass.match(a),l=n[2],i=n[1].split(",");return function(n,e,t){r.push(n),s.push({scope:n,element:e}),i.forEach(function(e,t){!function(e,t){var n=e.match(p),r=t.$eval(n[1]),i=n[2],o=c[e];if(!o){var a=function(n){var i=null;s.some(function(e){var t=e.scope.$eval(l);if(t===n)return i=e,!0}),o.lastActivated!==i&&(o.lastActivated&&u.removeClass(o.lastActivated.element,r),i&&u.addClass(i.element,r),o.lastActivated=i)};c[e]=o={lastActivated:null,scope:t,watchFn:a,compareWithExp:i,watcher:t.$watch(i,a)}}o.watchFn(t.$eval(i))}(e,n)}),n.$on("$destroy",o)};function o(e){var t=e.targetScope,n=r.indexOf(t);if(r.splice(n,1),s.splice(n,1),r.length){var i=r[0];angular.forEach(c,function(e){e.scope===t&&(e.watcher=i.$watch(e.compareWithExp,e.watchFn),e.scope=i)})}else c={}}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(a,e,t,n,i,r,o,s,c,l,u,p){var d=this,f={$setViewValue:angular.noop},h={},m=[];e.addClass("uib-datepicker"),t.$set("role","application"),a.datepickerOptions||(a.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(t){switch(t){case"customClass":case"dateDisabled":a[t]=a.datepickerOptions[t]||angular.noop;break;case"datepickerMode":a.datepickerMode=angular.isDefined(a.datepickerOptions.datepickerMode)?a.datepickerOptions.datepickerMode:c.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":d[t]=angular.isDefined(a.datepickerOptions[t])?i(a.datepickerOptions[t])(a.$parent):c[t];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":d[t]=angular.isDefined(a.datepickerOptions[t])?a.datepickerOptions[t]:c[t];break;case"startingDay":angular.isDefined(a.datepickerOptions.startingDay)?d.startingDay=a.datepickerOptions.startingDay:angular.isNumber(c.startingDay)?d.startingDay=c.startingDay:d.startingDay=(r.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":a.$watch("datepickerOptions."+t,function(e){e?angular.isDate(e)?d[t]=p.fromTimezone(new Date(e),h.getOption("timezone")):(l&&o.warn("Literal date support has been deprecated, please switch to date object usage"),d[t]=new Date(s(e,"medium"))):d[t]=c[t]?p.fromTimezone(new Date(c[t]),h.getOption("timezone")):null,d.refreshView()});break;case"maxMode":case"minMode":a.datepickerOptions[t]?a.$watch(function(){return a.datepickerOptions[t]},function(e){d[t]=a[t]=angular.isDefined(e)?e:a.datepickerOptions[t],("minMode"===t&&d.modes.indexOf(a.datepickerOptions.datepickerMode)<d.modes.indexOf(d[t])||"maxMode"===t&&d.modes.indexOf(a.datepickerOptions.datepickerMode)>d.modes.indexOf(d[t]))&&(a.datepickerMode=d[t],a.datepickerOptions.datepickerMode=d[t])}):d[t]=a[t]=c[t]||null}}),a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.disabled=angular.isDefined(t.disabled)||!1,angular.isDefined(t.ngDisabled)&&m.push(a.$parent.$watch(t.ngDisabled,function(e){a.disabled=e,d.refreshView()})),a.isActive=function(e){return 0===d.compare(e.date,d.activeDate)&&(a.activeDateId=e.uid,!0)},this.init=function(e){h=function(e){var t;if(angular.version.minor<6)(t=e.$options||a.datepickerOptions.ngModelOptions||c.ngModelOptions||{}).getOption=function(e){return t[e]};else{var n=e.$options.getOption("timezone")||(a.datepickerOptions.ngModelOptions?a.datepickerOptions.ngModelOptions.timezone:null)||(c.ngModelOptions?c.ngModelOptions.timezone:null);t=e.$options.createChild(c.ngModelOptions).createChild(a.datepickerOptions.ngModelOptions).createChild(e.$options).createChild({timezone:n})}return t}(f=e),a.datepickerOptions.initDate?(d.activeDate=p.fromTimezone(a.datepickerOptions.initDate,h.getOption("timezone"))||new Date,a.$watch("datepickerOptions.initDate",function(e){e&&(f.$isEmpty(f.$modelValue)||f.$invalid)&&(d.activeDate=p.fromTimezone(e,h.getOption("timezone")),d.refreshView())})):d.activeDate=new Date;var t=f.$modelValue?new Date(f.$modelValue):new Date;this.activeDate=isNaN(t)?p.fromTimezone(new Date,h.getOption("timezone")):p.fromTimezone(t,h.getOption("timezone")),f.$render=function(){d.render()}},this.render=function(){if(f.$viewValue){var e=new Date(f.$viewValue);!isNaN(e)?this.activeDate=p.fromTimezone(e,h.getOption("timezone")):u||o.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var e=f.$viewValue?new Date(f.$viewValue):null;e=p.fromTimezone(e,h.getOption("timezone")),f.$setValidity("dateDisabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=f.$viewValue?new Date(f.$viewValue):null;n=p.fromTimezone(n,h.getOption("timezone"));var i=new Date;i=p.fromTimezone(i,h.getOption("timezone"));var r=this.compare(e,i),o={date:e,label:p.filter(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),past:r<0,current:0===r,future:0<r,customClass:this.customClass(e)||null};return n&&0===this.compare(e,n)&&(a.selectedDt=o),d.activeDate&&0===this.compare(o.date,d.activeDate)&&(a.activeDt=o),o},this.isDisabled=function(e){return a.disabled||this.minDate&&this.compare(e,this.minDate)<0||this.maxDate&&0<this.compare(e,this.maxDate)||a.dateDisabled&&a.dateDisabled({date:e,mode:a.datepickerMode})},this.customClass=function(e){return a.customClass({date:e,mode:a.datepickerMode})},this.split=function(e,t){for(var n=[];0<e.length;)n.push(e.splice(0,t));return n},a.select=function(e){if(a.datepickerMode===d.minMode){var t=f.$viewValue?p.fromTimezone(new Date(f.$viewValue),h.getOption("timezone")):new Date(0,0,0,0,0,0,0);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t=p.toTimezone(t,h.getOption("timezone")),f.$setViewValue(t),f.$render()}else d.activeDate=e,v(d.modes[d.modes.indexOf(a.datepickerMode)-1]),a.$emit("uib:datepicker.mode");a.$broadcast("uib:datepicker.focus")},a.move=function(e){var t=d.activeDate.getFullYear()+e*(d.step.years||0),n=d.activeDate.getMonth()+e*(d.step.months||0);d.activeDate.setFullYear(t,n,1),d.refreshView()},a.toggleMode=function(e){e=e||1,a.datepickerMode===d.maxMode&&1===e||a.datepickerMode===d.minMode&&-1===e||(v(d.modes[d.modes.indexOf(a.datepickerMode)+e]),a.$emit("uib:datepicker.mode"))},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};function v(e){a.datepickerMode=e,a.datepickerOptions.datepickerMode=e}a.$on("uib:datepicker.focus",function(){d.element[0].focus()}),a.keydown=function(e){var t=a.keys[e.which];if(t&&!e.shiftKey&&!e.altKey&&!a.disabled)if(e.preventDefault(),d.shortcutPropagation||e.stopPropagation(),"enter"===t||"space"===t){if(d.isDisabled(d.activeDate))return;a.select(d.activeDate)}else!e.ctrlKey||"up"!==t&&"down"!==t?(d.handleKeyDown(t,e),d.refreshView()):a.toggleMode("up"===t?1:-1)},e.on("keydown",function(e){a.$apply(function(){a.keydown(e)})}),a.$on("$destroy",function(){for(;m.length;)m.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(d,e,f){var n=[31,28,31,30,31,30,31,31,30,31,30,31];function r(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?n[t]:29}function h(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}this.step={months:1},this.element=e,this.init=function(e){angular.extend(e,this),d.showWeeks=e.showWeeks,e.refreshView()},this.getDates=function(e,t){for(var n,i=new Array(t),r=new Date(e),o=0;o<t;)n=new Date(r),i[o++]=n,r.setDate(r.getDate()+1);return i},this._refreshView=function(){var e=this.activeDate.getFullYear(),t=this.activeDate.getMonth(),n=new Date(this.activeDate);n.setFullYear(e,t,1);var i=this.startingDay-n.getDay(),r=0<i?7-i:-i,o=new Date(n);0<r&&o.setDate(1-r);for(var a=this.getDates(o,42),s=0;s<42;s++)a[s]=angular.extend(this.createDateObject(a[s],this.formatDay),{secondary:a[s].getMonth()!==t,uid:d.uniqueId+"-"+s});d.labels=new Array(7);for(var c=0;c<7;c++)d.labels[c]={abbr:f(a[c].date,this.formatDayHeader),full:f(a[c].date,"EEEE")};if(d.title=f(this.activeDate,this.formatDayTitle),d.rows=this.split(a,7),d.showWeeks){d.weekNumbers=[];for(var l=(11-this.startingDay)%7,u=d.rows.length,p=0;p<u;p++)d.weekNumbers.push(h(d.rows[p][l].date))}},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.setFullYear(e.getFullYear()),i.setFullYear(t.getFullYear()),n-i},this.handleKeyDown=function(e,t){var n=this.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var i=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(i,1),n=Math.min(r(this.activeDate.getFullYear(),this.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=r(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(n)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(r,e,o){this.step={years:1},this.element=e,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var e,t=new Array(12),n=this.activeDate.getFullYear(),i=0;i<12;i++)(e=new Date(this.activeDate)).setFullYear(n,i,1),t[i]=angular.extend(this.createDateObject(e,this.formatMonth),{uid:r.uniqueId+"-"+i});r.title=o(this.activeDate,this.formatMonthTitle),r.rows=this.split(t,this.monthColumns),r.yearHeaderColspan=3<this.monthColumns?this.monthColumns-2:1},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth()),i=new Date(t.getFullYear(),t.getMonth());return n.setFullYear(e.getFullYear()),i.setFullYear(t.getFullYear()),n-i},this.handleKeyDown=function(e,t){var n=this.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=this.monthColumns;else if("right"===e)n+=1;else if("down"===e)n+=this.monthColumns;else if("pageup"===e||"pagedown"===e){var i=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(i)}else"home"===e?n=0:"end"===e&&(n=11);this.activeDate.setMonth(n)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(r,e,t){var o,a;function s(e){return parseInt((e-1)/a,10)*a+1}this.element=e,this.yearpickerInit=function(){o=this.yearColumns,a=this.yearRows*o,this.step={years:a}},this._refreshView=function(){for(var e,t=new Array(a),n=0,i=s(this.activeDate.getFullYear());n<a;n++)(e=new Date(this.activeDate)).setFullYear(i+n,0,1),t[n]=angular.extend(this.createDateObject(e,this.formatYear),{uid:r.uniqueId+"-"+n});r.title=[t[0].label,t[a-1].label].join(" - "),r.rows=this.split(t,o),r.columns=o},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var n=this.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=o:"right"===e?n+=1:"down"===e?n+=o:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*a:"home"===e?n=s(this.activeDate.getFullYear()):"end"===e&&(n=s(this.activeDate.getFullYear())+a-1),this.activeDate.setFullYear(n)}}]).directive("uibDatepicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,n,i){var r=i[0],o=i[1];r.init(o)}}}).directive("uibDaypicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(e,t,n,i){var r=i[0];i[1].init(r)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(e,t,n,i){var r=i[0];i[1].init(r)}}}).directive("uibYearpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(e,t,n,i){var r=i[0];angular.extend(r,i[1]),r.yearpickerInit(),r.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(l,h){var i,r,u={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},m={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},a=/(HTML|BODY)/;return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(e){var t,n=(e=this.getRawNode(e)).offsetParent||l[0].documentElement;for(;n&&n!==l[0].documentElement&&(t=n,"static"===(h.getComputedStyle(t).position||"static"));)n=n.offsetParent;return n||l[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(r)){var t=l.find("body");t.addClass("uib-position-body-scrollbar-measure"),r=h.innerWidth-t[0].clientWidth,r=isFinite(r)?r:0,t.removeClass("uib-position-body-scrollbar-measure")}return r}if(angular.isUndefined(i)){var n=angular.element('<div class="uib-position-scrollbar-measure"></div>');l.find("body").append(n),i=n[0].offsetWidth-n[0].clientWidth,i=isFinite(i)?i:0,n.remove()}return i},scrollbarPadding:function(e){e=this.getRawNode(e);var t=h.getComputedStyle(e),n=this.parseStyle(t.paddingRight),i=this.parseStyle(t.paddingBottom),r=this.scrollParent(e,!1,!0),o=this.scrollbarWidth(a.test(r.tagName));return{scrollbarWidth:o,widthOverflow:r.scrollWidth>r.clientWidth,right:n+o,originalRight:n,heightOverflow:r.scrollHeight>r.clientHeight,bottom:i+o,originalBottom:i}},isScrollable:function(e,t){e=this.getRawNode(e);var n=t?u.hidden:u.normal,i=h.getComputedStyle(e);return n.test(i.overflow+i.overflowY+i.overflowX)},scrollParent:function(e,t,n){e=this.getRawNode(e);var i=t?u.hidden:u.normal,r=l[0].documentElement,o=h.getComputedStyle(e);if(n&&i.test(o.overflow+o.overflowY+o.overflowX))return e;var a="absolute"===o.position,s=e.parentElement||r;if(s===r||"fixed"===o.position)return r;for(;s.parentElement&&s!==r;){var c=h.getComputedStyle(s);if(a&&"static"!==c.position&&(a=!1),!a&&i.test(c.overflow+c.overflowY+c.overflowX))break;s=s.parentElement}return s},position:function(e,t){e=this.getRawNode(e);var n=this.offset(e);if(t){var i=h.getComputedStyle(e);n.top-=this.parseStyle(i.marginTop),n.left-=this.parseStyle(i.marginLeft)}var r=this.offsetParent(e),o={top:0,left:0};return r!==l[0].documentElement&&((o=this.offset(r)).top+=r.clientTop-r.scrollTop,o.left+=r.clientLeft-r.scrollLeft),{width:Math.round(angular.isNumber(n.width)?n.width:e.offsetWidth),height:Math.round(angular.isNumber(n.height)?n.height:e.offsetHeight),top:Math.round(n.top-o.top),left:Math.round(n.left-o.left)}},offset:function(e){var t=(e=this.getRawNode(e)).getBoundingClientRect();return{width:Math.round(angular.isNumber(t.width)?t.width:e.offsetWidth),height:Math.round(angular.isNumber(t.height)?t.height:e.offsetHeight),top:Math.round(t.top+(h.pageYOffset||l[0].documentElement.scrollTop)),left:Math.round(t.left+(h.pageXOffset||l[0].documentElement.scrollLeft))}},viewportOffset:function(e,t,n){n=!1!==n;var i=(e=this.getRawNode(e)).getBoundingClientRect(),r={top:0,left:0,bottom:0,right:0},o=t?l[0].documentElement:this.scrollParent(e),a=o.getBoundingClientRect();if(r.top=a.top+o.clientTop,r.left=a.left+o.clientLeft,o===l[0].documentElement&&(r.top+=h.pageYOffset,r.left+=h.pageXOffset),r.bottom=r.top+o.clientHeight,r.right=r.left+o.clientWidth,n){var s=h.getComputedStyle(o);r.top+=this.parseStyle(s.paddingTop),r.bottom-=this.parseStyle(s.paddingBottom),r.left+=this.parseStyle(s.paddingLeft),r.right-=this.parseStyle(s.paddingRight)}return{top:Math.round(i.top-r.top),bottom:Math.round(r.bottom-i.bottom),left:Math.round(i.left-r.left),right:Math.round(r.right-i.right)}},parsePlacement:function(e){var t=m.auto.test(e);return t&&(e=e.replace(m.auto,"")),(e=e.split("-"))[0]=e[0]||"top",m.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",m.secondary.test(e[1])||(e[1]="center"),e[2]=!!t,e},positionElements:function(e,t,n,i){e=this.getRawNode(e),t=this.getRawNode(t);var r=angular.isDefined(t.offsetWidth)?t.offsetWidth:t.prop("offsetWidth"),o=angular.isDefined(t.offsetHeight)?t.offsetHeight:t.prop("offsetHeight");n=this.parsePlacement(n);var a=i?this.offset(e):this.position(e),s={top:0,left:0,placement:""};if(n[2]){var c=this.viewportOffset(e,i),l=h.getComputedStyle(t),u=r+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),p=o+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)));if(n[0]="top"===n[0]&&p>c.top&&p<=c.bottom?"bottom":"bottom"===n[0]&&p>c.bottom&&p<=c.top?"top":"left"===n[0]&&u>c.left&&u<=c.right?"right":"right"===n[0]&&u>c.right&&u<=c.left?"left":n[0],n[1]="top"===n[1]&&p-a.height>c.bottom&&p-a.height<=c.top?"bottom":"bottom"===n[1]&&p-a.height>c.top&&p-a.height<=c.bottom?"top":"left"===n[1]&&u-a.width>c.right&&u-a.width<=c.left?"right":"right"===n[1]&&u-a.width>c.left&&u-a.width<=c.right?"left":n[1],"center"===n[1])if(m.vertical.test(n[0])){var d=a.width/2-r/2;c.left+d<0&&u-a.width<=c.right?n[1]="left":c.right+d<0&&u-a.width<=c.left&&(n[1]="right")}else{var f=a.height/2-p/2;c.top+f<0&&p-a.height<=c.bottom?n[1]="top":c.bottom+f<0&&p-a.height<=c.top&&(n[1]="bottom")}}switch(n[0]){case"top":s.top=a.top-o;break;case"bottom":s.top=a.top+a.height;break;case"left":s.left=a.left-r;break;case"right":s.left=a.left+a.width}switch(n[1]){case"top":s.top=a.top;break;case"bottom":s.top=a.top+a.height-o;break;case"left":s.left=a.left;break;case"right":s.left=a.left+a.width-r;break;case"center":m.vertical.test(n[0])?s.left=a.left+a.width/2-r/2:s.top=a.top+a.height/2-o/2}return s.top=Math.round(s.top),s.left=Math.round(s.left),s.placement="center"===n[1]?n[0]:n[0]+"-"+n[1],s},adjustTop:function(e,t,n,i){if(-1!==e.indexOf("top")&&n!==i)return{top:t.top-i+"px"}},positionArrow:function(e,t){var n=(e=this.getRawNode(e)).querySelector(".tooltip-inner, .popover-inner");if(n){var i=angular.element(n).hasClass("tooltip-inner"),r=i?e.querySelector(".tooltip-arrow"):e.querySelector(".arrow");if(r){var o={top:"",bottom:"",left:"",right:""};if("center"!==(t=this.parsePlacement(t))[1]){var a="border-"+t[0]+"-width",s=h.getComputedStyle(r)[a],c="border-";m.vertical.test(t[0])?c+=t[0]+"-"+t[1]:c+=t[1]+"-"+t[0],c+="-radius";var l=h.getComputedStyle(i?n:e)[c];switch(t[0]){case"top":o.bottom=i?"0":"-"+s;break;case"bottom":o.top=i?"0":"-"+s;break;case"left":o.right=i?"0":"-"+s;break;case"right":o.left=i?"0":"-"+s}o[t[1]]=l,angular.element(r).css(o)}else angular.element(r).css(o)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(r,o,i,t,n,e,a,s,c,l,u,p,d,f,h,m){var v,g,y,b,_,w,x,E,C,k,S,T,O,A=!1,I=[];function D(e){var t=p.parse(e,v,r.date);if(isNaN(t))for(var n=0;n<O.length;n++)if(t=p.parse(e,O[n],r.date),!isNaN(t))return t;return t}function P(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=D(e);if(!isNaN(t))return p.toTimezone(t,S.getOption("timezone"))}return S.getOption("allowInvalid")?e:void 0}function R(e,t){var n=e||t;return!i.ngRequired&&!n||(angular.isNumber(n)&&(n=new Date(n)),!n||(!(!angular.isDate(n)||isNaN(n))||!!angular.isString(n)&&!isNaN(D(n))))}function N(e){if(r.isOpen||!r.disabled){var t=T[0],n=o[0].contains(e.target),i=void 0!==t.contains&&t.contains(e.target);!r.isOpen||n||i||r.$apply(function(){r.isOpen=!1})}}function M(e){27===e.which&&r.isOpen?(e.preventDefault(),e.stopPropagation(),r.$apply(function(){r.isOpen=!1}),o[0].focus()):40!==e.which||r.isOpen||(e.preventDefault(),e.stopPropagation(),r.$apply(function(){r.isOpen=!0}))}function j(){if(r.isOpen){var e=angular.element(T[0].querySelector(".uib-datepicker-popup")),t=i.popupPlacement?i.popupPlacement:d.placement,n=l.positionElements(o,e,t,y);e.css({top:n.top+"px",left:n.left+"px"}),e.hasClass("uib-position-measure")&&e.removeClass("uib-position-measure")}}this.init=function(e){if(S=function(e){var t;angular.version.minor<6?(t=angular.isObject(e.$options)?e.$options:{timezone:null}).getOption=function(e){return t[e]}:t=e.$options;return t}(k=e),g=angular.isDefined(i.closeOnDateSelection)?r.$parent.$eval(i.closeOnDateSelection):d.closeOnDateSelection,y=angular.isDefined(i.datepickerAppendToBody)?r.$parent.$eval(i.datepickerAppendToBody):d.appendToBody,b=angular.isDefined(i.onOpenFocus)?r.$parent.$eval(i.onOpenFocus):d.onOpenFocus,_=angular.isDefined(i.datepickerPopupTemplateUrl)?i.datepickerPopupTemplateUrl:d.datepickerPopupTemplateUrl,w=angular.isDefined(i.datepickerTemplateUrl)?i.datepickerTemplateUrl:d.datepickerTemplateUrl,O=angular.isDefined(i.altInputFormats)?r.$parent.$eval(i.altInputFormats):d.altInputFormats,r.showButtonBar=angular.isDefined(i.showButtonBar)?r.$parent.$eval(i.showButtonBar):d.showButtonBar,d.html5Types[i.type]?(v=d.html5Types[i.type],A=!0):(v=i.uibDatepickerPopup||d.datepickerPopup,i.$observe("uibDatepickerPopup",function(e,t){var n=e||d.datepickerPopup;if(n!==v&&(v=n,k.$modelValue=null,!v))throw new Error("uibDatepickerPopup must have a date format specified.")})),!v)throw new Error("uibDatepickerPopup must have a date format specified.");if(A&&i.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");(x=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>")).attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":_}),(E=angular.element(x.children()[0])).attr("template-url",w),r.datepickerOptions||(r.datepickerOptions={}),!A||"month"===i.type&&(r.datepickerOptions.datepickerMode="month",r.datepickerOptions.minMode="month"),E.attr("datepicker-options","datepickerOptions"),A?k.$formatters.push(function(e){return r.date=p.fromTimezone(e,S.getOption("timezone")),e}):(k.$$parserName="date",k.$validators.date=R,k.$parsers.unshift(P),k.$formatters.push(function(e){return k.$isEmpty(e)?r.date=e:(angular.isNumber(e)&&(e=new Date(e)),r.date=p.fromTimezone(e,S.getOption("timezone")),p.filter(r.date,v))})),k.$viewChangeListeners.push(function(){r.date=D(k.$viewValue)}),o.on("keydown",M),T=t(x)(r),x.remove(),y?s.find("body").append(T):o.after(T),r.$on("$destroy",function(){for(!0===r.isOpen&&(c.$$phase||r.$apply(function(){r.isOpen=!1})),T.remove(),o.off("keydown",M),s.off("click",N),C&&C.off("scroll",j),angular.element(a).off("resize",j);I.length;)I.shift()()})},r.getText=function(e){return r[e+"Text"]||d[e+"Text"]},r.isDisabled=function(e){"today"===e&&(e=p.fromTimezone(new Date,S.getOption("timezone")));var t={};return angular.forEach(["minDate","maxDate"],function(e){r.datepickerOptions[e]?angular.isDate(r.datepickerOptions[e])?t[e]=new Date(r.datepickerOptions[e]):(m&&n.warn("Literal date support has been deprecated, please switch to date object usage"),t[e]=new Date(u(r.datepickerOptions[e],"medium"))):t[e]=null}),r.datepickerOptions&&t.minDate&&r.compare(e,t.minDate)<0||t.maxDate&&0<r.compare(e,t.maxDate)},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},r.dateSelection=function(e){r.date=e;var t=r.date?p.filter(r.date,v):null;o.val(t),k.$setViewValue(t),g&&(r.isOpen=!1,o[0].focus())},r.keydown=function(e){27===e.which&&(e.stopPropagation(),r.isOpen=!1,o[0].focus())},r.select=function(e,t){if(t.stopPropagation(),"today"===e){var n=new Date;angular.isDate(r.date)?(e=new Date(r.date)).setFullYear(n.getFullYear(),n.getMonth(),n.getDate()):(e=p.fromTimezone(n,S.getOption("timezone"))).setHours(0,0,0,0)}r.dateSelection(e)},r.close=function(e){e.stopPropagation(),r.isOpen=!1,o[0].focus()},r.disabled=angular.isDefined(i.disabled)||!1,i.ngDisabled&&I.push(r.$parent.$watch(e(i.ngDisabled),function(e){r.disabled=e})),r.$watch("isOpen",function(e){e?r.disabled?r.isOpen=!1:f(function(){j(),b&&r.$broadcast("uib:datepicker.focus"),s.on("click",N);var e=i.popupPlacement?i.popupPlacement:d.placement;y||l.parsePlacement(e)[2]?(C=C||angular.element(l.scrollParent(o)))&&C.on("scroll",j):C=null,angular.element(a).on("resize",j)},0,!1):(s.off("click",N),C&&C.off("scroll",j),angular.element(a).off("resize",j))}),r.$on("uib:datepicker.mode",function(){f(j,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(e,t,n,i){var r=i[0];i[1].init(r)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(o){return function(n,i){var r;return function(){var e=this,t=Array.prototype.slice.call(arguments);r&&o.cancel(r),r=o(function(){n.apply(e,t)},i)}}}]),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var r={};return{entries:function(){return Object.keys(r).map(function(e){return{key:e,value:r[e]}})},get:function(e){return r[e]},hasKey:function(e){return!!r[e]},keys:function(){return Object.keys(r)},put:function(e,t){r[e]||(r[e]=[]),r[e].push(t)},remove:function(e,t){var n=r[e];if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1),n.length||delete r[e]}}}}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function(o,i,e){var a=null,s=e.createNew();this.isOnlyOpen=function(n,e){var t=s.get(e);if(t&&t.reduce(function(e,t){return t.scope===n?t:e},{}))return 1===t.length;return!1},this.open=function(e,t,n){if(a||o.on("click",c),a&&a!==e&&(a.isOpen=!1),a=e,n){var i=s.get(n);if(i)-1===i.map(function(e){return e.scope}).indexOf(e)&&s.put(n,{scope:e});else s.put(n,{scope:e})}},this.close=function(n,e,t){if(a===n&&(o.off("click",c),o.off("keydown",this.keybindFilter),a=null),t){var i=s.get(t);if(i){var r=i.reduce(function(e,t){return t.scope===n?t:e},{});r&&s.remove(t,r)}}};var c=function(e){if(a&&a.isOpen&&!(e&&"disabled"===a.getAutoClose()||e&&3===e.which)){var t=a.getToggleElement();if(!(e&&t&&t[0].contains(e.target))){var n=a.getDropdownElement();e&&"outsideClick"===a.getAutoClose()&&n&&n[0].contains(e.target)||(a.focusToggleElement(),a.isOpen=!1,i.$$phase||a.$apply())}}};this.keybindFilter=function(e){if(a){var t=a.getDropdownElement(),n=a.getToggleElement(),i=t&&t[0].contains(e.target),r=n&&n[0].contains(e.target);27===e.which?(e.stopPropagation(),a.focusToggleElement(),c()):a.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&a.isOpen&&(i||r)&&(e.preventDefault(),e.stopPropagation(),a.focusDropdownEntry(e.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(v,g,y,b,e,_,w,x,E,C,k){var S,t,T=this,O=v.$new(),A=e.appendToOpenClass,I=e.openClass,D=angular.noop,P=y.onToggle?b(y.onToggle):angular.noop,n=!1,R=E.find("body");function N(){g.append(T.dropdownMenu)}g.addClass("dropdown"),this.init=function(){y.isOpen&&(t=b(y.isOpen),D=t.assign,v.$watch(t,function(e){O.isOpen=!!e})),n=angular.isDefined(y.keyboardNav)},this.toggle=function(e){return O.isOpen=arguments.length?!!e:!O.isOpen,angular.isFunction(D)&&D(O,O.isOpen),O.isOpen},this.isOpen=function(){return O.isOpen},O.getToggleElement=function(){return T.toggleElement},O.getAutoClose=function(){return y.autoClose||"always"},O.getElement=function(){return g},O.isKeynavEnabled=function(){return n},O.focusDropdownEntry=function(e){var t=T.dropdownMenu?angular.element(T.dropdownMenu).find("a"):g.find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(T.selectedOption)?T.selectedOption=T.selectedOption===t.length-1?T.selectedOption:T.selectedOption+1:T.selectedOption=0;break;case 38:angular.isNumber(T.selectedOption)?T.selectedOption=0===T.selectedOption?0:T.selectedOption-1:T.selectedOption=t.length-1}t[T.selectedOption].focus()},O.getDropdownElement=function(){return T.dropdownMenu},O.focusToggleElement=function(){T.toggleElement&&T.toggleElement[0].focus()},O.$watch("isOpen",function(e,t){var n=null,i=!1;if(angular.isDefined(y.dropdownAppendTo)){var r=b(y.dropdownAppendTo)(O);r&&(n=angular.element(r))}!angular.isDefined(y.dropdownAppendToBody)||!1!==b(y.dropdownAppendToBody)(O)&&(i=!0);if(i&&!n&&(n=R),n&&T.dropdownMenu&&(e?(n.append(T.dropdownMenu),g.on("$destroy",N)):(g.off("$destroy",N),N())),n&&T.dropdownMenu){var o,a,s,c=x.positionElements(g,T.dropdownMenu,"bottom-left",!0),l=0;if(o={top:c.top+"px",display:e?"block":"none"},(a=T.dropdownMenu.hasClass("dropdown-menu-right"))?(o.left="auto",(s=x.scrollbarPadding(n)).heightOverflow&&s.scrollbarWidth&&(l=s.scrollbarWidth),o.right=window.innerWidth-l-(c.left+g.prop("offsetWidth"))+"px"):(o.left=c.left+"px",o.right="auto"),!i){var u=x.offset(n);o.top=c.top-u.top+"px",a?o.right=window.innerWidth-(c.left-u.left+g.prop("offsetWidth"))+"px":o.left=c.left-u.left+"px"}T.dropdownMenu.css(o)}var p=n||g,d=n?A:I,f=p.hasClass(d),h=_.isOnlyOpen(v,n);f===!e&&w[n?h?"removeClass":"addClass":e?"addClass":"removeClass"](p,d).then(function(){angular.isDefined(e)&&e!==t&&P(v,{open:!!e})});if(e)T.dropdownMenuTemplateUrl?k(T.dropdownMenuTemplateUrl).then(function(e){S=O.$new(),C(e.trim())(S,function(e){var t=e;T.dropdownMenu.replaceWith(t),T.dropdownMenu=t,E.on("keydown",_.keybindFilter)})}):E.on("keydown",_.keybindFilter),O.focusToggleElement(),_.open(O,g,n);else{if(_.close(O,g,n),T.dropdownMenuTemplateUrl){S&&S.$destroy();var m=angular.element('<ul class="dropdown-menu"></ul>');T.dropdownMenu.replaceWith(m),T.dropdownMenu=m}T.selectedOption=null}angular.isFunction(D)&&D(v,e)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,i){i.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,i){if(i&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var r=n.templateUrl;r&&(i.dropdownMenuTemplateUrl=r),i.dropdownMenu||(i.dropdownMenu=t)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(t,n,i,r){if(r){n.addClass("dropdown-toggle"),r.toggleElement=n;function e(e){e.preventDefault(),n.hasClass("disabled")||i.disabled||t.$apply(function(){r.toggle()})}n.on("click",e),n.attr({"aria-haspopup":!0,"aria-expanded":!1}),t.$watch(r.isOpen,function(e){n.attr("aria-expanded",!!e)}),t.$on("$destroy",function(){n.off("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var i=[];return{add:function(e,t){i.push({key:e,value:t})},get:function(e){for(var t=0;t<i.length;t++)if(e===i[t].key)return i[t]},keys:function(){for(var e=[],t=0;t<i.length;t++)e.push(i[t].key);return e},top:function(){return i[i.length-1]},remove:function(e){for(var t=-1,n=0;n<i.length;n++)if(e===i[n].key){t=n;break}return i.splice(t,1)[0]},removeTop:function(){return i.pop()},length:function(){return i.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(o,a){var s=e.resolver?o.get(e.resolver):null;return{resolve:function(e,t,n,i){if(s)return s.resolve(e,t,n,i);var r=[];return angular.forEach(e,function(e){angular.isFunction(e)||angular.isArray(e)?r.push(a.resolve(o.invoke(e))):angular.isString(e)?r.push(a.resolve(o.get(e))):r.push(a.resolve(e))}),a.all(r).then(function(n){var i={},r=0;return angular.forEach(e,function(e,t){i[t]=n[r++]}),i})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,e,t){return{restrict:"A",compile:function(e,t){return e.addClass(t.backdropClass),n}};function n(i,r,o){o.modalInClass&&(a.addClass(r,o.modalInClass),i.$on(t.NOW_CLOSING_EVENT,function(e,t){var n=t();i.modalOptions.animation?a.removeClass(r,o.modalInClass).then(n):n()}))}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(n,o,a,s){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/modal/window.html"},link:function(t,i,r){i.addClass(r.windowTopClass||""),t.size=r.size,t.close=function(e){var t=n.getTop();t&&t.value.backdrop&&"static"!==t.value.backdrop&&e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),n.dismiss(t.key,"backdrop click"))},i.on("click",t.close),t.$isRendered=!0;var e=o.defer();t.$$postDigest(function(){e.resolve()}),e.promise.then(function(){var e=null;r.modalInClass&&(e=a(i,{addClass:r.modalInClass}).start(),t.$on(n.NOW_CLOSING_EVENT,function(e,t){var n=t();a(i,{removeClass:r.modalInClass}).start().then(n)})),o.when(e).then(function(){var e=n.getTop();if(e&&n.modalRendered(e.key),!s[0].activeElement||!i[0].contains(s[0].activeElement)){var t=i[0].querySelector("[autofocus]");t?t.focus():i[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(o){return{link:function(e,t,n,i,r){r(e.$parent,function(e){t.empty(),o.enter(e,t)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(c,e,l,u,p,a,t,n,d){var f,h,m,v="modal-open",g=n.createNew(),y=t.createNew(),s={NOW_CLOSING_EVENT:"modal.stack.now-closing"},b=0,_=null,w="data-bootstrap-modal-aria-hidden-count",x=/[A-Z]/g;function E(){for(var e=-1,t=g.keys(),n=0;n<t.length;n++)g.get(t[n]).value.backdrop&&(e=n);return-1<e&&e<b&&(e=b),e}function i(n,e){var i=g.get(n).value,r=i.appendTo;g.remove(n),(_=g.top())&&(b=parseInt(_.value.modalDomEl.attr("index"),10)),o(i.modalDomEl,i.modalScope,function(){var e=i.openedClass||v;y.remove(e,n);var t=y.hasKey(e);r.toggleClass(e,t),!t&&m&&m.heightOverflow&&m.scrollbarWidth&&(m.originalRight?r.css({paddingRight:m.originalRight+"px"}):r.css({paddingRight:""}),m=null),C(!0)},i.closedDeferred),function(){if(f&&-1===E()){o(f,h,function(){null}),h=f=void 0}}(),e&&e.focus?e.focus():r.focus&&r.focus()}function C(e){var t;0<g.length()&&(t=g.top().value).modalDomEl.toggleClass(t.windowTopClass||"",e)}function o(t,n,i,r){var e,o=null;return n.$broadcast(s.NOW_CLOSING_EVENT,function(){return e||(e=a.defer(),o=e.promise),function(){e.resolve()}}),a.when(o).then(function e(){if(e.done)return;e.done=!0;c.leave(t).then(function(){i&&i(),t.remove(),r&&r.resolve()});n.$destroy()})}function r(e){if(e.isDefaultPrevented())return e;var t=g.top();if(t)switch(e.which){case 27:t.value.keyboard&&(e.preventDefault(),p.$apply(function(){s.dismiss(t.key,"escape key press")}));break;case 9:var n=s.loadFocusElementList(t),i=!1;e.shiftKey?(s.isFocusInFirstItem(e,n)||s.isModalFocused(e,t))&&(i=s.focusLastFocusableElement(n)):s.isFocusInLastItem(e,n)&&(i=s.focusFirstFocusableElement(n)),i&&(e.preventDefault(),e.stopPropagation())}}function k(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}function S(){Array.prototype.forEach.call(document.querySelectorAll("["+w+"]"),function(e){var t=parseInt(e.getAttribute(w),10)-1;e.setAttribute(w,t),t||(e.removeAttribute(w),e.removeAttribute("aria-hidden"))})}return p.$watch(E,function(e){h&&(h.index=e)}),l.on("keydown",r),p.$on("$destroy",function(){l.off("keydown",r)}),s.open=function(e,t){var n=l[0].activeElement,i=t.openedClass||v;C(!1),_=g.top(),g.add(e,{deferred:t.deferred,renderDeferred:t.renderDeferred,closedDeferred:t.closedDeferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard,openedClass:t.openedClass,windowTopClass:t.windowTopClass,animation:t.animation,appendTo:t.appendTo}),y.put(i,e);var r,o=t.appendTo,a=E();0<=a&&!f&&((h=p.$new(!0)).modalOptions=t,h.index=a,(f=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>')).attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),t.backdropClass&&f.addClass(t.backdropClass),t.animation&&f.attr("modal-animation","true"),u(f)(h),c.enter(f,o),!d.isScrollable(o)||(m=d.scrollbarPadding(o)).heightOverflow&&m.scrollbarWidth&&o.css({paddingRight:m.right+"px"})),t.component?(r=document.createElement(function(e){return e.replace(x,function(e,t){return(t?"-":"")+e.toLowerCase()})}(t.component.name)),(r=angular.element(r)).attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):r=t.content,b=_?parseInt(_.value.modalDomEl.attr("index"),10)+1:0;var s=angular.element('<div uib-modal-window="modal-window"></div>');s.attr({class:"modal","template-url":t.windowTemplateUrl,"window-top-class":t.windowTopClass,role:"dialog","aria-labelledby":t.ariaLabelledBy,"aria-describedby":t.ariaDescribedBy,size:t.size,index:b,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(r),t.windowClass&&s.addClass(t.windowClass),t.animation&&s.attr("modal-animation","true"),o.addClass(i),t.scope&&(t.scope.$$topModalIndex=b),c.enter(u(s)(t.scope),o),g.top().value.modalDomEl=s,g.top().value.modalOpener=n,function e(t){if(!t||"BODY"===t[0].tagName)return;n(t).forEach(function(e){var t="true"===e.getAttribute("aria-hidden"),n=parseInt(e.getAttribute(w),10);n||(n=t?1:0),e.setAttribute(w,n+1),e.setAttribute("aria-hidden","true")});return e(t.parent());function n(t){var e=t.parent()?t.parent().children():[];return Array.prototype.filter.call(e,function(e){return e!==t[0]})}}(s)},s.close=function(e,t){var n=g.get(e);return S(),n&&k(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),i(e,n.value.modalOpener),!0):!n},s.dismiss=function(e,t){var n=g.get(e);return S(),n&&k(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),i(e,n.value.modalOpener),!0):!n},s.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},s.getTop=function(){return g.top()},s.modalRendered=function(e){var t=g.get(e);t&&t.value.renderDeferred.resolve()},s.focusFirstFocusableElement=function(e){return 0<e.length&&(e[0].focus(),!0)},s.focusLastFocusableElement=function(e){return 0<e.length&&(e[e.length-1].focus(),!0)},s.isModalFocused=function(e,t){if(e&&t){var n=t.value.modalDomEl;if(n&&n.length)return(e.target||e.srcElement)===n[0]}return!1},s.isFocusInFirstItem=function(e,t){return 0<t.length&&(e.target||e.srcElement)===t[0]},s.isFocusInLastItem=function(e,t){return 0<t.length&&(e.target||e.srcElement)===t[t.length-1]},s.loadFocusElementList=function(e){if(e){var t=e.value.modalDomEl;if(t&&t.length){var n=t[0].querySelectorAll("a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]");return n?Array.prototype.filter.call(n,function(e){return function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(e)}):n}}},s}]).provider("$uibModal",function(){var c={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(m,i,r,o,v,a,g){var e={};var s=null;return e.getPromiseChain=function(){return s},e.open=function(l){var e,t,u=i.defer(),p=i.defer(),d=i.defer(),f=i.defer(),h={result:u.promise,opened:p.promise,closed:d.promise,rendered:f.promise,close:function(e){return g.close(h,e)},dismiss:function(e){return g.dismiss(h,e)}};if((l=angular.extend({},c.options,l)).resolve=l.resolve||{},l.appendTo=l.appendTo||r.find("body").eq(0),!l.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!l.component&&!l.template&&!l.templateUrl)throw new Error("One of component or template or templateUrl options is required.");function n(){return e}return e=l.component?i.when(a.resolve(l.resolve,{},null,null)):i.all([function(e){return e.template?i.when(e.template):o(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}(l),a.resolve(l.resolve,{},null,null)]),t=s=i.all([s]).then(n,n).then(function(o){var e=l.scope||m,a=e.$new();a.$close=h.close,a.$dismiss=h.dismiss,a.$on("$destroy",function(){a.$$uibDestructionScheduled||a.$dismiss("$uibUnscheduledDestruction")});var t,n,i={scope:a,deferred:u,renderDeferred:f,closedDeferred:d,animation:l.animation,backdrop:l.backdrop,keyboard:l.keyboard,backdropClass:l.backdropClass,windowTopClass:l.windowTopClass,windowClass:l.windowClass,windowTemplateUrl:l.windowTemplateUrl,ariaLabelledBy:l.ariaLabelledBy,ariaDescribedBy:l.ariaDescribedBy,size:l.size,openedClass:l.openedClass,appendTo:l.appendTo},r={},s={};function c(n,e,t,i){n.$scope=a,n.$scope.$resolve={},t?n.$scope.$uibModalInstance=h:n.$uibModalInstance=h;var r=e?o[1]:o;angular.forEach(r,function(e,t){i&&(n[t]=e),n.$scope.$resolve[t]=e})}l.component?(c(r,!1,!0,!1),r.name=l.component,i.component=r):l.controller&&(c(s,!0,!1,!0),n=v(l.controller,s,!0,l.controllerAs),l.controllerAs&&l.bindToController&&((t=n.instance).$close=a.$close,t.$dismiss=a.$dismiss,angular.extend(t,{$resolve:s.$scope.$resolve},e)),t=n(),angular.isFunction(t.$onInit)&&t.$onInit()),l.component||(i.content=o[0]),g.open(h,i),p.resolve(!0)},function(e){p.reject(e),u.reject(e)}).finally(function(){s===t&&(s=null)}),h},e}]};return c}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(e){return{create:function(n,i,r){n.setNumPages=r.numPages?e(r.numPages).assign:angular.noop,n.ngModelCtrl={$setViewValue:angular.noop},n._watchers=[],n.init=function(e,t){n.ngModelCtrl=e,n.config=t,e.$render=function(){n.render()},r.itemsPerPage?n._watchers.push(i.$parent.$watch(r.itemsPerPage,function(e){n.itemsPerPage=parseInt(e,10),i.totalPages=n.calculateTotalPages(),n.updatePage()})):n.itemsPerPage=t.itemsPerPage,i.$watch("totalItems",function(e,t){!angular.isDefined(e)&&e===t||(i.totalPages=n.calculateTotalPages(),n.updatePage())})},n.calculateTotalPages=function(){var e=n.itemsPerPage<1?1:Math.ceil(i.totalItems/n.itemsPerPage);return Math.max(e||0,1)},n.render=function(){i.page=parseInt(n.ngModelCtrl.$viewValue,10)||1},i.selectPage=function(e,t){t&&t.preventDefault(),(!i.ngDisabled||!t)&&i.page!==e&&0<e&&e<=i.totalPages&&(t&&t.target&&t.target.blur(),n.ngModelCtrl.$setViewValue(e),n.ngModelCtrl.$render())},i.getText=function(e){return i[e+"Text"]||n.config[e+"Text"]},i.noPrevious=function(){return 1===i.page},i.noNext=function(){return i.page===i.totalPages},n.updatePage=function(){n.setNumPages(i.$parent,i.totalPages),i.page>i.totalPages?i.selectPage(i.totalPages):n.ngModelCtrl.$render()},i.$on("$destroy",function(){for(;n._watchers.length;)n._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(e,t,n,i){e.align=angular.isDefined(t.align)?e.$parent.$eval(t.align):i.align,n.create(this,e,t)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(e,t){return t.templateUrl||"uib/template/pager/pager.html"},link:function(e,t,n,i){t.addClass("pager");var r=i[0],o=i[1];o&&r.init(o,a)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(t,n,e,i,r){var o=this,h=angular.isDefined(n.maxSize)?t.$parent.$eval(n.maxSize):r.maxSize,m=angular.isDefined(n.rotate)?t.$parent.$eval(n.rotate):r.rotate,v=angular.isDefined(n.forceEllipses)?t.$parent.$eval(n.forceEllipses):r.forceEllipses,g=angular.isDefined(n.boundaryLinkNumbers)?t.$parent.$eval(n.boundaryLinkNumbers):r.boundaryLinkNumbers,y=angular.isDefined(n.pageLabel)?function(e){return t.$parent.$eval(n.pageLabel,{$page:e})}:angular.identity;function b(e,t,n){return{number:e,text:t,active:n}}t.boundaryLinks=angular.isDefined(n.boundaryLinks)?t.$parent.$eval(n.boundaryLinks):r.boundaryLinks,t.directionLinks=angular.isDefined(n.directionLinks)?t.$parent.$eval(n.directionLinks):r.directionLinks,n.$set("role","menu"),i.create(this,t,n),n.maxSize&&o._watchers.push(t.$parent.$watch(e(n.maxSize),function(e){h=parseInt(e,10),o.render()}));var a=this.render;this.render=function(){a(),0<t.page&&t.page<=t.totalPages&&(t.pages=function(e,t){var n=[],i=1,r=t,o=angular.isDefined(h)&&h<t;o&&(m?t<(r=(i=Math.max(e-Math.floor(h/2),1))+h-1)&&(i=(r=t)-h+1):(i=(Math.ceil(e/h)-1)*h+1,r=Math.min(i+h-1,t)));for(var a=i;a<=r;a++){var s=b(a,y(a),a===e);n.push(s)}if(o&&0<h&&(!m||v||g)){if(1<i){if(!g||3<i){var c=b(i-1,"...",!1);n.unshift(c)}if(g){if(3===i){var l=b(2,"2",!1);n.unshift(l)}var u=b(1,"1",!1);n.unshift(u)}}if(r<t){if(!g||r<t-2){var p=b(r+1,"...",!1);n.push(p)}if(g){if(r===t-2){var d=b(t-1,t-1,!1);n.push(d)}var f=b(t,t,!1);n.push(f)}}}return n}(t.page,t.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(e,a){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"uib/template/pagination/pagination.html"},link:function(e,t,n,i){t.addClass("pagination");var r=i[0],o=i[1];o&&r.init(o,a)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){var s={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},l={};this.options=function(e){angular.extend(l,e)},this.setTriggers=function(e){angular.extend(c,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,o,z,q,W,a,t,G,n){var Y=n.createNew();function i(e){if(27===e.which){var t=Y.top();t&&(t.value.close(),t=null)}}return q.on("keyup",i),t.$on("$destroy",function(){q.off("keyup",i)}),function(V,F,i,U){function H(e){var t=(e||U.trigger||i).split(" "),n=t.map(function(e){return c[e]||e});return{show:t,hide:n}}U=angular.extend({},s,l,U);var e=function(e){return e.replace(/[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()})}(V),t=a.startSymbol(),n=a.endSymbol(),r="<div "+e+'-popup uib-title="'+t+"title"+n+'" '+(U.useContentExp?'content-exp="contentExp()" ':'content="'+t+"content"+n+'" ')+'origin-scope="origScope" class="uib-position-measure '+F+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(e,t){var B=o(r);return function(i,o,r,e){var a,t,n,s,c,l,u,p,d=!!angular.isDefined(U.appendToBody)&&U.appendToBody,f=H(void 0),h=angular.isDefined(r[F+"Enable"]),m=i.$new(!0),v=!1,g=!!angular.isDefined(r[F+"IsOpen"])&&G(r[F+"IsOpen"]),y=!!U.useContentExp&&G(r[V]),b=[],_=function(){a&&a.html()&&(l||(l=z(function(){var e=W.positionElements(o,a,m.placement,d),n=angular.isDefined(a.offsetHeight)?a.offsetHeight:a.prop("offsetHeight"),i=d?W.offset(o):W.position(o);a.css({top:e.top+"px",left:e.left+"px"});var r=e.placement.split("-");a.hasClass(r[0])||(a.removeClass(p.split("-")[0]),a.addClass(r[0])),a.hasClass(U.placementClassPrefix+e.placement)||(a.removeClass(U.placementClassPrefix+p),a.addClass(U.placementClassPrefix+e.placement)),u=z(function(){var e=angular.isDefined(a.offsetHeight)?a.offsetHeight:a.prop("offsetHeight"),t=W.adjustTop(r,i,n,e);t&&a.css(t),u=null},0,!1),a.hasClass("uib-position-measure")?(W.positionArrow(a,e.placement),a.removeClass("uib-position-measure")):p!==e.placement&&W.positionArrow(a,e.placement),p=e.placement,l=null},0,!1)))};function w(){m.isOpen?E():x()}function x(){h&&!i.$eval(r[F+"Enable"])||(T(),function(){m.title=r[F+"Title"],m.content=y?y(i):r[V];m.popupClass=r[F+"Class"],m.placement=angular.isDefined(r[F+"Placement"])?r[F+"Placement"]:U.placement;var e=W.parsePlacement(m.placement);p=e[1]?e[0]+"-"+e[1]:e[0];var t=parseInt(r[F+"PopupDelay"],10),n=parseInt(r[F+"PopupCloseDelay"],10);m.popupDelay=isNaN(t)?U.popupDelay:t,m.popupCloseDelay=isNaN(n)?U.popupCloseDelay:n}(),m.popupDelay?s||(s=z(C,m.popupDelay,!1)):C())}function E(){k(),m.popupCloseDelay?c||(c=z(S,m.popupCloseDelay,!1)):S()}function C(){if(k(),T(),!m.content)return angular.noop;!function(){if(a)return;t=m.$new(),a=B(t,function(e){d?q.find("body").append(e):o.after(e)}),Y.add(m,{close:S}),function(){b.length=0,y?(b.push(i.$watch(y,function(e){!(m.content=e)&&m.isOpen&&S()})),b.push(t.$watch(function(){v||(v=!0,t.$$postDigest(function(){v=!1,m&&m.isOpen&&_()}))}))):b.push(r.$observe(V,function(e){!(m.content=e)&&m.isOpen?S():_()}));b.push(r.$observe(F+"Title",function(e){m.title=e,m.isOpen&&_()})),b.push(r.$observe(F+"Placement",function(e){m.placement=e||U.placement,m.isOpen&&_()}))}()}(),m.$evalAsync(function(){A(m.isOpen=!0),_()})}function k(){s&&(z.cancel(s),s=null),l&&(z.cancel(l),l=null)}function S(){m&&m.$evalAsync(function(){m&&(A(m.isOpen=!1),m.animation?n||(n=z(O,150,!1)):O())})}function T(){c&&(z.cancel(c),c=null),n&&(z.cancel(n),n=null)}function O(){k(),T(),b.length&&(angular.forEach(b,function(e){e()}),b.length=0),a&&(a.remove(),a=null,u&&z.cancel(u)),Y.remove(m),t&&(t.$destroy(),t=null)}function A(e){g&&angular.isFunction(g.assign)&&g.assign(i,e)}function I(e){m&&m.isOpen&&a&&(o[0].contains(e.target)||a[0].contains(e.target)||E())}function D(e){27===e.which&&E()}m.origScope=i,m.isOpen=!1,m.contentExp=function(){return m.content},r.$observe("disabled",function(e){e&&k(),e&&m.isOpen&&S()}),g&&i.$watch(g,function(e){m&&!e===m.isOpen&&w()});function P(){f.show.forEach(function(e){"outsideClick"===e?o.off("click",w):(o.off(e,x),o.off(e,w)),o.off("keypress",D)}),f.hide.forEach(function(e){"outsideClick"===e?q.off("click",I):o.off(e,E)})}var R,N,M;R=[],N=[],M=i.$eval(r[F+"Trigger"]),P(),"none"!==(f=angular.isObject(M)?(Object.keys(M).forEach(function(e){R.push(e),N.push(M[e])}),{show:R,hide:N}):H(M)).show&&f.show.forEach(function(e,t){"outsideClick"===e?(o.on("click",w),q.on("click",I)):e===f.hide[t]?o.on(e,w):e&&(o.on(e,x),o.on(f.hide[t],E)),o.on("keypress",D)});var j,$=i.$eval(r[F+"Animation"]);m.animation=angular.isDefined($)?!!$:U.animation;var L=F+"AppendToBody";j=L in r&&void 0===r[L]||i.$eval(r[L]),d=angular.isDefined(j)?j:d,i.$on("$destroy",function(){P(),O(),m=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(p,i,d,f){return{link:function(e,o,t){function a(){n&&(n.remove(),n=null),s&&(s.$destroy(),s=null),c&&(p.leave(c).then(function(){n=null}),n=c,c=null)}var s,n,c,l=e.$eval(t.tooltipTemplateTranscludeScope),u=0;e.$watch(i.parseAsResourceUrl(t.uibTooltipTemplateTransclude),function(i){var r=++u;i?(f(i,!0).then(function(e){if(r===u){var t=l.$new(),n=d(e)(t,function(e){a(),p.enter(e,o)});c=n,(s=t).$emit("$includeContentLoaded",i)}},function(){r===u&&(a(),e.$emit("$includeContentError",i))}),e.$emit("$includeContentRequested",i)):a()}),e.$on("$destroy",a)}}}]).directive("uibTooltipClasses",["$uibPosition",function(r){return{restrict:"A",link:function(e,t,n){if(e.placement){var i=r.parsePlacement(e.placement);t.addClass(i[0])}e.popupClass&&t.addClass(e.popupClass),e.animation&&t.addClass(n.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,n){var i=this,r=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;function o(){return angular.isDefined(e.maxParam)?e.maxParam:n.max}this.bars=[],e.max=o(),this.addBar=function(t,e,n){r||e.css({transition:"none"}),this.bars.push(t),t.max=o(),t.title=n&&angular.isDefined(n.title)?n.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){var e=i.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);100<e&&(t.percent-=e-100)},t.$on("$destroy",function(){e=null,i.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("maxParam",function(e){i.bars.forEach(function(e){e.max=o(),e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(e,t,n,i){i.addBar(e,t,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(e,t,n,i){i.addBar(e,angular.element(t.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(i,r,o){var a={$setViewValue:angular.noop},n=this;this.init=function(e){(a=e).$render=this.render,a.$formatters.push(function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e}),this.stateOn=angular.isDefined(r.stateOn)?i.$parent.$eval(r.stateOn):o.stateOn,this.stateOff=angular.isDefined(r.stateOff)?i.$parent.$eval(r.stateOff):o.stateOff,this.enableReset=angular.isDefined(r.enableReset)?i.$parent.$eval(r.enableReset):o.enableReset;var t=angular.isDefined(r.titles)?i.$parent.$eval(r.titles):o.titles;this.titles=angular.isArray(t)&&0<t.length?t:o.titles;var n=angular.isDefined(r.ratingStates)?i.$parent.$eval(r.ratingStates):new Array(angular.isDefined(r.max)?i.$parent.$eval(r.max):o.max);i.range=this.buildTemplateObjects(n)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;t<n;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(t)},e[t]);return e},this.getTitle=function(e){return e>=this.titles.length?e+1:this.titles[e]},i.rate=function(e){if(!i.readonly&&0<=e&&e<=i.range.length){var t=n.enableReset&&a.$viewValue===e?0:e;a.$setViewValue(t),a.$render()}},i.enter=function(e){i.readonly||(i.value=e),i.onHover({value:e})},i.reset=function(){i.value=a.$viewValue,i.onLeave()},i.onKeydown=function(e){/(37|38|39|40)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),i.rate(i.value+(38===e.which||39===e.which?1:-1)))},this.render=function(){i.value=a.$viewValue,i.title=n.getTitle(i.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(e,t,n,i){var r=i[0],o=i[1];r.init(o)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){var o,a,s=this;function c(e){for(var t=0;t<s.tabs.length;t++)if(s.tabs[t].index===e)return t}s.tabs=[],s.select=function(e,t){if(!a){var n=c(o),i=s.tabs[n];if(i){if(i.tab.onDeselect({$event:t,$selectedIndex:e}),t&&t.isDefaultPrevented())return;i.tab.active=!1}var r=s.tabs[e];r?(r.tab.onSelect({$event:t}),r.tab.active=!0,s.active=r.index,o=r.index):!r&&angular.isDefined(o)&&(s.active=null,o=null)}},s.addTab=function(e){if(s.tabs.push({tab:e,index:e.index}),s.tabs.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}),e.index===s.active||!angular.isDefined(s.active)&&1===s.tabs.length){var t=c(e.index);s.select(t)}},s.removeTab=function(e){for(var t,n=0;n<s.tabs.length;n++)if(s.tabs[n].tab===e){t=n;break}if(s.tabs[t].index===s.active){var i=t===s.tabs.length-1?t-1:t+1%s.tabs.length;s.select(i)}s.tabs.splice(t,1)},e.$watch("tabset.active",function(e){angular.isDefined(e)&&e!==o&&s.select(c(e))}),e.$on("$destroy",function(){a=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tabset.html"},link:function(e,t,n){e.vertical=!!angular.isDefined(n.vertical)&&e.$parent.$eval(n.vertical),e.justified=!!angular.isDefined(n.justified)&&e.$parent.$eval(n.justified)}}}).directive("uibTab",["$parse",function(o){return{require:"^uibTabset",replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(i,e,t,r,n){i.disabled=!1,t.disable&&i.$parent.$watch(o(t.disable),function(e){i.disabled=!!e}),angular.isUndefined(t.index)&&(r.tabs&&r.tabs.length?i.index=Math.max.apply(null,r.tabs.map(function(e){return e.index}))+1:i.index=0),angular.isUndefined(t.classes)&&(i.classes=""),i.select=function(e){if(!i.disabled){for(var t,n=0;n<r.tabs.length;n++)if(r.tabs[n].tab===i){t=n;break}r.select(t,e)}},r.addTab(i),i.$on("$destroy",function(){r.removeTab(i)}),i.$transcludeFn=n}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){return{restrict:"A",require:"^uibTabset",link:function(e,t,n){var i=e.$eval(n.uibTabContentTransclude).tab;i.$transcludeFn(i.$parent,function(e){angular.forEach(e,function(e){!function(e){return e.tagName&&(e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase()||"uib:tab-heading"===e.tagName.toLowerCase())}(e)?t.append(e):i.headingElement=e})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(o,e,a,t,n,i,s){var c,l,u,r=new Date,p=[],d={$setViewValue:angular.noop},f=angular.isDefined(a.meridians)?o.$parent.$eval(a.meridians):s.meridians||i.DATETIME_FORMATS.AMPMS,h=!angular.isDefined(a.padHours)||o.$parent.$eval(a.padHours);o.tabindex=angular.isDefined(a.tabindex)?a.tabindex:0,e.removeAttr("tabindex"),this.init=function(e,t){(d=e).$render=this.render,d.$formatters.unshift(function(e){return e?new Date(e):null});var n=t.eq(0),i=t.eq(1),r=t.eq(2);c=n.controller("ngModel"),l=i.controller("ngModel"),u=r.controller("ngModel"),(angular.isDefined(a.mousewheel)?o.$parent.$eval(a.mousewheel):s.mousewheel)&&this.setupMousewheelEvents(n,i,r),(angular.isDefined(a.arrowkeys)?o.$parent.$eval(a.arrowkeys):s.arrowkeys)&&this.setupArrowkeyEvents(n,i,r),o.readonlyInput=angular.isDefined(a.readonlyInput)?o.$parent.$eval(a.readonlyInput):s.readonlyInput,this.setupInputEvents(n,i,r)};var m=s.hourStep;a.hourStep&&p.push(o.$parent.$watch(t(a.hourStep),function(e){m=+e}));var v,g,y=s.minuteStep;a.minuteStep&&p.push(o.$parent.$watch(t(a.minuteStep),function(e){y=+e})),p.push(o.$parent.$watch(t(a.min),function(e){var t=new Date(e);v=isNaN(t)?void 0:t})),p.push(o.$parent.$watch(t(a.max),function(e){var t=new Date(e);g=isNaN(t)?void 0:t}));var b=!1;a.ngDisabled&&p.push(o.$parent.$watch(t(a.ngDisabled),function(e){b=e})),o.noIncrementHours=function(){var e=O(r,60*m);return b||g<e||e<r&&e<v},o.noDecrementHours=function(){var e=O(r,60*-m);return b||e<v||r<e&&g<e},o.noIncrementMinutes=function(){var e=O(r,y);return b||g<e||e<r&&e<v},o.noDecrementMinutes=function(){var e=O(r,-y);return b||e<v||r<e&&g<e},o.noIncrementSeconds=function(){var e=A(r,_);return b||g<e||e<r&&e<v},o.noDecrementSeconds=function(){var e=A(r,-_);return b||e<v||r<e&&g<e},o.noToggleMeridian=function(){return r.getHours()<12?b||O(r,720)>g:b||O(r,-720)<v};var _=s.secondStep;function w(){var e=+o.hours;if((o.showMeridian?0<e&&e<13:0<=e&&e<24)&&""!==o.hours)return o.showMeridian&&(12===e&&(e=0),o.meridian===f[1]&&(e+=12)),e}function x(){var e=+o.minutes;if(0<=e&&e<60&&""!==o.minutes)return e}function E(e,t){return null===e?"":angular.isDefined(e)&&e.toString().length<2&&!t?"0"+e:e.toString()}function C(e){k(),d.$setViewValue(new Date(r)),S(e)}function k(){c&&c.$setValidity("hours",!0),l&&l.$setValidity("minutes",!0),u&&u.$setValidity("seconds",!0),d.$setValidity("time",!0),o.invalidHours=!1,o.invalidMinutes=!1,o.invalidSeconds=!1}function S(e){if(d.$modelValue){var t=r.getHours(),n=r.getMinutes(),i=r.getSeconds();o.showMeridian&&(t=0===t||12===t?12:t%12),o.hours="h"===e?t:E(t,!h),"m"!==e&&(o.minutes=E(n)),o.meridian=r.getHours()<12?f[0]:f[1],"s"!==e&&(o.seconds=E(i)),o.meridian=r.getHours()<12?f[0]:f[1]}else o.hours=null,o.minutes=null,o.seconds=null,o.meridian=f[0]}function T(e){r=A(r,e),C()}function O(e,t){return A(e,60*t)}function A(e,t){var n=new Date(e.getTime()+1e3*t),i=new Date(e);return i.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),i}function I(){return(null===o.hours||""===o.hours)&&(null===o.minutes||""===o.minutes)&&(!o.showSeconds||o.showSeconds&&(null===o.seconds||""===o.seconds))}a.secondStep&&p.push(o.$parent.$watch(t(a.secondStep),function(e){_=+e})),o.showSeconds=s.showSeconds,a.showSeconds&&p.push(o.$parent.$watch(t(a.showSeconds),function(e){o.showSeconds=!!e})),o.showMeridian=s.showMeridian,a.showMeridian&&p.push(o.$parent.$watch(t(a.showMeridian),function(e){if(o.showMeridian=!!e,d.$error.time){var t=w(),n=x();angular.isDefined(t)&&angular.isDefined(n)&&(r.setHours(t),C())}else S()})),this.setupMousewheelEvents=function(e,t,n){function i(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||0<t}e.on("mousewheel wheel",function(e){b||o.$apply(i(e)?o.incrementHours():o.decrementHours()),e.preventDefault()}),t.on("mousewheel wheel",function(e){b||o.$apply(i(e)?o.incrementMinutes():o.decrementMinutes()),e.preventDefault()}),n.on("mousewheel wheel",function(e){b||o.$apply(i(e)?o.incrementSeconds():o.decrementSeconds()),e.preventDefault()})},this.setupArrowkeyEvents=function(e,t,n){e.on("keydown",function(e){b||(38===e.which?(e.preventDefault(),o.incrementHours(),o.$apply()):40===e.which&&(e.preventDefault(),o.decrementHours(),o.$apply()))}),t.on("keydown",function(e){b||(38===e.which?(e.preventDefault(),o.incrementMinutes(),o.$apply()):40===e.which&&(e.preventDefault(),o.decrementMinutes(),o.$apply()))}),n.on("keydown",function(e){b||(38===e.which?(e.preventDefault(),o.incrementSeconds(),o.$apply()):40===e.which&&(e.preventDefault(),o.decrementSeconds(),o.$apply()))})},this.setupInputEvents=function(e,t,n){if(o.readonlyInput)return o.updateHours=angular.noop,o.updateMinutes=angular.noop,void(o.updateSeconds=angular.noop);function i(e,t,n){d.$setViewValue(null),d.$setValidity("time",!1),angular.isDefined(e)&&(o.invalidHours=e,c&&c.$setValidity("hours",!1)),angular.isDefined(t)&&(o.invalidMinutes=t,l&&l.$setValidity("minutes",!1)),angular.isDefined(n)&&(o.invalidSeconds=n,u&&u.$setValidity("seconds",!1))}o.updateHours=function(){var e=w(),t=x();d.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(r.setHours(e),r.setMinutes(t),r<v||g<r?i(!0):C("h")):i(!0)},e.on("blur",function(e){d.$setTouched(),I()?k():null===o.hours||""===o.hours?i(!0):!o.invalidHours&&o.hours<10&&o.$apply(function(){o.hours=E(o.hours,!h)})}),o.updateMinutes=function(){var e=x(),t=w();d.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(r.setHours(t),r.setMinutes(e),r<v||g<r?i(void 0,!0):C("m")):i(void 0,!0)},t.on("blur",function(e){d.$setTouched(),I()?k():null===o.minutes?i(void 0,!0):!o.invalidMinutes&&o.minutes<10&&o.$apply(function(){o.minutes=E(o.minutes)})}),o.updateSeconds=function(){var e=function(){var e=+o.seconds;return 0<=e&&e<60?e:void 0}();d.$setDirty(),angular.isDefined(e)?(r.setSeconds(e),C("s")):i(void 0,void 0,!0)},n.on("blur",function(e){I()?k():!o.invalidSeconds&&o.seconds<10&&o.$apply(function(){o.seconds=E(o.seconds)})})},this.render=function(){var e=d.$viewValue;isNaN(e)?(d.$setValidity("time",!1),n.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(r=e),r<v||g<r?(d.$setValidity("time",!1),o.invalidHours=!0,o.invalidMinutes=!0):k(),S())},o.showSpinners=angular.isDefined(a.showSpinners)?o.$parent.$eval(a.showSpinners):s.showSpinners,o.incrementHours=function(){o.noIncrementHours()||T(60*m*60)},o.decrementHours=function(){o.noDecrementHours()||T(60*-m*60)},o.incrementMinutes=function(){o.noIncrementMinutes()||T(60*y)},o.decrementMinutes=function(){o.noDecrementMinutes()||T(60*-y)},o.incrementSeconds=function(){o.noIncrementSeconds()||T(_)},o.decrementSeconds=function(){o.noDecrementSeconds()||T(-_)},o.toggleMeridian=function(){var e=x(),t=w();o.noToggleMeridian()||(angular.isDefined(e)&&angular.isDefined(t)?T(720*(r.getHours()<12?60:-60)):o.meridian=o.meridian===f[0]?f[1]:f[0])},o.blur=function(){d.$setTouched()},o.$on("$destroy",function(){for(;p.length;)p.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(n){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(e,t){return t.templateUrl||n.templateUrl},link:function(e,t,n,i){var r=i[0],o=i[1];o&&r.init(o,t.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(n){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(e){var t=e.match(i);if(!t)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+e+'".');return{itemName:t[3],source:n(t[4]),viewMapper:n(t[2]||t[1]),modelMapper:n(t[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(s,c,o,e,t,n,a,i,r,l,u,p,d){var f,h,m=[9,13,27,38,40],v=s.$eval(o.typeaheadMinLength);v||0===v||(v=1),s.$watch(o.typeaheadMinLength,function(e){v=e||0===e?e:1});var g=s.$eval(o.typeaheadWaitMs)||0,y=!1!==s.$eval(o.typeaheadEditable);s.$watch(o.typeaheadEditable,function(e){y=!1!==e});var b,_,w=t(o.typeaheadLoading).assign||angular.noop,x=o.typeaheadShouldSelect?t(o.typeaheadShouldSelect):function(e,t){var n=t.$event;return 13===n.which||9===n.which},E=t(o.typeaheadOnSelect),C=!!angular.isDefined(o.typeaheadSelectOnBlur)&&s.$eval(o.typeaheadSelectOnBlur),k=t(o.typeaheadNoResults).assign||angular.noop,S=o.typeaheadInputFormatter?t(o.typeaheadInputFormatter):void 0,T=!!o.typeaheadAppendToBody&&s.$eval(o.typeaheadAppendToBody),O=o.typeaheadAppendTo?s.$eval(o.typeaheadAppendTo):null,A=!1!==s.$eval(o.typeaheadFocusFirst),I=!!o.typeaheadSelectOnExact&&s.$eval(o.typeaheadSelectOnExact),D=t(o.typeaheadIsOpen).assign||angular.noop,P=s.$eval(o.typeaheadShowHint)||!1,R=t(o.ngModel),N=t(o.ngModel+"($$$p)"),M=d.parse(o.uibTypeahead),j=s.$new(),$=s.$on("$destroy",function(){j.$destroy()});j.$on("$destroy",$);var L,B,V="typeahead-"+j.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":V}),P&&((L=angular.element("<div></div>")).css("position","relative"),c.after(L),(B=c.clone()).attr("placeholder",""),B.attr("tabindex","-1"),B.val(""),B.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),c.css({position:"relative","vertical-align":"top","background-color":"transparent"}),B.attr("id")&&B.removeAttr("id"),L.append(B),B.after(c));var F=angular.element("<div uib-typeahead-popup></div>");F.attr({id:V,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(o.typeaheadTemplateUrl)&&F.attr("template-url",o.typeaheadTemplateUrl),angular.isDefined(o.typeaheadPopupTemplateUrl)&&F.attr("popup-template-url",o.typeaheadPopupTemplateUrl);function U(){j.matches=[],j.activeIdx=-1,c.attr("aria-expanded",!1),P&&B.val("")}function H(e){return V+"-option-"+e}j.$watch("activeIdx",function(e){e<0?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",H(e))});function z(r,o){var a={$viewValue:r};w(s,!0),k(s,!1),n.when(M.source(s,a)).then(function(e){var t=r===f.$viewValue;if(t&&b)if(e&&0<e.length){j.activeIdx=A?0:-1,k(s,!1);for(var n=j.matches.length=0;n<e.length;n++)a[M.itemName]=e[n],j.matches.push({id:H(n),label:M.viewMapper(j,a),model:e[n]});if(j.query=r,Y(),c.attr("aria-expanded",!0),I&&1===j.matches.length&&function(e,t){return!!(j.matches.length>t&&e)&&e.toUpperCase()===j.matches[t].label.toUpperCase()}(r,0)&&(angular.isNumber(j.debounceUpdate)||angular.isObject(j.debounceUpdate)?u(function(){j.select(0,o)},angular.isNumber(j.debounceUpdate)?j.debounceUpdate:j.debounceUpdate.default):j.select(0,o)),P){var i=j.matches[0].label;angular.isString(r)&&0<r.length&&i.slice(0,r.length).toUpperCase()===r.toUpperCase()?B.val(r+i.slice(r.length)):B.val("")}}else U(),k(s,!0);t&&w(s,!1)},function(){U(),w(s,!1),k(s,!0)})}T&&(angular.element(r).on("resize",G),i.find("body").on("scroll",G));var q,W=u(function(){j.matches.length&&Y(),j.moveInProgress=!1},200);function G(){j.moveInProgress||(j.moveInProgress=!0,j.$digest()),W()}function Y(){j.position=T?p.offset(c):p.position(c),j.position.top+=c.prop("offsetHeight")}j.moveInProgress=!1,j.query=void 0;function K(){q&&a.cancel(q)}U(),j.assignIsOpen=function(e){D(s,e)},j.select=function(e,t){var n,i,r={};_=!0,r[M.itemName]=i=j.matches[e].model,n=M.modelMapper(s,r),function(e,t){angular.isFunction(R(s))&&h.getOption("getterSetter")?N(e,{$$$p:t}):R.assign(e,t)}(s,n),f.$setValidity("editable",!0),f.$setValidity("parse",!0),E(s,{$item:i,$model:n,$label:M.viewMapper(s,r),$event:t}),U(),!1!==j.$eval(o.typeaheadFocusOnSelect)&&a(function(){c[0].focus()},0,!1)},c.on("keydown",function(e){if(0!==j.matches.length&&-1!==m.indexOf(e.which)){var t,n=x(s,{$event:e});if(-1===j.activeIdx&&n||9===e.which&&e.shiftKey)return U(),void j.$digest();switch(e.preventDefault(),e.which){case 27:e.stopPropagation(),U(),s.$digest();break;case 38:j.activeIdx=(0<j.activeIdx?j.activeIdx:j.matches.length)-1,j.$digest(),(t=F[0].querySelectorAll(".uib-typeahead-match")[j.activeIdx]).parentNode.scrollTop=t.offsetTop;break;case 40:j.activeIdx=(j.activeIdx+1)%j.matches.length,j.$digest(),(t=F[0].querySelectorAll(".uib-typeahead-match")[j.activeIdx]).parentNode.scrollTop=t.offsetTop;break;default:n&&j.$apply(function(){angular.isNumber(j.debounceUpdate)||angular.isObject(j.debounceUpdate)?u(function(){j.select(j.activeIdx,e)},angular.isNumber(j.debounceUpdate)?j.debounceUpdate:j.debounceUpdate.default):j.select(j.activeIdx,e)})}}}),c.on("focus",function(e){b=!0,0!==v||f.$viewValue||a(function(){z(f.$viewValue,e)},0)}),c.on("blur",function(e){C&&j.matches.length&&-1!==j.activeIdx&&!_&&(_=!0,j.$apply(function(){angular.isObject(j.debounceUpdate)&&angular.isNumber(j.debounceUpdate.blur)?u(function(){j.select(j.activeIdx,e)},j.debounceUpdate.blur):j.select(j.activeIdx,e)})),!y&&f.$error.editable&&(f.$setViewValue(),j.$apply(function(){f.$setValidity("editable",!0),f.$setValidity("parse",!0)}),c.val("")),_=b=!1});function X(e){c[0]!==e.target&&3!==e.which&&0!==j.matches.length&&(U(),l.$$phase||s.$digest())}i.on("click",X),s.$on("$destroy",function(){i.off("click",X),(T||O)&&J.remove(),T&&(angular.element(r).off("resize",G),i.find("body").off("scroll",G)),F.remove(),P&&L.remove()});var J=e(F)(j);T?i.find("body").append(J):O?angular.element(O).eq(0).append(J):c.after(J),this.init=function(e){h=function(e){var t;angular.version.minor<6?(t=e.$options||{}).getOption=function(e){return t[e]}:t=e.$options;return t}(f=e),j.debounceUpdate=t(h.getOption("debounce"))(s),f.$parsers.unshift(function(e){return b=!0,0===v||e&&e.length>=v?0<g?(K(),function(e){q=a(function(){z(e)},g)}(e)):z(e):(w(s,!1),K(),U()),y?e:e?void f.$setValidity("editable",!1):(f.$setValidity("editable",!0),null)}),f.$formatters.push(function(e){var t,n={};return y||f.$setValidity("editable",!0),S?(n.$model=e,S(s,n)):(n[M.itemName]=e,t=M.viewMapper(s,n),n[M.itemName]=void 0,t!==M.viewMapper(s,n)?t:e)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(e,t,n,i){i[1].init(i[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function(r){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(i,e,t){i.templateUrl=t.templateUrl,i.isOpen=function(){var e=0<i.matches.length;return i.assignIsOpen({isOpen:e}),e},i.isActive=function(e){return i.active===e},i.selectActive=function(e){i.active=e},i.selectMatch=function(e,t){var n=i.debounce();angular.isNumber(n)||angular.isObject(n)?r(function(){i.select({activeIdx:e,evt:t})},angular.isNumber(n)?n:n.default):i.select({activeIdx:e,evt:t})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(r,o,a){return{scope:{index:"=",match:"=",query:"="},link:function(n,i,e){var t=a(e.templateUrl)(n.$parent)||"uib/template/typeahead/typeahead-match.html";r(t).then(function(e){var t=angular.element(e.trim());i.replaceWith(t),o(t)(n)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(n,e,i){var r;return r=e.has("$sanitize"),function(e,t){return!r&&function(e){return/<.*>/g.test(e)}(e)&&i.warn("Unsafe use of typeahead please use ngSanitize"),e=t?(""+e).replace(new RegExp(function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(t),"gi"),"<strong>$&</strong>"):e,r||(e=n.trustAsHtml(e)),e}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(e){e.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){angular.$$csp().noInlineStyle||angular.$$uibCarouselCss||angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){angular.$$csp().noInlineStyle||angular.$$uibDatepickerCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){angular.$$csp().noInlineStyle||angular.$$uibPositionCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){angular.$$csp().noInlineStyle||angular.$$uibDatepickerpopupCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){angular.$$csp().noInlineStyle||angular.$$uibTooltipCss||angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){angular.$$csp().noInlineStyle||angular.$$uibTimepickerCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){angular.$$csp().noInlineStyle||angular.$$uibTypeaheadCss||angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0})},{}],136:[function(e,t,n){n.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,c=(1<<s)-1,l=c>>1,u=-7,p=n?r-1:0,d=n?-1:1,f=e[t+p];for(p+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;0<u;o=256*o+e[t+p],p+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;0<u;a=256*a+e[t+p],p+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=l}return(f?-1:1)*a*Math.pow(2,o-i)},n.write=function(e,t,n,i,r,o){var a,s,c,l=8*o-r-1,u=(1<<l)-1,p=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,h=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),2<=(t+=1<=a+p?d/c:d*Math.pow(2,1-p))*c&&(a++,c/=2),u<=a+p?(s=0,a=u):1<=a+p?(s=(t*c-1)*Math.pow(2,r),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,r),a=0));8<=r;e[n+f]=255&s,f+=h,s/=256,r-=8);for(a=a<<r|s,l+=r;0<l;e[n+f]=255&a,f+=h,a/=256,l-=8);e[n+f-h]|=128*m}},{}],137:[function(e,t,n){var i;i=function(i){return i.extend(i.expr[":"],{data:i.expr.createPseudo?i.expr.createPseudo(function(t){return function(e){return!!i.data(e,t)}}):function(e,t,n){return!!i.data(e,n[3])}})},"function"==typeof define&&define.amd?define(["jquery","./version"],i):i(jQuery)},{}],138:[function(e,t,n){var i;i=function(o){return o.ui.plugin={add:function(e,t,n){var i,r=o.ui[e].prototype;for(i in n)r.plugins[i]=r.plugins[i]||[],r.plugins[i].push([t,n[i]])},call:function(e,t,n,i){var r,o=e.plugins[t];if(o&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)e.options[o[r][0]]&&o[r][1].apply(e.element,n)}}},"function"==typeof define&&define.amd?define(["jquery","./version"],i):i(jQuery)},{}],139:[function(e,t,n){var i;i=function(e){return e.ui.safeActiveElement=function(t){var n;try{n=t.activeElement}catch(e){n=t.body}return n||(n=t.body),n.nodeName||(n=t.body),n}},"function"==typeof define&&define.amd?define(["jquery","./version"],i):i(jQuery)},{}],140:[function(e,t,n){var i;i=function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}},"function"==typeof define&&define.amd?define(["jquery","./version"],i):i(jQuery)},{}],141:[function(e,t,n){var i;i=function(o){return o.fn.scrollParent=function(e){var t=this.css("position"),n="absolute"===t,i=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=o(this);return(!n||"static"!==e.css("position"))&&i.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&r.length?r:o(this[0].ownerDocument||document)}},"function"==typeof define&&define.amd?define(["jquery","./version"],i):i(jQuery)},{}],142:[function(e,t,n){var i;i=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"},"function"==typeof define&&define.amd?define(["jquery"],i):i(jQuery)},{}],143:[function(e,t,n){var i;i=function(u){var r,n=0,s=Array.prototype.slice;return u.cleanData=(r=u.cleanData,function(e){var t,n,i;for(i=0;null!=(n=e[i]);i++)try{(t=u._data(n,"events"))&&t.remove&&u(n).triggerHandler("remove")}catch(e){}r(e)}),u.widget=function(e,n,t){var i,r,o,a={},s=e.split(".")[0],c=s+"-"+(e=e.split(".")[1]);return t||(t=n,n=u.Widget),u.isArray(t)&&(t=u.extend.apply(null,[{}].concat(t))),u.expr[":"][c.toLowerCase()]=function(e){return!!u.data(e,c)},u[s]=u[s]||{},i=u[s][e],r=u[s][e]=function(e,t){if(!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},u.extend(r,i,{version:t.version,_proto:u.extend({},t),_childConstructors:[]}),(o=new n).options=u.widget.extend({},o.options),u.each(t,function(t,i){function r(){return n.prototype[t].apply(this,arguments)}function o(e){return n.prototype[t].apply(this,e)}u.isFunction(i)?a[t]=function(){var e,t=this._super,n=this._superApply;return this._super=r,this._superApply=o,e=i.apply(this,arguments),this._super=t,this._superApply=n,e}:a[t]=i}),r.prototype=u.widget.extend(o,{widgetEventPrefix:i&&o.widgetEventPrefix||e},a,{constructor:r,namespace:s,widgetName:e,widgetFullName:c}),i?(u.each(i._childConstructors,function(e,t){var n=t.prototype;u.widget(n.namespace+"."+n.widgetName,r,t._proto)}),delete i._childConstructors):n._childConstructors.push(r),u.widget.bridge(e,r),r},u.widget.extend=function(e){for(var t,n,i=s.call(arguments,1),r=0,o=i.length;r<o;r++)for(t in i[r])n=i[r][t],i[r].hasOwnProperty(t)&&void 0!==n&&(u.isPlainObject(n)?e[t]=u.isPlainObject(e[t])?u.widget.extend({},e[t],n):u.widget.extend({},n):e[t]=n);return e},u.widget.bridge=function(o,t){var a=t.prototype.widgetFullName||o;u.fn[o]=function(n){var e="string"==typeof n,i=s.call(arguments,1),r=this;return e?this.length||"instance"!==n?this.each(function(){var e,t=u.data(this,a);return"instance"===n?(r=t,!1):t?u.isFunction(t[n])&&"_"!==n.charAt(0)?(e=t[n].apply(t,i))!==t&&void 0!==e?(r=e&&e.jquery?r.pushStack(e.get()):e,!1):void 0:u.error("no such method '"+n+"' for "+o+" widget instance"):u.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+n+"'")}):r=void 0:(i.length&&(n=u.widget.extend.apply(null,[n].concat(i))),this.each(function(){var e=u.data(this,a);e?(e.option(n||{}),e._init&&e._init()):u.data(this,a,new t(n,this))})),r}},u.Widget=function(){},u.Widget._childConstructors=[],u.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=u(t||this.defaultElement||this)[0],this.element=u(t),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=u(),this.hoverable=u(),this.focusable=u(),this.classesElementLookup={},t!==this&&(u.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=u(t.style?t.ownerDocument:t.document||t),this.window=u(this.document[0].defaultView||this.document[0].parentWindow)),this.options=u.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:u.noop,_create:u.noop,_init:u.noop,destroy:function(){var n=this;this._destroy(),u.each(this.classesElementLookup,function(e,t){n._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:u.noop,widget:function(){return this.element},option:function(e,t){var n,i,r,o=e;if(0===arguments.length)return u.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(n=e.split(".")).shift(),n.length){for(i=o[e]=u.widget.extend({},this.options[e]),r=0;r<n.length-1;r++)i[n[r]]=i[n[r]]||{},i=i[n[r]];if(e=n.pop(),1===arguments.length)return void 0===i[e]?null:i[e];i[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,n,i;for(t in e)i=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&i&&i.length&&(n=u(i.get()),this._removeClass(i,t),n.addClass(this._classes({element:n,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(r){var o=[],a=this;function e(e,t){var n,i;for(i=0;i<e.length;i++)n=a.classesElementLookup[e[i]]||u(),n=r.add?u(u.unique(n.get().concat(r.element.get()))):u(n.not(r.element).get()),a.classesElementLookup[e[i]]=n,o.push(e[i]),t&&r.classes[e[i]]&&o.push(r.classes[e[i]])}return r=u.extend({element:this.element,classes:this.options.classes||{}},r),this._on(r.element,{remove:"_untrackClassesElement"}),r.keys&&e(r.keys.match(/\S+/g)||[],!0),r.extra&&e(r.extra.match(/\S+/g)||[]),o.join(" ")},_untrackClassesElement:function(n){var i=this;u.each(i.classesElementLookup,function(e,t){-1!==u.inArray(n.target,t)&&(i.classesElementLookup[e]=u(t.not(n.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof e||null===e,o={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};return o.element.toggleClass(this._classes(o),i),this},_on:function(a,s,e){var c,l=this;"boolean"!=typeof a&&(e=s,s=a,a=!1),e?(s=c=u(s),this.bindings=this.bindings.add(s)):(e=s,s=this.element,c=this.widget()),u.each(e,function(e,t){function n(){if(a||!0!==l.options.disabled&&!u(this).hasClass("ui-state-disabled"))return("string"==typeof t?l[t]:t).apply(l,arguments)}"string"!=typeof t&&(n.guid=t.guid=t.guid||n.guid||u.guid++);var i=e.match(/^([\w:-]*)\s*(.*)$/),r=i[1]+l.eventNamespace,o=i[2];o?c.on(r,o,n):s.on(r,n)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t).off(t),this.bindings=u(this.bindings.not(e).get()),this.focusable=u(this.focusable.not(e).get()),this.hoverable=u(this.hoverable.not(e).get())},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(u(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(u(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(u(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(u(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,n){var i,r,o=this.options[e];if(n=n||{},(t=u.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],r=t.originalEvent)for(i in r)i in t||(t[i]=r[i]);return this.element.trigger(t,n),!(u.isFunction(o)&&!1===o.apply(this.element[0],[t].concat(n))||t.isDefaultPrevented())}},u.each({show:"fadeIn",hide:"fadeOut"},function(o,a){u.Widget.prototype["_"+o]=function(t,e,n){var i;"string"==typeof e&&(e={effect:e});var r=e?!0===e||"number"==typeof e?a:e.effect||a:o;"number"==typeof(e=e||{})&&(e={duration:e}),i=!u.isEmptyObject(e),e.complete=n,e.delay&&t.delay(e.delay),i&&u.effects&&u.effects.effect[r]?t[o](e):r!==o&&t[r]?t[r](e.duration,e.easing,n):t.queue(function(e){u(this)[o](),n&&n.call(t[0]),e()})}}),u.widget},"function"==typeof define&&define.amd?define(["jquery","./version"],i):i(jQuery)},{}],144:[function(e,t,n){var i;i=function(b){return b.widget("ui.draggable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return!(this.helper||t.disabled||0<b(e.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=b(this);return b("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=b.ui.safeActiveElement(this.document[0]);b(e.target).closest(t).length||b.ui.safeBlur(t)},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),b.ui.ddmanager&&(b.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===b(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),b.ui.ddmanager&&!t.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp(new b.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",b.ui.ddmanager&&b.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,n=!1;return b.ui.ddmanager&&!this.options.dropBehaviour&&(n=b.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==t._trigger("stop",e)&&t._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),b.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new b.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!b(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var t=this.options,n=b.isFunction(t.helper),i=n?b(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),n&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),b.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,n,i=this.options,r=this.document[0];this.relativeContainer=null,i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),(n=(t=b(i.containment))[0])&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)):this.containment=i.containment:this.containment=[0,0,b(r).width()-this.helperProportions.width-this.margins.left,(b(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),c=e.pageX,l=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(n=this.relativeContainer?(i=this.relativeContainer.offset(),[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):this.containment,e.pageX-this.offset.click.left<n[0]&&(c=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(c=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,l=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((c-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,c=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(c=this.originalPageX),"x"===a.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:c-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,t,n){return n=n||this._uiHash(),b.ui.plugin.call(this,e,[t,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),b.Widget.prototype._trigger.call(this,e,t,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),b.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,n){var i=b.extend({},e,{item:n.element});n.sortables=[],b(n.options.connectToSortable).each(function(){var e=b(this).sortable("instance");e&&!e.options.disabled&&(n.sortables.push(e),e.refreshPositions(),e._trigger("activate",t,i))})},stop:function(t,e,n){var i=b.extend({},e,{item:n.element});n.cancelHelperRemoval=!1,b.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(n,i,r){b.each(r.sortables,function(){var e=!1,t=this;t.positionAbs=r.positionAbs,t.helperProportions=r.helperProportions,t.offset.click=r.offset.click,t._intersectsWith(t.containerCache)&&(e=!0,b.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==t&&this._intersectsWith(this.containerCache)&&b.contains(t.element[0],this.element[0])&&(e=!1),e})),e?(t.isOver||(t.isOver=1,r._parent=i.helper.parent(),t.currentItem=i.helper.appendTo(t.element).data("ui-sortable-item",!0),t.options._helper=t.options.helper,t.options.helper=function(){return i.helper[0]},n.target=t.currentItem[0],t._mouseCapture(n,!0),t._mouseStart(n,!0,!0),t.offset.click.top=r.offset.click.top,t.offset.click.left=r.offset.click.left,t.offset.parent.left-=r.offset.parent.left-t.offset.parent.left,t.offset.parent.top-=r.offset.parent.top-t.offset.parent.top,r._trigger("toSortable",n),r.dropped=t.element,b.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,t.fromOutside=r),t.currentItem&&(t._mouseDrag(n),i.position=t.position)):t.isOver&&(t.isOver=0,t.cancelHelperRemoval=!0,t.options._revert=t.options.revert,t.options.revert=!1,t._trigger("out",n,t._uiHash(t)),t._mouseStop(n,!0),t.options.revert=t.options._revert,t.options.helper=t.options._helper,t.placeholder&&t.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(n),i.position=r._generatePosition(n,!0),r._trigger("fromSortable",n),r.dropped=!1,b.each(r.sortables,function(){this.refreshPositions()}))})}}),b.ui.plugin.add("draggable","cursor",{start:function(e,t,n){var i=b("body"),r=n.options;i.css("cursor")&&(r._cursor=i.css("cursor")),i.css("cursor",r.cursor)},stop:function(e,t,n){var i=n.options;i._cursor&&b("body").css("cursor",i._cursor)}}),b.ui.plugin.add("draggable","opacity",{start:function(e,t,n){var i=b(t.helper),r=n.options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(e,t,n){var i=n.options;i._opacity&&b(t.helper).css("opacity",i._opacity)}}),b.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,t,n){var i=n.options,r=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+o.offsetHeight-e.pageY<i.scrollSensitivity?o.scrollTop=r=o.scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+o.offsetWidth-e.pageX<i.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-b(a).scrollTop()<i.scrollSensitivity?r=b(a).scrollTop(b(a).scrollTop()-i.scrollSpeed):b(window).height()-(e.pageY-b(a).scrollTop())<i.scrollSensitivity&&(r=b(a).scrollTop(b(a).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-b(a).scrollLeft()<i.scrollSensitivity?r=b(a).scrollLeft(b(a).scrollLeft()-i.scrollSpeed):b(window).width()-(e.pageX-b(a).scrollLeft())<i.scrollSensitivity&&(r=b(a).scrollLeft(b(a).scrollLeft()+i.scrollSpeed)))),!1!==r&&b.ui.ddmanager&&!i.dropBehaviour&&b.ui.ddmanager.prepareOffsets(n,e)}}),b.ui.plugin.add("draggable","snap",{start:function(e,t,n){var i=n.options;n.snapElements=[],b(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var e=b(this),t=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t,n){var i,r,o,a,s,c,l,u,p,d,f=n.options,h=f.snapTolerance,m=t.offset.left,v=m+n.helperProportions.width,g=t.offset.top,y=g+n.helperProportions.height;for(p=n.snapElements.length-1;0<=p;p--)c=(s=n.snapElements[p].left-n.margins.left)+n.snapElements[p].width,u=(l=n.snapElements[p].top-n.margins.top)+n.snapElements[p].height,v<s-h||c+h<m||y<l-h||u+h<g||!b.contains(n.snapElements[p].item.ownerDocument,n.snapElements[p].item)?(!n.snapElements[p].snapping||n.options.snap.release&&n.options.snap.release.call(n.element,e,b.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(l-y)<=h,r=Math.abs(u-g)<=h,o=Math.abs(s-v)<=h,a=Math.abs(c-m)<=h,i&&(t.position.top=n._convertPositionTo("relative",{top:l-n.helperProportions.height,left:0}).top),r&&(t.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),o&&(t.position.left=n._convertPositionTo("relative",{top:0,left:s-n.helperProportions.width}).left),a&&(t.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),d=i||r||o||a,"outer"!==f.snapMode&&(i=Math.abs(l-g)<=h,r=Math.abs(u-y)<=h,o=Math.abs(s-m)<=h,a=Math.abs(c-v)<=h,i&&(t.position.top=n._convertPositionTo("relative",{top:l,left:0}).top),r&&(t.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),o&&(t.position.left=n._convertPositionTo("relative",{top:0,left:s}).left),a&&(t.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),n.snapElements[p].snapping||!(i||r||o||a||d)||n.options.snap.snap&&n.options.snap.snap.call(n.element,e,b.extend(n._uiHash(),{snapItem:n.snapElements[p].item})),n.snapElements[p].snapping=i||r||o||a||d)}}),b.ui.plugin.add("draggable","stack",{start:function(e,t,n){var i,r=n.options,o=b.makeArray(b(r.stack)).sort(function(e,t){return(parseInt(b(e).css("zIndex"),10)||0)-(parseInt(b(t).css("zIndex"),10)||0)});o.length&&(i=parseInt(b(o[0]).css("zIndex"),10)||0,b(o).each(function(e){b(this).css("zIndex",i+e)}),this.css("zIndex",i+o.length))}}),b.ui.plugin.add("draggable","zIndex",{start:function(e,t,n){var i=b(t.helper),r=n.options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(e,t,n){var i=n.options;i._zIndex&&b(t.helper).css("zIndex",i._zIndex)}}),b.ui.draggable},"function"==typeof define&&define.amd?define(["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],i):i(jQuery)},{}],145:[function(e,t,n){var i;i=function(r){var o=!1;return r(document).on("mouseup",function(){o=!1}),r.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){if(!0===r.data(e.target,t.widgetName+".preventClickEvent"))return r.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,n=1===e.which,i=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&r(e.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===r.data(e.target,this.widgetName+".preventClickEvent")&&r.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),o=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(r.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&r.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,o=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})},"function"==typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],i):i(jQuery)},{}],146:[function(e,t,n){var i,r,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l,u=[],p=!1,d=-1;function f(){p&&l&&(p=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!p){var e=c(f);p=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,p=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||p||c(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],147:[function(e,t,n){"use strict";function i(e,t){this._sdk=e,this._localConf=t,this.sortingProperties={runtime:"batch-runtime-sort",history:"batch-history-sort",job:"batch-job-sort"};var n=this._loadLocal("runtime",{sortBy:"batchId",sortOrder:"asc"}),i=this._loadLocal("history",{sortBy:"startTime",sortOrder:"desc"});this._batches={runtime:{state:"INITIAL",currentPage:1,count:0,data:null,sorting:n},history:{state:"INITIAL",currentPage:1,count:0,data:null,sorting:i},selection:{state:"INITIAL",type:null,data:{}}};var r=this._loadLocal("job",{sortBy:"jobId",sortOrder:"asc"});this._jobs={state:"INITIAL",currentPage:1,count:0,data:[],sorting:r},this.deleteModal={instance:null};var o=this;l.on("delete:cancel",function(){o.deleteModal.instance&&o.deleteModal.instance.dismiss("cancel"),o.deleteModal.instance=null}),l.on("delete:confirm",function(e){o._remove(e)})}var l=e("./events");i.prototype._loadLocal=function(e,t){var n=this._localConf;return n&&n.get(this.sortingProperties[e],t)},i.prototype._saveLocal=function(e,t){var n=this._localConf;n&&n.set(this.sortingProperties[e],t)},i.prototype.openDeleteModal=function(){l.emit("deleteModal:open",this.deleteModal)},i.prototype.onBatchSortChange=function(e,t){this._batches[e].sorting=t,this._saveLocal(e,t),this._load(e)},i.prototype.onJobSortChange=function(e){this._jobs.sorting=e,this._saveLocal("job",e),this._loadFailedJobs(this.getSelection())},i.prototype._remove=function(e){var t=this._batches.selection;e.id=t.data.id;var n=this;return this._sdk.resource("batch").delete(e,function(e){n.deleteModal.instance&&n.deleteModal.instance.close(),n.deleteModal.instance=null,e?l.emit("batch:delete:failed",e):(l.emit("batch:delete:success"),n.load(),t.state="INITIAL",t.type=null,t.data={})})};function r(t){return function(e){e?l.emit("job:retry:failed",e):(l.emit("job:retry:success"),t._load("runtime"),t.loadDetails(t.getSelection().id,"runtime"))}}i.prototype.retryAll=function(){return this._sdk.resource("job-definition").setRetries({id:this._batches.selection.data.batchJobDefinitionId,retries:1},r(this))},i.prototype.retryJob=function(e){return this._sdk.resource("job").setRetries({id:e.id,retries:1},r(this))},i.prototype.deleteJob=function(e){var t=this;return this._sdk.resource("job").delete(e.id,function(e){e?l.emit("job:delete:failed",e):(l.emit("job:delete:success"),t._load("runtime"),t.loadDetails(t.getSelection().id,"runtime"))})},i.prototype.getProgressPercentage=function(e,t){switch(t){case"success":return 100*e.completedJobs/(e.completedJobs+e.remainingJobs);case"failed":return 100*e.failedJobs/(e.completedJobs+e.remainingJobs);case"remaining":return 100*(e.remainingJobs-e.failedJobs)/(e.completedJobs+e.remainingJobs)}},i.prototype.getProgressRoundedPercentage=function(e,t){return Math.round(this.getProgressPercentage(e,t))},i.prototype.getProgressAbsolute=function(e,t){switch(t){case"success":return e.completedJobs;case"failed":return e.failedJobs;case"remaining":return e.remainingJobs-e.failedJobs}},i.prototype.isSelected=function(e){return this._batches.selection.data.id===e.id},i.prototype.getJobs=function(){return this._jobs.data},i.prototype.getStacktraceUrl=function(e){return this._sdk.baseUrl+"/job/"+e.id+"/stacktrace"},i.prototype.getJobCount=function(){return this._jobs.count},i.prototype.getLoadingState=function(e){return"jobs"===e?this._jobs.state:this._batches[e].state},i.prototype.getBatches=function(e){return this._batches[e].data},i.prototype.getSelection=function(){return this._batches.selection.data},i.prototype.getSelectionType=function(){return this._batches.selection.type},i.prototype.getBatchCount=function(e){return this._batches[e].count},i.prototype.getPageSize=function(){return 10},i.prototype.getCurrentPage=function(e){return"jobs"===e?this._jobs.currentPage:this._batches[e].currentPage},i.prototype.getSuspendedState=function(){return this.getSelection().suspended},i.prototype.toggleSuspension=function(){var t=this,n=this.getSelection();return n.state="LOADING",this._sdk.resource("batch").suspended({id:n.id,suspended:!n.suspended},function(e){if(e)throw e;t.loadDetails(n.id,"runtime")})},i.prototype.updatePage=function(e){if("job"===e)return this._loadFailedJobs(this.getSelection());this._load(e)},i.prototype.load=function(){this._load("runtime"),this._load("history")},i.prototype.loadPeriodically=function(e){var t=this;this.load(),this.intervalHandle=window.setInterval(function(){t.load(),"LOADED"===t._batches.selection.state&&"runtime"===t._batches.selection.type&&0===t._jobs.count&&t.loadDetails(t._batches.selection.data.id,"runtime")},e)},i.prototype.stopLoadingPeriodically=function(){window.clearInterval(this.intervalHandle)},i.prototype.loadDetails=function(o,a){var s=this._batches.selection;s.state="LOADING",s.type=a;var c=this,e=function(e,t){function n(e){l.emit("load:details:failed"),s.data=e,s.state="ERROR"}function i(){l.emit("load:details:completed"),s.state="LOADED","runtime"===a&&c._loadFailedJobs(s.data)}if(e||void 0!==t.length&&0===t.length)"runtime"===a?(l.emit("details:switchToHistory"),c.loadDetails(o,"history")):n(e.message);else{s.data=t.length?t[0]:t;var r=s.data.createUserId;r?this._sdk.resource("user").profile({id:r},function(e,t){e?404===e.status?(s.data.user=r,i()):n(e.message):(t.firstName&&t.lastName?s.data.user=t.firstName+" "+t.lastName:s.data.user=r,i())}):i()}}.bind(this);switch(a){case"runtime":this._sdk.resource("batch").statistics({batchId:o},e);break;case"history":this._sdk.resource("history").singleBatch(o,e)}},i.prototype._loadFailedJobs=function(e){var t=e.batchJobDefinitionId,n=this._jobs;n.state="LOADING";var i={jobDefinitionId:t,withException:!0,noRetriesLeft:!0,firstResult:10*(n.currentPage-1),maxResults:10,sorting:[this._jobs.sorting]};this._sdk.resource("job").list(i,function(e,t){e?(n.data=e.message,n.state="ERROR"):(n.data=t,delete i.sorting,this._sdk.resource("job").count(i,function(e,t){n.state=t?"LOADED":"EMPTY",n.count=t,l.emit("load:jobs:completed")}))}.bind(this))},i.prototype._load=function(n){var i=this._batches[n];i.data||(i.state="LOADING");function r(e,t){i.state=t.count?"LOADED":"EMPTY",i.count=t.count,l.emit("load:"+n+":completed")}var o={firstResult:10*(i.currentPage-1),maxResults:10},e=function(e,t){if(i.data=t.items||t,void 0!==t.count)r(0,t);else switch(n){case"runtime":return this._sdk.resource("batch").statisticsCount(o,r);case"history":return this._sdk.resource("history").batchCount(o,r)}}.bind(this);switch(i.sorting&&(o.sortBy=i.sorting.sortBy,o.sortOrder=i.sorting.sortOrder),n){case"runtime":return this._sdk.resource("batch").statistics(o,e);case"history":return o.completed=!0,this._sdk.resource("history").batch(o,e)}},i.prototype.sortingKeys=["id","startTime","endTime","type","user","totalJobs","completedJobs","remainingJobs","batchJobsPerSeed","invocationsPerBatchJob","tenantId","batchJobDefinitionId","monitorJobDefinitionId","seedJobDefinitionId"],t.exports=i},{"./events":150}],148:[function(e,t,n){"use strict";t.exports=function(e,t,n){t.showBreadcrumbs=!0,e.breadcrumbsClear(),e.breadcrumbsAdd({label:n.instant("BATCHES_BREAD_BATCHES")}),e.titleSet(n.instant("BATCHES_TITLE_BATCHES"))}},{}],149:[function(e,t,n){"use strict";function i(){this.cascade=!1,this.disable=!1}var r=e("./events");i.prototype.cancel=function(){r.emit("delete:cancel")},i.prototype.confirm=function(){this.disable=!0,r.emit("delete:confirm",{cascade:this.cascade})},t.exports=i},{"./events":150}],150:[function(e,t,n){"use strict";t.exports=new(e("events"))},{events:2}],151:[function(e,t,n){"use strict";var i=e("../controllers/view-ctrl");t.exports=["$routeProvider",function(e){e.when("/batch",{template:'<div class="batch-wrapper">\n  <div class="row">\n    <div class="col-md-6">\n      <h3>{{ \'BATCHES_PROGRESS_IN\' | translate }}</h3>\n      <div cam-widget-loader\n           loading-state="{{ ctrl.getLoadingState(\'runtime\') }}"\n           text-empty="{{ \'BATCHES_PROGRESS_NO_RUNNING\' | translate }}">\n\n        <table class="cam-table">\n          <thead sortable-table-head\n                 head-columns="runtimeHeadColumns"\n                 on-sort-change="ctrl.onBatchSortChange(\'runtime\', sortObj)"\n                 default-sort="ctrl._batches.runtime.sorting">\n          </thead>\n          <tbody>\n            <tr ng-repeat="batch in ctrl.getBatches(\'runtime\')" ng-class="{selected: ctrl.isSelected(batch)}">\n              <td class="uuid"><a ng-href="#/batch?details={{batch.id}}&type=runtime">{{batch.id}}</a></td>\n              <td class="type">{{batch.type}}</td>\n              <td class="failed">{{ ctrl.getProgressAbsolute(batch, \'failed\') }}</td>\n              <td>\n                <uib-progress>\n                  <div class="processed">{{ ctrl.getProgressRoundedPercentage(batch, \'success\') }}%</div>\n                  <uib-bar value="ctrl.getProgressPercentage(batch, \'success\')"\n                       type="success"\n                       ng-if="ctrl.getProgressAbsolute(batch, \'success\') > 0"\n                       class="jobs jobs-success">\n                  </uib-bar>\n                </uib-progress>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <ul uib-pagination ng-if="ctrl.getBatchCount(\'runtime\') > ctrl.getPageSize()"\n                    class="pagination-sm"\n\n                    page="ctrl.getCurrentPage(\'runtime\')"\n                    ng-model="ctrl._batches.runtime.currentPage"\n                    ng-change="ctrl.updatePage(\'runtime\')"\n\n                    total-items="ctrl.getBatchCount(\'runtime\')"\n                    items-per-page="ctrl.getPageSize()"\n\n                    max-size="7"\n                    boundary-links="true"></ul>\n      </div>\n\n      <h3>{{ \'BATCHES_PROGRESS_END\' | translate }}</h3>\n\n      <div cam-widget-loader\n           loading-state="{{ ctrl.getLoadingState(\'history\') }}"\n           text-empty="{{ \'BATCHES_PROGRESS_NO_FINISHED\' | translate }}">\n\n        <table class="cam-table">\n          <thead sortable-table-head\n                 head-columns="historyHeadColumns"\n                 on-sort-change="ctrl.onBatchSortChange(\'history\', sortObj)"\n                 default-sort="ctrl._batches.history.sorting">\n          </thead>\n          <tbody>\n            <tr ng-repeat="batch in ctrl.getBatches(\'history\')" ng-class="{selected: ctrl.isSelected(batch)}">\n              <td class="uuid"><a ng-href="#/batch?details={{batch.id}}&type=history">{{batch.id}}</a></td>\n              <td>{{batch.type}}</td>\n              <td>{{batch.startTime | camDate}}</td>\n              <td>{{batch.endTime | camDate}}</td>\n            </tr>\n          </tbody>\n        </table>\n        <ul uib-pagination ng-if="ctrl.getBatchCount(\'history\') > ctrl.getPageSize()"\n                    class="pagination-sm"\n\n                    page="ctrl.getCurrentPage(\'history\')"\n                    ng-model="ctrl._batches.history.currentPage"\n                    ng-change="ctrl.updatePage(\'history\')"\n\n                    total-items="ctrl.getBatchCount(\'history\')"\n                    items-per-page="ctrl.getPageSize()"\n\n                    max-size="7"\n                    boundary-links="true"></ul>\n      </div>\n    </div>\n\n    <div class="col-md-6">\n      <div cam-widget-loader\n           loading-state="{{ ctrl.getLoadingState(\'selection\') }}"\n           text-error="{{ctrl.getSelection()}}">\n        \x3c!-- The check below is needed, because you cannot combine ng-if with transclusion in the loader widget. Thanks Angular --\x3e\n        <div ng-if="ctrl.getLoadingState(\'selection\') == \'LOADED\'">\n          <div class="row"\n               ng-init="selection = ctrl.getSelection()">\n            <h3 class="col-xs-8">\n              <span ng-if="ctrl.getSelectionType() == \'history\'">{{ \'BATCHES_PROGRESS_COMPLETED\' | translate }}</span>\n              <span ng-if="ctrl.getSelectionType() == \'runtime\'">{{ \'BATCHES_PROGRESS_IN_PROGRESS\' | translate }}</span> {{ \'BATCHES_PROGRESS_BATCH_DETAILS\' | translate }}\n            </h3>\n\n            <div class="col-xs-4 text-right">\n              <div class="btn-group batch-controls">\n                <a ng-if="ctrl.getSelectionType() == \'runtime\' && !ctrl.getSuspendedState()"\n                   ng-click="ctrl.toggleSuspension()"\n                   class="btn btn-default"\n                   uib-tooltip="{{ \'BATCHES_PROGRESS_TOOLTIP_SUSPEND_BATCH\' | translate }}">\n                  <span class="glyphicon glyphicon-pause"></span>\n                </a>\n\n                <a ng-if="ctrl.getSelectionType() == \'runtime\' && ctrl.getSuspendedState()"\n                   ng-click="ctrl.toggleSuspension()"\n                   class="btn btn-default"\n                   uib-tooltip="{{ \'BATCHES_PROGRESS_TOOLTIP_ACTIVATE_BATCH\' | translate }}">\n                  <span class="glyphicon glyphicon-play"></span>\n                </a>\n\n                <a ng-if="ctrl.getSelectionType() == \'runtime\' && ctrl.getJobs().length > 0"\n                   class="btn btn-default action-button"\n                   ng-click="ctrl.retryAll()"\n                   uib-tooltip="{{ \'BATCHES_PROGRESS_TOOLTIP_INCREMENT_NUMBER\' | translate }}">\n                  <span class="glyphicon glyphicon-repeat"></span>\n                </a>\n\n                <a ng-if="ctrl.getSelectionType() == \'runtime\'"\n                   class="btn btn-danger action-button"\n                   ng-click="ctrl.openDeleteModal()"\n                   uib-tooltip="{{ \'BATCHES_PROGRESS_TOOLTIP_DELETE_BATCH\' | translate }}">\n                  <span class="glyphicon glyphicon-trash"></span>\n                </a>\n              </div>\n            </div>\n          </div>\n\n          <table class="cam-table batch-details">\n            <thead>\n              <th>{{ \'BATCHES_PROGRESS_PROPERTY\' | translate }}</th>\n              <th>{{ \'BATCHES_PROGRESS_VALUE\' | translate }}</th>\n            </thead>\n            <tbody>\n              <tr ng-repeat="key in ctrl.sortingKeys"\n                  ng-if="selection[key] && key !== \'failedJobs\'"\n                  ng-class="key">\n                <td>{{key}}</td>\n                <td ng-if="key !== \'startTime\' && key !== \'endTime\'">{{selection[key]}}\n                  <span ng-if="key === \'remainingJobs\' && selection.failedJobs"\n                        class="failedJobs"\n                        translate="BATCHES_PROGRESS_FAILED"\n                        translate-values="{jobs: selection.failedJobs}"></span>\n                </td>\n                <td ng-if="key === \'startTime\' || key == \'endTime\'">{{selection[key] | camDate}}</td>\n              </tr>\n            </tbody>\n          </table>\n          <div ng-if="ctrl.getSelectionType() == \'runtime\'">\n            <h3>{{ \'BATCHES_PROGRESS_FAIL_JOBS\' | translate }}</h3>\n            <div cam-widget-loader\n                 loading-state="{{ ctrl.getLoadingState(\'jobs\') }}"\n                 text-empty="{{ \'BATCHES_PROGRESS_NO_FAILED_JOBS\' | translate }}"\n                 text-error="{{ ctrl.getJobs() }}">\n            <table class="cam-table">\n              <thead sortable-table-head\n                     head-columns="jobHeadColumns"\n                     on-sort-change="ctrl.onJobSortChange(sortObj)"\n                     default-sort="ctrl._jobs.sorting">\n              </thead>\n              <tbody>\n                <tr ng-repeat="job in ctrl.getJobs()">\n                  <td class="uuid stack-trace">{{job.id}}</td>\n                  <td>\n                    {{job.exceptionMessage.substr(0, 120)}}…\n                    <a ng-href="{{ctrl.getStacktraceUrl(job)}}"\n                       target="_blank"\n                       uib-tooltip="{{ \'BATCHES_PROGRESS_TOOLTIP_OPEN_STACK\' | translate }}">{{ \'BATCHES_PROGRESS_FULL_STACK_TRACE\' | translate }}</a>\n                  </td>\n                  <td>\n                    <div class="btn-group btn-group-sm">\n                      <a class="btn btn-default action-button"\n                         ng-click="ctrl.retryJob(job)"\n                         uib-tooltip="{{ \'BATCHES_PROGRESS_TOOLTIP_INCREMENT_RETRIES\' | translate }}">\n                        <span class="glyphicon glyphicon-repeat"></span>\n                      </a>\n                      <a class="btn btn-default action-button"\n                         ng-click="ctrl.deleteJob(job)"\n                         uib-tooltip="{{ \'BATCHES_PROGRESS_TOOLTIP_DELETE_JOB\' | translate }}">\n                        <span class="glyphicon glyphicon-trash"></span>\n                      </a>\n                    </div>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <ul uib-pagination ng-if="ctrl.getJobCount() > ctrl.getPageSize()"\n                        class="pagination-sm"\n\n                        page="ctrl.getCurrentPage(\'job\')"\n                        ng-model="ctrl._jobs.currentPage"\n                        ng-change="ctrl.updatePage(\'job\')"\n\n                        total-items="ctrl.getJobCount()"\n                        items-per-page="ctrl.getPageSize()"\n\n                        max-size="7"\n                        boundary-links="true"></ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',controller:i,authentication:"required",reloadOnSearch:!1})}]},{"../controllers/view-ctrl":153}],152:[function(e,t,n){"use strict";var i=e("../components/delete");t.exports=["$scope",function(e){e.ctrl=new i}]},{"../components/delete":149}],153:[function(c,e,t){"use strict";var l=c("../components/batch"),u=c("../components/events"),p=c("./modal-ctrl");e.exports=["$scope","page","camAPI","$location","$uibModal","$translate","Notifications","localConf",function(t,e,n,i,r,o,a,s){t.runtimeHeadColumns=[{class:"id",request:"batchId",sortable:!0,content:o.instant("BATCHES_PROGRESS_ID")},{class:"type",request:"",sortable:!1,content:o.instant("BATCHES_PROGRESS_TYPE")},{class:"failed",request:"",sortable:!1,content:o.instant("BATCHES_PROGRESS_FAIL_JOBS")},{class:"",request:"",sortable:!1,content:o.instant("BATCHES_PROGRESS_PROGRESS")}],t.historyHeadColumns=[{class:"id",request:"batchId",sortable:!0,content:o.instant("BATCHES_PROGRESS_ID")},{class:"type",request:"",sortable:!1,content:o.instant("BATCHES_PROGRESS_TYPE")},{class:"start-time",request:"startTime",sortable:!0,content:o.instant("BATCHES_PROGRESS_START_TIME")},{class:"end-time",request:"endTime",sortable:!0,content:o.instant("BATCHES_PROGRESS_END_TIME")}],t.jobHeadColumns=[{class:"id",request:"jobId",sortable:!0,content:o.instant("BATCHES_PROGRESS_ID")},{class:"type",request:"",sortable:!1,content:o.instant("BATCHES_PROGRESS_EXCEPTION")},{class:"action",request:"",sortable:!1,content:o.instant("BATCHES_PROGRESS_ACTIONS")}],t.$on("$destroy",function(){u.removeAllListeners(),t.ctrl.stopLoadingPeriodically()}),t.$watch(function(){return i.search()||{}},function(e){e.details&&e.type&&t.ctrl.loadDetails(e.details,e.type)}),u.on("details:switchToHistory",function(){i.search("type","history")}),u.on("deleteModal:open",function(e){(e.instance=r.open({template:'<div class="modal-header">\n  <h3 class="modal-title">{{ \'BATCHES_DELETE_TITLE\' | translate }}</h3>\n</div>\n<div class="modal-body">\n  {{ \'BATCHES_DELETE_LEGEND\' | translate }}<br />\n  <br />\n  <input type="radio" ng-model="ctrl.cascade" ng-value="false" ng-disabled="ctrl.disable" /> {{ \'BATCHES_DELETE_INPUT_KEEP\' | translate }}<br />\n  <input type="radio" ng-model="ctrl.cascade" ng-value="true" ng-disabled="ctrl.disable" /> {{ \'BATCHES_DELETE_INPUT_DELETE\' | translate }}\n</div>\n<div class="modal-footer">\n    <button class="btn btn-default" ng-click="ctrl.cancel()" ng-disabled="ctrl.disable">{{ \'BATCHES_DELETE_BTN_CANCEL\'  | translate }}</button>\n    <button class="btn btn-primary" ng-click="ctrl.confirm()" ng-disabled="ctrl.disable">{{ \'BATCHES_DELETE_BTN_CONFIRM\' | translate }}</button>\n</div>\n',controller:p})).result.catch(function(){})}),u.on("batch:delete:failed",function(e){a.addError({status:o.instant("BATCHES_DELETE_BATCH_STATUS"),message:o.instant("BATCHES_DELETE_BATCH_FAILED",{message:e.message}),exclusive:!0})}),u.on("job:delete:failed",function(e){a.addError({status:o.instant("BATCHES_DELETE_JOB_STATUS"),message:o.instant("BATCHES_DELETE_JOB_FAILED",{message:e.message}),exclusive:!0})}),u.on("job:retry:failed",function(e){a.addError({status:o.instant("BATCHES_RETRY_JOB_STATUS"),message:o.instant("BATCHES_RETRY_JOB_FAILED",{message:e.message}),exclusive:!0})}),c("../components/breadcrumbs")(e,t.$root,o),t.ctrl=new l(n,s),t.ctrl.loadPeriodically(5e3)}]},{"../components/batch":147,"../components/breadcrumbs":148,"../components/events":150,"./modal-ctrl":152}],154:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular");e("angular-data-depend"),e("camunda-commons-ui/lib/index");var r=e("./config/routes"),o=i.module("cam.cockpit.batch",["cam.commons","dataDepend","ngRoute"]);o.config(r),t.exports=o},{"./config/routes":151,"angular-data-depend":"angular-data-depend","camunda-commons-ui/lib/index":80,"camunda-commons-ui/vendor/angular":127}],155:[function(s,e,t){"use strict";var c=window.jQuery=window.$=s("jquery");s("camunda-commons-ui/vendor/bootstrap");var l=s("camunda-commons-ui/lib"),n=s("camunda-commons-ui/vendor/camunda-bpm-sdk-angular"),i=s("angular-data-depend"),r=s("../../../common/scripts/module"),o=s("camunda-commons-ui/vendor/moment"),a=s("events"),u=s("camunda-commons-ui/vendor/lodash");s("../../../common/scripts/module");var p=s("camunda-commons-ui/vendor/angular");e.exports=function(e){var t=["ng","ngResource","pascalprecht.translate",l.name,s("./repository/main").name,s("./batches/main").name,s("./reports/main").name,s("./directives/main").name,s("./filters/main").name,s("./pages/main").name,s("./resources/main").name,s("./services/main").name,s("./navigation/main").name].concat(e.map(function(e){return e.ngModuleName})),n=p.module("cam.cockpit",t);function a(e){var t=c("base").attr(e);if(!e)throw new Error("Uri base for "+e+" could not be resolved");return t}var i=["$routeProvider","UriProvider","$uibModalProvider","$uibTooltipProvider","$locationProvider","$animateProvider",function(e,t,n,i,r,o){e.otherwise({redirectTo:"/dashboard"}),t.replace(":appName","cockpit"),t.replace("app://",a("href")),t.replace("adminbase://",a("app-root")+"/app/admin/"),t.replace("tasklistbase://",a("app-root")+"/app/tasklist/"),t.replace("cockpit://",a("cockpit-api")),t.replace("admin://",a("admin-api")||a("cockpit-api")+"../admin/"),t.replace("plugin://",a("cockpit-api")+"plugin/"),t.replace("engine://",a("engine-api")),t.replace(":engine",["$window",function(e){var t=e.location.href.match(/\/app\/cockpit\/([\w-]+)(|\/)/);if(t)return t[1];throw new Error("no process engine selected")}]),n.options={animation:!0,backdrop:!0,keyboard:!0},i.options({animation:!0,popupDelay:100,appendToBody:!0}),r.hashPrefix(""),o.classNameFilter(/angular-animate/)}];if((n.provider("configuration",s("./../../../common/scripts/services/cam-configuration")(window.camCockpitConf,"Cockpit")),n.config(i),s("./../../../common/scripts/services/locales")(n,a("app-root"),"cockpit"),n.config(["camDateFormatProvider",function(e){var t={monthName:"MMMM",day:"DD",abbr:"lll",normal:"YYYY-MM-DD[T]HH:mm:ss",long:"LLLL",short:"LL"};for(var n in t)e.setDateFormat(t[n],n)}]),void 0!==window.camCockpitConf&&window.camCockpitConf.polyfills)&&-1<window.camCockpitConf.polyfills.indexOf("placeholder")){var r=window.requirejs,o=c("head base").attr("app-root");r([o+"/app/cockpit/scripts/placeholders.utils.js",o+"/app/cockpit/scripts/placeholders.main.js"],function(){r([o+"/app/cockpit/scripts/placeholders.jquery.js"],function(){})})}p.bootstrap(document.documentElement,[n.name,"cam.cockpit.custom"]),top!==window&&window.parent.postMessage({type:"loadamd"},"*")},e.exports.exposePackages=function(e){e.angular=p,e.jquery=c,e["camunda-commons-ui"]=l,e["camunda-bpm-sdk-js"]=n,e["angular-data-depend"]=i,e.moment=o,e.events=a,e["cam-common"]=r,e.lodash=u}},{"../../../common/scripts/module":254,"./../../../common/scripts/services/cam-configuration":268,"./../../../common/scripts/services/locales":270,"./batches/main":154,"./directives/main":163,"./filters/main":179,"./navigation/main":182,"./pages/main":187,"./reports/main":195,"./repository/main":205,"./resources/main":220,"./services/main":226,"angular-data-depend":"angular-data-depend","camunda-commons-ui/lib":80,"camunda-commons-ui/vendor/angular":127,"camunda-commons-ui/vendor/bootstrap":128,"camunda-commons-ui/vendor/camunda-bpm-sdk-angular":130,"camunda-commons-ui/vendor/lodash":132,"camunda-commons-ui/vendor/moment":133,events:2,jquery:"jquery"}],156:[function(e,t,n){"use strict";var p=e("camunda-commons-ui/vendor/angular");var d={"start-event":"start-event-none","error-start-event":"start-event-error","cancel-end-event":"end-event-cancel","error-end-event":"end-event-error","none-end-event":"end-event-none","parallel-gateway":"gateway-parallel","exclusive-gateway":"gateway-xor","intermediate-compensation-throw-event":"intermediate-event-throw-compensation"},i=["$compile","$filter",function(l,u){return{restrict:"EAC",scope:{node:"=activityInstanceTree",onElementClick:"&",selection:"=",quickFilters:"=",orderChildrenBy:"&"},link:function(r,e){r.symbolIconName=function(e){var t=function(e){return(e||"").replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}(e);return"icon-"+(t=d[t]?d[t]:t)};var i=e,o="node.selected",a="node.opened",n=r.orderChildrenBy();function s(e,t){var n=r.node,i=e.name;n&&(i!==a&&i!==o||n.id===t.parentActivityInstanceId&&(n.isOpen=!0,n.parentActivityInstanceId&&n.id!==n.parentActivityInstanceId&&c(a,n)))}function c(e,t){var n=t.id,i=t.parentActivityInstanceId;r.$emit(e,{id:n,parentActivityInstanceId:i})}r.$watch("node",function(e){if(e&&!1!==e.$loaded){var t=(e.childActivityInstances||[]).concat(e.childTransitionInstances||[]);n&&(t=u("orderBy")(t,n)),e.children=t,function(n){!function(e){e('\x3c!-- # CE - camunda-cockpit-ui/client/scripts/directives/activity-instance-tree.html --\x3e\n<div class="tree-node" >\n\n  <div id="{{ node.id }}"\n       ng-class="{ \'state-running\': !node.endTime, \'state-completed\' : node.endTime && !node.canceled, \'state-canceled\': node.endTime && node.canceled }"\n       class="tree-node-group">\n\n    <span class="tree-node-label"\n          ng-class="{ \'selected\' : node.isSelected, \'has-children\': node.children.length }">\n\n      <button class="btn btn-link btn-control-link btn-toggle"\n              ng-if="node.children.length"\n              ng-click="toggleOpen()">\n        <span class="glyphicon"\n           ng-class="{ \'glyphicon-menu-right\' : !node.isOpen, \'glyphicon-menu-down\' : node.isOpen }"></span>\n      </button>\n\n      <button class="btn btn-link btn-control-link btn-control remove"\n              ng-click="deselect($event)">\n        <span class="glyphicon glyphicon-remove"></span>\n      </button>\n\n      <span class="{{ symbolIconName(node.activityType) }}"\n            uib-tooltip="{{ node.activityType }}"></span>\n\n      <a ng-click="select($event)"\n         tooltip-placement="right"\n         uib-tooltip="{{ node.name }}">\n        {{ node.name }}\n      </a>\n\n    </span>\n\n    \x3c!-- running --\x3e\n    <span ng-if="!node.endTime"\n          class="tree-node-addon activity-instance-running"\n          uib-tooltip="{{ \'ACTIVITY_INSTANCE_TOOLTIP_RUNNING\' | translate }}"\n          tooltip-placement="right">\n      <span class="glyphicon glyphicon-adjust"></span>\n    </span>\n\n    \x3c!-- completed --\x3e\n    <span ng-if="node.endTime && !node.canceled"\n          class="tree-node-addon activity-instance-completed"\n          uib-tooltip="{{ \'ACTIVITY_INSTANCE_TOOLTIP_COMPLETED\' | translate }}"\n          tooltip-placement="right">\n      <span class="glyphicon glyphicon-ok-circle"></span>\n    </span>\n\n    \x3c!-- canceled --\x3e\n    <span ng-if="node.endTime && node.canceled"\n          class="tree-node-addon activity-instance-canceled"\n          uib-tooltip="{{ \'ACTIVITY_INSTANCE_TOOLTIP_CANCELED\' | translate }}"\n          tooltip-placement="right">\n      <span class="glyphicon glyphicon-ban-circle"></span>\n    </span>\n\n  </div>\n\n  <ul class="list-unstyled" ng-show="node.isOpen" ng-if="node.children.length">\n    <li ng-repeat="child in node.children">\n      <div activity-instance-tree="child"\n           selection="selection"\n           on-element-click="propogateSelection(id, activityId, $event)"\n           order-children-by="orderChildrenBy()">\n      </div>\n    </li>\n  </ul>\n</div>\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/directives/activity-instance-tree.html --\x3e\n')}(function(e){n.isOpen=!n.endTime;var t=p.element(e);l(t)(r),i.replaceWith(t),i=t})}(e)}}),r.$on(a,function(e,t){s(e,t)}),r.$on(o,function(e,t){s(e,t)}),r.$watch("selection.activityInstanceIds",function(e,t){var n=r.node;n&&(t&&-1!=t.indexOf(n.id)&&(n.isSelected=!1),e&&-1!=e.indexOf(n.id)&&(n.isSelected=!0,n.parentActivityInstanceId&&c(o,n)))}),r.deselect=function(e){e.ctrlKey=!0,r.select(e)},r.select=function(e){var t=r.node;e.stopPropagation(),r.$emit("instance-tree-selection-change"),r.onElementClick({id:t.id,activityId:t.activityId||t.targetActivityId,$event:e})},r.propogateSelection=function(e,t,n){r.onElementClick({id:e,activityId:t,$event:n})},r.toggleOpen=function(){var e=r.node;e.isOpen=!e.isOpen}}}}];t.exports=i},{"camunda-commons-ui/vendor/angular":127}],157:[function(e,t,n){"use strict";var i=["$scope",function(e){e.control={}}];t.exports=function(){return{restrict:"EAC",scope:{decisionTable:"=",control:"=?",table:"@",onLoad:"&"},controller:i,template:'<div cam-widget-dmn-viewer\n  xml="decisionTable"\n  table="{{table}}"\n  control="control"\n  on-load="onLoad()"\n  style="height: 100%; margin: 10px; overflow-y: auto;">\n</div>\n',link:function(){}}}},{}],158:[function(e,t,n){"use strict";t.exports=["Loaders",function(e){return{restrict:"A",template:'<div cam-widget-loader loading-state="{{loadingStatus}}"></div>\n',scope:!0,controller:["$scope",function(t){t.loadingStatus="INITIAL",e.addStatusListener(t,function(e){t.loadingStatus=e})}]}}]},{}],159:[function(e,t,n){"use strict";t.exports=["$interpolate","$compile",function(i,r){return{restrict:"A",priority:9999,terminal:!0,link:function(e,t,n){t.attr("name",i(n.camDynamicName)(e)),r(t,null,9999)(e)}}}]},{}],160:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",link:function(e,t,n){n.focus&&t.focus()}}}},{}],161:[function(e,t,n){"use strict";var x=e("angular"),i=["$http","$q","$uibModal","search","Uri","Views","$translate","localConf",function(y,b,e,t,_,s,c,w){return{restrict:"E",scope:{processData:"=",processDefinition:"=",processInstance:"=",incidentsContext:"@"},template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/directives/incidents-tab.html --\x3e\n<div cam-widget-loader\n     loading-state="{{ loadingState }}"\n     text-empty="{{ \'PLUGIN_INCIDENTS_TAB_NO_INCIDENTS\' | translate }}">\n\n\n<table class="incidents-tab cam-table">\n\n  <thead sortable-table-head\n         head-columns="headColumns"\n         on-sort-change="onSortChange(query, pages, sortObj)"\n         default-sort="sortObj">\n  </thead>\n\n  <tbody>\n    <tr ng-repeat="incident in incidents">\n      <td class="state"\n          ng-if="incidentsContext === \'history\'">\n          {{getIncidentState(incident)}}\n      </td>\n      <td class="message"\n          ng-if="incident.incidentType === \'failedJob\'">\n        \x3c!--\n          it would be great to be able to copy the stacktrace from here\n          using the clipboard widget but it comes from an API endpoint...\n        --\x3e\n        <a ng-if="incident.rootCauseIncidentMessage"\n           href="{{ getJobStacktraceUrl(incident) }}"\n           target="_blank"\n           uib-tooltip="{{\'PLUGIN_INCIDENTS_TAB_TOOLTIP_STACKTRACE\'|translate}}"\n           tooltip-placement="top"\n           class="auto-cutoff">\n          {{ incident.rootCauseIncidentMessage }}\n        </a>\n        <a ng-if="!incident.rootCauseIncidentMessage"\n           href="{{ getJobStacktraceUrl(incident) }}"\n           target="_blank"\n           uib-tooltip="{{\'PLUGIN_INCIDENTS_TAB_TOOLTIP_STACKTRACE\'|translate}}"\n           tooltip-placement="top">\n          <i>Message is null.</i>\n        </a>\n      </td>\n      <td class="message"\n          uib-tooltip="{{\'PLUGIN_INCIDENTS_TAB_TOOLTIP_STACKTRACE\'|translate}}"\n          tooltip-placement="top"\n          ng-if="incident.incidentType === \'failedExternalTask\'">\n        <span external-task-error-message-link="incident.rootCauseIncidentConfiguration">\n          <span ng-show="incident.rootCauseIncidentMessage">\n            {{ incident.rootCauseIncidentMessage }}\n          </span>\n          <span ng-show="!incident.rootCauseIncidentMessage">\n            <i>Message is null.</i>\n          </span>\n        </span>\n      </td>\n      <td class="message"\n          ng-if="[\'failedExternalTask\', \'failedJob\'].indexOf(incident.incidentType) === -1 && incident.rootCauseIncidentMessage">\n        <div class="auto-cutoff"\n             cam-widget-clipboard="incident.rootCauseIncidentMessage">\n          {{ incident.rootCauseIncidentMessage }}\n        </div>\n      </td>\n      <td class="message"\n          ng-if="[\'failedExternalTask\', \'failedJob\'].indexOf(incident.incidentType) === -1 && !incident.rootCauseIncidentMessage">\n        <i>Message is null.</i>\n      </td>\n\n      <td ng-if="processDefinition && incidentsContext === \'history\'"\n          class="process-instance"\n          cam-widget-clipboard="incident.processInstanceId" >\n        <a href="#/process-instance/{{ incident.processInstanceId }}/history"> {{incident.processInstanceId}} </a>\n      </td>\n\n      <td ng-if="processDefinition && incidentsContext !== \'history\'"\n          class="process-instance"\n          cam-widget-clipboard="incident.processInstanceId" >\n        <a href="#/process-instance/{{ incident.processInstanceId }}/runtime"> {{incident.processInstanceId}} </a>\n      </td>\n\n      <td  ng-if="incidentsContext !== \'history\'" class="timestamp">\n        {{ incident.incidentTimestamp | camDate }}\n      </td>\n      <td ng-if="incidentsContext === \'history\'" class="create-time">\n        {{ incident.createTime | camDate }}\n      </td>\n      <td ng-if="incidentsContext === \'history\'" class="end-time">\n        {{ incident.endTime | camDate }}\n      </td>\n      <td class="activity">\n        <span ng-show="incident.linkable && processDefinition"\n              cam-select-activity="incident.activityId"\n              cam-widget-clipboard="incident.activityId">\n          <a ng-href="#/process-definition/{{ processDefinition.id }}/runtime?activityIds={{ incident.activityId }}&amp;tab=incidents-tab">\n            {{ incident.activityName }}\n          </a>\n        </span>\n        <span ng-show="incident.linkable && processInstance"\n              cam-widget-clipboard="incident.activityId">\n          <a ng-href="#/process-instance/{{ processInstance.id }}/runtime?activityIds={{ incident.activityId }}&amp;tab=incidents-tab">\n            {{ incident.activityName }}\n          </a>\n        </span>\n        <span ng-hide="incident.linkable">\n          {{ incident.activityName }}\n        </span>\n      </td>\n\n      <td class="cause instance-id">\n        <span ng-show="incident.causeIncidentProcessInstanceId !== incident.processInstanceId"\n              cam-widget-clipboard="incident.causeIncidentProcessInstanceId">\n          <a ng-href="#/process-instance/{{incident.causeIncidentProcessInstanceId}}/{{ incidentsContext || \'runtime\' }}?activityIds={{ incident.causeIncidentActivityId }}&amp;tab=incidents-tab">\n            {{ incident.causeIncidentProcessInstanceId }}\n          </a>\n        </span>\n      </td>\n\n      <td class="cause-root instance-id">\n        <span ng-show="incident.rootCauseIncidentProcessInstanceId !== incident.processInstanceId"\n              cam-widget-clipboard="incident.rootCauseIncidentProcessInstanceId">\n          <a ng-href="#/process-instance/{{incident.rootCauseIncidentProcessInstanceId}}/{{ incidentsContext || \'runtime\' }}?activityIds={{ incident.rootCauseIncidentActivityId }}&amp;tab=incidents-tab">\n            {{ incident.rootCauseIncidentProcessInstanceId }}\n          </a>\n        </span>\n      </td>\n\n      <td class="type">\n        {{ getIncidentType(incident) }}\n      </td>\n\n      <td class="action">\n        <span ng-if="incidentHasActions(incident)"\n              ng-repeat="actionProvider in incidentActions">\n          <view provider="actionProvider"\n            vars="incidentVars" />\n        </span>\n      </td>\n    </tr>\n  </tbody>\n</table>\n<div cam-pagination="onPaginationChange(pages)" total="pages.total"> </div>\n</div>\n\x3c!-- / CE - camunda-bpm-webapp/webapp/src/main/resources-plugin/base/app/views/processInstance/incidents-tab.html --\x3e\n',link:function(m){var e=[{class:"state",request:"incidentState",sortable:!0,content:c.instant("PLUGIN_INCIDENTS_TAB_STATE")},{class:"message",request:"incidentMessage",sortable:!0,content:c.instant("PLUGIN_INCIDENTS_TAB_MESSAGE")},{class:"process-instance",request:"processInstanceId",sortable:!1,content:c.instant("PLUGIN_INCIDENTS_TAB_MESSAGE_PROCESS_INSTANCE")},{class:"create-time",request:"createTime",sortable:!0,content:c.instant("PLUGIN_INCIDENTS_TAB_CREATE_TIME")},{class:"end-time",request:"endTime",sortable:!0,content:c.instant("PLUGIN_INCIDENTS_TAB_END_TIME")},{class:"timestamp",request:"incidentTimestamp",sortable:!0,content:c.instant("PLUGIN_INCIDENTS_TAB_TIMESTAMP")},{class:"activity",request:"activityId",sortable:!0,content:c.instant("PLUGIN_INCIDENTS_TAB_ACTIVITY")},{class:"cause instance-id uuid",request:"causeIncidentProcessInstanceId",sortable:!1,content:c.instant("PLUGIN_INCIDENTS_TAB_CAUSE_INSTANCE_ID")},{class:"cause-root instance-id uuid",request:"rootCauseIncidentProcessInstanceId",sortable:!1,content:c.instant("PLUGIN_INCIDENTS_TAB_CAUSE_ROOT_INSTANCE_ID")},{class:"type",request:"incidentType",sortable:!0,content:c.instant("PLUGIN_INCIDENTS_TAB_TYPE")},{class:"action",request:"",sortable:!1,content:c.instant("PLUGIN_INCIDENTS_TAB_ACTION")}];m.onSortChange=a;var t,n=["activity","cause instance-id uuid","cause-root instance-id uuid","type","action"],i=m.processDefinition&&"process-instance";n="history"===m.incidentsContext?(m.localConfKey="sortHistInci",["state","message",i,"create-time","end-time"].concat(n)):(m.localConfKey="sortInci",["message",i,"timestamp"].concat(n)),m.headColumns=e.filter(function(e){return-1!==n.indexOf(e.class)}),m.sortObj=(t={sortBy:"incidentType",sortOrder:"asc"},w.get(m.localConfKey,t));var r=m.processData.newChild(m),o=m.pages=x.copy({size:50,total:0,current:1}),v="plugin://base/:engine/incident/",g="plugin://history/:engine/incident/";function a(e,t,n){if(m.sortObj=n||m.sortObj,!m.filter||!m.bpmnElements||!m.activityIdToInstancesMap)return b.when(null);t&&(m.pages=t);var i=m.filter,r=m.bpmnElements,o=m.activityIdToInstancesMap,a=x.copy(i);delete a.page,delete a.activityInstanceIds,delete a.scrollToBpmnElement;var s,c=m.pages.current,l=m.pages.size,u=(c-1)*l,p=e||{};s=m.processDefinition?{processDefinitionIdIn:[m.processDefinition.id]}:{processInstanceIdIn:[m.processInstance.id]},n&&(s.sortBy=m.sortObj.sortBy,s.sortOrder=m.sortObj.sortOrder,function(e){w.set(m.localConfKey,e)}(n));var d={firstResult:u,maxResults:l},f=x.extend({},a,s,p);f.activityIdIn=f.activityIds,delete f.activityIds;var h="history"===m.incidentsContext?g:v;return y.post(_.appUri(h+"count"),f).then(function(e){m.pages.total=e.data.count}).catch(x.noop),m.loadingState="LOADING",y.post(_.appUri(h),f,{params:d}).then(function(e){var t=e.data;x.forEach(t,function(e){var t=e.activityId,n=r[t];e.activityName=n&&(n.name||n.id)||t,e.linkable=r[t]&&o[t]&&0<o[t].length}),m.incidents=t,m.loadingState=t.length?"LOADED":"EMPTY"}).catch(x.noop)}m.incidents=null,m.onPaginationChange=function(e){m.pages.current=e.current,a()},m.getIncidentState=function(e){var t="open";return e.resolved?t="resolved":e.deleted&&(t="deleted"),t},r.observe(["filter","bpmnElements","activityIdToInstancesMap"],function(e,t,n){o.current=e.page||1,m.filter=e,m.bpmnElements=t,m.activityIdToInstancesMap=n,a()}),m.getIncidentType=function(e){return"failedJob"===e.incidentType?"Failed Job":e.incidentType},m.getJobStacktraceUrl=function(e){return _.appUri("engine://engine/:engine/job/"+e.rootCauseIncidentConfiguration+"/stacktrace")},m.incidentHasActions=function(e){return"history"!==m.incidentsContext||"history"===m.incidentsContext&&"failedJob"===e.incidentType&&!e.deleted&&!e.resolved},m.incidentVars={read:["incident","processData","filter"]},m.incidentActions=s.getProviders({component:"cockpit.incident.action"})}}}];t.exports=i},{angular:"angular"}],162:[function(e,t,n){"use strict";t.exports=["$parse","$rootScope",function(c,l){return{restrict:"A",link:function(t,n,e){var i;e.$observe("isSidebarCollapsed",function(e){i=c(e),s()});var r=l.$on("restore",s),o=l.$on("maximize",s),a=l.$on("resize",s);function s(){var e=n.hasClass("collapsed");i&&"function"==typeof i&&i(t,{collapsed:e})}t.$on("$destroy",function(){r(),o(),a()})}}}]},{}],163:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./../../../../common/scripts/directives/breadcrumbs"),o=e("./numeric"),a=e("./../../../../common/scripts/directives/date"),s=e("./processDiagram"),c=e("./decisionTable"),l=e("./processDiagramPreview"),u=e("./activityInstanceTree"),p=e("./sidebarContainer"),d=e("./stateCircle"),f=e("./variable"),h=e("./focus"),m=e("./viewPills"),v=e("./pie-chart"),g=e("./selectActivity"),y=e("./selectActivityInstance"),b=e("./processVariable"),_=e("./dynamicName"),w=e("./quickFilter"),x=e("./diagramStatisticsLoader"),E=e("./time-to-live.js"),C=e("../../../../common/scripts/module"),k=e("./isSidebarCollapsed"),S=e("./incidentsTab"),T=e("./sortableTableHead"),O=i.module("cam.cockpit.directives",[C.name]);O.directive("camBreadcrumbsPanel",r),O.directive("numeric",o),O.directive("date",a),O.directive("processDiagram",s),O.directive("decisionTable",c),O.directive("processDiagramPreview",l),O.directive("activityInstanceTree",u),O.directive("ctnCollapsableParent",p),O.directive("stateCircle",d),O.directive("variable",f),O.directive("focus",h),O.directive("viewPills",m),O.directive("camSelectActivity",g),O.directive("camPieChart",v),O.directive("camSelectActivityInstance",y),O.directive("processVariable",b),O.directive("camDynamicName",_),O.directive("camQuickFilter",w),O.directive("diagramStatisticsLoader",x),O.directive("timeToLive",E),O.directive("isSidebarCollapsed",k),O.directive("sortableTableHead",T),O.directive("incidentsTab",S),t.exports=O},{"../../../../common/scripts/module":254,"./../../../../common/scripts/directives/breadcrumbs":229,"./../../../../common/scripts/directives/date":230,"./activityInstanceTree":156,"./decisionTable":157,"./diagramStatisticsLoader":158,"./dynamicName":159,"./focus":160,"./incidentsTab":161,"./isSidebarCollapsed":162,"./numeric":164,"./pie-chart":165,"./processDiagram":166,"./processDiagramPreview":167,"./processVariable":168,"./quickFilter":169,"./selectActivity":170,"./selectActivityInstance":171,"./sidebarContainer":172,"./sortableTableHead":173,"./stateCircle":174,"./time-to-live.js":175,"./variable":176,"./viewPills":177,"camunda-commons-ui/vendor/angular":127}],164:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",require:"ngModel",link:function(e,n,t,i){var r=t.integer?/^-?[\d]+$/:/^(0|(-?(((0|[1-9]\d*)\.\d+)|([1-9]\d*))))([eE][-+]?[0-9]+)?$/;i.$parsers.push(function(e){var t=r.test(e);return i.$setValidity("numeric",t),t?parseFloat(e,10):e}),i.$formatters.push(function(e){if(null!=e){var t=r.test(e);return i.$setValidity("numeric",t),t?parseFloat(e,10):(i.$pristine=!1,i.$dirty=!0,n.addClass("ng-dirty"),e)}})}}}},{}],165:[function(e,t,n){"use strict";var u=e("lodash").throttle;function p(e,t){this.canvas=e.canvas||document.createElement("canvas"),this.resize(e.width||this.canvas.width,e.height||this.canvas.height),this.rulersColor=e.rulersColor||"#666",this.lineWidth=e.lineWidth||1,this.missingData=[{color:"#959595",label:t.instant("PIE_CHART_NO_DATA"),value:1}],this.setData(this.missingData)}var i=p.prototype;i.resize=function(e,t){return this.canvas.width=e,this.canvas.height=t,this.ctx=this.canvas.getContext("2d"),this.offCanvas=this.offCanvas||document.createElement("canvas"),this.offCanvas.width=e,this.offCanvas.height=t,this.offCtx=this.offCanvas.getContext("2d"),this.x=.5*this.canvas.width,this.y=.5*this.canvas.height,this.radius=Math.max(20,Math.min(this.x-15,this.y-15)),this},i.setData=function(e){return this.data=e,this.data.length&&(this.data[0].value||0===this.data[0].value)||(this.data=this.missingData),this.total=this.data.reduce(function(e,t){return e+t.value},0),this.draw()},i.punchPie=function(e){e.strokeStyle=e.fillStyle="#fff",e.moveTo(this.x,this.y),e.beginPath(),e.arc(this.x,this.y,.65*this.radius,0,2*Math.PI),e.closePath(),e.stroke(),e.fill()},i.hoveredSlice=function(e,t){var n=this.offCtx;n.font=this.fontSize+"px sans-serif";var i=this.data||this.missingData,r=this.x,o=this.y,a=this.radius,s=this.total,c=Math.PI,l=2*Math.PI;if(this.punchPie(n),n.isPointInPath(e,t))return!1;for(var u in i){var p=i[u],d=p.value/s*l;if(n.beginPath(),n.moveTo(r,o),n.arc(r,o,a,c,c+d),n.closePath(),n.stroke(),n.isPointInPath(e,t))return p;c+=d}return!1},i.draw=function(){var n=this.ctx,e=this.data||this.missingData;n.clearRect(0,0,n.canvas.width,n.canvas.height);var i=this.x,r=this.y,o=this.radius,a=this.total,s=Math.PI,c=2*Math.PI;return e.forEach(function(e){var t=e.value/a*c;n.fillStyle=e.color,n.strokeStyle="#fff",n.beginPath(),n.moveTo(i,r),n.arc(i,r,o,s,s+t),n.closePath(),n.fill(),n.stroke(),s+=t}),this.punchPie(n),this},t.exports=["$location","$window","$translate",function(s,c,l){return{restrict:"A",transclude:!0,scope:{values:"=",placeholder:"@"},link:function(i,e){var t=e[0].querySelector(".canvas-holder")||e[0],r=new p({canvas:e[0].querySelector("canvas"),lineColors:i.colors},l);function o(e){var t=r.canvas.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function n(){var e=Math.min(Math.max(.75*t.clientWidth,150),220);r.resize(t.clientWidth,e).draw()}r.canvas.addEventListener("mousemove",function(t){i.$apply(function(){var e=o(t);i.hoveredSlice=r.hoveredSlice(e.x,e.y),r.canvas.style.cursor=i.hoveredSlice&&i.hoveredSlice.url?"pointer":"default"})}),r.canvas.addEventListener("click",function(n){i.$apply(function(){var e=o(n),t=r.hoveredSlice(e.x,e.y);t.url&&s.url(t.url)})}),i.$watch("values",function(){i.values&&i.values.length&&r.setData(i.values)}),n();var a=u(n,100);c.addEventListener("resize",a),i.$on("$destroy",function(){c.removeEventListener("resize",a)})},template:'<div class="pie-chart"><div class="canvas-holder"><canvas width="150" height="150"></canvas></div><h4 class="legend-holder text-center" ng-if="values[0].label !== \''+l.instant("PIE_CHART_NO_DATA")+'\'"><span ng-if="hoveredSlice.value" ng-style="{color: hoveredSlice.color}">{{ hoveredSlice.value | abbreviateNumber }}: {{ hoveredSlice.label }}</span><span ng-if="!hoveredSlice.value">{{ placeholder }}</span></h4></div>'}}]},{lodash:"lodash"}],166:[function(e,t,n){"use strict";var d=e("camunda-commons-ui/vendor/angular"),i=["$scope","$compile","$injector","Views","configuration",function(r,o,t,n,e){r.bpmnJsConf=e.getBpmnJs(),r.vars={read:["processData","bpmnElement","pageData","viewer"]};var i=r.diagramProviderComponent?n.getProviders({component:r.diagramProviderComponent}):[];r.overlayProviders=n.getProviders({component:r.overlayProviderComponent});var a,s,c='<div class="bpmn-overlay"><div view ng-repeat="overlayProvider in overlayProviders" provider="overlayProvider" vars="vars"></div></div>';r.$on("$destroy",function(){r.processDiagram=null,r.overlayProviders=null;var n=r.control,e=n.getViewer(),i=e.get("canvas");e.get("elementRegistry").forEach(function(e){var t=e.businessObject;t.$instanceOf("bpmn:FlowNode")&&(i.removeMarker(t.id,"selectable"),n.clearHighlight(t.id))})}),r.control={},r.$on("resize",function(){r.control.refreshZoom&&r.control.refreshZoom()}),r.$watch("processDiagram",function(e){e&&!1!==e.$loaded&&(a=e.bpmnElements,r.diagramData=e.bpmnDefinition)}),r.diagramLoaded=!1,r.diagramEnabled=!1,r.$watch("collapsed",function(e){r.diagramEnabled=r.diagramLoaded||!e}),r.onLoad=function(){r.diagramLoaded=!0,r.viewer=r.control.getViewer(),function(e){d.forEach(e,u)}(r.processDiagram.bpmnElements),r.actionProviderComponent&&function(){r.actionProviders=n.getProviders({component:r.actionProviderComponent});var e=d.element('<div class="action"><div view ng-repeat="actionProvider in actionProviders" provider="actionProvider" vars="vars"></div></div>'),t=r.$new();o(e)(t),r.control.addAction({html:e})}(),p(s),i.forEach(function(e){t.invoke(e.overlay,null,{control:r.control,processData:r.processData,processDiagram:r.processDiagram,pageData:r.pageData,$scope:r})})};function l(e){return e.isSelectable||r.selectAll&&e.$instanceOf("bpmn:FlowNode")}function u(e){var t=r.control.getElement(e.id);if(t&&r.overlayProviders&&r.overlayProviders.length){var n=r.$new();n.bpmnElement=e;var i=d.element(c);i.css({width:t.width,height:t.height}),o(i)(n);try{r.control.createBadge(e.id,{html:i,position:{top:0,left:0}})}catch(e){}}}function p(e){r.control.isLoaded&&r.control.isLoaded()&&(s&&d.forEach(s,function(e){-1!==e.indexOf("#multiInstanceBody")&&e.indexOf("#multiInstanceBody")===e.length-18&&(e=e.substr(0,e.length-18)),a[e]&&r.control.clearHighlight(e)}),e&&d.forEach(e,function(e){-1!==e.indexOf("#multiInstanceBody")&&e.indexOf("#multiInstanceBody")===e.length-18&&(e=e.substr(0,e.length-18)),a[e]&&r.control.highlight(e)})),r.$root.$emit("instance-diagram-selection-change",e),s=e}r.onClick=function(e,t){!function(e){r.$$phase?e():r.$apply(e)}(function(){a[e.businessObject.id]&&l(a[e.businessObject.id])?r.onElementClick({id:e.businessObject.id,$event:t}):r.onElementClick({id:null,$event:t})})},r.onMouseEnter=function(e){a[e.businessObject.id]&&l(a[e.businessObject.id])&&(r.control.getViewer().get("canvas").addMarker(e.businessObject.id,"selectable"),r.control.highlight(e.businessObject.id))},r.onMouseLeave=function(e){!a[e.businessObject.id]||!l(a[e.businessObject.id])||s&&-1!==s.indexOf(e.businessObject.id)||s&&-1!==s.indexOf(e.businessObject.id+"#multiInstanceBody")||(r.control.getViewer().get("canvas").removeMarker(e.businessObject.id,"selectable"),r.control.clearHighlight(e.businessObject.id))},r.$watch("selection.activityIds",function(e){p(e)}),r.$watch("selection.scrollToBpmnElement",function(e){e&&function(e){r.control.isLoaded&&r.control.isLoaded()&&e&&function(e){a[e]&&r.control.scrollToElement(e)}(e)}(e)})}];t.exports=function(){return{restrict:"EAC",scope:{processDiagram:"=",key:"@",processDiagramOverlay:"=",onElementClick:"&",selection:"=",processData:"=",pageData:"=",overlayProviderComponent:"@",actionProviderComponent:"@",diagramProviderComponent:"@",selectAll:"&",collapsed:"="},controller:i,template:"<div ng-if=\"diagramEnabled\" style=\"position: relative; height: 100%\">\n  <div diagram-statistics-loader>\n  </div>\n  <div cam-widget-bpmn-viewer\n    diagram-data='diagramData'\n    key='{{key}}'\n    control='control'\n    on-load='onLoad()'\n    on-click='onClick(element, $event)'\n    on-mouse-enter='onMouseEnter(element, $event)'\n    on-mouse-leave='onMouseLeave(element, $event)'\n    bpmn-js-conf=\"bpmnJsConf\"\n    style='height: 100%'>\n  </div>\n</div>\n<div ng-if=\"!diagramEnabled\" class=\"placeholder-container\">\n  <div class=\"placeholder-content\">\n    <span class=\"glyphicon glyphicon-refresh animate-spin\"></span>\n    <span class=\"loading-text\">Loading diagram</span>\n  </div>\n</div>\n",link:function(e){e.selectAll=e.$eval(e.selectAll)}}}},{"camunda-commons-ui/vendor/angular":127}],167:[function(e,t,n){"use strict";var a=e("camunda-commons-ui/vendor/angular");t.exports=["ProcessDefinitionResource","debounce",function(r,o){return{restrict:"EAC",template:"<span ng-hide=\"diagramXML\">\n  <i class=\"glyphicon glyphicon-loading\"></i> {{ 'PROGRESS_DIAGRAM_LOADING' | translate}}\n</span>\n<div ng-show=\"diagramXML\">\n  <div cam-widget-bpmn-viewer\n    diagram-data='diagramXML'\n    control='control'\n    disable-navigation='true'\n    bpmn-js-conf=\"bpmnJsConf\">\n  </div>\n</div>\n",controller:["$scope","configuration",function(e,t){e.bpmnJsConf=t.getBpmnJs(),e.control={}}],link:function(n,i,e){n.$watch(e.processDefinitionId,function(e){if(e){var t="processDiagram_"+e.replace(/[.|:]/g,"_");i.attr("id",t),r.getBpmn20Xml({id:e}).$promise.then(function(e){n.diagramXML=e.bpmn20Xml,i.find("[cam-widget-bpmn-viewer]").css({width:parseInt(i.parent().width(),10),height:i.parent().height()});var t=o(function(){n.control.resetZoom(),n.control.resetZoom()},500);a.element(window).on("resize",function(){i.find("[cam-widget-bpmn-viewer]").css({width:parseInt(i.parent().width(),10),height:i.parent().height()}),t()})}).catch(a.noop)}})}}}]},{"camunda-commons-ui/vendor/angular":127}],168:[function(e,t,n){"use strict";t.exports=["Variables",function(r){return{require:"ngModel",link:function(e,t,n,i){i.$parsers.push(function(e){var t;try{t=r.parse(e)}catch(e){}return i.$setValidity("processVariableFilter",!!t),t}),i.$formatters.push(r.toString)}}}]},{}],169:[function(e,t,n){"use strict";var o=e("jquery");t.exports=function(){return{scope:{holderSelector:"@",labelSelector:"@",itemSelector:"@"},restrict:"A",template:'\x3c!-- # CE - src/main/webapp/app/cockpit/directives/quick-filter.html --\x3e\n<form name="quickFilters"\n      class="quick-filters">\n  <div class="quick-filter name-filter"\n       ng-if="showNameFilter">\n    <label class="input-group">\n      <span class="input-group-addon"\n            uib-tooltip="{{ \'QUICK_FILTER_TOOLTIP_CLICK_HERE\' | translate }}">\n        <span class="glyphicon glyphicon-filter"\n              ng-click="clearName()"></span>\n      </span>\n      <input ng-keyup="search()"\n             ng-model="name"\n             name="name"\n             type="text"\n             class="form-control" />\n    </label>\n    <button class="btn btn-sm btn-link btn-control-link"\n            type="button"\n            uib-tooltip="{{ \'QUICK_FILTER_TOOLTIP_FILTERS_ACTIVITY\' | translate }}">\n      <span class="glyphicon glyphicon-question-sign"></span>\n    </button>\n  </div>\n\n  <div class="quick-filter state-filter"\n       ng-if="showStateFilter">\n    <span class="name">{{ \'QUICK_FILTER_STATE\' | translate }}</span>\n\n    <ul class="list-inline">\n      <li>\n        <label class="btn btn-default btn-xs running"\n               uib-tooltip="{{ \'QUICK_FILTER_TOOLTIP_RUNNING_ACTIVITY\' | translate }}"\n               tooltip-placement="bottom">\n          <span class="glyphicon glyphicon-adjust"></span>\n          <input ng-change="search()"\n                 ng-model="running"\n                 name="running"\n                 type="checkbox" />\n        </label>\n      </li>\n\n      <li>\n        <label class="btn btn-default btn-xs completed"\n               uib-tooltip="{{ \'QUICK_FILTER_TOOLTIP_COMPLETED_ACTIVITY\' | translate }}"\n               tooltip-placement="bottom">\n          <span class="glyphicon glyphicon-ok-circle"></span>\n          <input ng-change="search()"\n                 ng-model="completed"\n                 name="completed"\n                 type="checkbox" />\n        </label>\n      </li>\n\n      <li>\n        <label class="btn btn-default btn-xs canceled"\n               uib-tooltip="{{ \'QUICK_FILTER_TOOLTIP_CANCELED_ACTIVITY\' | translate }}"\n               tooltip-placement="bottom">\n          <span class="glyphicon glyphicon-ban-circle"></span>\n          <input ng-change="search()"\n                 ng-model="canceled"\n                 name="canceled"\n                 type="checkbox" />\n        </label>\n      </li>\n    </ul>\n  </div>\n</form>\n\x3c!-- / CE - src/main/webapp/app/cockpit/directives/quick-filter.html --\x3e\n',link:function(e,t,n){if(!e.holderSelector)throw new Error("A holder-selector attribute must be specified");if(!e.labelSelector)throw new Error("A label-selector attribute must be specified");if(!e.itemSelector)throw new Error("A item-selector attribute must be specified");function i(){setTimeout(e.search,200)}e.$root.$on("instance-tree-selection-change",i),e.$root.$on("instance-diagram-selection-change",i);var r=o(e.holderSelector);e.showNameFilter=void 0!==n.nameFilter,e.showStateFilter=void 0!==n.stateFilter,e.search=function(){e.quickFilters&&e.quickFilters.running&&e.quickFilters.running.$viewValue&&e.quickFilters.canceled&&e.quickFilters.canceled.$viewValue&&e.quickFilters.completed&&e.quickFilters.completed.$viewValue&&(e.quickFilters.running.$setViewValue(!1),e.quickFilters.running.$render(),e.quickFilters.canceled.$setViewValue(!1),e.quickFilters.canceled.$render(),e.quickFilters.completed.$setViewValue(!1),e.quickFilters.completed.$render());var t=e.showNameFilter&&e.quickFilters.name?o.trim(e.quickFilters.name.$viewValue):"",n={running:!!e.showStateFilter&&!!e.quickFilters.running&&!!e.quickFilters.running.$viewValue,canceled:!!e.showStateFilter&&!!e.quickFilters.canceled&&!!e.quickFilters.canceled.$viewValue,completed:!!e.showStateFilter&&!!e.quickFilters.completed&&!!e.quickFilters.completed.$viewValue};o(e.itemSelector,r).each(function(){var e=o(this);e[function(e,t,n){return!!n.find(".selected").length||(!(e.canceled||e.running||e.completed)||!(!e.canceled&&n.hasClass("state-canceled")||!e.running&&n.hasClass("state-running")||!e.completed&&n.hasClass("state-completed")))&&(!t||new RegExp(t,"i").test(o.trim(n.text())))}(n,t,e)?"show":"hide"]()})},e.clearName=function(){e.quickFilters.name.$setViewValue(""),e.quickFilters.name.$render(),e.search()}}}}},{jquery:"jquery"}],170:[function(e,t,n){"use strict";t.exports=function(){return{link:function(t,e){var n=t.processData,i=e.attr("cam-select-activity");if(!n)throw new Error("No processData defined in scope");if(!i)throw new Error("No activity ID query given in @cam-select-activity");e.on("click",function(e){e.preventDefault(),t.$apply(function(){n.set("filter",{activityIds:[t.$eval(i)]})})})}}}},{}],171:[function(e,t,n){"use strict";t.exports=function(){return{link:function(t,e){var n=t.processData,i=e.attr("cam-select-activity-instance");if(!n)throw new Error("No processData defined in scope");if(!i)throw new Error("No activity instance id query given in @cam-select-activity");e.on("click",function(e){e.preventDefault(),t.$apply(function(){n.set("filter",{activityInstanceIds:[t.$eval(i)]})})})}}}},{}],172:[function(e,t,n){"use strict";var $=e("jquery"),L=e("camunda-commons-ui/vendor/angular");e("jquery-ui"),e("jquery-ui/ui/widgets/mouse"),e("jquery-ui/ui/data"),e("jquery-ui/ui/plugin"),e("jquery-ui/ui/safe-active-element"),e("jquery-ui/ui/safe-blur"),e("jquery-ui/ui/scroll-parent"),e("jquery-ui/ui/version"),e("jquery-ui/ui/widget"),e("jquery-ui/ui/widgets/draggable"),t.exports=["localConf","$rootScope",function(M,j){return{restrict:"CA",link:function(v,g,e){var y=$(g),b=e.ctnCollapsableParent,_=$("[ctn-collapsable]",y).eq(0),w=_.attr("ctn-collapsable")||"left",x="left"===w||"right"===w,E=0;e.ctnMinWidth&&($(".ctn-"+b+" "+e.ctnMinWidth,y).each(function(e,t){E+=$(t).width()}),E&&(E+=10));var C=M.get("ctnCollapsableParent:collapsed:"+b,"no"),k=M.get("ctnCollapsableParent:maximized:"+b,"no"),S=_["left"===w||"top"===w?"next":"prev"](),T=$('<div class="resize-handle"></div>').appendTo(y),O=S.children(".show-collapsable").addClass("expand-collapse").append('<i class="glyphicon glyphicon-menu-'+(x?"right":"down")+'"></i>'),A=_.children(".hide-collapsable").addClass("expand-collapse").append('<i class="glyphicon glyphicon-menu-'+(x?"left":"up")+'"></i>'),I=_.children(".maximize-collapsable").addClass("expand-collapse").append('<i class="glyphicon glyphicon-resize-full"></i>'),D=I.attr("maximize-parent-direction"),P=_.children(".restore-collapsable").addClass("expand-collapse").append('<i class="glyphicon glyphicon-resize-small"></i>');function R(e,t){N(e),e?(A.hide(),I.hide(),P.hide(),O.css("display","block")):(O.hide(),A.css("display","block")),t?(I.hide(),P.css("display","block")):e||(I.css("display","block"),P.hide()),M.set("ctnCollapsableParent:collapsed:"+b,e?"yes":"no"),M.set("ctnCollapsableParent:maximized:"+b,t?"yes":"no")}function N(e){e?_.addClass("collapsed"):_.removeClass("collapsed")}R("yes"===C,"yes"===k),function(){var n=x?"width":"height",i=x?"left":"top",e=x?"x":"y";function r(e){var t={};return t[w]=e,t}function o(e){var t={};return t[n]=e,t}T.addClass(x?"vertical":"horizontal");var t=_[n]();if(t=M.get("ctnCollapsableParent:size:"+b,t),t=Math.max(E,t),"yes"===C?(_.css(n,0),S.css(w,0)):(_.css(n,t),S.css(w,t+"px")),"yes"===k){var a=g[n]();R(!1,!0),T.css(r(a)),_.css(o(a)),S.css(r(a))}function s(){var e=_[n](),t=_.position();"left"===w||"top"===w?T.css(i,e):T.css(i,t[i])}function c(e){e="function"==typeof e?e:L.noop;var t=g[n]();R(!1,!0),T.animate(r(t)),_.animate(o(t),function(){e(),N(!1)}),S.animate(r(t))}function l(e){e="function"==typeof e?e:L.noop,R(!1,!1),T.animate(r(E||t)),_.animate(o(E||t),function(){e(),N(!1)}),S.animate(r(E||t))}$(T).draggable({axis:e,containment:"parent"}).on("drag",function(){var e=m();R(h(),f()),_.css(n,e),S.css(w,e),M.set("ctnCollapsableParent:size:"+b,e)}).on("dragstop",function(){s();var e=h();N(e),j.$broadcast("resize",{direction:w,collapsed:e})}),A.click(function(){var e=f()?E||t:0;R(0===e,!1),T.animate(r(e)),_.animate(o(e),function(){j.$broadcast("resize",{direction:w,collapsed:!0}),N(0===e)}),S.animate(r(e))}),O.click(function(){R(!1,!1),T.animate(r(E||t)),_.animate(o(E||t),function(){j.$broadcast("resize",{direction:w,collapsed:!1}),N(!1)}),S.animate(r(E||t))}),I.click(function(){j.$broadcast("maximize",{source:g,direction:D}),c(j.$broadcast.bind(j,"resize",{direction:w,collapsed:!1}))}),P.click(function(){j.$broadcast("restore",{source:g}),l(j.$broadcast.bind(j,"resize",{direction:w,collapsed:!1}))}),$(window).on("resize",s),v.$on("$destroy",function(){$(window).off("resize",s),u(),p(),d()});var u=j.$on("restore",function(e,t){g!==t.source&&l()}),p=j.$on("maximize",function(e,t){g!==t.source&&(t.direction===w?function(e){e="function"==typeof e?e:L.noop,R(!0,!1),T.animate(r(0)),_.animate(o(0),function(){e(),N(!0)}),S.animate(r(0))}():c())}),d=j.$on("resize",function(e,t){t.direction===D&&R(h(),t.collapsed&&f())});function f(){var e=m();return g[n]()-Math.ceil(e)<10}function h(){return m()<10}function m(){var e=T.position(),t=e[w];return"right"===w&&(t=y.width()-e.left),"bottom"===w&&(t=y.height()-e.top),t<E&&(t=0),t}s()}()}}}]},{"camunda-commons-ui/vendor/angular":127,jquery:"jquery","jquery-ui":143,"jquery-ui/ui/data":137,"jquery-ui/ui/plugin":138,"jquery-ui/ui/safe-active-element":139,"jquery-ui/ui/safe-blur":140,"jquery-ui/ui/scroll-parent":141,"jquery-ui/ui/version":142,"jquery-ui/ui/widget":143,"jquery-ui/ui/widgets/draggable":144,"jquery-ui/ui/widgets/mouse":145}],173:[function(e,t,n){"use strict";t.exports=function(){return{replace:!1,restrict:"AE",scope:{headColumns:"=?",onSortChange:"&",defaultSort:"=?"},template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/directives/sortable-table-head.html --\x3e\n<th ng-repeat="column in headColumns" ng-class="column.class" ng-if="evaluateCondition(column.condition)">\n  <span  ng-class="formatClassName(column.class) + \'-label\'">{{column.content}}</span>\n  <a ng-if="column.sortable === true"\n     ng-click="changeOrder(column.request)">\n    <span class="glyphicon" ng-class="orderClass(column.request)"></span>\n  </a>\n</th>\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/directives/sortable-table-head.html --\x3e\n\n',controller:["$scope",function(t){t.orderClass=function(e){return"glyphicon-"+{none:"minus",desc:"chevron-down",asc:"chevron-up"}[(e=e||t.defaultSort.sortBy)===t.defaultSort.sortBy?t.defaultSort.sortOrder:"none"]},t.changeOrder=function(e){t.defaultSort.sortBy=e,t.defaultSort.sortOrder="desc"===t.defaultSort.sortOrder?"asc":"desc",t.onSortChange({sortObj:t.defaultSort})},t.evaluateCondition=function(e){return void 0===e||e},t.formatClassName=function(e){return e.replace(/\s/g,"-")}}],link:function(){}}}},{}],174:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"EAC",link:function(o,a,s){function c(){a.removeClass("circle-green").removeClass("circle-blue").removeClass("animate-spin").addClass("circle-red")}a.addClass("circle"),o.$watch(s.incidents,function(){!function(){var e=o.$eval(s.incidents),t=o.$eval(s.running),n=o.$eval(s.incidentsForTypes)||[];if(t)return a.removeClass("circle-green").removeClass("circle-red").addClass("circle-blue").addClass("animate-spin");if(e&&0<e.length){if(0===n.length)return c();for(var i=0;i<e.length;i++){var r=e[i];if(-1!=r.incidentType.indexOf(n)&&0<r.incidentCount)return c()}}a.removeClass("circle-red").removeClass("circle-blue").removeClass("animate-spin").addClass("circle-green")}()})}}}},{}],175:[function(e,t,n){"use strict";t.exports=["camAPI","$window","Notifications","$translate",function(a,s,c,l){return{restrict:"A",template:'<span cam-inline-panel-property="definition.historyTimeToLive"\n      format="format(property)"\n      type="number"\n      on-change="onChange()"\n      on-remove="onRemove()"></span>\n',scope:{definition:"=timeToLive",customOnChange:"=onChange",resource:"@"},link:function(t){var n=o(),i=a.resource(t.resource);function e(){"function"==typeof t.customOnChange&&t.customOnChange()}function r(e){return i.updateHistoryTimeToLive(t.definition.id,{historyTimeToLive:e}).catch(function(e){t.definition.historyTimeToLive=n,c.addError({status:l.instant("TIME_TO_LIVE_MESSAGE_ERR"),message:e})}).then(function(){n=o()}).catch(function(){})}function o(){return null===t.definition.historyTimeToLive?null:+t.definition.historyTimeToLive}t.onChange=function(){s.setTimeout(function(){r(o()).then(e).catch(function(){})})},t.onRemove=function(){r(null).then(function(){n=null,t.definition.historyTimeToLive=null,e()}).catch(function(){})},t.format=function(e){return 1===e?l.instant("TIME_TO_LIVE_DAY",{ttl:e}):l.instant("TIME_TO_LIVE_DAYS",{ttl:e})}}}}]},{}],176:[function(e,t,n){"use strict";var s=e("angular");t.exports=["typeUtils",function(a){return{restrict:"EAC",scope:{variable:"=",form:"@",readonly:"="},replace:!0,template:'<div>\n  \x3c!-- # CE - camunda-cockpit-ui/client/scripts/directives/variable.html --\x3e\n\n  <div ng-if="isBoolean(variable)">\n    <label class="radio">\n      <input ng-model="variable.value"\n             ng-value="true"\n             type="radio"\n             name="booleanValue">\n       true\n    </label>\n\n    <label class="radio">\n      <input ng-model="variable.value"\n             ng-value="false"\n             type="radio"\n             name="booleanValue">\n       false\n    </label>\n  </div>\n\n  <input ng-if="isInteger(variable) || isShort(variable) || isLong(variable)"\n         class="form-control"\n         name="editIntegerValue"\n         type="text"\n         numeric\n         integer="true"\n         ng-model="variable.value"\n         ng-class="{\'in-place-edit\': isInPlaceEdit() }"\n         autofocus="autofocus"\n         required />\n\n  <input ng-if="isDouble(variable) || isFloat(variable)"\n         class="form-control"\n         name="editFloatValue"\n         type="text"\n         numeric\n         ng-model="variable.value"\n         ng-class="{\'in-place-edit\': isInPlaceEdit() }"\n         autofocus="autofocus"\n         required />\n\n  <input ng-if="isDate(variable)"\n         class="form-control"\n         date\n         name="editDateValue"\n         ng-model="variable.value"\n         type="text"\n         ng-class="{\'in-place-edit\': isInPlaceEdit() }"\n         autofocus="autofocus"\n         required />\n\n  <textarea ng-if="isString(variable) || isJSON(variable) || isXML(variable)"\n            id="value"\n            rows="5"\n            ng-readonly="readonly"\n            ng-model="variable.value"\n            ng-change="changeVariableValue()"\n            class="form-control variable-type-string"\n            ng-class="{\'in-place-edit\': isInPlaceEdit() }"\n            autofocus="autofocus"\n            required></textarea>\n\n  <div ng-if="isObject(variable)">\n      <label class="control-label"\n             for="objectTypeName">{{ \'VARIABLE_OBJECT_TYPE_NAME\' | translate }}</label>\n        <input id="objectTypeName"\n               name="objectTypeName"\n               class="form-control"\n               type="text"\n               ng-model="variable.valueInfo.objectTypeName"\n               autofocus\n               required />\n      <label class="control-label"\n             for="serializationDataFormat">{{ \'VARIABLE_SERIALIZATION_DATA_FORMAT\' | translate }}</label>\n        <input id="serializationDataFormat"\n               name="serializationDataFormat"\n               class="form-control"\n               type="text"\n               ng-model="variable.valueInfo.serializationDataFormat"\n               required />\n      <label class="control-label"\n             for="serializedValue">{{ \'VARIABLE_SERIALIZED_VALUE\' | translate }}</label>\n        <textarea rows="5"\n                  ng-model="variable.value"\n                  class="form-control"\n                  ></textarea>\n  </div>\n  \x3c!-- / CE - camunda-cockpit-ui/client/scripts/directives/variable.html --\x3e\n</div>\n',link:function(i,e){function n(e,t){var n=a.isType(t,e);s.element('[name="'+i.form+'"]').scope()[i.form].$setValidity("customValidation",n)}var r,t=void 0!==e.attr("inline-edit"),o=!0;i.changeVariableValue=function(){var e=i.variable.type,t=i.variable.value;if(-1<["Json","Xml"].indexOf(e))return n(e,t)},i.autofocus=!(void 0===e.attr("autofocus")),i.isBoolean=function(e){return"boolean"===e.type.toLowerCase()},i.isInteger=function(e){return"integer"===e.type.toLowerCase()},i.isShort=function(e){return"short"===e.type.toLowerCase()},i.isLong=function(e){return"long"===e.type.toLowerCase()},i.isDouble=function(e){return"double"===e.type.toLowerCase()},i.isFloat=function(e){return"float"===e.type.toLowerCase()},i.isString=function(e){return"string"===e.type.toLowerCase()},i.isDate=function(e){return"date"===e.type.toLowerCase()},i.isNull=function(e){return"null"===e.type.toLowerCase()},i.isObject=function(e){return"object"===e.type.toLowerCase()},i.isInPlaceEdit=function(){return t},i.isJSON=function(e){return"json"===e.type.toLowerCase()},i.isXML=function(e){return"xml"===e.type.toLowerCase()},i.$watch("variable.type",function(e,t){if(t!==e){if(-1<["Json","Xml"].indexOf(e))return n(e,i.variable.value);if("boolean"===e.toLowerCase())return r=i.variable.value,void(i.variable.value=o);if("boolean"===t.toLowerCase())return o=i.variable.value,void(i.variable.value=r);"null"===e.toLowerCase()&&(i.variable.value=null),"object"===e.toLowerCase()&&(i.variable.valueInfo=i.variable.valueInfo||{})}})}}}]},{angular:"angular"}],177:[function(e,t,n){"use strict";t.exports=[function(){return{restrict:"EAC",scope:{id:"@"},template:'<ul class="nav nav-pills">  <li ng-repeat="provider in providers" ng-class="{ active: isActive(provider) }" class="{{ provider.id }}">    <a ng-href="{{ getUrl(provider) }}">{{ provider.label }}</a>  </li></ul>',replace:!0,controller:["$scope","Views","$location","routeUtil",function(e,t,o,a){var n=t.getProviders({component:e.id});e.providers=n;var s=e.isActive=function(e){return-1!=o.path().indexOf("/"+e.id)};e.getUrl=function(e){var t=e.id,n=o.path(),i=o.search(),r=!!s(e)||e.keepSearchParams;return"#"+a.replaceLastPathFragment(t,n,i,r)}}]}}]},{}],178:[function(e,t,n){"use strict";t.exports=function(){return function(e){if(e){var t=e,n=Math.floor(t%1e3);t/=1e3;var i=Math.floor(t%60);t/=60;var r=Math.floor(t%60);t/=60;var o=Math.floor(t%24);t/=24;var a=[];return s(Math.floor(t),"day",a),s(o,"hour",a),s(r,"minute",a),s(i,"second",a),0===a.length&&s(n,"millisecond",a),a.join(", ")}};function s(e,t,n){if(e){var i=[];i.push(e),i.push(1===e?t:t+"s"),n.push(i.join(" "))}}}},{}],179:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./shorten"),o=e("camunda-commons-ui/lib/filter/abbreviateNumber"),a=e("./duration"),s=i.module("cam.cockpit.filters",[]);s.filter("shorten",r),s.filter("abbreviateNumber",o),s.filter("duration",a),t.exports=s},{"./duration":178,"./shorten":180,"camunda-commons-ui/lib/filter/abbreviateNumber":78,"camunda-commons-ui/vendor/angular":127}],180:[function(e,t,n){"use strict";t.exports=function(){return function(e,t){return e.length>t?e.substring(0,t)+"...":e}}},{}],181:[function(e,t,n){"use strict";var r=e("camunda-commons-ui/vendor/angular");t.exports=["$scope","$injector","$location","Views",function(e,t,n,i){e.navbarVars={read:[]},e.menuActions=[],e.dropdownActions=[],i.getProviders({component:"cockpit.navigation"}).forEach(function(n){r.isArray(n.access)?t.invoke(n.access)(function(e,t){if(e)throw e;n.accessible=t}):n.accessible=!0;(0<=n.priority?e.menuActions:e.dropdownActions).push(n)}),e.activeClass=function(e){var t=n.absUrl();return("function"==typeof e.checkActive?e.checkActive(t):function(e,t){return-1<t.indexOf(e.id)}(e,t))?"active":""}}]},{"camunda-commons-ui/vendor/angular":127}],182:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./controllers/cam-header-views-ctrl"),o=i.module("cam.cockpit.navigation",[]);o.controller("camHeaderViewsCtrl",r),t.exports=o},{"./controllers/cam-header-views-ctrl":181,"camunda-commons-ui/vendor/angular":127}],183:[function(e,t,n){"use strict";var v=e("camunda-bpm-sdk-js").utils.series;function g(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0}function y(e,t){return e.value>t.value?1:e.value<t.value?-1:0}function b(n,i){return Object.keys(i).forEach(function(e){var t=i[e];n=n.split("{{"+e+"}}").join(t)}),n}var i=["$scope","camAPI","localConf","Views","hasPlugin","page","Data","dataDepend","$translate",function(o,e,t,n,i,r,a,s,c){function l(n,e,t){var i=function(e,t){return 12<e?.5*Math.floor(t/e):0}(n.length,e),r={value:0,label:c.instant("DASHBOARD_OTHERS"),names:[],url:t};return n.forEach(function(e){e.value&&e.value<i&&(r.value+=e.value,r.names.push(e.label))}),n=n.filter(function(e){return e.value&&e.value>=i}).sort(y),i&&n.unshift(r),n.map(function(e,t){return e.color=function(e,t){var n=360/t*e;return"hsl("+(n=360<(n+=230)?n-360:n)+", 70%, 41%)"}(t,n.length),e})}o.hasMetricsPlugin=i("cockpit.dashboard.metrics","executed-activity-instances"),o.hasProcessSearch=i("cockpit.processes.dashboard","search-process-instances"),o.hasCaseSearch=i("cockpit.cases.dashboard","case-instances-search"),o.hasTaskSearch=i("cockpit.tasks.dashboard","search-tasks"),o.mainPlugins=[],o.miscPlugins=[],o.dashboardVars={read:["processData"]},o.deprecateDashboardProviders=n.getProviders({component:"cockpit.dashboard"}),r.breadcrumbsClear(),o.$root.showBreadcrumbs=!1,r.titleSet(c.instant("DASHBOARD_DASHBOARD")),o.values={procInst:[],procIncid:[]},o.data={actual:{}},o.linkBase={processInstances:"/process-definition/{{id}}",processIncidents:"/process-definition/{{id}}",tasks:"/process-instance/{{processInstanceId}}/runtime?tab=user-tasks-tab"},o.hasProcessSearch&&(o.linkBase.processInstances="/processes?searchQuery=%5B%7B%22type%22:%22PIunfinished%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D,%7B%22type%22:%22PIprocessDefinitionKey%22,%22operator%22:%22eq%22,%22value%22:%22{{key}}%22,%22name%22:%22%22%7D%5D",o.linkBase.processIncidents="/processes?searchQuery=%5B%7B%22type%22:%22PIwithRootIncidents%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D,%7B%22type%22:%22PIincidentStatus%22,%22operator%22:%22eq%22,%22value%22:%22open%22,%22name%22:%22%22%7D,%7B%22type%22:%22PIprocessDefinitionKey%22,%22operator%22:%22eq%22,%22value%22:%22{{key}}%22,%22name%22:%22%22%7D%5D");var u=e.resource("case-definition"),p=e.resource("decision-definition"),d=e.resource("deployment"),f=e.resource("process-definition");o.processData=s.create(o);var h=o.processData.newChild(o);a.instantiateProviders("cockpit.dashboard.data",{$scope:o,processData:h});var m=e.resource("task");o.$watch("actualActive",function(){o.actualActive&&(o.loadingActual=!0,v({processes:function(n){f.list({latest:!0},function(e,t){if(e)return n(e);o.processDefinitionData=t.items,h.observe("processDefinitionWithRootIncidentsStatistics",function(e){!function(e){var i=[],r=0;e.forEach(function(e){var t=e.definition.id,n=o.processDefinitionData.filter(function(e){return e.id===t})[0];n&&e.instances&&(i.push({value:e.instances,label:n.name||n.id,url:b(o.linkBase.processInstances,n)}),r+=e.instances)}),o.values.procInst=l(i,r,"/processes"),o.data.actual.runningProcessInstances=r}(e),function(e){var n=[],i=0;e.forEach(function(e){var t=0;e.incidents.forEach(function(e){t+=e.incidentCount}),n.push({value:t,label:e.definition.name||e.definition.id,url:b(o.linkBase.processIncidents,e.definition)}),i+=t}),o.values.procIncid=l(n,i,"/processes"),o.data.actual.openIncidents=i}(e)}),n()})},tasks:function(r){m.count({},function(e,i){if(e)return r();o.data.actual.tasks=i,v({assignedToUser:function(n){m.count({unfinished:!0,assigned:!0},function(e,t){n(e,{label:c.instant("DASHBOARD_ASSIGNED_TO_USER"),url:"/tasks?searchQuery=%5B%7B%22type%22:%22unfinished%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D,%7B%22type%22:%22assigned%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D%5D",value:t})})},assignedToGroup:function(n){m.count({unfinished:!0,unassigned:!0,withCandidateGroups:!0},function(e,t){n(e,{label:c.instant("DASHBOARD_ASSIGNED_TO_GROUPS"),url:"/tasks?searchQuery=%5B%7B%22type%22:%22unfinished%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D,%7B%22type%22:%22withCandidateGroups%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D,%7B%22type%22:%22unassigned%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D%5D",value:t})})},unassigned:function(n){m.count({unfinished:!0,unassigned:!0,withoutCandidateGroups:!0},function(e,t){n(e,{label:c.instant("DASHBOARD_UNASSIGNED"),url:"/tasks?searchQuery=%5B%7B%22type%22:%22unfinished%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D,%7B%22type%22:%22withoutCandidateGroups%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D,%7B%22type%22:%22unassigned%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D%5D",value:t})})}},function(e,t){if(e)return r(e);var n=[];Object.keys(t).forEach(function(e){n.push(t[e])}),o.values.tasks=l(n,i,"/tasks"),r(null,i)})})}},function(){o.loadingActual=!1}))}),o.$watch("deployedActive",function(){o.deployedActive&&!o.data.deployed&&(o.loadingDeployed=!0,function(n){v({processDefinitions:function(e){f.count({latestVersion:!0},e)},decisionDefinitions:function(e){p.count({latestVersion:!0},e)},caseDefinitions:function(e){u.count({latestVersion:!0},e)},deploymentDefinitions:function(e){d.count({},e)}},function(e,t){if(e)throw e;n(e,t)})}(function(e,t){if(o.loadingDeployed=!1,e)throw e;o.data.deployed=t}))}),["actual","metrics","deployed","deprecate"].forEach(function(e){o[e+"Active"]=t.get("dashboardSection:"+e,!0)}),o.toggleSection=function(e){o[e+"Active"]=!o[e+"Active"],t.set("dashboardSection:"+e,o[e+"Active"])},o.metricsPeriod=t.get("dashboardMetricsPeriod","day"),o.setMetricsPeriod=function(e){o.metricsPeriod=e,t.set("dashboardMetricsPeriod",e)},o.hasMetricsPlugin&&(o.metricsVars={read:["metricsPeriod"]},o.metricsPlugins=n.getProviders({component:"cockpit.dashboard.metrics"}).sort(g))}],r=["$routeProvider",function(e){e.when("/dashboard",{template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/pages/dashboard.html --\x3e\n<div class="ctn-view dashboard container-fluid">\n  <div class="sections row">\n    <div class="col-xs-12"\n         ng-class="{\'col-sm-8 col-lg-10\': metricsPlugins.length}">\n\n\n      <section class="actual"\n               ng-class="{\'loading\': loadingActual,\'section-collapsed\': !actualActive}">\n        <button uib-tooltip="{{ \'DASHBOARD_TOGGLE_SECTION\' | translate }}"\n                class="section-toggle btn btn-link btn-sm"\n                ng-click="toggleSection(\'actual\')">\n          <span class="glyphicon"\n                ng-class="{\'glyphicon-menu-down\': !actualActive, \'glyphicon-menu-up\': actualActive}"></span>\n        </button>\n\n        <div class="inner">\n          <header>\n            <div class="row">\n              <h1 class="col-xs-12 section-title">{{ \'DASHBOARD_RIGHT_NOW\' | translate }}</h1>\n            </div>\n          </header>\n\n          <div class="row stats"\n               ng-if="actualActive">\n            <div class="stats-section process-instances col-xs-6 col-md-4">\n              <div cam-pie-chart\n                   values="values.procInst"\n                   placeholder="{{ \'DASHBOARD_RUNNING_PROCESS_INSTANCE\' | translate }}"></div>\n              <a class="value"\n                 href="#/processes?searchQuery=%5B%7B%22type%22:%22PIunfinished%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D%5D"\n                 ng-if="hasProcessSearch">\n                {{ (!data.actual.runningProcessInstances ? 0 : \'\') }}\n                {{ data.actual.runningProcessInstances | abbreviateNumber }}\n              </a>\n              <a class="value"\n                 href="#/processes"\n                 ng-if="!hasProcessSearch">\n                {{ (!data.actual.runningProcessInstances ? 0 : \'\') }}\n                {{ data.actual.runningProcessInstances | abbreviateNumber }}\n              </a>\n            </div>\n\n            <div class="stats-section open-incidents col-xs-6 col-md-4">\n              <div cam-pie-chart\n                   values="values.procIncid"\n                   placeholder="{{ \'DASHBOARD_OPEN_INCIDENTS\' | translate }}"></div>\n              <a class="value"\n                 href="#/processes?searchQuery=%5B%7B%22type%22:%22PIwithRootIncidents%22,%22operator%22:%22eq%22,%22value%22:%22%22,%22name%22:%22%22%7D,%7B%22type%22:%22PIincidentStatus%22,%22operator%22:%22eq%22,%22value%22:%22open%22,%22name%22:%22%22%7D%5D"\n                 ng-if="hasProcessSearch">\n                {{ (!data.actual.openIncidents ? 0 : \'\') }}\n                {{ data.actual.openIncidents | abbreviateNumber }}\n              </a>\n              <a class="value"\n                 href="#/processes"\n                 ng-if="!hasProcessSearch">\n                {{ (!data.actual.openIncidents ? 0 : \'\') }}\n                {{ data.actual.openIncidents | abbreviateNumber }}\n              </a>\n            </div>\n\n            <div class="stats-section open-human-tasks col-xs-6 col-md-4">\n              <div cam-pie-chart\n                   values="values.tasks"\n                   placeholder="{{ \'DASHBOARD_OPEN_HUMAN_TASKS\' | translate}}"></div>\n              <a class="value"\n                 href="#/tasks">\n                {{ (!data.actual.tasks ? 0 : \'\') }}\n                {{ data.actual.tasks | abbreviateNumber }}\n              </a>\n            </div>\n          </div>\n        </div>\n      </section>\n\n\n      <section class="statistics"\n               ng-class="{\'section-collapsed\': !statisticsActive}"\n               ng-if="statisticsPlugins.length">\n        <button uib-tooltip="{{ \'DASHBOARD_TOGGLE_SECTION\' | translate }}"\n                class="section-toggle btn btn-link btn-sm"\n                ng-click="toggleSection(\'statistics\')">\n          <span class="glyphicon"\n                ng-class="{\'glyphicon-menu-down\': !statisticsActive, \'glyphicon-menu-up\': statisticsActive}"></span>\n        </button>\n\n        <div class="inner">\n          <header>\n            <h1 class="section-title">{{ \'DASHBOARD_STATISTICS\' | translate }}</h1>\n          </header>\n\n          <div class="row stats"\n               ng-if="statisticsActive">\n            <div ng-repeat="plugin in statisticsPlugins"\n                 data-plugin-id="{{ plugin.id }}"\n                 class="stats-section col-md-12 col-lg-6 entry">\n              <h4>{{ plugin.label }}</h4>\n              <view vars="statisticsVars"\n                    provider="plugin"\n                    class="row"></view>\n            </div>\n          </div>\n        </div>\n      </section>\n\n\n      <section class="metrics"\n               ng-class="{\'section-collapsed\': !metricsActive}"\n               ng-if="metricsPlugins.length">\n        <button uib-tooltip="{{ \'DASHBOARD_TOGGLE_SECTION\' | translate }}"\n                class="section-toggle btn btn-link btn-sm"\n                ng-click="toggleSection(\'metrics\')">\n          <span class="glyphicon"\n                ng-class="{\'glyphicon-menu-down\': !metricsActive, \'glyphicon-menu-up\': metricsActive}"></span>\n        </button>\n\n        <div class="inner">\n          <header>\n            <div class="row">\n              <h1 class="col-xs-3 section-title">{{ \'DASHBOARD_METRICS\' | translate }}</h1>\n\n              <div class="col-xs-9 text-right"\n                   ng-if="metricsActive">\n                <ul class="nav nav-tabs">\n                  <li ng-class="{active: metricsPeriod === \'day\'}">\n                    <a ng-click="setMetricsPeriod(\'day\')">{{ \'DASHBOARD_TODAY\' | translate }}</a>\n                  </li>\n\n                  <li ng-class="{active: metricsPeriod === \'week\'}">\n                    <a ng-click="setMetricsPeriod(\'week\')">{{ \'DASHBOARD_THIS_WEEK\' | translate }}</a>\n                  </li>\n\n                  <li ng-class="{active: metricsPeriod === \'month\'}">\n                    <a ng-click="setMetricsPeriod(\'month\')">{{ \'DASHBOARD_THIS_MONTH\' | translate }}</a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </header>\n\n\n          <div class="row stats"\n               ng-if="metricsActive">\n            <div ng-repeat="plugin in metricsPlugins"\n                 data-plugin-id="{{ plugin.id }}"\n                 class="stats-section col-md-6 col-lg-4 entry">\n              <h4>{{ plugin.label | translate }}</h4>\n              <view vars="metricsVars"\n                    provider="plugin"\n                    period="metricsPeriod"\n                    class="row"></view>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section class="deployed no-metrics"\n               ng-class="{\'loading\': loadingDeployed,\'section-collapsed\': !deployedActive}"\n               ng-if="!metricsPlugins.length">\n        <button uib-tooltip="{{ \'DASHBOARD_TOGGLE_SECTION\' | translate }}"\n                class="section-toggle btn btn-link btn-sm"\n                ng-click="toggleSection(\'deployed\')">\n          <span class="glyphicon"\n                ng-class="{\'glyphicon-menu-down\': !deployedActive, \'glyphicon-menu-up\': deployedActive}"></span>\n        </button>\n\n        <div class="inner">\n          <header>\n            <h1 class="section-title">{{ \'DASHBOARD_DEPLOYED\' | translate }}</h1>\n          </header>\n\n          <div class="row stats"\n               ng-if="deployedActive">\n            <div class="stats-section processes col-xs-6 col-lg-3">\n              <div class="stats-label">{{ \'DASHBOARD_PROCESS_DEFINITIONS\' | translate }}</div>\n              <a class="value"\n                 href="#/processes">\n                {{ (!data.deployed.processDefinitions ? 0 : \'\') }}\n                {{ data.deployed.processDefinitions | abbreviateNumber }}\n              </a>\n            </div>\n\n            <div class="stats-section decisions col-xs-6 col-lg-3">\n              <div class="stats-label">{{ \'DASHBOARD_DECISION_DEFINITIONS\' | translate }}</div>\n              <a class="value"\n                 href="#/decisions">\n                {{ (!data.deployed.decisionDefinitions ? 0 : \'\') }}\n                {{ data.deployed.decisionDefinitions | abbreviateNumber }}\n              </a>\n            </div>\n\n            <div class="stats-section cases col-xs-6 col-lg-3">\n              <div class="stats-label">{{ \'DASHBOARD_CASE_DEFINITIONS\' | translate }}</div>\n              <a class="value"\n                 href="#/cases"\n                 ng-if="hasCaseSearch">\n                {{ (!data.deployed.caseDefinitions ? 0 : \'\') }}\n                {{ data.deployed.caseDefinitions | abbreviateNumber }}\n              </a>\n              <span class="value"\n                    ng-if="!hasCaseSearch">\n                {{ (!data.deployed.caseDefinitions ? 0 : \'\') }}\n                {{ data.deployed.caseDefinitions | abbreviateNumber }}\n              </span>\n            </div>\n\n            <div class="stats-section deployments col-xs-6 col-lg-3">\n              <div class="stats-label">{{ \'DASHBOARD_DEPLOYMENTS\' | translate }}</div>\n              <a class="value"\n                 href="#/repository">\n                {{ (!data.deployed.deploymentDefinitions ? 0 : \'\') }}\n                {{ data.deployed.deploymentDefinitions | abbreviateNumber }}\n              </a>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n\n\n    <section class="col-xs-12 col-sm-4 col-lg-2 deployed"\n             ng-class="{\'loading\': loadingDeployed, \'section-collapsed\': !deployedActive}"\n             ng-if="metricsPlugins.length">\n      <button uib-tooltip="{{ \'DASHBOARD_TOGGLE_SECTION\' | translate }}"\n              class="section-toggle btn btn-link btn-sm"\n              ng-click="toggleSection(\'deployed\')">\n        <span class="glyphicon"\n              ng-class="{\'glyphicon-menu-down\': !deployedActive, \'glyphicon-menu-up\': deployedActive}"></span>\n      </button>\n\n      <div class="inner">\n        <header>\n          <h1 class="section-title">{{ \'DASHBOARD_DEPLOYED\' | translate }}</h1>\n        </header>\n\n        <div class="row stats"\n             ng-if="deployedActive">\n          <div class="stats-section processes col-sm-12 col-md-6 col-lg-12">\n            <div class="stats-label">{{ \'DASHBOARD_PROCESS_DEFINITIONS\' | translate }}</div>\n            <a class="value"\n               href="#/processes">\n              {{ (!data.deployed.processDefinitions ? 0 : \'\') }}\n              {{ data.deployed.processDefinitions | abbreviateNumber }}\n            </a>\n          </div>\n\n          <div class="stats-section decisions col-sm-12 col-md-6 col-lg-12">\n            <div class="stats-label">{{ \'DASHBOARD_DECISION_DEFINITIONS\' | translate }}</div>\n            <a class="value"\n               href="#/decisions">\n              {{ (!data.deployed.decisionDefinitions ? 0 : \'\') }}\n              {{ data.deployed.decisionDefinitions | abbreviateNumber }}\n            </a>\n          </div>\n\n          <div class="stats-section cases col-sm-12 col-md-6 col-lg-12">\n            <div class="stats-label">{{ \'DASHBOARD_CASE_DEFINITIONS\' | translate }}</div>\n            <a class="value"\n               href="#/cases"\n               ng-if="hasCaseSearch">\n              {{ (!data.deployed.caseDefinitions ? 0 : \'\') }}\n              {{ data.deployed.caseDefinitions | abbreviateNumber }}\n            </a>\n            <span class="value"\n                  ng-if="!hasCaseSearch">\n              {{ (!data.deployed.caseDefinitions ? 0 : \'\') }}\n              {{ data.deployed.caseDefinitions | abbreviateNumber }}\n            </span>\n          </div>\n\n          <div class="stats-section deployments col-sm-12 col-md-6 col-lg-12">\n            <div class="stats-label">{{ \'DASHBOARD_DEPLOYMENTS\' | translate }}</div>\n            <a class="value"\n               href="#/repository">\n              {{ (!data.deployed.deploymentDefinitions ? 0 : \'\') }}\n              {{ data.deployed.deploymentDefinitions | abbreviateNumber }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n\n\n\n\n  <section class="deprecate"\n           ng-if="deprecateDashboardProviders.length"\n           ng-class="{\'section-collapsed\': !deprecateActive}">\n    <button uib-tooltip="{{ \'DASHBOARD_TOGGLE_SECTION\' | translate }}"\n            class="section-toggle btn btn-link btn-sm"\n            ng-click="toggleSection(\'deprecate\')">\n      <span class="glyphicon"\n            ng-class="{\'glyphicon-menu-down\': !deprecateActive, \'glyphicon-menu-up\': deprecateActive}"></span>\n    </button>\n\n    <div class="inner">\n      <header>\n        <div class="row">\n          <h1 class="section-title col-xs-4">{{ \'DASHBOARD_CUSTOM_PLUGINS\' | translate }}</h1>\n          <div class="col-xs-8 text-right"></div>\n        </div>\n      </header>\n\n      <div ng-if="deprecateActive"\n           ng-repeat="plugin in deprecateDashboardProviders"\n           class="deprecate-dashboard-view row"\n           data-plugin-id="{{ plugin.id }}">\n        <view vars="dashboardVars"\n              provider="plugin"></view>\n      </div>\n    </div>\n  </section>\n</div>\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/pages/dashboard.html --\x3e\n',controller:i,authentication:"required",reloadOnSearch:!1})}];t.exports=r},{"camunda-bpm-sdk-js":4}],184:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),v=e("../../../../common/scripts/util/routeUtil"),r=e("camunda-commons-ui/lib"),o=i.module("cam.cockpit.pages.decisionDefinition",["dataDepend",r.name]),a=["$scope","$rootScope","$q","dataDepend","page","camAPI","decisionDefinition","Views","search","isModuleAvailable","$translate",function(i,e,r,t,n,o,a,s,c,l,u){i.control={};var p=i.decisionData=t.create(i),d=o.resource("decision-definition");i.hasDrdPlugin=l("cockpit.plugin.drd"),i.decisionDefinition=a,p.provide("decisionDefinition",a),p.provide("tableXml",["decisionDefinition",function(e){var n=r.defer(),t=e.id;return d.getXml(t,function(e,t){e?n.reject(e):n.resolve(t.dmnXml)}),n.promise}]),p.provide("allDefinitions",["decisionDefinition",function(e){var n=r.defer(),t={key:e.key,sortBy:"version",sortOrder:"desc"};return e.tenantId?t.tenantIdIn=e.tenantId:t.withoutTenantId=!0,d.list(t,function(e,t){e?n.reject(e):n.resolve(t)}),n.promise}]),p.observe(["decisionDefinition"],function(e){i.decisionDefinition=e}),p.observe(["allDefinitions"],function(e){i.allDefinitions=e}),e.showBreadcrumbs=!0,i.breadcrumbData=p.observe(["decisionDefinition"],function(e){n.breadcrumbsClear(),n.breadcrumbsAdd([{label:u.instant("DECISION_DEFINITION_DECISIONS"),href:"#/decisions"},{type:"decisionDefinition",label:e.name||e.key||e.id,href:"#/decision-definition/"+e.id}]),n.titleSet([e.name||e.key||e.id,u.instant("DECISION_DEFINITION_DEFINITION_VIEW")].join(" | "))}),p.observe(["tableXml"],function(e){i.tableXml=e}),i.initializeTablePlugins=function(){for(var e=s.getProviders({component:"cockpit.decisionDefinition.table"}),t={decisionDefinition:a,decisionData:p,tableControl:i.control},n=0;n<e.length;n++)"function"==typeof e[n].initialize&&e[n].initialize(t)},i.decisionDefinitionVars={read:["decisionDefinition","decisionData"]},i.decisionDefinitionTabs=s.getProviders({component:"cockpit.decisionDefinition.tab"}),i.decisionDefinitionActions=s.getProviders({component:"cockpit.decisionDefinition.action"});for(var f=s.getProviders({component:"cockpit.decisionDefinition.tab"}).concat(s.getProviders({component:"cockpit.decisionDefinition.action"})),h={decisionDefinition:a,decisionData:p},m=0;m<f.length;m++)"function"==typeof f[m].initialize&&f[m].initialize(h);i.selectTab=function(e){i.selectedTab=e,c.updateSilently({detailsTab:e.id})},function(e){var t=c().detailsTab;if(e&&e.length){if(t){var n=s.getProvider({component:"cockpit.decisionDefinition.tab",id:t});if(n&&-1!=e.indexOf(n))return i.selectedTab=n}c.updateSilently({detailsTab:null}),i.selectedTab=e[0]}}(i.decisionDefinitionTabs),i.getDeploymentUrl=function(){var e=a.deploymentId,t={deployment:e,resourceName:a.resource,deploymentsQuery:JSON.stringify([{type:"id",operator:"eq",value:e}])};return v.redirectTo("#/repository",t,["deployment","resourceName","deploymentsQuery"])}}],s=["$routeProvider",function(e){e.when("/decision-definition/:id",{redirectTo:function(e,t,n){var i=t+"/history";return v.redirectTo(i,n,!0)}}).when("/decision-definition/:id/history",{template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/pages/decision-definition.html --\x3e\n<div class="ctn-fixed-view decision-page-layout">\n  <div class="ctn-content-container"\n       ctn-collapsable-parent="sidebar">\n\n    \x3c!-- tool bar --\x3e\n    <div class="ctn-toolbar">\n\n      \x3c!-- Toolbar actions are provided by plugins --\x3e\n      <span ng-repeat="tabProvider in decisionDefinitionActions">\n        <view provider="tabProvider"\n              vars="decisionDefinitionVars" />\n      </span>\n\n    </div>\n\n    \x3c!-- sidebar --\x3e\n    <div class="ctn-column ctn-sidebar ctn-scroll"\n         cam-hover-area\n         ctn-collapsable="left">\n      <dl class="process-information">\n        <dt>{{ \'DECISION_DEFINITION_DEFINITION_VERSION\' | translate }}</dt>\n        <dd class="definition-version">\n          <span ng-if="!allDefinitions || !decisionDefinition"\n                class="glyphicon glyphicon-refresh animate-spin"></span>\n\n          <div class="dropdown"\n               ng-if="allDefinitions && allDefinitions.length > 1"\n               uib-dropdown>\n            <a href\n               class="dropdown-toggle"\n               uib-dropdown-toggle>\n              {{ decisionDefinition.version }}\n              <span class="caret"></span>\n            </a>\n\n            <ul uib-dropdown-menu class="dropdown-menu">\n              <li ng-repeat="definition in allDefinitions">\n                <a ng-href="#/decision-definition/{{ definition.id }}">\n                  {{ definition.version }}\n                </a>\n              </li>\n            </ul>\n          </div>\n          <span ng-if="allDefinitions && allDefinitions.length < 2 && decisionDefinition">\n            {{ decisionDefinition.version }}\n          </span>\n        </dd>\n\n        <dt>{{ \'DECISION_DEFINITION_VERSION_TAG\' | translate }}</dt>\n        <dd class="version-tag"\n            ng-if="decisionDefinition.versionTag">{{ decisionDefinition.versionTag }}</dd>\n        <dd class="version-tag"\n            ng-if="!decisionDefinition.versionTag"><span class="null-value">{{ \'DECISION_DEFINITION_NULL\' | translate }}</span></dd>\n\n        <dt cam-widget-clipboard="decisionDefinition.id"\n            cam-hoverable-title="definition-id">{{ \'DECISION_DEFINITION_DEFINITION_ID\' | translate }}</dt>\n        <dd cam-hover-trigger="definition-id">{{ decisionDefinition.id }}</dd>\n\n        <dt cam-widget-clipboard="decisionDefinition.key"\n            cam-hoverable-title="definition-key">{{ \'DECISION_DEFINITION_DEFINITION_KEY\' | translate }}</dt>\n        <dd class="definition-key"\n            cam-hover-trigger="definition-key">{{ decisionDefinition.key }}</dd>\n\n        <dt>{{ \'DECISION_DEFINITION_DEFINITION_NAME\' | translate }}</dt>\n        <dd class="definition-name"\n            ng-if="decisionDefinition.name && decisionDefinition.name !== decisionDefinition.key">{{ decisionDefinition.name }}</dd>\n        <dd class="definition-name"\n            ng-if="!decisionDefinition.name || decisionDefinition.name === decisionDefinition.key"><span class="null-value">null</span></dd>\n\n\n        <dt cam-widget-clipboard="decisionDefinition.historyTimeToLive"\n            cam-hoverable-title="history-time-to-live">\n            {{ \'DECISION_DEFINITION_HISTORY_TIME_TO_LIVE\' | translate }}\n        </dt>\n        <dd class="history-time-to-live" cam-hover-trigger="history-time-to-live">\n          <span time-to-live="decisionDefinition" resource="decision-definition"></span>\n        </dd>\n\n        <dt ng-if="decisionDefinition.tenantId"\n            cam-widget-clipboard="decisionDefinition.tenantId"\n            cam-hoverable-title="tenant-id">{{ \'DECISION_DEFINITION_TENANT_ID\' | translate }}</dt>\n        <dd class="tenant-id"\n            ng-if="decisionDefinition.tenantId"\n            cam-hover-trigger="tenant-id">{{ decisionDefinition.tenantId }}</dd>\n        <dt ng-if="!decisionDefinition.tenantId">{{ \'DECISION_DEFINITION_TENANT_ID\' | translate }}</dt>\n        <dd class="tenant-id"\n            ng-if="!decisionDefinition.tenantId"><span class="null-value">null</span></dd>\n\n        <dt cam-widget-clipboard="decisionDefinition.deploymentId"\n            cam-hoverable-title="deployment-id">{{ \'DECISION_DEFINITION_DEPLOYMENT_ID\' | translate }}</dt>\n        <dd class="deployment-id"\n            cam-hover-trigger="deployment-id">\n          <a ng-href="{{ getDeploymentUrl() }}">{{ decisionDefinition.deploymentId }}</a>\n        </dd>\n\n        <dt ng-if="decisionDefinition.decisionRequirementsDefinitionId"\n            cam-widget-clipboard="decisionDefinition.decisionRequirementsDefinitionId"\n            cam-hoverable-title="drd">{{ \'DECISION_DEFINITION_DECISION_REQUIREMENTS_DEFINITION\' | translate }}</dt>\n        <dd class="super-case-instance-id"\n            ng-if="decisionDefinition.decisionRequirementsDefinitionId"\n            cam-hover-trigger="drd">\n          <a ng-if="hasDrdPlugin"\n             ng-href="#/decision-requirement/{{decisionDefinition.decisionRequirementsDefinitionId}}/history">\n            {{ decisionDefinition.decisionRequirementsDefinitionId }}\n          </a>\n          <span ng-if="!hasDrdPlugin">\n            {{ decisionDefinition.decisionRequirementsDefinitionId }}\n          </span>\n        </dd>\n        <dt ng-if="!decisionDefinition.decisionRequirementsDefinitionId">{{ \'DECISION_DEFINITION_DECISION_REQUIREMENTS_DEFINITION\' | translate }}</dt>\n        <dd class="super-case-instance-id"\n            ng-if="!decisionDefinition.decisionRequirementsDefinitionId"><span class="null-value">{{ \'DECISION_DEFINITION_NULL\' | translate }}</span></dd>\n      </dl>\n\n      <a class="hide-collapsable pull-right"></a>\n    </div>\n\n\n    <div class="ctn-column ctn-content"\n         ctn-collapsable-parent="tabs">\n\n      \x3c!-- content top pane --\x3e\n      <div class="ctn-row ctn-content-top"\n           ctn-collapsable="top">\n        <div decision-table="tableXml"\n             control="control"\n             table="{{decisionDefinition.key}}"\n             on-load="initializeTablePlugins()"\n             style="height: 100%;padding:20px 10px;margin:0;"></div>\n        <a class="hide-collapsable vertical-collapse"\n           title="{{ \'DECISION_DEFINITION_SHOW_TABS\' | translate }}"></a>\n\n        <a class="maximize-collapsable vertical-collapse"\n           maximize-parent-direction="left"\n           title="{{ \'DECISION_DEFINITION_MAXIMIZE_DIAGRAM\' | translate }}"></a>\n\n        <a class="restore-collapsable vertical-collapse"\n           maximize-parent-direction="left"\n           title="{{ \'DECISION_DEFINITION_RESTORE_DEFAULT_SIZE\' | translate }}"></a>\n      </div>\n\n      \x3c!-- content bottom pane --\x3e\n      <div class="ctn-row ctn-content-bottom ctn-tabbed">\n        <a class="show-collapsable vertical-collapse"\n           title="{{ \'DECISION_DEFINITION_HIDE_TABS\' | translate }}"></a>\n        <ul class="nav nav-tabs"\n            ng-if="decisionDefinitionTabs.length > 1">\n          <li ng-class="{ active: selectedTab == tabProvider }"\n              ng-repeat="tabProvider in decisionDefinitionTabs">\n            <a href ng-click="selectTab(tabProvider)">{{ tabProvider.label | translate }}</a>\n          </li>\n        </ul>\n\n        <h4 ng-if="decisionDefinitionTabs.length === 1">{{ decisionDefinitionTabs[0].label | translate }}:</h4>\n\n        <div class="ctn-tabbed-content ctn-scroll"\n             ng-if="decisionDefinitionTabs.length">\n          <view provider="selectedTab"\n                vars="decisionDefinitionVars" />\n        </div>\n      </div>\n\n      <a class="show-collapsable"></a>\n    </div>\n\n  </div>\n\n</div>\x3c!-- end .ctn-fixed-view --\x3e\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/pages/decision-definition.html --\x3e\n',controller:a,authentication:"required",resolve:{decisionDefinition:["ResourceResolver","camAPI","$q",function(e,t,i){return e.getByRouteParam("id",{name:"decision definition",resolve:function(e){var n=i.defer();return t.resource("decision-definition").get(e,function(e,t){e?n.reject(e):n.resolve(t)}),n.promise}})}]},reloadOnSearch:!1})}];o.config(s).config(["ViewsProvider",function(e){e.registerDefaultView("cockpit.decisionDefinition.view",{id:"history",priority:20,label:"History",keepSearchParams:[]})}]),t.exports=o},{"../../../../common/scripts/util/routeUtil":276,"camunda-commons-ui/lib":80,"camunda-commons-ui/vendor/angular":127}],185:[function(e,t,n){"use strict";var v=e("camunda-commons-ui/vendor/angular"),g=e("../../../../common/scripts/util/routeUtil");e("angular-data-depend");var i=e("camunda-commons-ui/lib"),r=v.module("cam.cockpit.pages.decisionInstance",["dataDepend",i.name]),o=["$scope","$rootScope","$q","dataDepend","page","camAPI","decisionInstance","Views","search","$translate",function(i,e,t,n,r,o,a,s,c,l){i.control={},i.decisionInstance=a;var u=i.decisionData=n.create(i),p=o.resource("decision-definition");i.hasCasePlugin=!1;try{i.hasCasePlugin=!!v.module("cockpit.plugin.case")}catch(e){}var d=0<s.getProviders({component:"cockpit.processInstance.view"}).filter(function(e){return"history"===e.id}).length;i.processInstanceLink=d?"#/process-instance/"+i.decisionInstance.processInstanceId+"/history?activityInstanceIds="+i.decisionInstance.activityInstanceId+"&activityIds="+i.decisionInstance.activityId:"#/process-instance/"+i.decisionInstance.processInstanceId,u.provide("tableXml",function(){var n=t.defer();return p.getXml(a.decisionDefinitionId,function(e,t){e?n.reject(e):n.resolve(t.dmnXml)}),n.promise}),u.provide("decisionDefinition",function(){var n=t.defer();return p.get(a.decisionDefinitionId,function(e,t){e?n.reject(e):n.resolve(t)}),n.promise}),e.showBreadcrumbs=!0,r.breadcrumbsClear(),r.breadcrumbsAdd([{label:l.instant("DECISION_INSTANCE_DECISIONS"),href:"#/decisions/"},{type:"decisionDefinition",label:a.decisionDefinitionName||a.decisionDefinitionKey||a.decisionDefinitionId,href:"#/decision-definition/"+a.decisionDefinitionId},{type:"decisionInstance",label:a.id,href:"#/decision-instance/"+a.id}]),r.titleSet([a.id,l.instant("DECISION_INSTANCE_INSTANCE_VIEW")].join(" | ")),u.observe(["tableXml"],function(e){i.tableXml=e}),u.observe(["decisionDefinition"],function(e){i.decisionDefinition=e}),i.getDeploymentUrl=function(){var e=i.decisionDefinition.deploymentId,t={deployment:e,resourceName:i.decisionDefinition.resource,deploymentsQuery:JSON.stringify([{type:"id",operator:"eq",value:e}])};return g.redirectTo("#/repository",t,["deployment","resourceName","deploymentsQuery"])},i.getActivitySearch=function(e){return JSON.stringify([{type:"caseActivityIdIn",operator:"eq",value:e.activityId}])},i.initializeTablePlugins=function(){for(var e=s.getProviders({component:"cockpit.decisionInstance.table"}),t={decisionInstance:a,tableControl:i.control},n=0;n<e.length;n++)"function"==typeof e[n].initialize&&e[n].initialize(t)},i.decisionInstanceVars={read:["decisionInstance","decisionData"]},i.decisionInstanceTabs=s.getProviders({component:"cockpit.decisionInstance.tab"}),i.decisionInstanceActions=s.getProviders({component:"cockpit.decisionInstance.action"});for(var f=s.getProviders({component:"cockpit.decisionInstance.tab"}).concat(s.getProviders({component:"cockpit.decisionInstance.action"})),h={decisionInstance:a,decisionData:u},m=0;m<f.length;m++)"function"==typeof f[m].initialize&&f[m].initialize(h);i.selectTab=function(e){i.selectedTab=e,c.updateSilently({detailsTab:e.id})},function(e){var t=c().detailsTab;if(e&&e.length){if(t){var n=s.getProvider({component:"cockpit.decisionInstance.tab",id:t});if(n&&-1!=e.indexOf(n))return i.selectedTab=n}c.updateSilently({detailsTab:null}),i.selectedTab=e[0]}}(i.decisionInstanceTabs)}],a=["$routeProvider",function(e){e.when("/decision-instance/:id",{redirectTo:function(e,t,n){var i=t+"/history";return g.redirectTo(i,n,!0)}}),e.when("/decision-instance/:id/history",{template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/pages/decision-instance.html --\x3e\n<div class="ctn-fixed-view decision-page-layout">\n  <div class="ctn-content-container"\n       ctn-collapsable-parent="sidebar">\n\n    \x3c!-- tool bar --\x3e\n    <div class="ctn-toolbar">\n\n      \x3c!-- Toolbar actions are provided by plugins --\x3e\n      <span ng-repeat="tabProvider in decisionInstanceActions">\n        <view provider="tabProvider"\n              vars="decisionInstanceVars" />\n      </span>\n\n    </div>\n\n\n    \x3c!-- sidebar --\x3e\n    <div class="ctn-column ctn-sidebar ctn-scroll"\n         cam-hover-area\n         ctn-collapsable="left">\n      <dl class="process-information">\n        <dt cam-widget-clipboard="decisionInstance.id"\n            cam-hoverable-title="instance-id">\n          <span uib-tooltip="{{ \'DECISION_INSTANCE_TOOLTIP_INSTANCE_ID\' |  translate }}">{{ \'DECISION_INSTANCE_INSTANCE_ID\' |  translate }}</span>\n        </dt>\n        <dd class="instance-id"\n            cam-hover-trigger="instance-id">{{ decisionInstance.id }}</dd>\n\n        <dt>{{ \'DECISION_INSTANCE_DEFINITION_VERSION\' |  translate }}</dt>\n        <dd class="definition-version">{{decisionDefinition.version}}</dd>\n\n        <dt cam-widget-clipboard="decisionInstance.decisionDefinitionId"\n            cam-hoverable-title="definition-id">{{ \'DECISION_INSTANCE_DEFINITION_ID\' |  translate }}</dt>\n        <dd class="definition-id"\n            cam-hover-trigger="definition-id">\n          <a ng-href="#/decision-definition/{{ decisionInstance.decisionDefinitionId }}">{{ decisionInstance.decisionDefinitionId }}</a>\n        </dd>\n\n        <dt cam-widget-clipboard="decisionInstance.decisionDefinitionKey"\n            cam-hoverable-title="definition-key">{{ \'DECISION_INSTANCE_DEFINITION_KEY\' |  translate }}</dt>\n        <dd class="definition-key"\n            cam-hover-trigger="definition-key">{{ decisionInstance.decisionDefinitionKey }}</dd>\n\n        <dt>{{ \'DECISION_INSTANCE_DEFINITION_NAME\' |  translate }}</dt>\n        <dd class="definition-name"\n            ng-if="decisionInstance.decisionDefinitionName && decisionInstance.decisionDefinitionName !== decisionInstance.key">{{ decisionInstance.decisionDefinitionName }}</dd>\n        <dd class="definition-name"\n            ng-if="!decisionInstance.decisionDefinitionName || decisionInstance.decisionDefinitionName === decisionInstance.key"><span class="null-value">{{ \'DECISION_INSTANCE_NULL\' |  translate }}</span></dd>\n\n        <dt ng-if="decisionInstance.tenantId"\n            cam-widget-clipboard="decisionInstance.tenantId"\n            cam-hoverable-title="tenant-id">{{ \'DECISION_INSTANCE_TENANT_ID\' |  translate }}</dt>\n        <dd class="tenant-id"\n            ng-if="decisionInstance.tenantId"\n            cam-hover-trigger="tenant-id">{{ decisionInstance.tenantId }}</dd>\n        <dt ng-if="!decisionInstance.tenantId">{{ \'DECISION_INSTANCE_TENANT_ID\' |  translate }}</dt>\n        <dd class="tenant-id"\n            ng-if="!decisionInstance.tenantId"><span class="null-value">{{ \'DECISION_INSTANCE_NULL\' |  translate }}</span></dd>\n\n        <dt cam-widget-clipboard="decisionDefinition.deploymentId"\n            cam-hoverable-title="deployment-id">{{ \'DECISION_INSTANCE_DEPLOYMENT_ID\' |  translate }}</dt>\n        <dd class="deployment-id"\n            ng-if="decisionDefinition"\n            cam-hover-trigger="deployment-id">\n          <a ng-href="{{ getDeploymentUrl() }}">{{ decisionDefinition.deploymentId }}</a>\n        </dd>\n\n        <dt ng-if="decisionInstance.processInstanceId"\n            cam-widget-clipboard="decisionInstance.processInstanceId"\n            cam-hoverable-title="super-process-instance-id">{{ \'DECISION_INSTANCE_PROCESS_INSTANCE_ID\' |  translate }}</dt>\n        <dd class="super-process-instance-id"\n            ng-if="decisionInstance.processInstanceId"\n            cam-hover-trigger="super-process-instance-id">\n          <a ng-href="{{ processInstanceLink }}">{{ decisionInstance.processInstanceId }}</a>\n        </dd>\n        <dt ng-if="!decisionInstance.processInstanceId">{{ \'DECISION_INSTANCE_PROCESS_INSTANCE_ID\' |  translate }}</dt>\n        <dd class="super-process-instance-id"\n            ng-if="!decisionInstance.processInstanceId"><span class="null-value">{{ \'DECISION_INSTANCE_NULL\' |  translate }}</span></dd>\n\n        <dt ng-if="decisionInstance.caseInstanceId"\n            cam-widget-clipboard="decisionInstance.caseInstanceId"\n            cam-hoverable-title="super-case-instance-id">{{ \'DECISION_INSTANCE_CASE_INSTANCE_ID\' |  translate }}</dt>\n        <dd class="super-case-instance-id"\n            ng-if="decisionInstance.caseInstanceId"\n            cam-hover-trigger="super-case-instance-id">\n          <a ng-if="hasCasePlugin"\n             ng-href="#/case-instance/{{decisionInstance.caseInstanceId}}?searchQuery={{ getActivitySearch(decisionInstance) }}">\n            {{ decisionInstance.caseInstanceId }}\n          </a>\n          <span ng-if="!hasCasePlugin">\n            {{ decisionInstance.caseInstanceId }}\n          </span>\n        </dd>\n        <dt ng-if="!decisionInstance.caseInstanceId">{{ \'DECISION_INSTANCE_CASE_INSTANCE_ID\' |  translate }}</dt>\n        <dd class="super-case-instance-id"\n            ng-if="!decisionInstance.caseInstanceId"><span class="null-value">{{ \'DECISION_INSTANCE_NULL\' |  translate }}</span></dd>\n\n\n        <dt ng-if="decisionInstance.decisionRequirementsDefinitionId"\n            cam-widget-clipboard="decisionInstance.decisionRequirementsDefinitionId"\n            cam-hoverable-title="drd">{{ \'DECISION_INSTANCE_DECISION_REQUIREMENTS_DEFINITION\' |  translate }}</dt>\n        <dd class="super-case-instance-id"\n            ng-if="decisionInstance.decisionRequirementsDefinitionId"\n            cam-hover-trigger="drd">\n          <a ng-if="hasCasePlugin"\n             ng-href="#/decision-requirement/{{decisionInstance.decisionRequirementsDefinitionId}}/history">\n            {{ decisionInstance.decisionRequirementsDefinitionId }}\n          </a>\n          <span ng-if="!hasCasePlugin">\n            {{ decisionInstance.decisionRequirementsDefinitionId }}\n          </span>\n        </dd>\n        <dt ng-if="!decisionInstance.decisionRequirementsDefinitionId">{{ \'DECISION_INSTANCE_DECISION_REQUIREMENTS_DEFINITION\' |  translate }}</dt>\n        <dd class="super-case-instance-id"\n            ng-if="!decisionInstance.decisionRequirementsDefinitionId"><span class="null-value">{{ \'DECISION_INSTANCE_NULL\' |  translate }}</span></dd>\n\n      </dl>\n\n      <a class="hide-collapsable pull-right"></a>\n    </div>\n\n    <div class="ctn-column ctn-content"\n         ctn-collapsable-parent="tabs">\n\n      \x3c!-- content top pane --\x3e\n      <div class="ctn-row ctn-content-top"\n           ctn-collapsable="top">\n        <div decision-table="tableXml"\n             table="{{decisionDefinition.key}}"\n             control="control"\n             on-load="initializeTablePlugins()"\n             style="height: 100%;padding:20px 10px;margin:0;"></div>\n        <a class="hide-collapsable vertical-collapse"\n           title="{{ \'DECISION_INSTANCE_SHOW_TABS\' |  translate }}"></a>\n\n        <a class="maximize-collapsable vertical-collapse"\n           maximize-parent-direction="left"\n           title="{{ \'DECISION_INSTANCE_MAXIMIZE_DIAGRAM\' |  translate }}"></a>\n\n        <a class="restore-collapsable vertical-collapse"\n           maximize-parent-direction="left"\n           title="{{ \'DECISION_INSTANCE_RESTORE_DEFAULT_SIZE\' |  translate }}"></a>\n      </div>\n\n      \x3c!-- content bottom pane --\x3e\n      <div class="ctn-row ctn-content-bottom ctn-tabbed">\n        <a class="show-collapsable vertical-collapse"\n           title="{{ \'DECISION_INSTANCE_HIDE_TABS\' |  translate }}"></a>\n        <div ng-show="decisionInstanceTabs.length">\n          <ul class="nav nav-tabs">\n            <li ng-class="{ active: selectedTab == tabProvider }"\n                ng-repeat="tabProvider in decisionInstanceTabs">\n              \x3c!-- translation of the title the of label <a> --\x3e\n              <a href ng-click="selectTab(tabProvider)">{{ tabProvider.label | translate}}</a>\n            </li>\n          </ul>\n\n          <div class="ctn-tabbed-content ctn-scroll">\n            <view provider="selectedTab"\n                  vars="decisionInstanceVars" />\n          </div>\n        </div>\n      </div>\n\n      <a class="show-collapsable"></a>\n    </div>\n\n  </div>\n\n</div>\x3c!-- end .ctn-fixed-view --\x3e\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/pages/decision-instance.html --\x3e\n',controller:o,authentication:"required",resolve:{decisionInstance:["ResourceResolver","camAPI","$q",function(e,t,i){return e.getByRouteParam("id",{name:"decision instance",resolve:function(e){var n=i.defer();return t.resource("history").decisionInstance({decisionInstanceId:e,includeInputs:!0,includeOutputs:!0,disableBinaryFetching:!0,disableCustomObjectDeserialization:!0},function(e,t){!e&&t.length?n.resolve(t[0]):n.reject(e||{status:404})}),n.promise}})}]},reloadOnSearch:!1})}];r.config(a).config(["ViewsProvider",function(e){e.registerDefaultView("cockpit.decisionInstance.view",{id:"history",priority:20,label:"History",keepSearchParams:[]})}]),t.exports=r},{"../../../../common/scripts/util/routeUtil":276,"angular-data-depend":"angular-data-depend","camunda-commons-ui/lib":80,"camunda-commons-ui/vendor/angular":127}],186:[function(e,t,n){"use strict";var i=["$scope","Views","page","$translate",function(e,t,n,i){e.$root.showBreadcrumbs=!0,n.breadcrumbsClear(),n.breadcrumbsAdd({label:i.instant("DECISION_INSTANCE_DECISIONS")}),n.titleSet(i.instant("DECISION_INSTANCE_DECISIONS")),e.plugins=t.getProviders({component:"cockpit.decisions.dashboard"})}],r=["$routeProvider",function(e){e.when("/decisions",{template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/pages/dashboard.html --\x3e\n<div class="ctn-view cockpit-section-dashboard decisions-dashboard">\n  <view ng-repeat="plugin in plugins"\n        class="dashboard-view"\n        data-plugin-id="{{ plugin.id }}"\n        provider="plugin"></view>\n</div>\x3c!-- end .ctn-view --\x3e\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/pages/dashboard.html --\x3e\n',controller:i,authentication:"required",reloadOnSearch:!1})}];t.exports=r},{}],187:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./dashboard"),o=e("./processes"),a=e("./decisions"),s=e("./tasks"),c=e("./processDefinition"),l=e("./processInstance"),u=e("./decisionDefinition"),p=e("./decisionInstance"),d=i.module("cam.cockpit.pages",[c.name,l.name,u.name,p.name]);d.config(r),d.config(o),d.config(a),d.config(s),t.exports=d},{"./dashboard":183,"./decisionDefinition":184,"./decisionInstance":185,"./decisions":186,"./processDefinition":188,"./processInstance":189,"./processes":190,"./tasks":191,"camunda-commons-ui/vendor/angular":127}],188:[function(e,t,n){"use strict";var T=e("camunda-commons-ui/vendor/angular"),O=e("../../../../common/scripts/util/routeUtil"),A=e("../../../../common/scripts/util/search-widget-utils"),i=e("camunda-commons-ui/lib"),r=T.module("cam.cockpit.pages.processDefinition",["dataDepend",i.name]),o=["$location","$scope","$rootScope","$q","$filter","search","ProcessDefinitionResource","ProcessInstanceResource","JobDefinitionResource","Views","Data","Transform","Variables","dataDepend","processDefinition","page","$translate",function(t,a,e,n,s,o,i,r,c,l,u,p,d,f,h,m,v){var g=a.processData=f.create(a),y=a.pageData=f.create(a);a.diagramCollapsed=!0,a.onDiagramCollapseChange=function(e){a.$$phase?a.diagramCollapsed=e:a.$apply(function(){a.diagramCollapsed=e})},a.hovered=null,a.hoverTitle=function(e){a.hovered=e||null},a.$on("$locationChangeSuccess",function(){var e=_();-1<t.path().indexOf(h.id)&&(A.shouldUpdateFilter(e,b,["activityIds","parentProcessDefinitionId"])&&g.set("filter",e),k(a.processDefinitionTabs))});var b=null;function _(){var e=o();return{activityIds:A.getActivityIdsFromUrlParams("activityIdIn",e),parentProcessDefinitionId:e.parentProcessDefinitionId}}function w(e){var t=e.activityIds,n=e.parentProcessDefinitionId,i=o(),r=JSON.parse(i.searchQuery||"[]");r=i.searchQuery||t.length?A.replaceActivitiesInSearchQuery(r,"activityIdIn",t):null,o.updateSilently({parentProcessDefinitionId:n||null,searchQuery:r?JSON.stringify(r):null}),b=e}g.provide("processDefinition",h),g.provide("filter",_()),g.provide("parentId",["filter",function(e){return e.parentProcessDefinitionId}]),g.provide("parent",["parentId",function(e){return e?i.get({id:e}).$promise:null}]),g.provide("instances.all",["processDefinition",function(e){var t={processDefinitionKey:e.key};return e.tenantId?t.tenantIdIn=[e.tenantId]:t.processDefinitionWithoutTenantId=!0,r.count(t).$promise}]),g.provide("instances.current",["processDefinition",function(e){return r.count({processDefinitionId:e.id}).$promise}]),g.provide("bpmn20Xml",["processDefinition",function(e){return i.getBpmn20Xml({id:e.id}).$promise}]),g.provide("parsedBpmn20",["bpmn20Xml",function(e){return p.transformBpmn20Xml(e.bpmn20Xml)}]),g.provide("bpmnElements",["parsedBpmn20",function(e){return e.bpmnElements}]),g.provide("bpmnDefinition",["parsedBpmn20",function(e){return e.definitions}]),g.provide("allProcessDefinitions",["processDefinition",function(e){var t={key:e.key,sortBy:"version",sortOrder:"desc"};return e.tenantId?t.tenantIdIn=[e.tenantId]:t.withoutTenantId=!0,i.query(t).$promise}]),g.provide("processDiagram",["bpmnDefinition","bpmnElements",function(e,t){var n=a.processDiagram=a.processDiagram||{};return T.extend(n,{bpmnDefinition:e,bpmnElements:t}),n}]),g.provide("activityInstances",["processDefinition",function(e){return c.query({processDefinitionId:e.id}).$promise}]),g.provide(["activityIdToInstancesMap"],["activityInstances","processDefinition","bpmnElements",function(e,t,r){var n,i=r[t.key];function o(e){var t=s("shorten");return e.name||e.$type.substr(5)+" ("+t(e.id,8)+")"}return e.name=o(i),[(n=e)&&n.map(function(e){var t={},n=e.activityId,i=r[n];return e.name=i?o(i):n,t[n]=[e],t})||{}]}]),e.showBreadcrumbs=!0,g.observe("allProcessDefinitions",function(e){a.allDefinitions=e}),a.breadcrumbData=g.observe(["processDefinition","parent"],function(t,e){m.breadcrumbsClear(),m.breadcrumbsAdd({label:v.instant("PROCESS_DEFINITION_PROCESSES"),href:"#/processes/"}),e&&m.breadcrumbsAdd({type:"processDefinition",label:e.name||e.id.slice(0,8)+"…",href:"#/process-definition/"+e.id+"/runtime",processDefinition:e});var n=l.getProviders({component:"cockpit.processDefinition.view"});m.breadcrumbsAdd({type:"processDefinition",label:t.name||t.key||t.id,href:"#/process-definition/"+t.id+"/runtime",processDefinition:t,choices:n.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}).map(function(e){return{active:"runtime"===e.id,label:e.label,href:"#/process-definition/"+t.id+"/"+e.id}})}),m.titleSet((t.name||t.key||t.id).toString())}),a.instanceStatistics=g.observe(["instances.all","instances.current"],function(e,t){a.instanceStatistics.all=e,a.instanceStatistics.current=t}),a.processDiagramData=g.observe("processDiagram",function(e){a.processDiagram=e}),g.observe("filter",function(e){if(b!==e){var t=e.activityIds,n=null,i=!1;t&&t.length&&(n=t[t.length-1]),e.scrollToBpmnElement!==n&&(i=!0),e!==b&&w(e),a.filter=b=T.extend({},e,{scrollToBpmnElement:n}),i&&g.set("filter",b),w(b)}}),a.handleBpmnElementSelection=function(e,t){var n=T.copy(b),i=t.ctrlKey,r=T.copy(n.activityIds)||[],o=-1!==r.indexOf(e);n.activityIds=function(t,e,n,i){if(!t)return[];if(n&i)return e.filter(function(e){return e!==t&&e!==t+"#multiInstanceBody"});var r=[t];!function(e){return a.processDiagram.bpmnElements[e].loopCharacteristics}(t)||r.push(t+"#multiInstanceBody");return(n?e:[]).concat(r)}(e,r,i,o),g.set("filter",n)},a.processDefinition=h,a.processDefinitionVars={read:["processDefinition","selection","processData","filter","pageData","instanceStatistics","allDefinitions"]},a.processDefinitionTabs=l.getProviders({component:"cockpit.processDefinition.runtime.tab"}),a.processDefinitionActions=l.getProviders({component:"cockpit.processDefinition.runtime.action"}),u.instantiateProviders("cockpit.processDefinition.data",{$scope:a,processData:g}),a.hasReportPlugin=0<l.getProviders({component:"cockpit.report"}).length,a.hasMigrationPlugin=!1;try{a.hasMigrationPlugin=!!T.module("cockpit.plugin.migration")}catch(e){}for(var x=l.getProviders({component:"cockpit.processDefinition.runtime.tab"}).concat(l.getProviders({component:"cockpit.processDefinition.runtime.action"})).concat(l.getProviders({component:"cockpit.processDefinition.view"})).concat(l.getProviders({component:"cockpit.processDefinition.diagram.overlay"})).concat(l.getProviders({component:"cockpit.jobDefinition.action"})),E={processDefinition:h,processData:g,pageData:y},C=0;C<x.length;C++)"function"==typeof x[C].initialize&&x[C].initialize(E);function k(e){var t=o().detailsTab;if(e&&e.length){if(t){var n=l.getProvider({component:"cockpit.processDefinition.runtime.tab",id:t});if(n&&-1!=e.indexOf(n))return void(a.selectedTab=n)}o.updateSilently({detailsTab:null}),a.selectedTab=e[0]}}function S(){if(a.allDefinitions)return Math.max.apply(null,a.allDefinitions.map(function(e){return e.version}))}a.selectTab=function(e){a.selectedTab=e,o.updateSilently({detailsTab:e.id})},k(a.processDefinitionTabs),a.getDeploymentUrl=function(){var e=h.deploymentId,t={deployment:e,resourceName:h.resource,deploymentsQuery:JSON.stringify([{type:"id",operator:"eq",value:e}])};return O.redirectTo("#/repository",t,["deployment","resourceName","deploymentsQuery"])},a.isLatestVersion=function(){return a.processDefinition&&a.processDefinition.version===S()},a.getMigrationUrl=function(){var e=S(),t={sourceKey:a.processDefinition.key,targetKey:a.processDefinition.key,sourceVersion:a.isLatestVersion()?a.processDefinition.version-1:a.processDefinition.version,targetVersion:a.isLatestVersion()?a.processDefinition.version:e};return O.redirectTo("#/migration",t,["sourceKey","targetKey","sourceVersion","targetVersion"])}}],a=["$routeProvider",function(e){e.when("/process-definition/:id",{redirectTo:O.redirectToRuntime}).when("/process-definition/:id/runtime",{template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/pages/process-definition.html --\x3e\n<div class="ctn-fixed-view">\n  <div class="ctn-content-container"\n       ctn-collapsable-parent="sidebar"\n       ctn-min-width=".nav-tabs li">\n\n    \x3c!-- tool bar --\x3e\n    <div class="ctn-toolbar">\n\n      \x3c!-- Toolbar actions are provided by plugins --\x3e\n      <span ng-repeat="actionProvider in processDefinitionActions">\n        <view provider="actionProvider"\n              vars="processDefinitionVars" />\n      </span>\n    </div>\n\n    \x3c!-- sidebar --\x3e\n    <div class="ctn-column ctn-sidebar ctn-scroll"\n         cam-hover-area\n         ctn-collapsable="left">\n\n      <dl class="process-information">\n        <dt>{{ \'PROCESS_DEFINITION_DEFINITION_VERSION\' | translate }}</dt>\n        <dd class="definition-version">\n          <span ng-if="!instanceStatistics.$loaded"\n                class="glyphicon glyphicon-refresh animate-spin"></span>\n\n          <div class="dropdown"\n               ng-if="instanceStatistics.$loaded && allDefinitions.length > 1"\n               uib-dropdown>\n            <a href\n               class="dropdown-toggle"\n               uib-dropdown-toggle>\n              {{ processDefinition.version }}\n              <span class="caret"></span>\n            </a>\n\n            <ul uib-dropdown-menu class="dropdown-menu">\n              <li ng-repeat="definition in allDefinitions">\n                <a ng-href="#/process-definition/{{ definition.id }}">\n                  {{ definition.version }}\n                </a>\n              </li>\n            </ul>\n          </div>\n\n          <span ng-if="instanceStatistics.$loaded && allDefinitions.length < 2">\n            {{ processDefinition.version }}\n          </span>\n        </dd>\n\n        <dt>{{ \'PROCESS_DEFINITION_VERSION_TAG\' | translate }}</dt>\n        <dd class="version-tag"\n            ng-if="processDefinition.versionTag">{{ processDefinition.versionTag }}</dd>\n        <dd class="version-tag"\n            ng-if="!processDefinition.versionTag"><span class="null-value">{{ \'PROCESS_DEFINITION_NULL\' | translate }}</span></dd>\n\n        <dt cam-widget-clipboard="processDefinition.id"\n            cam-hoverable-title="definition-id">{{ \'PROCESS_DEFINITION_DEFINITION_ID\' | translate }}</dt>\n        <dd class="definition-id" cam-hover-trigger="definition-id">{{ processDefinition.id }}</dd>\n\n        <dt cam-widget-clipboard="processDefinition.key"\n            cam-hoverable-title="definition-key">{{ \'PROCESS_DEFINITION_DEFINITION_KEY\' | translate }}</dt>\n        <dd class="definition-key" cam-hover-trigger="definition-key">{{ processDefinition.key }}</dd>\n\n        <dt>{{ \'PROCESS_DEFINITION_DEFINITION_NAME\' | translate }}</dt>\n        <dd class="definition-name"\n            ng-if="processDefinition.name">{{ processDefinition.name }}</dd>\n        <dd class="definition-name"\n            ng-if="!processDefinition.name"><span class="null-value">{{ \'PROCESS_DEFINITION_NULL\' | translate }}</span></dd>\n\n        <dt cam-widget-clipboard="processDefinition.historyTimeToLive"\n            cam-hoverable-title="history-time-to-live">\n            {{ \'PROCESS_DEFINITION_HISTORY_TIME_TO_LIVE\' | translate }}\n        </dt>\n        <dd class="history-time-to-live" cam-hover-trigger="history-time-to-live">\n          <span time-to-live="processDefinition" resource="process-definition"></span>\n        </dd>\n\n        <dt ng-if="processDefinition.tenantId"\n            cam-widget-clipboard="processDefinition.tenantId"\n            cam-hoverable-title="tenant-id">{{ \'PROCESS_DEFINITION_TENANT_ID\' | translate }}</dt>\n        <dd class="tenant-id"\n            ng-if="processDefinition.tenantId" cam-hover-trigger="tenant-id">\n            {{ processDefinition.tenantId }}\n        </dd>\n        <dt ng-if="!processDefinition.tenantId">{{ \'PROCESS_DEFINITION_TENANT_ID\' | translate }}</dt>\n        <dd class="tenant-id"\n            ng-if="!processDefinition.tenantId"><span class="null-value">{{ \'PROCESS_DEFINITION_NULL\' | translate }}</span></dd>\n\n        <dt cam-widget-clipboard="processDefinition.deploymentId"\n            cam-hoverable-title="deployment-id">{{ \'PROCESS_DEFINITION_DEPLOYMENT_ID\' | translate }}</dt>\n        <dd class="deployment-id" cam-hover-trigger="deployment-id">\n          <a ng-href="{{ getDeploymentUrl() }}">{{ processDefinition.deploymentId }}</a>\n        </dd>\n\n        <dt>{{ \'PROCESS_DEFINITION_INSTANCES_RUNNING\' | translate }}</dt>\n        <dd class="running-instances">\n          <span ng-if="!instanceStatistics.$loaded"\n                class="glyphicon glyphicon-refresh animate-spin"></span>\n          <ul ng-if="instanceStatistics.$loaded">\n            <li>\n              {{ \'PROCESS_DEFINITION_CURRENT_VERSION\' | translate }}\n              <strong class="current-version">{{ instanceStatistics.current.count }}</strong>\n              <a ng-href="{{ getMigrationUrl() }}"\n                 class="instance-upgrade-link"\n                 ng-if="hasMigrationPlugin && !isLatestVersion() && instanceStatistics.current.count > 0">\n                <span class="glyphicon glyphicon-arrow-up"\n                      uib-tooltip="{{ \'PROCESS_DEFINITION_TOOLTIP_MIGRATE_PROCESS\' | translate }}"></span>\n              </a>\n            </li>\n            <li>\n              {{ \'PROCESS_DEFINITION_ALL_VERSIONS\' | translate }}\n              <strong class="all-versions">{{ instanceStatistics.all.count }}</strong>\n              <a ng-href="{{ getMigrationUrl() }}"\n                 class="instance-upgrade-link"\n                 ng-if="hasMigrationPlugin && isLatestVersion() && instanceStatistics.all.count !== instanceStatistics.current.count">\n                <span class="glyphicon glyphicon-arrow-up"\n                      uib-tooltip="{{ \'PROCESS_DEFINITION_TOOLTIP_MIGRATE_PROCESS\' | translate }}"></span>\n              </a>\n            </li>\n          </ul>\n        </dd>\n\n        <dt ng-if="hasMigrationPlugin || hasReportPlugin">{{ \'PROCESS_DEFINITION_RELATED\' | translate }}</dt>\n        <dd ng-if="hasMigrationPlugin || hasReportPlugin">\n          <ul>\n            <li ng-if="hasReportPlugin">\n              <a class="report-link"\n                 ng-href="#/reports/reporting-duration-report?processDefinitionKey={{ processDefinition.key }}&processDefinitionVersion={{ processDefinition.version }}">\n                {{ \'PROCESS_DEFINITION_REPORTS\' | translate }}\n              </a>\n            </li>\n            <li ng-if="hasMigrationPlugin">\n              <a ng-href="#/migration?searchQuery=%5B%5D&sourceKey={{ processDefinition.key }}">{{ \'PROCESS_DEFINITION_MIGRATION\' | translate }}</a>\n            </li>\n          </ul>\n        </dd>\n      </dl>\n\n      <a class="hide-collapsable pull-right"></a>\n    </div>\n\n    <div class="ctn-column ctn-content"\n         ctn-collapsable-parent="tabs">\n      <a class="show-collapsable"></a>\n\n      \x3c!-- content top pane --\x3e\n      <div class="ctn-row ctn-content-top"\n           is-sidebar-collapsed="onDiagramCollapseChange(collapsed)"\n           ctn-collapsable="top">\n        <div process-diagram="processDiagram"\n             key="{{processDefinition.id}}"\n             on-element-click="handleBpmnElementSelection(id, $event)"\n             selection="filter"\n             process-data="processData"\n             page-data="pageData"\n             collapsed="diagramCollapsed"\n             overlay-provider-component="cockpit.processDefinition.diagram.overlay"\n             diagram-provider-component="cockpit.processDefinition.diagram.plugin"\n             action-provider-component="cockpit.processDefinition.diagram.action"\n             viewer="diagramViewer"></div>\n\n        <a class="hide-collapsable vertical-collapse"\n           title="{{ \'PROCESS_DEFINITION_SHOW_TABS\' | translate }}"></a>\n\n        <a class="maximize-collapsable vertical-collapse"\n           maximize-parent-direction="left"\n           title="{{ \'PROCESS_DEFINITION_MAXIMIZE_DIAGRAM\' | translate }}"></a>\n\n        <a class="restore-collapsable vertical-collapse"\n          maximize-parent-direction="left"\n          title="{{ \'PROCESS_DEFINITION_RESTORE_DEFAULT_SIZE\' | translate }}"></a>\n      </div>\n\n      \x3c!-- content bottom pane --\x3e\n      <div class="ctn-row ctn-content-bottom ctn-tabbed">\n        <a class="show-collapsable vertical-collapse"\n           title="{{ \'PROCESS_DEFINITION_HIDE_TABS\' | translate }}"></a>\n\n        <div ng-show="processDefinitionTabs.length">\n          <ul class="nav nav-tabs">\n            <li ng-class="{ active: selectedTab == tabProvider }"\n                ng-repeat="tabProvider in processDefinitionTabs">\n              <a href ng-click="selectTab(tabProvider)">{{ tabProvider.label | translate }}</a>\n            </li>\n          </ul>\n\n          <div class="ctn-tabbed-content ctn-scroll">\n            <view provider="selectedTab"\n                  vars="processDefinitionVars" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</div>\x3c!-- end .ctn-fixed-view --\x3e\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/pages/process-definition.html --\x3e\n',controller:o,authentication:"required",resolve:{processDefinition:["ResourceResolver","ProcessDefinitionResource",function(e,t){return e.getByRouteParam("id",{name:"process definition",resolve:function(e){return t.get({id:e})}})}]},reloadOnSearch:!1})}];r.config(a).config(["ViewsProvider",function(e){e.registerDefaultView("cockpit.processDefinition.view",{id:"runtime",priority:20,label:"BREAD_CRUMBS_RUNTIME",keepSearchParams:["parentProcessDefinitionId","businessKey","variables","startedAfter","startedBefore","viewbox"]})}]),t.exports=r},{"../../../../common/scripts/util/routeUtil":276,"../../../../common/scripts/util/search-widget-utils":277,"camunda-commons-ui/lib":80,"camunda-commons-ui/vendor/angular":127}],189:[function(e,t,n){"use strict";var C=e("camunda-commons-ui/vendor/angular"),i=e("../../../../common/scripts/module"),k=e("../../../../common/scripts/util/routeUtil"),r=e("camunda-commons-ui/lib"),o=C.module("cam.cockpit.pages.processInstance",[r.name,i.name,"dataDepend"]),a=["$scope","$filter","$rootScope","$location","search","ProcessDefinitionResource","ProcessInstanceResource","IncidentResource","Views","Data","Transform","processInstance","dataDepend","page","breadcrumbTrails","integrateActivityInstanceFilter","isModuleAvailable","$translate",function(h,i,e,t,n,r,o,a,s,c,l,u,p,d,f,m,v,g){h.hasMigrationPlugin=v("cockpit.plugin.migration"),h.processInstance=u;var y=h.processData=p.create(h),b=h.pageData=p.create(h);function _(e,n){o.query({subProcessInstance:e.id}).$promise.then(function(e){var t=e[0];n(null,t)}).catch(C.noop)}h.diagramCollapsed=!0,h.onDiagramCollapseChange=function(e){h.$$phase?h.diagramCollapsed=e:h.$apply(function(){h.diagramCollapsed=e})},h.hovered=null,h.hoverTitle=function(e){h.hovered=e||null},y.provide("processInstance",u),y.provide("processDefinition",["processInstance",function(e){return r.get({id:e.definitionId}).$promise}]),y.provide("bpmn20Xml",["processDefinition",function(e){return r.getBpmn20Xml({id:e.id}).$promise}]),y.provide("parsedBpmn20",["bpmn20Xml",function(e){return l.transformBpmn20Xml(e.bpmn20Xml)}]),y.provide("bpmnElements",["parsedBpmn20",function(e){return e.bpmnElements}]),y.provide("bpmnDefinition",["parsedBpmn20",function(e){return e.definitions}]),y.provide("activityInstances",["processInstance",function(e){return o.activityInstances({id:e.id}).$promise}]),y.provide(["activityInstanceTree","activityIdToInstancesMap","instanceIdToInstanceMap"],["activityInstances","processDefinition","bpmnElements",function(e,t,h){var m={},v={},n=h[t.key];function g(e){var t=e.name;if(!t){var n=i("shorten");t=e.$type.substr(5)+" ("+n(e.id,8)+")"}return t}return e.name=g(n),function e(t){var n=t.childActivityInstances;if(n&&0<n.length)for(var i,r=0;i=n[r];r++){var o=i.activityId,a=h[o],s=m[o]||[];i.name=a?g(a):o,i.isTransitionInstance=!1,m[o]=s,v[i.id]||(v[i.id]=i),s.push(i),e(i)}var c=t.childTransitionInstances;if(c&&0<c.length)for(var l,u=0;l=c[u];u++){var p=l.targetActivityId,d=h[p],f=m[p]||[];l.name=d?g(d):p,l.isTransitionInstance=!0,m[p]=f,v[l.id]||(v[l.id]=l),f.push(l)}}(v[e.id]=e),[e,m,v]}]),y.provide("executionIdToInstanceMap",["instanceIdToInstanceMap",function(e){var t={};for(var n in e){var i=e[n],r=i.executionIds,o=i.executionId;if(r)for(var a,s=0;a=r[s];s++)t[a]=i;o&&(t[o]=i)}return t}]),y.provide("incidents",["processInstance",function(e){return a.query({processInstanceId:e.id}).$promise}]),y.provide("activityIdToIncidentsMap",["incidents",function(e){for(var t,n={},i=0;t=e[i];i++){var r=n[t.activityId];r||(r=[],n[t.activityId]=r),r.push(t)}return n}]),y.provide("processDiagram",["bpmnDefinition","bpmnElements",function(e,t){var n={};return n.bpmnDefinition=e,n.bpmnElements=t,n}]),y.provide("latestDefinition",["processDefinition",function(e){var t={key:e.key,sortBy:"version",sortOrder:"desc",latestVersion:!0};return e.tenantId?t.tenantIdIn=[e.tenantId]:t.withoutTenantId=!0,r.query(t).$promise}]),m(h,C.noop,{shouldRemoveActivityIds:!0}),h.processDefinition=y.observe("processDefinition",function(e){h.processDefinition=e}),h.latestProcessDefinition=y.observe("latestDefinition",function(e){h.latestProcessDefinition=e[0]}),h.isLatestVersion=function(){return h.processDefinition.version===h.latestProcessDefinition.version},h.getMigrationUrl=function(){var e={sourceKey:h.processDefinition.key,targetKey:h.latestProcessDefinition.key,sourceVersion:h.processDefinition.version,targetVersion:h.latestProcessDefinition.version,searchQuery:JSON.stringify([{type:"processInstanceIds",operator:"eq",value:h.processInstance.id}])};return k.redirectTo("#/migration",e,["sourceKey","targetKey","sourceVersion","targetVersion","searchQuery"])},h.getDeploymentUrl=function(){var e=h.processDefinition.deploymentId,t={deployment:e,resourceName:h.processDefinition.resource,deploymentsQuery:JSON.stringify([{type:"id",operator:"eq",value:e}])};return k.redirectTo("#/repository",t,["deployment","resourceName","deploymentsQuery"])},y.provide("superProcessInstance",["processInstance",function(e){return o.query({subProcessInstance:e.id}).$promise}]),e.showBreadcrumbs=!0,y.observe(["processDefinition","processInstance","superProcessInstance"],function(e,t,n){var i=[{label:g.instant("PROCESS_INSTANCE_PROCESSES"),href:"#/processes/"}];n.length&&(h.superProcessInstance=n[0],i.push(function(e){f(t,_,[],e,"runtime")})),i.push({label:e.name||e.key||e.id,href:"#/process-definition/"+e.id+"/runtime",keepSearchParams:["viewbox"]});var r=s.getProviders({component:"cockpit.processInstance.view"});i.push({type:"processInstance",divider:":",label:t.name||t.key||t.id,href:"#/process-instance/"+t.id+"/runtime",processInstance:t,choices:r.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}).map(function(e){return{active:"runtime"===e.id,label:e.label,href:"#/process-instance/"+t.id+"/"+e.id}})}),d.breadcrumbsClear().breadcrumbsAdd(i),d.titleSet([h.processDefinition.name||h.processDefinition.id,g.instant("PROCESS_INSTANCE_INSTANCE_VIEW")].join(" | "))}),h.activityInstanceTree=y.observe("activityInstanceTree",function(e){h.activityInstanceTree=e}),h.processDiagram=y.observe("processDiagram",function(e){h.processDiagram=e}),y.observe(["instanceIdToInstanceMap","activityIdToInstancesMap"],function(e,t){h.instanceIdToInstanceMap=e,h.activityIdToInstancesMap=t}),h.handleBpmnElementSelection=function(e,t){if(e){var n,i=t.ctrlKey,r=C.copy(h.filter.activityIds)||[],o=C.copy(h.filter.activityInstanceIds)||[],a=r.indexOf(e),s=C.copy(h.activityIdToInstancesMap[e])||[],c=h.activityIdToInstancesMap[e+"#multiInstanceBody"];c&&(Array.prototype.push.apply(s,c),-1===a&&(a=r.indexOf(e+"#multiInstanceBody"))),i?i&&(-1===a?(r.push(e),c&&r.push(e+"#multiInstanceBody"),C.forEach(s,function(e){o.push(e.id)})):-1!==a&&(r.splice(a,1),c&&r.splice(r.indexOf(e+"#multiInstanceBody"),1),C.forEach(s,function(e){var t=e.id,n=o.indexOf(t);-1!==n&&o.splice(n,1)}))):(r=[e],c&&r.push(e+"#multiInstanceBody"),o=[],C.forEach(s,function(e){o.push(e.id)})),n={activityIds:r,activityInstanceIds:o},y.set("filter",n)}else y.set("filter",{})},h.handleActivityInstanceSelection=function(e,t,n){if(e){var i,r=n.ctrlKey,o=C.copy(h.filter.activityIds)||[],a=C.copy(h.filter.activityInstanceIds)||[],s=a.indexOf(e),c=h.activityIdToInstancesMap[t];if(r){if(r)if(-1===s){a.push(e),-1===o.indexOf(t)&&o.push(t)}else{a.splice(s,1);var l=!1;if(c)for(var u,p=0;u=c[p];p++){var d=u.id;-1!==a.indexOf(d)&&(l=!0)}if(!l){var f=o.indexOf(t);o.splice(f,1)}}}else o=[t],a=[e];i={activityIds:o,activityInstanceIds:a,scrollToBpmnElement:t},y.set("filter",i)}else y.set("filter",{})},h.orderChildrenBy=function(){return function(e){var t=e.id,n=t.indexOf(":");return-1!==n?t.substr(n+1,t.length):t}},h.$on("$routeChangeStart",function(){d.breadcrumbsClear()}),h.processInstanceVars={read:["processInstance","processData","filter","pageData"]},h.processInstanceActions=s.getProviders({component:"cockpit.processInstance.runtime.action"}),c.instantiateProviders("cockpit.processInstance.data",{$scope:h,processData:y});var w=s.getProviders({component:"cockpit.processInstance.runtime.tab"}).concat(s.getProviders({component:"cockpit.processInstance.runtime.action"})).concat(s.getProviders({component:"cockpit.processInstance.view"})).concat(s.getProviders({component:"cockpit.processInstance.diagram.overlay"})),x={processInstance:u,processData:y,filter:h.filter,pageData:b};h.initData=x;for(var E=0;E<w.length;E++)"function"==typeof w[E].initialize&&w[E].initialize(x)}];o.controller("ProcessInstanceFilterController",["$scope","$translate",function(t,e){var i,n=t.processData.newChild(t);n.provide("filterData",["filter",function(e){if(i&&i.filter==e)return i;var t=e.activityIds||[],n=e.activityInstanceIds||[];return{filter:e,activityCount:t.length||0,activityInstanceCount:n.length||0}}]),n.observe(["filterData"],function(e){t.filterData=i=e}),t.clearSelection=function(){i={activityCount:0,activityInstanceCount:0,filter:{}},n.set("filter",i.filter)},t.getDataWhen=function(){return{null:e.instant("PAGES_PROCESS_INSTANCES_NOTHING"),0:e.instant("PAGES_PROCESS_INSTANCES_NOTHING"),one:e.instant("PAGES_PROCESS_INSTANCES_ONE_SELECT"),other:e.instant("PAGES_PROCESS_INSTANCES_OTHER_SELECT")}},t.sidebarTab="info"}]);var s=["$routeProvider",function(e){e.when("/process-instance/:id",{redirectTo:k.redirectToRuntime,reloadOnSearch:!1}),e.when("/process-instance/:id/runtime",{template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/pages/process-instance.html --\x3e\n<div class="ctn-fixed-view">\n  <div class="ctn-content-container"\n       ctn-collapsable-parent="sidebar">\n\n    \x3c!-- toolbar --\x3e\n    <div class="ctn-toolbar">\n\n      \x3c!-- Toolbar actions are provided by plugins --\x3e\n      <span ng-repeat="tabProvider in processInstanceActions">\n        <view provider="tabProvider"\n              vars="processInstanceVars" />\n      </span>\n\n    </div>\n\n    \x3c!-- sidebar --\x3e\n    <div class="ctn-column ctn-sidebar ctn-scroll"\n         ctn-collapsable="left"\n         ng-controller="ProcessInstanceFilterController">\n\n      <ul class="nav nav-tabs">\n        <li ng-class="{active: sidebarTab === \'info\'}">\n          <a ng-click="sidebarTab = \'info\'">{{ \'PROCESS_INSTANCE_INFORMATION\' | translate }}</a>\n        </li>\n        <li ng-class="{active: sidebarTab === \'filters\'}">\n          <a ng-click="sidebarTab = \'filters\'">{{ \'PROCESS_INSTANCE_FILTER\' | translate }}</a>\n        </li>\n      </ul>\n\n      <div class="tab-content"\n           ng-if="sidebarTab === \'info\'">\n        <dl class="process-information">\n          <dt cam-widget-clipboard="processInstance.id"\n              ng-class="{hovered: hovered === \'instance-id\'}">\n            <span uib-tooltip="{{ \'PROCESS_INSTANCE_TOOLTIP_INSTANCE_ID_DATABASE\' | translate }}">{{ \'PROCESS_INSTANCE_INSTANCE_ID\' | translate }}</span>\n          </dt>\n          <dd class="instance-id"\n              ng-mouseenter="hoverTitle(\'instance-id\')"\n              ng-mouseleave="hoverTitle()">\n            {{ processInstance.id }}\n          </dd>\n\n          <dt cam-widget-clipboard="processInstance.businessKey"\n              ng-class="{hovered: hovered === \'business-key\'}"\n              ng-if="processInstance.businessKey">\n            <span uib-tooltip="{{ \'PROCESS_INSTANCE_TOOLTIP_BUSINESS_KEY\' | translate }}">{{ \'PROCESS_INSTANCE_BUSINESS_KEY\' | translate }}</span>\n          </dt>\n          <dd ng-if="processInstance.businessKey"\n              class="business-key"\n              ng-mouseenter="hoverTitle(\'business-key\')"\n              ng-mouseleave="hoverTitle()">\n            {{ processInstance.businessKey }}\n          </dd>\n          <dt ng-if="!processInstance.businessKey">\n            <span uib-tooltip="{{ \'PROCESS_INSTANCE_TOOLTIP_BUSINESS_KEY\' | translate }}">{{ \'PROCESS_INSTANCE_BUSINESS_KEY\' | translate }}</span>\n          </dt>\n          <dd ng-if="!processInstance.businessKey"\n              class="business-key"><span class="null-value">{{ \'PROCESS_INSTANCE_NULL\' | translate }}</span></dd>\n\n          <dt>{{ \'PROCESS_INSTANCE_DEFINITION_VERSION\' | translate }}</dt>\n          <dd class="definition-version">\n            {{ processDefinition.version }}\n            <a ng-href="{{ getMigrationUrl() }}"\n               class="instance-upgrade-link"\n               ng-if="hasMigrationPlugin && !isLatestVersion()">\n              <span class="glyphicon glyphicon-arrow-up"\n                    uib-tooltip="{{ \'PROCESS_INSTANCE_TOOLTIP_MIGRATE_INSTANCE\' | translate }}"\n                    tooltip-placement="right"></span>\n            </a>\n          </dd>\n\n          <dt cam-widget-clipboard="processDefinition.id"\n              ng-class="{hovered: hovered === \'definition-id\'}">{{ \'PROCESS_INSTANCE_DEFINITION_ID\' | translate }}</dt>\n          <dd class="definition-id"\n              ng-mouseenter="hoverTitle(\'definition-id\')"\n              ng-mouseleave="hoverTitle()">\n            <a ng-href="#/process-definition/{{ processDefinition.id }}/runtime">{{ processDefinition.id }}</a>\n          </dd>\n\n          <dt cam-widget-clipboard="processDefinition.key"\n              ng-class="{hovered: hovered === \'definition-key\'}">{{ \'PROCESS_INSTANCE_DEFINITION_KEY\' | translate }}</dt>\n          <dd class="definition-key"\n              ng-mouseenter="hoverTitle(\'definition-key\')"\n              ng-mouseleave="hoverTitle()">{{ processDefinition.key }}</dd>\n\n          <dt>{{ \'PROCESS_INSTANCE_DEFINITION_NAME\' | translate }}</dt>\n          <dd class="definition-name">{{ processDefinition.name }}</dd>\n\n          <dt ng-if="processInstance.tenantId"\n              ng-class="{hovered: hovered === \'tenant-id\'}"\n              cam-widget-clipboard="processInstance.tenantId">{{ \'PROCESS_INSTANCE_TENANT_ID\' | translate }}</dt>\n          <dd class="tenant-id"\n              ng-if="processInstance.tenantId"\n              ng-mouseenter="hoverTitle(\'tenant-id\')"\n              ng-mouseleave="hoverTitle()">{{ processInstance.tenantId }}</dd>\n          <dt ng-if="!processInstance.tenantId">{{ \'PROCESS_INSTANCE_TENANT_ID\' | translate }}</dt>\n          <dd class="tenant-id"\n              ng-if="!processInstance.tenantId"><span class="null-value">{{ \'PROCESS_INSTANCE_NULL\' | translate }}</span></dd>\n\n          <dt cam-widget-clipboard="processDefinition.deploymentId"\n              ng-class="{hovered: hovered === \'deployment-id\'}">{{ \'PROCESS_INSTANCE_DEPLOYMENT_ID\' | translate }}</dt>\n          <dd class="deployment-id"\n              ng-mouseenter="hoverTitle(\'deployment-id\')"\n              ng-mouseleave="hoverTitle()">\n            <a ng-href="{{ getDeploymentUrl() }}">{{ processDefinition.deploymentId }}</a>\n          </dd>\n\n          <dt ng-if="superProcessInstance"\n              cam-widget-clipboard="superProcessInstance.id"\n              ng-class="{hovered: hovered === \'super-process-instance-id\'}">{{ \'PROCESS_INSTANCE_SUPER_PROCESS_INSTANCE_ID\' | translate }}</dt>\n          <dd class="super-process-instance-id"\n              ng-if="superProcessInstance.id"\n              ng-mouseenter="hoverTitle(\'super-process-instance-id\')"\n              ng-mouseleave="hoverTitle()">\n            <a ng-href="#/process-instance/{{superProcessInstance.id}}">{{ superProcessInstance.id }}</a>\n          </dd>\n          <dt ng-if="!superProcessInstance">{{ \'PROCESS_INSTANCE_SUPER_PROCESS_INSTANCE_ID\' | translate }}</dt>\n          <dd class="super-process-instance-id"\n              ng-if="!superProcessInstance">\n            <span class="null-value">null</span>\n          </dd>\n\n          <dt ng-if="hasMigrationPlugin">{{ \'PROCESS_INSTANCE_RELATED\' | translate }}</dt>\n          <dd ng-if="hasMigrationPlugin">\n            <ul>\n              <li>\n                <a ng-href="#/migration?searchQuery=%5B%5D&sourceKey={{ processDefinition.key }}">{{ \'PROCESS_INSTANCE_MIGRATION\' | translate }}</a>\n              </li>\n            </ul>\n          </dd>\n\n        </dl>\n      </div>\n\n      <div class="tab-content filters"\n           ng-if="sidebarTab === \'filters\'">\n        <h5>\n          {{ \'PROCESS_INSTANCE_FILTER\' | translate }}\n          <span class="glyphicon glyphicon-info-sign"\n                uib-tooltip="{{ \'PROCESS_INSTANCE_TOOLTIP_ACTIVITY_INSTANCE_TREE\' | translate }}"></span>\n        </h5>\n\n        <div cam-quick-filter\n             name-filter\n             holder-selector=".instance-tree"\n             label-selector=".tree-node-label"\n             item-selector=".tree-node-group">\n        </div>\n\n        <div class="filter-selection">\n          <button class="btn btn-link btn-xs btn-control"\n                  ng-show="filterData.activityInstanceCount"\n                  ng-click="clearSelection()">\n            <span class="glyphicon glyphicon-remove"></span>\n          </button>\n\n          <ng-pluralize count="filterData.activityInstanceCount"\n                        when="getDataWhen()">\n          </ng-pluralize>\n        </div>\n\n\n        <div class="filter instance-tree">\n          <div activity-instance-tree="activityInstanceTree"\n               selection="filter"\n               on-element-click="handleActivityInstanceSelection(id, activityId, $event)"\n               order-children-by="orderChildrenBy()">\n          </div>\n        </div>\n      </div>\n\n      <a class="hide-collapsable pull-right"></a>\n    </div>\n\n    <div class="ctn-column ctn-content"\n         ctn-collapsable-parent="tabs">\n\n      \x3c!-- content top pane --\x3e\n      <div class="ctn-row ctn-content-top"\n           is-sidebar-collapsed="onDiagramCollapseChange(collapsed)"\n           ctn-collapsable="top">\n        <div process-diagram="processDiagram"\n             key="{{processInstance.definitionId}}"\n             on-element-click="handleBpmnElementSelection(id, $event)"\n             selection="filter"\n             process-data="processData"\n             page-data="pageData"\n             collapsed="diagramCollapsed"\n             diagram-provider-component="cockpit.processInstance.diagram.plugin"\n             overlay-provider-component="cockpit.processInstance.diagram.overlay"></div>\n\n        <a class="hide-collapsable vertical-collapse"\n           title="{{ \'PROCESS_INSTANCE_SHOW_TABS\' | translate }}"></a>\n\n        <a class="maximize-collapsable vertical-collapse"\n           maximize-parent-direction="left"\n           title="{{ \'PROCESS_INSTANCE_MAXIMIZE_DIAGRAM\' | translate }}"></a>\n\n        <a class="restore-collapsable vertical-collapse"\n           maximize-parent-direction="left"\n           title="{{ \'PROCESS_INSTANCE_RESTORE_DEFAULT_SIZE\' | translate }}"></a>\n      </div>\n\n      \x3c!-- content bottom pane --\x3e\n      <div class="ctn-row ctn-content-bottom ctn-tabbed">\n        <a class="show-collapsable vertical-collapse"\n           title="{{ \'PROCESS_INSTANCE_HIDE_TABS\' | translate }}"></a>\n        <div cam-tabs="{component: \'cockpit.processInstance.runtime.tab\'}"\n             providers="tabs"\n             vars="processInstanceVars"\n             vars-values="initData">\n        </div>\n      </div>\n\n      <a class="show-collapsable"></a>\n    </div>\n  </div>\n\n</div>\x3c!-- end .ctn-fixed-view --\x3e\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/pages/process-instance.html --\x3e\n',controller:a,authentication:"required",resolve:{processInstance:["ResourceResolver","ProcessInstanceResource","Uri","Views","Notifications","$route","$http","$location","$translate",function(e,t,n,a,s,i,r,c,l){return e.getByRouteParam("id",{name:l.instant("PROCESS_INSTANCE_RUNNING_PROCESS_INSTANCE"),resolve:function(e){return t.get({id:e})},redirectTo:function(){var o=i.current.params.id;r.get(n.appUri("engine://engine/:engine/history/process-instance/")+o).then(function(e){var t,n,i=l.instant("PROCESS_INSTANCE_STATUS_UNABLE_DISPLAY_RUNNING_INSTANCE"),r=l.instant("PROCESS_INSTANCE_MESSAGE_2",{id:o});a.getProvider({id:"history",component:"cockpit.processInstance.view"})?(n=c.search(),t="/process-instance/"+o+"/history",r+=l.instant("PROCESS_INSTANCE_MESSAGE_3")):(t="/process-definition/"+e.data.processDefinitionId,r+=l.instant("PROCESS_INSTANCE_MESSAGE_4")),c.path(t),c.search(n||{}),c.replace(),s.addMessage({status:i,message:r,http:!0,exclusive:["http"],duration:5e3})}).catch(function(){c.path("/dashboard"),c.search({}),c.replace(),s.addError({status:l.instant("PROCESS_INSTANCE_STATUS_FAILED_RUNNING_PROCESS"),message:l.instant("PROCESS_INSTANCE_MESSAGE_5",{id:o}),http:!0,exclusive:["http"]})})}})}]},reloadOnSearch:!1})}];o.config(s).config(["ViewsProvider",function(e){e.registerDefaultView("cockpit.processInstance.view",{id:"runtime",priority:20,label:"BREAD_CRUMBS_RUNTIME",keepSearchParams:["viewbox"]})}]),t.exports=o},{"../../../../common/scripts/module":254,"../../../../common/scripts/util/routeUtil":276,"camunda-commons-ui/lib":80,"camunda-commons-ui/vendor/angular":127}],190:[function(e,t,n){"use strict";var h=e("camunda-commons-ui/vendor/angular"),i=["$scope","$location","$timeout","Views","Data","dataDepend","page","$translate",function(e,t,n,i,r,o,a,s){var c=e.$root,l=e.processData=o.create(e);e.dashboardVars={read:["processData"]},e.dashboardProviders=i.getProviders({component:"cockpit.processes.dashboard"}),r.instantiateProviders("cockpit.dashboard.data",{$scope:e,processData:l});for(var u=i.getProviders({component:"cockpit.processes.dashboard"}),p={$scope:e,processData:l},d=0;d<u.length;d++)"function"==typeof u[d].initialize&&u[d].initialize(p);var f=t.search();f.targetPlugin&&n(function(){var e=h.element('[data-plugin-id="'+f.targetPlugin+'"]');e.length&&e[0].scrollIntoView()}),c.showBreadcrumbs=!0,a.breadcrumbsClear(),a.breadcrumbsAdd({label:s.instant("PROCESS_PROCESSES")}),a.titleSet(s.instant("PROCESS_PROCESSES"))}],r=["$routeProvider",function(e){e.when("/processes",{template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/pages/dashboard.html --\x3e\n<div class="ctn-view cockpit-section-dashboard processes-dashboard">\n  <view ng-repeat="dashboardProvider in dashboardProviders"\n        class="dashboard-view"\n        data-plugin-id="{{ dashboardProvider.id }}"\n        vars="dashboardVars"\n        provider="dashboardProvider"></view>\n</div>\x3c!-- end .ctn-view --\x3e\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/pages/dashboard.html --\x3e\n',controller:i,authentication:"required",reloadOnSearch:!1})}];t.exports=r},{"camunda-commons-ui/vendor/angular":127}],191:[function(e,t,n){"use strict";var i=["$scope","Views","page","$translate",function(e,t,n,i){e.$root.showBreadcrumbs=!0,n.breadcrumbsClear(),n.breadcrumbsAdd({label:i.instant("TASKS_HUMAN_TASKS")}),n.titleSet(i.instant("TASKS_HUMAN_TASKS")),e.plugins=t.getProviders({component:"cockpit.tasks.dashboard"})}],r=["$routeProvider",function(e){e.when("/tasks",{template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/pages/tasks.html --\x3e\n<div class="ctn-view cockpit-section-dashboard tasks-dashboard">\n  <view ng-repeat="plugin in plugins"\n        class="dashboard-view"\n        data-plugin-id="{{ plugin.id }}"\n        provider="plugin"></view>\n</div>\x3c!-- end .ctn-view --\x3e\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/pages/tasks.html --\x3e\n',controller:i,authentication:"required",reloadOnSearch:!1})}];t.exports=r},{}],192:[function(e,t,n){"use strict";var d=e("camunda-commons-ui/vendor/angular").extend,i=["$scope","$route","page","dataDepend","Views","$translate",function(t,e,n,i,r,o){function a(e){var t=d({},e||{},{component:"cockpit.report"});return r.getProviders(t)}t.selectedReportId=((e.current||{}).params||{}).reportType||null;function s(e){if(e&&t.selectedReportId)return t.selectedReportId?(a({id:t.selectedReportId})||[])[0]:void 0}if(t.$root.showBreadcrumbs=!0,n.breadcrumbsClear(),t.selectedReportId){var c=a({id:t.selectedReportId});t.pluginLabel=c[0].label,c.length&&(n.breadcrumbsAdd([{label:o.instant("REPORTS_VIEW_BREAD_CRUMB"),href:"#/reports"},{label:c[0].label}]),n.titleSet(o.instant("REPORTS_VIEW_TITLE_SET",{name:o.instant(c[0].label)})))}else n.breadcrumbsAdd({label:o.instant("REPORTS_VIEW_BREAD_CRUMB")}),n.titleSet(o.instant("REPORTS_VIEW_BREAD_CRUMB"));var l=t.reportData=i.create(t),u=a(),p=s(u);l.provide("plugins",u),l.provide("plugin",p),t.getPluginProviders=a,t.$on("$routeChanged",function(){var e=s(u);l.set("plugin",e)}),t.reportTitle=((t.getPluginProviders()||[])[0]||{}).label||null}],r=["$routeProvider",function(e){e.when("/reports/:reportType?",{template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/reports/controllers/reports-view.html --\x3e\n<div class="reports-wrapper">\n  <div class="container-fluid">\n    <div class="reports-type-wrapper"\n         ng-class="{dashboard: !selectedReportId}"\n         cam-reports-type\n         report-data="reportData"\n         get-plugin-providers="getPluginProviders"\n         ng-if="!selectedReportId">\n    </div>\n\n    <h3 ng-if="selectedReportId">{{ pluginLabel | translate }}</h3>\n\n    <div class="reports-plugin-wrapper"\n         cam-reports-plugin\n         report-data="reportData">\n    </div>\n  </div>\n</div>\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/reports/controllers/reports-view.html --\x3e\n',controller:i,authentication:"required",reloadOnSearch:!1})}];t.exports=r},{"camunda-commons-ui/vendor/angular":127}],193:[function(e,t,n){"use strict";t.exports=[function(){return{restrict:"A",scope:{reportData:"="},template:'\x3c!-- # CE - camunda-bpm-webapp/ui/cockpit/client/scripts/reports/directives/reports-plugin.html --\x3e\n<view ng-if="plugin"\n      provider="plugin"\n      vars="reportPluginVars" />\n\x3c!-- / CE - camunda-bpm-webapp/ui/cockpit/client/scripts/reports/directives/reports-plugin.html --\x3e\n',controller:["$scope",function(t){(t.reportPluginData=t.reportData.newChild(t)).observe("plugin",function(e){t.plugin=e}),t.reportPluginVars={read:["reportPluginData"]}}]}}]},{}],194:[function(e,t,n){"use strict";t.exports=[function(){return{restrict:"A",scope:{reportData:"=",getPluginProviders:"&"},template:'\x3c!-- # CE - camunda-cockpit-ui/client/scripts/reports/directives/reports-type.html --\x3e\n<section class="col-xs-12">\n  <div class="inner">\n    <header>\n      <h1 class="section-title">{{ \'REPORTS_TYPE_AVAILABLE_REPORTS\' | translate }}</h1>\n    </header>\n\n    <div class="reports-type-selection">\n      <div ng-if="!plugins || !(plugins.length > 0)"\n           class="well no-reports-available">\n        <span class="glyphicon glyphicon-info-sign"></span>\n        {{ \'REPORTS_TYPE_NO_AVAILABLE_REPORTS\' | translate }}\n      </div>\n\n      <ul ng-if="plugins">\n        <li ng-repeat="provider in plugins">\n          <a ng-class="{active: selection.type === provider.id}"\n             ng-href="#/reports/{{ provider.id }}">{{ provider.label | translate }}</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</section>\n\x3c!-- / CE - camunda-cockpit-ui/client/scripts/reports/directives/reports-type.html --\x3e\n',controller:["$scope","$route",function(t,e){var n=t.getPluginProviders(),i=t.reportsTypeData=t.reportData.newChild(t);if(i.observe("plugin",function(e){t.plugin=e,t.selection={type:(e||{}).id}}),i.observe("plugins",function(e){t.plugins=e}),e.current.params.reportType){var r=(n({id:e.current.params.reportType})||[])[0];i.set("plugin",r)}}]}}]},{}],195:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./controllers/reports-view-ctrl"),o=e("./directives/reports-plugin"),a=e("./directives/reports-type"),s=i.module("cam.cockpit.reports",[]);s.config(r),s.directive("camReportsPlugin",o),s.directive("camReportsType",a),t.exports=s},{"./controllers/reports-view-ctrl":192,"./directives/reports-plugin":193,"./directives/reports-type":194,"camunda-commons-ui/vendor/angular":127}],196:[function(e,t,n){"use strict";t.exports=["$routeProvider",function(e){e.when("/repository",{template:'\x3c!-- # cockpit client/scripts/repository/controllers/cam-cockpit-repository-view.html --\x3e\n<div cam-repository\n     class="three-cols-layout">\n  <div class="three-cols-layout-columns">\n\n      \x3c!-- # deployment-list column --\x3e\n    <section class="column column-left deployments"\n             ng-controller="camDeploymentsCtrl">\n\n      <header class="three-cols-layout-cell top">\n        <div cam-deployments-sorting-choices\n             deployments-data="deploymentsData"></div>\n\n        <div cam-deploy="onDeployed()"></div>\n      </header>\n\n      <div class="three-cols-layout-cell content">\n\n        <view ng-repeat="deploymentsPlugin in deploymentsPlugins"\n              provider="deploymentsPlugin"\n              class="deployment-plugins"\n              vars="deploymentsVars" />\n\n        <div cam-deployments\n            deployments-data="deploymentsData"\n            deployments="control.deployments"></div>\n      </div>\n\n    </section>\n    \x3c!-- / deployment-list column --\x3e\n\n    \x3c!-- # resource-list column --\x3e\n    <section class="column column-center resources">\n\n      <header class="three-cols-layout-cell top">\n      </header>\n\n      <div class="three-cols-layout-cell content"\n           cam-resources\n           repository-data="repositoryData">\n      </div>\n\n    </section>\n    \x3c!-- / resource-list column --\x3e\n\n\n\n    \x3c!-- # resource-details column --\x3e\n    <section class="column column-right resource-details"\n             ng-controller="camResourceDetailsCtrl">\n\n      <header class="three-cols-layout-cell top">\n        <div class="resource-actions"\n             ng-if="resource"\n             ng-repeat="resourceAction in resourceActions">\n          <view provider="resourceAction" vars="resourceVars">\n        </div>\n      </header>\n\n      <div class="three-cols-layout-cell content"\n           cam-resource-wrapper\n           resource-details-data="resourceDetailsData"\n           control="control">\n      </div>\n\n    </section>\n    \x3c!-- # resource-details column --\x3e\n\n  </div>\n</div>\n\x3c!-- / cockpit client/scripts/repository/controllers/cam-cockpit-repository-view.html --\x3e\n',controller:"camCockpitRepositoryViewCtrl",authentication:"required",reloadOnSearch:!1})}]},{}],197:[function(e,t,n){"use strict";var b=e("camunda-commons-ui/vendor/angular");t.exports=["$scope","$q","$location","$timeout","$rootScope","search","dataDepend","page","camAPI","$translate",function(e,i,o,t,n,r,a,s,c,l){var u=c.resource("deployment");e.$root.showBreadcrumbs=!1,e.control={deployments:[]},s.breadcrumbsClear(),s.breadcrumbsAdd({label:l.instant("REPOSITORY_CONTROLLER_CAM_BREAD_CRUMB")}),s.titleSet(l.instant("REPOSITORY_CONTROLLER_CAM_TITLE_SET"));function p(e){r.updateSilently(e)}function d(e){return(o.search()||{})[e]||null}var f=e.repositoryData=a.create(e),h=d("deploymentsSortBy"),m=d("deploymentsSortOrder"),v=d("deployment"),g=d("resource"),y=d("resourceName");f.provide("deploymentsSorting",function(){return h=d("deploymentsSortBy"),m=d("deploymentsSortOrder"),{sortBy:h||"deploymentTime",sortOrder:m||"desc"}}),f.provide("deployments",[]),e.$watch("control.deployments",function(e){f.set("deployments",e)}),f.provide("currentDeployment",["deployments",function(e){var t;e=e||[];for(var n,i=d("deployment"),r=0;n=e[r];r++){if(i===n.id){t=n;break}t||(t=n)}return t?(v=t.id,t.id!==i&&(p({deployment:t.id,resource:null,viewbox:null}),o.replace())):(p({deployment:null,resource:null,viewbox:null}),o.replace()),b.copy(t)}]),f.provide("resources",["currentDeployment",function(e){var n=i.defer();return e&&null!==e.id?u.getResources(e.id,function(e,t){e?n.reject(e):n.resolve(t)}):n.resolve(null),n.promise}]),f.provide("resourceId",["resources",function(e){if(g=d("resource"),y=d("resourceName"),g)return{resourceId:g};if(y){e=e||[];for(var t,n=0;t=e[n];n++)if(t.name===y)return{resourceId:t.id}}return{resourceId:null}}]),f.provide("resource",["resourceId","currentDeployment",function(e,t){var n=i.defer();return"string"!=typeof(e=e.resourceId)?n.resolve(null):t&&null!==t.id?u.getResource(t.id,e,function(e,t){e?n.reject(e):n.resolve(t)}):n.resolve(null),n.promise}]),e.onDeployed=function(){n.$broadcast("cam-common:cam-searchable:query-force-change")},e.$on("$routeChanged",function(){var e=h,t=m,n=v,i=g,r=y;h=d("deploymentsSortBy"),m=d("deploymentsSortOrder"),v=d("deployment"),g=d("resource"),y=d("resourceName"),h&&e!==h||m&&t!==m?f.changed("deploymentsSorting"):v&&n!==v?f.changed("currentDeployment"):(g&&i!==g||y&&r!==y)&&f.changed("resourceId")})}]},{"camunda-commons-ui/vendor/angular":127}],198:[function(e,t,n){"use strict";t.exports=["$scope","Views",function(e,t){e.deploymentsData=e.repositoryData.newChild(e),e.deploymentsVars={read:["deploymentsData","totalDeployments"]},e.deploymentsPlugins=t.getProviders({component:"cockpit.repository.deployments.list"})}]},{}],199:[function(e,t,n){"use strict";t.exports=[function(){return{restrict:"A",scope:{deploymentsListData:"=",deployment:"=",control:"="},template:'<div class="actions">\n  <view ng-repeat="deploymentPlugin in deploymentPlugins"\n        provider="deploymentPlugin"\n        vars="deploymentVars" />\n</div>\n\n<h4 class="name">{{ deployment.name || deployment.id }}</h4>\n\n<dl>\n  <dt>{{ \'REPOSITORY_DEPLOYMENTS_TIME\' | translate }}</dt>\n  <dd class="time">{{ deployment.deploymentTime | camDate:\'normal\' }}</dd>\n\n  <dt>{{ \'REPOSITORY_DEPLOYMENTS_SOURCE\' | translate }}</dt>\n  <dd class="source"\n      ng-if="deployment.source">{{ deployment.source }}</dd>\n  <dd class="source undefined"\n      ng-if="!deployment.source"><span class="null-value">{{ \'REPOSITORY_DEPLOYMENTS_NULL\' | translate }}</span>\n\n  <dt>{{ \'REPOSITORY_DEPLOYMENTS_TENANT_ID\' | translate }}</dt>\n  <dd class="tenant-id"\n      ng-if="deployment.tenantId">{{ deployment.tenantId }}</dd>\n  <dd class="tenant-id"\n      ng-if="!deployment.tenantId"><span class="null-value">{{ \'REPOSITORY_DEPLOYMENTS_NULL\' | translate }}</span></dd>\n\n</dl>\n',controller:["$scope","Views",function(e,t){e.deploymentData=e.deploymentsListData.newChild(e),e.deploymentVars={read:["deploymentData","deployment","control"]},e.deploymentPlugins=t.getProviders({component:"cockpit.repository.deployment.action"})}]}}]},{}],200:[function(e,t,n){"use strict";var a=e("camunda-commons-ui/vendor/angular");t.exports=["$translate",function(e){return{restrict:"A",scope:{deploymentsData:"="},template:'\x3c!-- # cockpit client/scripts/repository/deployments/directives/cam-cockpit-deployments-sorting-choices.html --\x3e\n<div uib-dropdown class="dropdown">\n\n  <a href\n     tabindex="-1"\n     role="button"\n     uib-dropdown-toggle class="dropdown-toggle"\n     data-toggle="dropdown">\n    <span class="hidden-xs hidden-sm hidden-md"></span>\n    <span class="sort-by">{{ byLabel(sorting.sortBy) }}</span>\n  </a>\n\n  <a href\n     tabindex="-1"\n     uib-tooltip="{{ (sorting.sortOrder === \'desc\' ? \'REPOSITORY_DEPLOYMENTS_TOOLTIP_SORT_DESC\' : \'REPOSITORY_DEPLOYMENTS_TOOLTIP_SORT_ASC\' | translate) }}"\n     class="glyphicon sort-direction"\n     ng-class="sorting.sortOrder === \'asc\' ? \'glyphicon-menu-up\' : \'glyphicon-menu-down\'"\n     ng-click="changeOrder()"></a>\n\n  <ul uib-dropdown-menu class="dropdown-menu"\n      role="menu">\n\n    <li ng-show="sorting.sortBy !== id"\n        ng-repeat="(id, name) in uniqueProps">\n      <a href\n         tabindex="-1"\n         class="sort-by-choice"\n         ng-click="changeBy(id)">{{ name }}</a>\n    </li>\n\n  </ul>\n\n</div>\n\x3c!-- / cockpit client/scripts/repository/deployments/directives/cam-cockpit-deployments-sorting-choices.html --\x3e\n',controller:["$scope","search",function(t,i){function n(e,t){var n={};n[e]=t,function(e){i.updateSilently(e)}(n),r.changed("deploymentsSorting")}var r=t.deploymentsSortingData=t.deploymentsData.newChild(t),o=t.uniqueProps={id:e.instant("REPOSITORY_DEPLOYMENTS_ID"),name:e.instant("REPOSITORY_DEPLOYMENTS_NAME"),deploymentTime:e.instant("REPOSITORY_DEPLOYMENTS_DEPLOYMENT_TIME")};r.observe("deploymentsSorting",function(e){t.sorting=a.copy(e)}),t.byLabel=function(e){return o[e]},t.changeOrder=function(){var e="asc"===t.sorting.sortOrder?"desc":"asc";n("deploymentsSortOrder",e)},t.changeBy=function(e){n("deploymentsSortBy",e)}}]}}]},{"camunda-commons-ui/vendor/angular":127}],201:[function(e,t,n){"use strict";var u=e("camunda-commons-ui/vendor/lodash"),p=e("angular"),d='{\n  "types": [\n    {\n      "id": {\n        "key": "id",\n        "value": "REPOSITORY_SEARCH_TYPE_ID"\n      },\n      "operators": [\n        {\n          "key": "eq",\n          "value": "="\n        }\n      ]\n    },\n    {\n      "id": {\n        "key": "name",\n        "value": "REPOSITORY_SEARCH_TYPE_NAME"\n      },\n      "operators": [\n        {\n          "key": "eq",\n          "value": "="\n        },\n        {\n          "key": "Like",\n          "value": "REPOSITORY_SEARCH_TYPE_OPERATOR_LIKE"\n        }\n      ],\n      "default": true\n    },\n    {\n      "id": {\n        "key": "deploymentTime",\n        "value": "REPOSITORY_SEARCH_TYPE_TIME"\n      },\n      "operators": [\n        {\n          "key": "Before",\n          "value": "REPOSITORY_SEARCH_TYPE_BEFORE"\n        },\n        {\n          "key": "After",\n          "value": "REPOSITORY_SEARCH_TYPE_AFTER"\n        }\n      ],\n      "allowDates": true,\n      "enforceDates": true\n    },\n    {\n      "id": {\n        "key": "source",\n        "value": "REPOSITORY_SEARCH_TYPE_SOURCE"\n      },\n      "operators": [\n        {\n          "key": "eq",\n          "value": "="\n        }\n      ]\n    },\n    {\n      "id": {\n        "key": "withoutSource",\n        "value": "REPOSITORY_SEARCH_TYPE_SOURCE_UNDEFINED"\n      },\n      "basic": true\n    },\n    {\n      "id": {\n        "key": "tenantIdIn",\n        "value": "REPOSITORY_SEARCH_TYPE_TENANT_ID"\n      },\n      "operators": [\n        {\n          "key": "eq",\n          "value": "="\n        }\n      ]\n    },\n    {\n      "id": {\n        "key": "withoutTenantId",\n        "value": "REPOSITORY_SEARCH_TYPE_WITHOUT_TENANT_ID"\n      },\n      "basic": true\n    }\n  ],\n  "operators": {\n    "undefined":  [\n      {\n        "key": "eq",\n        "value": "="\n      }\n    ],\n    "string":     [\n      {\n        "key": "eq",\n        "value": "="\n      },\n      {\n        "key": "like",\n        "value": "REPOSITORY_SEARCH_TYPE_OPERATOR_LIKE"\n      }\n    ],\n    "date":       [\n      {\n        "key": "lteq",\n        "value": "REPOSITORY_SEARCH_TYPE_BEFORE"\n      },\n      {\n        "key": "gteq",\n        "value": "REPOSITORY_SEARCH_TYPE_AFTER"\n      }\n    ]\n  },\n  "tooltips": {\n    "inputPlaceholder": "REPOSITORY_SEARCH_ADD_CRITERIA",\n    "invalid": "REPOSITORY_SEARCH_INVALID",\n    "deleteSearch": "REPOSITORY_SEARCH_DELETE_SEARCH",\n    "type": "REPOSITORY_SEARCH_TYPE",\n    "name": "REPOSITORY_SEARCH_NAME",\n    "operator": "REPOSITORY_SEARCH_OPERATOR",\n    "value": "REPOSITORY_SEARCH_VALUE"\n  }\n}\n';t.exports=[function(){return{restrict:"A",scope:{deploymentsData:"=",totalItems:"=",deployments:"="},template:'\x3c!-- # cockpit client/scripts/repository/deployments/directives/cam-cockpit-deployments.html --\x3e\n<div cam-searchable-area\n     config="searchConfig"\n     on-search-change="onSearchChange(query, pages)"\n     loading-state="loadingState"\n     search-id="deployments"\n     loading-error="{{ \'REPOSITORY_DEPLOYMENTS_LOADING_LEGEND\' | translate }}"\n     text-empty="{{ \'REPOSITORY_DEPLOYMENTS_NO_DEPLOYMENTS_AVAILABLE\' | translate}}"\n     storage-group="\'DEP\'">\n  <div class="wrapper">\n    <ul class="deployments">\n      <li ng-repeat="(delta, deployment) in deployments"\n          ng-class="{active: isFocused(deployment), deployment: true}"\n          ng-style="{\'z-index\': ((deployments.length + 10) - delta) }"\n          ng-click="focus(deployment)">\n\n        <div cam-deployment\n             deployment="deployment"\n             deployments-list-data="deploymentsListData"\n             control="control">\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n\x3c!-- / cockpit client/scripts/repository/deployments/directives/cam-cockpit-deployments.html --\x3e\n',controller:["$scope","$location","$rootScope","search","Notifications","camAPI","$translate",function(i,e,t,n,r,o,a){var s=o.resource("deployment"),c=i.deploymentsListData=i.deploymentsData.newChild(i);i.searchConfig=JSON.parse(d),p.forEach(JSON.parse(d).tooltips,function(e,t){i.searchConfig.tooltips[t]=a.instant(e)}),i.searchConfig.types.map(function(e){return e.id.value=a.instant(e.id.value),e.operators&&(e.operators=e.operators.map(function(e){return e.value=a.instant(e.value),e})),e}),i.loadingState="INITIAL",(i.control={}).addMessage=function(e,t,n){r.addMessage({status:e,message:t,scope:i,unsafe:n})},i.onSearchChange=function(e,t){i.loadingState="LOADING";var n={firstResult:(t.current-1)*t.size,maxResults:t.size};return s.list(u.assign(e,n,i.deploymentsSorting)).then(function(e){i.deployments=e.items;var t=i.$root.$$phase;return"$apply"!==t&&"$digest"!==t&&i.$apply(function(){i.loadingState="LOADED"}),e.count}).catch(function(){var e=i.$root.$$phase;"$apply"!==e&&"$digest"!==e&&i.$apply(function(){i.loadingState="ERROR"})})},c.observe("currentDeployment",function(e){i.currentDeployment=e}),c.observe("deploymentsSorting",function(e){i.deploymentsSorting=e,t.$broadcast("cam-common:cam-searchable:query-force-change")}),i.focus=function(e){l(e)||n.updateSilently({resource:null,resourceName:null,viewbox:null,editMode:!0}),n.updateSilently({deployment:e.id}),c.changed("currentDeployment")};var l=i.isFocused=function(e){return e&&i.currentDeployment&&e.id===i.currentDeployment.id}}]}}]},{angular:"angular","camunda-commons-ui/vendor/lodash":132}],202:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./controllers/cam-cockpit-deployments-ctrl"),o=e("./directives/cam-cockpit-deployments"),a=e("./directives/cam-cockpit-deployment"),s=e("./directives/cam-cockpit-deployments-sorting-choices"),c=e("./plugins/actions/delete/cam-cockpit-delete-deployment-plugin"),l=e("./plugins/actions/delete/modals/cam-cockpit-delete-deployment-modal-ctrl"),u=i.module("cam.cockpit.repository.deployments",["ui.bootstrap"]);u.controller("camDeploymentsCtrl",r),u.directive("camDeployments",o),u.directive("camDeployment",a),u.directive("camDeploymentsSortingChoices",s),u.config(c),u.controller("camDeleteDeploymentModalCtrl",l),t.exports=u},{"./controllers/cam-cockpit-deployments-ctrl":198,"./directives/cam-cockpit-deployment":199,"./directives/cam-cockpit-deployments":201,"./directives/cam-cockpit-deployments-sorting-choices":200,"./plugins/actions/delete/cam-cockpit-delete-deployment-plugin":203,"./plugins/actions/delete/modals/cam-cockpit-delete-deployment-modal-ctrl":204,"camunda-commons-ui/vendor/angular":127}],203:[function(e,t,n){"use strict";function i(e){e.registerDefaultView("cockpit.repository.deployment.action",{id:"delete-deployment",template:'<a class="delete-deployment"\n   ng-click="deleteDeployment($event, deployment)"\n   uib-tooltip="{{ \'REPOSITORY_DEPLOYMENTS_DELETE_DELETE_TOOLTIP\' | translate }}">\n  <span class="glyphicon glyphicon-trash"></span>\n</a>\n',controller:r,priority:1e3})}var r=["$scope","$uibModal","$rootScope",function(e,n,i){var r=e.deploymentData;e.deleteDeployment=function(e,t){e.stopPropagation(),n.open({controller:"camDeleteDeploymentModalCtrl",template:'\x3c!-- # cockpit client/scripts/repository/deployments/modals/cam-cockpit-delete-deployment-modal.html --\x3e\n<div class="modal-header">\n  <h3 class="modal-title"\n      translate="REPOSITORY_DEPLOYMENTS_DELETE_TITLE"\n      translate-values="{deployment: deployment.name || deployment.id}"></h3>\n</div>\n\n<div class="modal-body delete-deployment-dialog">\n  <div notifications-panel></div>\n\n  <div ng-hide="countsLoaded()"\n       class="loader">\n    <span class="animate-spin glyphicon glyphicon-refresh"></span>\n    {{ \'REPOSITORY_DEPLOYMENTS_DELETE_LOADING\' | translate }}\n  </div>\n\n  <div ng-show="countsLoaded()">\n\n    {{ \'REPOSITORY_DEPLOYMENTS_DELETE_THIS_DEPLOYMENT\' | translate }}\n\n    <div uib-alert class="alert alert-info"\n         ng-show="hasInstances()">\n      <span translate="REPOSITORY_DEPLOYMENTS_DELETE_ENABLE_CASCADE"\n            translate-values="{info: getInfoSnippet()}"></span>\n      <code>{{ \'REPOSITORY_DEPLOYMENTS_DELETE_CASCADE\' | translate }}</code>\n      {{ \'REPOSITORY_DEPLOYMENTS_DELETE_FLAG\' | translate }}\n    </div>\n\n    <form class="form-horizontal"\n          name="deleteDeploymentForm"\n          novalidate\n          request-aware>\n\n      <div class="form-group cascade">\n\n        <label class="control-label col-xs-5"\n               for="cascade">\n          {{ \'REPOSITORY_DEPLOYMENTS_DELETE_CASCADE\' | translate }}\n          <span class="glyphicon glyphicon-question-sign"\n                uib-tooltip="{{ \'REPOSITORY_DEPLOYMENTS_DELETE_CASCADE_TOOLTIP\' | translate }}"\n                tooltip-placement="right">\n          </span>\n        </label>\n\n        <div class="col-xs-7">\n          <label class="checkbox">\n            <input name="cascade"\n                   type="checkbox"\n                   ng-model="options.cascade">\n          </label>\n        </div>\n\n      </div>\n\n      <div  ng-hide="hideSkipCustomListeners"\n            class="form-group skip-custom-listener">\n\n        <label class="control-label col-xs-5"\n               for="skipCustomListeners">\n          {{ \'REPOSITORY_DEPLOYMENTS_DELETE_SKIP\' | translate }}\n          <span class="glyphicon glyphicon-question-sign"\n                uib-tooltip="{{ \'REPOSITORY_DEPLOYMENTS_DELETE_SKIP_TOOLTIP\' | translate }}"\n                tooltip-placement="right">\n          </span>\n        </label>\n\n        <div class="col-xs-7">\n          <label class="checkbox">\n            <input name="skipCustomListeners"\n                   type="checkbox"\n                   ng-model="options.skipCustomListeners">\n          </label>\n        </div>\n\n      </div>\n\n      <div class="form-group skip-custom-listener"\n           ng-hide="SKIP_IO_MAPPINGS.hidden">\n\n        <label class="control-label col-xs-5"\n               for="skipIoMappings">\n          {{ \'REPOSITORY_DEPLOYMENTS_DELETE_MAPPING\' | translate }}\n          <span class="glyphicon glyphicon-question-sign"\n                uib-tooltip="{{ \'REPOSITORY_DEPLOYMENTS_DELETE_MAPPING_TOOLTIP\' | translate }}"\n                tooltip-placement="right">\n          </span>\n        </label>\n\n        <div class="col-xs-7">\n          <label class="checkbox">\n            <input name="skipIoMappings"\n                   type="checkbox"\n                   ng-model="options.skipIoMappings">\n          </label>\n        </div>\n\n      </div>\n\n    </form>\n\n    {{ \'REPOSITORY_DEPLOYMENTS_DELETE_SURE\' | translate }}\n\n  </div>\n\n</div>\n\n<div class="modal-footer">\n  <button class="btn btn-link"\n          ng-click="$dismiss()"\n          ng-disabled="status === \'PERFORM_DELETE\'">{{ \'REPOSITORY_DEPLOYMENTS_DELETE_CLOSE\' | translate }}</button>\n\n  <button type="submit"\n          class="btn btn-primary"\n          ng-click="deleteDeployment()"\n          ng-show="countsLoaded()"\n          ng-disabled="!canDeleteDeployment() || status === \'PERFORM_DELETE\'">{{ \'REPOSITORY_DEPLOYMENTS_DELETE_DELETE\' | translate }}</button>\n</div>\n\x3c!-- / cockpit client/scripts/repository/deployments/modals/cam-cockpit-delete-deployment-modal.html --\x3e\n',resolve:{deploymentData:function(){return r},deployment:function(){return t}}}).result.then(function(){i.$broadcast("cam-common:cam-searchable:query-force-change")}).catch(function(){})}}];i.$inject=["ViewsProvider"],t.exports=i},{}],204:[function(e,t,n){"use strict";t.exports=["$scope","$q","camAPI","Notifications","deploymentData","deployment","$translate","configuration",function(t,e,n,i,r,o,a,s){var c=n.resource("deployment"),l=n.resource("process-instance"),u=n.resource("case-instance"),p=r.newChild(t),d=s.getSkipCustomListeners(),f=t.SKIP_IO_MAPPINGS=s.getSkipIoMappings(),h=t.options={cascade:!1,skipCustomListeners:d.default,skipIoMappings:f.default};t.hideSkipCustomListeners=d.hidden,t.deployment=o,t.status,t.$on("$routeChangeStart",function(){t.$dismiss()}),p.provide("processInstanceCount",function(){var n=e.defer();return l.count({deploymentId:o.id},function(e,t){if(e)return n.reject(e);n.resolve(t)}),n.promise}),p.provide("caseInstanceCount",function(){var n=e.defer();return u.count({deploymentId:o.id},function(e,t){if(e)return n.reject(e);n.resolve(t)}),n.promise}),t.processInstanceCountState=p.observe("processInstanceCount",function(e){t.processInstanceCount=e}),t.caseInstanceCountState=p.observe("caseInstanceCount",function(e){t.caseInstanceCount=e}),t.countsLoaded=function(){return t.processInstanceCountState&&(t.processInstanceCountState.$loaded||t.processInstanceCountState.$error)&&t.caseInstanceCountState&&(t.caseInstanceCountState.$loaded||t.caseInstanceCountState.$error)};var m=t.hasInstances=function(){return t.processInstanceCount&&0<t.processInstanceCount.count||0<t.caseInstanceCount};t.canDeleteDeployment=function(){return!(!h.cascade&&m())},t.getInfoSnippet=function(){var e=[a.instant("REPOSITORY_DEPLOYMENTS_INFO_THERE_ARE")];return t.processInstanceCount&&0<t.processInstanceCount.count&&(e.push(t.processInstanceCount.count),t.processInstanceCount&&1<t.processInstanceCount.count?e.push(a.instant("REPOSITORY_DEPLOYMENTS_INFO_RUNNING_PLURAL")):e.push(a.instant("REPOSITORY_DEPLOYMENTS_INFO_RUNNING_SINGULAR"))),t.processInstanceCount&&0<t.processInstanceCount.count&&0<t.caseInstanceCount&&e.push(a.instant("REPOSITORY_DEPLOYMENTS_INFO_AND")),0<t.caseInstanceCount&&(e.push(t.caseInstanceCount),1<t.caseInstanceCount?e.push(a.instant("REPOSITORY_DEPLOYMENTS_INFO_OPEN_PLURAL")):e.push(a.instant("REPOSITORY_DEPLOYMENTS_INFO_OPEN_SINGULAR"))),e.push(a.instant("REPOSITORY_DEPLOYMENTS_INFO_WHICH_BELONG")),e=e.join(" ")},t.deleteDeployment=function(){t.status="PERFORM_DELETE",c.delete(o.id,h,function(e){if(t.status=null,e)return i.addError({status:a.instant("REPOSITORY_DEPLOYMENTS_INFO_MSN_STATUS"),message:a.instant("REPOSITORY_DEPLOYMENTS_INFO_MSN_MSN",{message:e.message}),exclusive:!0});t.$close()})}}]},{}],205:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular");e("angular-data-depend"),e("camunda-commons-ui/lib/index");var r=e("./config/routes"),o=e("./controllers/cam-cockpit-repository-view-ctrl"),a=e("./deployments/main"),s=e("./resources/main"),c=e("./resource/main"),l=["cam.commons","dataDepend","ngRoute",a.name,s.name,c.name],u=i.module("cam.cockpit.repository",l);u.config(r),u.controller("camCockpitRepositoryViewCtrl",o),t.exports=u},{"./config/routes":196,"./controllers/cam-cockpit-repository-view-ctrl":197,"./deployments/main":202,"./resource/main":211,"./resources/main":215,"angular-data-depend":"angular-data-depend","camunda-commons-ui/lib/index":80,"camunda-commons-ui/vendor/angular":127}],206:[function(e,t,n){"use strict";var E=e("camunda-commons-ui/vendor/angular");t.exports=["$scope","$q","Uri","camAPI","Views","$translate",function(o,a,n,e,t,s){function i(e,t){return e&&t.test(e.toLowerCase())}function r(e){return c(e)?e.name:e}var c=E.isObject,l=o.resourceDetailsData=o.repositoryData.newChild(o),u=e.resource("deployment"),p=o.control={},d=/\.(bpmn\d*.xml|bpmn)$/,f=/\.(cmmn\d*.xml|cmmn)$/,h=/\.(dmn\d*.xml|dmn)$/,m=/\.(gif|jpg|jpeg|jpe|png|svg|tif|tiff)$/,v=p.isBpmnResource=o.isBpmnResource=function(e){var t=r(e);return i(t,d)},g=p.isCmmnResource=o.isCmmnResource=function(e){var t=r(e);return i(t,f)},y=p.isDmnResource=o.isDmnResource=function(e){var t=r(e);return i(t,h)},b=p.isImageResource=o.isImageResource=function(e){var t=r(e);return i(t,m)};p.isUnkownResource=o.isUnkownResource=function(e){return!(v(e)||g(e)||y(e)||b(e))};var _=e.resource("process-definition"),w=e.resource("case-definition"),x=e.resource("decision-definition");p.downloadLink=o.downloadLink=function(e,t){return e&&t&&n.appUri("engine://engine/:engine/deployment/"+e.id+"/resources/"+t.id+"/data")},l.provide("binary",["resource","currentDeployment",function(e,t){var n=a.defer();return e&&t&&null!==t.id?b(e)?n.resolve(null):u.getResourceData(t.id,e.id,function(e,t){e?n.reject(e):n.resolve({data:t})}):n.resolve(null),n.promise}]),l.provide("definitions",["currentDeployment","resource",function(e,t){var n=a.defer(),i=null,r=!(o.loadingState="LOADING");return e&&t?(v(t)?(r=!0,i=_):g(t)?i=w:y(t)&&(i=x),i?i.list({deploymentId:e.id,resourceName:t.name},function(e,t){if(e)return o.loadingState="ERROR",o.textError=e.message||s.instant("REPOSITORY_DEPLOYMENT_RESOURCE_CTRL_MSN"),n.reject(e);n.resolve(r?t.items:t)}):n.resolve([])):n.resolve([]),n.promise}]),l.observe("resource",function(e){o.resource=e}),l.observe("currentDeployment",function(e){o.deployment=e}),o.resourceVars={read:["control","deployment","resource","resourceDetailsData"]},o.resourceActions=t.getProviders({component:"cockpit.repository.resource.action"})}]},{"camunda-commons-ui/vendor/angular":127}],207:[function(e,t,n){"use strict";t.exports=[function(){return{scope:{resourceData:"=",control:"="},template:'\x3c!-- # cockpit client/scripts/repository/resource/directives/cam-cockpit-resource-content.html --\x3e\n<div ng-if="binary || (resource && isImageResource(resource))"\n     class="resource-wrapper">\n\n  <div ng-if="isBpmnResource(resource)"\n       cam-widget-bpmn-viewer\n       diagram-data="binary"\n       bpmn-js-conf="bpmnJsConf">\n  </div>\n\n\n  <div ng-if="isDmnResource(resource)"\n       cam-widget-dmn-viewer\n       enable-drd-navigation="true"\n       xml="binary">\n  </div>\n\n  <div ng-if="isCmmnResource(resource)"\n       cam-widget-cmmn-viewer\n       diagram-data="binary">\n  </div>\n\n  <div ng-if="isImageResource(resource)"\n       class="image-resource">\n    <img ng-src="{{ imageLink(deployment, resource) }}">\n  </div>\n\n\n  <div ng-if="isUnkownResource(resource)"\n       class="unkown-resource">\n    <div cam-source\n         name="resource.name"\n         source="binary">\n    </div>\n  </div>\n\n  <div>\n\n</div>\n\x3c!-- / cockpit client/scripts/repository/resource/directives/cam-cockpit-resource-content.html --\x3e\n',controller:["$scope","configuration",function(t,e){t.bpmnJsConf=e.getBpmnJs();var n,i=t.resourceData.newChild(t);t.isBpmnResource=t.control.isBpmnResource,t.isCmmnResource=t.control.isCmmnResource,t.isDmnResource=t.control.isDmnResource,t.isImageResource=t.control.isImageResource,t.isUnkownResource=t.control.isUnkownResource,t.imageLink=t.control.downloadLink,i.observe("resource",function(e){e&&n&&e.id!==n.id&&(t.binary=null),n=t.resource=e}),i.observe("currentDeployment",function(e){t.deployment=e}),i.observe("binary",function(e){t.binary=(e||{}).data})}]}}]},{}],208:[function(e,t,n){"use strict";t.exports=[function(){return{scope:{resourceData:"=",control:"="},template:'\x3c!-- # cockpit client/scripts/repository/resource/directives/cam-cockpit-resource-meta.html --\x3e\n<div class="filepath">{{ resource._filepath }}</div>\n<div class="table-row">\n  <h2 class="name">{{ resource._filename }}</h2>\n  <h3 class="version" ng-show="!isDmnResource(resource) && definitions.length > 0">{{ \'REPOSITORY_DEPLOYMENT_RESOURCE_DIRECTIVES_VERSION\' | translate }} {{ definitions[0].version }}</h3>\n</div>\n\x3c!-- / cockpit client/scripts/repository/resource/directives/cam-cockpit-resource-meta.html --\x3e\n',controller:["$scope",function(n){var e=n.resourceData.newChild(n);n.isDmnResource=n.control.isDmnResource,e.observe("resource",function(e){if(e){var t=(e.name||e.id).split("/");e._filename=t.pop(),e._filepath=t.join("/")}n.resource=e}),e.observe("definitions",function(e){n.definitions=e})}]}}]},{}],209:[function(e,t,n){"use strict";var u=e("camunda-commons-ui/vendor/angular");t.exports=[function(){return{restrict:"A",scope:{resourceDetailsData:"=",control:"=?"},template:'\x3c!-- # cockpit client/scripts/repository/resource/directives/cam-cockpit-resource-wrapper.html --\x3e\n<div ng-show="!resourceState.$loaded"\n     class="loader">\n  <span class="animate-spin glyphicon glyphicon-refresh"></span>\n  {{ \'REPOSITORY_DEPLOYMENT_RESOURCE_DIRECTIVES_LOADING\' | translate }}\n</div>\n\n<div ng-show="resourceState.$loaded">\n\n  <div ng-if="!resource">\n    <div class="no-resource well">\n      <span class="glyphicon glyphicon-info-sign"></span>\n      {{ \'REPOSITORY_DEPLOYMENT_RESOURCE_DIRECTIVES_SELECT_SRC\' | translate }}\n    </div>\n  </div>\n\n  <section ng-if="resource" class="resource">\n\n    <header class="row">\n      <div class="col-xs-12"\n           cam-resource-meta\n           resource-data="resourceData"\n           control="control">\n      </div>\n    </header>\n\n    <div class="section-content row">\n      <div class="col-xs-12"\n           cam-resource-content\n           resource-data="resourceData"\n           control="control">\n      </div>\n\n      <div ng-show="resourceDetailTabs.length"\n           class="col-xs-12 ctn-tabbed-content">\n\n        <ul ng-if="resourceDetailTabs.length > 1"\n            class="nav nav-tabs">\n          <li ng-class="{ active: selectedResourceDetailTab == resourceDetailTab }"\n              ng-repeat="resourceDetailTab in resourceDetailTabs">\n            <a href\n               ng-click="selectResourceDetailTab(resourceDetailTab)">{{ resourceDetailTab.label }}</a>\n          </li>\n        </ul>\n\n        <h4 ng-if="resourceDetailTabs.length === 1">{{ resourceDetailTabs[0].label | translate }}:</h4>\n\n        <div class="tab-content">\n          <view provider="selectedResourceDetailTab"\n                vars="resourceVars" />\n        </div>\n\n      </div>\x3c!-- / !!resourceDetailTabs --\x3e\n\n    </div>\x3c!-- / .section-content --\x3e\n\n  </section>\n\n</div>\n\x3c!-- / cockpit client/scripts/repository/resource/directives/cam-cockpit-resource-wrapper.html --\x3e\n',controller:["$scope","$q","$location","Views","Notifications","search","$translate",function(i,e,t,r,n,o,a){var s=i.resourceData=i.resourceDetailsData.newChild(i),c="cockpit.repository.resource.detail";function l(e){var t=o().detailsTab;if(e&&e.length){if(t){var n=r.getProvider({component:c,id:t});if(n&&-1!==e.indexOf(n))return void(i.selectedResourceDetailTab=n)}o.updateSilently({detailsTab:null}),i.selectedResourceDetailTab=e[0]}}s.observe("currentDeployment",function(e){i.deployment=e}),i.resourceState=s.observe(["resource","binary",function(e){i.resource=e}]),i.$watch("resourceState.$error",function(e){e&&(function(e,t){!t.message||-1!==t.message.indexOf("<-")&&(t.message=t.message.split("<-")[1].trim());n.addError({status:e,message:t?t.message:"",exclusive:!0,scope:i})}(function(e){return e&&-1===e.indexOf("does not exist")?a.instant("REPOSITORY_DEPLOYMENT_RESOURCE_DIRECTIVES_RETURN_1"):a.instant("REPOSITORY_DEPLOYMENT_RESOURCE_DIRECTIVES_RETURN_2")}(e.message),e),function(){var e=t.search()||{};delete e.resource,delete e.resourceName,t.search(u.copy(e)),t.replace()}())}),i.resourceVars={read:["control","deployment","resource","resourceData"]},i.resourceDetailTabs=r.getProviders({component:c}),i.selectedResourceDetailTab=i.resourceDetailTabs[0],i.selectResourceDetailTab=function(e){i.selectedResourceDetailTab=e,o.updateSilently({detailsTab:e.id})},l(i.resResourceDetailTabs),i.$on("$routeChanged",function(){l(i.resResourceDetailTabs)})}]}}]},{"camunda-commons-ui/vendor/angular":127}],210:[function(e,t,n){"use strict";var a=e("camunda-commons-ui/vendor/angular");e("camunda-commons-ui/vendor/prism"),t.exports=["$window",function(o){return{restrict:"A",scope:{name:"=",source:"="},template:"\x3c!-- # cockpit client/scripts/repository/resource/directives/cam-cockpit-source.html --\x3e\n<pre><code ng-class=\"'language-' + extension()\">{{ source }}</code></pre>\n\x3c!-- / cockpit client/scripts/repository/resource/directives/cam-cockpit-source.html --\x3e\n",link:function(e,n){var i=o.Prism,t={js:"javascript",html:"markup",xml:"markup",py:"python",rb:"ruby",bpmn:"markup",cmmn:"markup",dmn:"markup"},r=e.name;e.extension=function(){if(r){var e=(r.match(/\.([\w-]+)$/)||["",""])[1];return e=e&&e.toLowerCase(),t[e]||e}},e.$watch("source",function(e){if(e){var t=a.element("code",n);i.highlightElement(t[0])}})}}}]},{"camunda-commons-ui/vendor/angular":127,"camunda-commons-ui/vendor/prism":134}],211:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./controllers/cam-cockpit-resource-details-ctrl"),o=e("./directives/cam-cockpit-resource-wrapper"),a=e("./directives/cam-cockpit-resource-meta"),s=e("./directives/cam-cockpit-resource-content"),c=e("./directives/cam-cockpit-source"),l=e("./plugins/details/definitions/cam-cockpit-definitions-plugin"),u=e("./plugins/actions/download/cam-cockpit-resource-action-download-plugin"),p=i.module("cam.cockpit.repository.resource",[]);p.controller("camResourceDetailsCtrl",r),p.directive("camResourceWrapper",o),p.directive("camResourceMeta",a),p.directive("camResourceContent",s),p.directive("camSource",c),p.config(l),p.config(u),t.exports=p},{"./controllers/cam-cockpit-resource-details-ctrl":206,"./directives/cam-cockpit-resource-content":207,"./directives/cam-cockpit-resource-meta":208,"./directives/cam-cockpit-resource-wrapper":209,"./directives/cam-cockpit-source":210,"./plugins/actions/download/cam-cockpit-resource-action-download-plugin":212,"./plugins/details/definitions/cam-cockpit-definitions-plugin":213,"camunda-commons-ui/vendor/angular":127}],212:[function(e,t,n){"use strict";function i(e){e.registerDefaultView("cockpit.repository.resource.action",{id:"download-resource",controller:r,template:'\x3c!-- # cockpit client/scripts/repository/resource/plugins/actions/download/cam-cockpit-resource-action-download-plugin.html --\x3e\n<a class="download-resource"\n   ng-href="{{ downloadLink(deployment, resource) }}">\n  <span class="glyphicon glyphicon-download-alt"></span> {{ \'REPOSITORY_DEPLOYMENT_DOWNLOAD_DOWNLOAD\' | translate }}\n</a>\n\x3c!-- / cockpit client/scripts/repository/resource/plugins/actions/download/cam-cockpit-resource-action-download-plugin.html --\x3e\n',priority:100})}var r=["$scope",function(t){var e=t.resourceDetailsData.newChild(t);e.observe("resource",function(e){t.resource=e}),e.observe("currentDeployment",function(e){t.deployment=e}),t.downloadLink=t.control.downloadLink}];i.$inject=["ViewsProvider"],t.exports=i},{}],213:[function(e,t,n){"use strict";function i(e){e.registerDefaultView("cockpit.repository.resource.detail",{id:"resource-details",label:"DEFINITIONS_DEFINITIONS",template:'<div cam-widget-loader\n     loading-state="{{ loadingState }}"\n     text-empty="{{ \'REPOSITORY_DEPLOYMENT_DEFINITIONS_TEXT_EMPTY_1\' | translate }}"\n     text-error="{{ textError }}">\n  <table class="definitions cam-table">\n    <thead>\n      <tr>\n        <th class="name">{{ \'REPOSITORY_DEPLOYMENT_NAME\' | translate }}</th>\n        <th class="key">{{ \'REPOSITORY_DEPLOYMENT_KEY\' | translate }}</th>\n        <th ng-if="!isDmnResource(resource)"\n            class="instance-count">{{ \'REPOSITORY_DEPLOYMENT_INSTANCE_COUNTS\' | translate }}</th>\n        <th ng-if="isDmnResource(resource)"\n            class="version">{{ \'REPOSITORY_DEPLOYMENT_VERSION\' | translate }}</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="definition in definitions">\n        <td class="name">\n          <a ng-if="!isCmmnResource(resource) || hasCasePlugin"\n             ng-href="{{ getDefinitionLink(definition, resource) }}">\n            {{ definition.name || definition.key || definition.id }}\n          </a>\n          <span ng-if="isCmmnResource(resource) && !hasCasePlugin">\n            {{ definition.name || definition.key || definition.id }}\n          </span>\n        </td>\n\n        <td class="key">\n          {{ definition.key }}\n        </td>\n\n        <td ng-if="!isDmnResource(resource)"\n            class="instance-count">\n          <span ng-if="!definition.instances.$loaded">\n            <span class="glyphicon glyphicon-refresh animate-spin"></span>&nbsp;{{ \'REPOSITORY_DEPLOYMENT_LOADING\' | translate }}\n          </span>\n          <span ng-if="definition.instances.$loaded">\n            {{ definition.instances.count }}\n          </span>\n          <span ng-if="definition.instances.$error">\n            {{ \'REPOSITORY_DEPLOYMENT_COULD_NOT_LOAD\' | translate }}\n          </span>\n        </td>\n\n        <td ng-if="isDmnResource(resource)"\n            class="version">\n          <span>\n            {{ definition.version }}\n          </span>\n        </td>\n\n      </tr>\n    </tbody>\n  </table>\n\n  <div ng-if="isDmnResource(resource)">\n    <h4>{{ \'REPOSITORY_DEPLOYMENT_DECISION_TEXT\' | translate }}</h4>\n    <div cam-widget-loader\n         loading-state="{{ drdLoadingState }}"\n         text-empty="{{ \'REPOSITORY_DEPLOYMENT_DEFINITIONS_TEXT_EMPTY_2\' | translate }}"\n         text-error="{{ drdTextError }}">\n      <table class="drd-definitions cam-table">\n        <thead>\n          <tr>\n            <th class="name">{{ \'REPOSITORY_DEPLOYMENT_NAME\' | translate }}</th>\n            <th class="key">{{ \'REPOSITORY_DEPLOYMENT_KEY\' | translate }}</th>\n            <th class="version">{{ \'REPOSITORY_DEPLOYMENT_VERSION\' | translate }}</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td class="name">\n              <a ng-if="hasDrdPlugin"\n                 ng-href="{{ getDrdLink(drd) }}">\n                {{ drd.name || drd.key || drd.id }}\n              </a>\n              <span ng-if="!hasDrdPlugin">\n                {{ drd.name || drd.key || drd.id }}\n              </span>\n            </td>\n\n            <td class="key">\n              {{ drd.key }}\n            </td>\n\n            <td class="version">\n              {{ drd.version }}\n            </td>\n\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n\n</div>\n',controller:r,priority:1e3})}var r=["$scope","$q","camAPI","hasPlugin",function(a,e,t,n){var i,r=a.resourceData.newChild(a),s=a.isBpmnResource=a.control.isBpmnResource,c=a.isCmmnResource=a.control.isCmmnResource,o=a.isDmnResource=a.control.isDmnResource,l=t.resource("process-instance"),u=t.resource("case-instance"),p=t.resource("drd");a.hasCasePlugin=n("cockpit.cases.dashboard","case-definition"),a.hasDrdPlugin=n("cockpit.drd.definition.tab","decision-instance-table"),r.observe("definitions",function(e){a.loadingState=e&&e.length?"LOADED":"EMPTY",(a.definitions=e)&&e.length&&!o(i)&&d(e),o(i)&&f(e)}),r.observe("resource",function(e){i=a.resource=e});var d=function(e){function t(i,e,t){i.instances={$loaded:!1},t.count(e,function(e,t){if(e)return i.instances.$error=!0;i.instances.$loaded=!0,i.instances.count=isNaN(+t)?t.count||"0":t;var n=a.$root.$$phase;"$apply"!==n&&"$digest"!==n&&a.$apply()})}for(var n,i=0;n=e[i];i++){var r=null,o=null;s(n.resource)?(r=l,o={processDefinitionId:n.id}):c(n.resource)&&(r=u,o={caseDefinitionId:n.id}),r&&t(n,o,r)}},f=function(e){var t=e[0].decisionRequirementsDefinitionId;a.drdLoadingState=t?"LOADING":"EMPTY",t&&p.get(t,function(e,t){if(e)return a.drdTextError=e;a.drdLoadingState="LOADED",a.drd=t;var n=a.$root.$$phase;"$apply"!==n&&"$digest"!==n&&a.$apply()})};a.getDefinitionLink=function(e,t){if(t){var n=null;return s(t)?n="process-definition":o(t)?n="decision-definition":c(t)&&(n="case-definition"),"#/"+n+"/"+e.id}},a.getDrdLink=function(e){if(e)return"#/decision-requirement/"+e.id}}];i.$inject=["ViewsProvider"],t.exports=i},{}],214:[function(e,t,n){"use strict";var a=e("camunda-commons-ui/vendor/angular").element;t.exports=[function(){return{restrict:"A",scope:{repositoryData:"="},template:'\x3c!-- # cockpit client/scripts/repository/resources/directives/cam-cockpit-resources.html --\x3e\n<div ng-if="!state.$loaded && !state.$error"\n     class="loader">\n  <span class="animate-spin glyphicon glyphicon-refresh"></span>\n  {{ \'REPOSITORY_RESOURCES_LOADING\' | translate }}\n</div>\n\n<div ng-if="state.$error"\n     uib-alert class="alert alert-danger"\n     role="alert">\n  <span class="glyphicon glyphicon-exclamation-sign"></span>\n  <strong class="status">{{ \'REPOSITORY_RESOURCES_FAILURE\' | translate }}</strong>\n  <span class="message">{{ \'REPOSITORY_RESOURCES_FAILURE_MSN\' | translate }}</span>\n</div>\n\n<div ng-if="state.$loaded && !state.$error && !resources.length"\n     class="well">\n  <span class="glyphicon glyphicon-info-sign"></span>\n  {{ \'REPOSITORY_RESOURCES_NO_SRC_AVAILABLE\' | translate }}\n</div>\n\n<ol ng-if="state.$loaded && !state.$error && resources.length"\n    class="resources list-unstyled"\n    tabindex="0"\n    ng-keydown="handleKeydown($event)">\n  <li class="resource"\n      ng-repeat="(delta, resource) in resources"\n      ng-class="{active: currentResourceId === resource.id, clickable: true}"\n      ng-click="focus($event, resource)">\n    <div class="filepath">{{ truncateFilepath(resource._filepath) }}</div>\n    <h4>\n      <a href>{{ resource._filename }}</a>\n    </h4>\n  </li>\n</ol>\n\x3c!-- / cockpit client/scripts/repository/resources/directives/cam-cockpit-resources.html --\x3e\n',controller:["$scope","$location","$timeout","search",function(i,e,n,t){function r(e){t.updateSilently(e)}var o=i.repositoryData.newChild(i);i.state=o.observe("resourceId",function(e){i.currentResourceId=e.resourceId}),i.sharedStart="",i.state=o.observe("resources",function(e){var n=[];i.resources=(e||[]).map(function(e){var t=(e.name||e.id).split("/");return e._filename=t.pop(),e._filepath=t.join("/"),n.push(e._filepath),e}),i.sharedStart=function(e){if(!e.length)return"";for(var t=e.concat().sort(),n=t[0],i=t[t.length-1],r=n.length,o=0;o<r&&n.charAt(o)===i.charAt(o);)o++;return n.substring(0,o)}(n)}),i.truncateFilepath=function(e){return e.slice(i.sharedStart.length)},i.focus=function(e,t){e&&e.preventDefault();var n=t.id;i.currentResourceId===n?r({resource:n,resourceName:null}):r({resource:n,resourceName:null,viewbox:null}),o.changed("resourceId")};i.handleKeydown=function(t){40===t.keyCode?(t.preventDefault(),function(){for(var e=0;e<i.resources.length-1;e++)if(i.resources[e].id===i.currentResourceId)return i.focus(null,i.resources[e+1])}()):38===t.keyCode&&(t.preventDefault(),function(){for(var e=1;e<i.resources.length;e++)if(i.resources[e].id===i.currentResourceId)return i.focus(null,i.resources[e-1])}()),n(function(){var e=a(t.target).find("li.active")[0];e&&e.scrollIntoView(!1)})}}]}}]},{"camunda-commons-ui/vendor/angular":127}],215:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./directives/cam-cockpit-resources"),o=i.module("cam.cockpit.repository.resources",[]);o.directive("camResources",r),t.exports=o},{"./directives/cam-cockpit-resources":214,"camunda-commons-ui/vendor/angular":127}],216:[function(e,t,n){"use strict";t.exports=["$resource","Uri",function(e,t){return e(t.appUri("engine://engine/:engine/incident/:action"),{},{count:{method:"GET",isArray:!1,params:{count:"count"}}})}]},{}],217:[function(e,t,n){"use strict";t.exports=["$resource","Uri",function(e,t){return e(t.appUri("engine://engine/:engine/job-definition/:id/:action"),{id:"@id"},{query:{method:"POST",isArray:!0},count:{method:"POST",isArray:!1,params:{id:"count"}},setRetries:{method:"PUT",params:{action:"retries"}},setJobPriority:{method:"PUT",params:{action:"jobPriority"}}})}]},{}],218:[function(e,t,n){"use strict";t.exports=["$resource","Uri",function(e,t){return e(t.appUri("engine://engine/:engine/job/:id/:action"),{id:"@id"},{query:{method:"POST",isArray:!0},count:{method:"POST",isArray:!1,params:{id:"count"}},setRetries:{method:"PUT",params:{action:"retries"}}})}]},{}],219:[function(e,t,n){"use strict";t.exports=["$resource","Uri",function(e,t){return e(t.appUri("engine://engine/:engine/execution/:executionId/localVariables/:localVariableName"),{},{updateVariables:{method:"POST"}})}]},{}],220:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular");e("camunda-commons-ui/lib/util/index");var r=e("./processDefinitionResource"),o=e("./incidentResource"),a=e("./processInstanceResource"),s=e("./localExecutionVariableResource"),c=e("./jobResource"),l=e("./taskResource"),u=e("./jobDefinitionResource"),p=i.module("cam.cockpit.resources",[]);p.factory("ProcessDefinitionResource",r),p.factory("IncidentResource",o),p.factory("ProcessInstanceResource",a),p.factory("LocalExecutionVariableResource",s),p.factory("JobResource",c),p.factory("TaskResource",l),p.factory("JobDefinitionResource",u),t.exports=p},{"./incidentResource":216,"./jobDefinitionResource":217,"./jobResource":218,"./localExecutionVariableResource":219,"./processDefinitionResource":221,"./processInstanceResource":222,"./taskResource":223,"camunda-commons-ui/lib/util/index":100,"camunda-commons-ui/vendor/angular":127}],221:[function(e,t,n){"use strict";t.exports=["$resource","Uri",function(e,t){return e(t.appUri("engine://engine/:engine/process-definition/:id/:action"),{id:"@id"},{queryStatistics:{method:"GET",isArray:!0,params:{id:"statistics"}},queryActivityStatistics:{method:"GET",isArray:!0,params:{action:"statistics"}},getBpmn20Xml:{method:"GET",params:{action:"xml"},cache:!0}})}]},{}],222:[function(e,t,n){"use strict";t.exports=["$resource","Uri",function(e,t){return e(t.appUri("engine://engine/:engine/process-instance/:id/:action"),{id:"@id"},{query:{method:"POST",isArray:!0},count:{method:"POST",isArray:!1,params:{id:"count"}},activityInstances:{method:"GET",isArray:!1,params:{action:"activity-instances"}}})}]},{}],223:[function(e,t,n){"use strict";t.exports=["$resource","Uri",function(e,t){return e(t.appUri("engine://engine/:engine/task/:id/:action/:subAction"),{id:"@id"},{query:{method:"POST",isArray:!0},count:{method:"POST",isArray:!1,params:{id:"count"}},getIdentityLinks:{method:"GET",isArray:!0,params:{action:"identity-links"}},addIdentityLink:{method:"POST",params:{action:"identity-links"}},deleteIdentityLink:{method:"POST",params:{action:"identity-links",subAction:"delete"}},setAssignee:{method:"POST",params:{action:"assignee"}}})}]},{}],224:[function(e,t,n){"use strict";t.exports=["ProcessDefinitionResource","page",function(t,c){return function i(e,r,o,a,s){o=o||[],r(e,function(e,n){n?t.get({id:n.processDefinitionId||n.definitionId}).$promise.then(function(e){var t=e;o=[{href:"#/process-definition/"+t.id+(s?"/"+s:""),label:t.name||t.key},{divider:":",href:"#/process-instance/"+n.id+(s?"/"+s:""),label:n.id.slice(0,8)+"…"}].concat(o),i(n,r,o,a,s)}).catch(function(){}):c.breadcrumbsInsertAt(a,o)})}}]},{}],225:[function(e,t,n){"use strict";t.exports=[function(){return{escape:function(e){var t=document.createTextNode(e),n=document.createElement("div");return n.appendChild(t),n.innerHTML}}}]},{}],226:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./transform"),o=e("./variables"),a=e("./breadcrumbTrails"),s=e("./../../../../common/scripts/services/routeUtil"),c=e("./../../../../common/scripts/services/page"),l=e("./../../../../common/scripts/services/cam-api"),u=e("./../../../../common/scripts/services/has-plugin"),p=e("camunda-commons-ui/lib/services/cam-local-configuration"),d=e("./../../../../common/scripts/services/typeUtils"),f=e("./escapeHtml"),h=i.module("cam.cockpit.services",[]);h.factory("Transform",r),h.factory("Variables",o),h.service("page",c),h.factory("breadcrumbTrails",a),h.factory("routeUtil",s),h.factory("camAPI",l),h.factory("hasPlugin",u),h.factory("localConf",p),h.factory("typeUtils",d),h.factory("escapeHtml",f),t.exports=h},{"./../../../../common/scripts/services/cam-api":267,"./../../../../common/scripts/services/has-plugin":269,"./../../../../common/scripts/services/page":271,"./../../../../common/scripts/services/routeUtil":272,"./../../../../common/scripts/services/typeUtils":273,"./breadcrumbTrails":224,"./escapeHtml":225,"./transform":227,"./variables":228,"camunda-commons-ui/lib/services/cam-local-configuration":91,"camunda-commons-ui/vendor/angular":127}],227:[function(e,t,n){"use strict";var r=e("camunda-commons-ui/vendor/bpmn-js"),i=["$q",function(t){return{transformBpmn20Xml:function(e){var i=t.defer();return r.prototype.options={},r.prototype._createModdle({moddleExtensions:window.bpmnJsModdleExtensions||{}}).fromXML(e,"bpmn:Definitions",function(e,t,n){i.resolve({definitions:t,bpmnElements:n.elementsById})}),i.promise}}}];t.exports=i},{"camunda-commons-ui/vendor/bpmn-js":129}],228:[function(e,t,n){"use strict";var i=["$translate",function(i){function e(e){var t=[];for(var n in e)t.push(n);return t}var t={eq:"=",neq:"!=",gt:">",gteq:">=",lt:"<",lteq:"<=",like:" like "},r=function(e){var t={};for(var n in e)t[e[n]]=n;return t}(t);var o=new RegExp("^(\\w+)\\s*("+e(r).join("|")+")\\s*([^!=<>]+)$");return{parse:function(e){var t,n=o.exec(e);if(!n)throw new Error(i.instant("VARIABLE_ERROR_VARIABLE_SYNTAX",{message:e}));return t=function(e){if(/^".*"\s*$/.test(e))return e.substring(1,e.length-1);if(parseFloat(e)+""===e)return parseFloat(e);if("true"===e||"false"===e)return"true"===e;throw new Error(i.instant("VARIABLE_ERROR_INFER_TYPE",{value:e}))}(n[3]),{name:n[1],operator:r[n[2]],value:t}},toString:function(e){return e?e.name+function(e){return t[e]}(e.operator)+function(e){if(!e)return e;if("string"==typeof e)return'"'+e+'"';if("boolean"==typeof e)return e?"true":"false";if("number"==typeof e)return e;throw new Error(i.instant("VARIABLE_ERROR_INFER_TYPE",{value:e}))}(e.value):""},operators:e(r)}}];t.exports=i},{}],229:[function(e,t,n){"use strict";t.exports=["$location","routeUtil",function(i,t){return{scope:{divider:"@"},restrict:"A",template:'\x3c!-- # CE - camunda-bpm-webapp/ui/common/scripts/directives/breadcrumbs.html --\x3e\n<ul class="cam-breadcrumb">\n  <li ng-class="{ active: !breadcrumbs || !breadcrumbs.length }">\n    <a href="#/"\n       class="text">{{ \'DASHBOARD_DASHBOARD\' | translate }}</a>\n  </li>\n\n  <li ng-repeat="(index, crumb) in breadcrumbs"\n      ng-class="{ active: !!$last }"\n      data-index="{{ index }}">\n    <span class="divider" ng-click="crumb.hidden = !crumb.hidden">{{ crumb.divider || divider }}</span>\n\n    \x3c!-- using ng-show to separate logic of creating breadcrumbs elements from\n         logic of dynamically showing and hidding them --\x3e\n    <a ng-if="!!crumb.href && !$last"\n       ng-show="!crumb.hidden"\n       href="{{ getHref(crumb) }}"\n       class="text">{{ crumb.label | translate }}</a>\n\n    <span ng-if="!!crumb.href && !!$last"\n          ng-show="!crumb.hidden"\n          class="text">{{ crumb.label }}</span>\n\n    <a ng-if="!crumb.href && !!crumb.callback"\n       ng-show="!crumb.hidden"\n       ng-click="crumb.callback(index, breadcrumbs)"\n       href\n       class="text">{{ crumb.label }}</a>\n\n    <span ng-if="!crumb.href && !crumb.callback"\n          ng-show="!crumb.hidden"\n          class="text">{{ crumb.label | translate }}</span>\n\n    <span ng-if="(crumb.type === \'processDefinition\' && crumb.processDefinition.suspended) || (crumb.type === \'processInstance\' && crumb.processInstance.suspended)"\n          ng-show="!crumb.hidden"\n          class="badge badge-warning badge-suspended"\n          uib-tooltip="{{ \'BREAD_CRUMBS_CURRENTLY_SUSPENDED\' | translate }}"\n          tooltip-placement="bottom">\n      <span class="glyphicon glyphicon-pause white"></span>\n    </span>\n\n    <span ng-if="!!crumb.choices && crumb.choices.length === 1" ng-show="!crumb.hidden">\n      <span class="divider">:</span>\n      {{ getActiveChoice(crumb.choices) | translate }}\n    </span>\n\n    <span ng-if="!!crumb.choices && crumb.choices.length === 2"\n          class="switcher"\n          ng-show="!crumb.hidden"\n          ng-init="choices = sortedChoices(crumb.choices)">\n      <span class="divider">:</span>\n\n      <span class="current">{{ choices[0].label | translate}}</span>\n      <span class="divider">|</span>\n      <a href ng-click="selectChoice($event, choices[1])">{{ choices[1].label | translate}}</a>\n    </span>\n\n    <span ng-if="!!crumb.choices && crumb.choices.length > 2"\n          ng-show="!crumb.hidden"\n          class="dropdown"\n          uib-dropdown>\n      <span class="divider">:</span>\n\n      <a class="dropdown-toggle"\n         uib-dropdown-toggle\n         ng-show="!crumb.hidden"\n         href>\n        {{ getActiveChoice(crumb.choices) }}\n        <span class="caret"></span>\n      </a>\n\n      <ul class="dropdown-menu dropdown-menu-right" ng-show="!crumb.hidden" uib-dropdown-menu>\n        <li ng-repeat="choice in crumb.choices"\n            ng-class="{active: choice.active}">\n          <a href ng-click="selectChoice($event, choice)">{{ choice.label }}</a>\n        </li>\n      </ul>\n    </span>\n  </li>\n</ul>\n\x3c!-- / CE - camunda-bpm-webapp/ui/common/scripts/directives/breadcrumbs.html --\x3e\n',link:function(n){n.$on("page.breadcrumbs.changed",function(e,t){n.breadcrumbs=t}),n.getHref=function(e){return t.redirectTo(e.href,i.search(),e.keepSearchParams)},n.selectChoice=function(e,t){e.preventDefault(),i.path(t.href.substr(1))},n.getActiveChoice=function(e){var t;return e.forEach(function(e){e.active&&(t=e.label)}),t||"Options"},n.sortedChoices=function(e){return e.sort(function(e,t){return e.active?-1:t.active?1:0})}},controller:["$scope","page",function(e,t){e.breadcrumbs=t.breadcrumbsGet()}]}}]},{}],230:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",require:"ngModel",link:function(e,r,t,o){var a=/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(|\.[0-9]{0,4})$/;o.$parsers.push(function(e){var t=a.test(e),n=!t||!isNaN(new Date(e).getTime());return o.$setValidity("datePattern",t),o.$setValidity("dateValue",n),e});o.$formatters.push(function(e){if(e){var t=!isNaN(new Date(e).getTime()),n=a.test(e),i=t&&n;return o.$setValidity("datePattern",n),o.$setValidity("dateValue",t),i||(o.$pristine=!1,o.$dirty=!0,r.addClass("ng-dirty")),e}})}}}},{}],231:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",template:'\x3c!-- EE # src/main/resources-plugin/cockpit/drd/app/definition/tabs/decision-instances/component/drd-decision-instances-pagination.html --\x3e\n<ul uib-pagination ng-if="Pagination.total > Pagination.pages.size"\n            class="pagination-sm"\n\n            page="Pagination.pages.current"\n            ng-model="Pagination.pages.current"\n\n            total-items="Pagination.total"\n            items-per-page="Pagination.pages.size"\n\n            max-size="7"\n            boundary-links="true"></ul>\n\x3c!-- EE / src/main/resources-plugin/cockpit/drd/app/definition/tabs/decision-instances/component/drd-decision-instances-pagination.html --\x3e\n',controller:"CamPaginationController as Pagination",scope:{total:"=",onPaginationChange:"&camPagination"}}}},{}],232:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",transclude:!0,template:'<div cam-widget-search\n     cam-widget-search-total="Searchable.pages.total"\n     cam-widget-search-valid-searches="Searchable.config.searches"\n     cam-widget-search-translations="Searchable.config.tooltips"\n     cam-widget-search-types="Searchable.config.types"\n     cam-widget-search-id="{{searchId}}"\n     cam-widget-search-operators="Searchable.config.operators"\n     cam-widget-search-storage-group="Searchable.storageGroup"\n     cam-widget-search-mode="filter">\n</div>\n<div cam-widget-loader\n     text-error="{{Searchable.loadingError}}"\n     text-empty="{{Searchable.textEmpty}}"\n     loading-state="{{Searchable.loadingState}}">\n\n  <div ng-transclude></div>\n\n  <ul uib-pagination ng-if="Searchable.pages.total > Searchable.pages.size"\n              class="pagination-sm"\n              page="Searchable.pages.current"\n              ng-model="Searchable.pages.current"\n              total-items="Searchable.pages.total"\n              items-per-page="Searchable.pages.size"\n              max-size="7"\n              boundary-links="true">\n  </ul>\n</div>\n',controller:"CamPaginationSearchIntegrationController as Searchable",scope:{config:"=",loadingState:"=",loadingError:"@",arrayTypes:"=?",variableTypes:"=?",buildCustomQuery:"&",onSearchChange:"&",textEmpty:"@",storageGroup:"=",searchId:"@?",blocked:"="}}}},{}],233:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",template:'<ul class="nav nav-tabs"\n    ng-if="Tabs.providers.length > 1">\n  <li ng-repeat="tabProvider in Tabs.providers"\n      ng-class="{ active: Tabs.isSelected(tabProvider) }">\n    <a href ng-click="Tabs.selectTab(tabProvider)">{{ tabProvider.label | translate }}</a>\n  </li>\n</ul>\n\n<h4 ng-if="Tabs.providers.length === 1">{{ Tabs.providers[0].label | translate }}:</h4>\n\n<div class="ctn-tabbed-content ctn-scroll"\n     ng-if="Tabs.providers.length">\n  <view provider="Tabs.selected"\n        vars="Tabs.vars" />\n</div>\n',controller:"CamTabsController as Tabs",scope:{providerParams:"=camTabs",tabsApi:"=?",vars:"=?",varsValues:"=?"}}}},{}],234:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",template:'\x3c!-- # CE - ui/common/scripts/module/components/cam-toolbar.html --\x3e\n<div class="ctn-toolbar">\n  \x3c!-- Toolbar actions are provided by plugins --\x3e\n  <span ng-repeat="provider in providers">\n    <view provider="provider"\n          vars="vars" />\n  </span>\n</div>\n\x3c!-- / CE - ui/common/scripts/module/components/cam-toolbar.html --\x3e\n',scope:{providers:"=camToolbar",vars:"=?"}}}},{}],235:[function(e,t,n){"use strict";var s=e("camunda-commons-ui/vendor/angular");function i(e,t,n,i,r){this.searchWidgetUtils=n,this.search=i,this.lastSearchQueryString=null,this.locationChange=!0,e.$on("$destroy",function(){i("page",null)}),r(e,this,["config","arrayTypes","variableTypes","onSearchChange","buildCustomQuery","loadingError","loadingState","textEmpty","storageGroup","blocked"]),this.arrayTypes=s.isArray(this.arrayTypes)?this.arrayTypes:[],this.variableTypes=s.isArray(this.variableTypes)?this.variableTypes:[],this.pages={size:50,total:0,current:this.getCurrentPageFromSearch()};var o=function(){return this.pages.current}.bind(this);e.$watch(o,this.onPageChange.bind(this)),e.$on("$locationChangeSuccess",this.onLocationChange.bind(this)),e.$watch("config.searches",this.updateQuery.bind(this),!0),e.$watch("blocked",this.onBlockedChange.bind(this));var a=t.$on("cam-common:cam-searchable:query-force-change",this.onForcedRefresh.bind(this));e.$on("$destroy",function(){a()})}function r(e){return e&&e.map(function(e){return function(e){var t=e.value&&e.value.value,n=e.type&&e.type.value.value,i=e.operator&&e.operator.value.key,r=e.name&&e.name.value;return{value:t,type:n,operator:i,name:r}}(e)})}t.exports=["$scope","$rootScope","searchWidgetUtils","search","exposeScopeProperties",i],i.prototype.onForcedRefresh=function(){this.resetPage(),this.executeQueries()},i.prototype.onBlockedChange=function(e,t){!e&&t&&this.query&&this.executeQueries()},i.prototype.getSearchQueryString=function(){return this.search().searchQuery},i.prototype.hasSearchQueryStringChanged=function(){var e=this.getSearchQueryString();return e!==this.lastSearchQueryString&&(this.lastSearchQueryString||"[]"!==e)},i.prototype.onPageChange=function(e,t){var n=this.getCurrentPageFromSearch();e!=t&&e!==n&&(this.search("page",e&&1!=e?e:null),this.hasSearchQueryStringChanged()||this.executeQueries())},i.prototype.onLocationChange=function(){var e=this.getCurrentPageFromSearch();+this.pages.current!=+e&&(this.pages.current=e,this.hasSearchQueryStringChanged()?this.locationChange=!0:this.executeQueries())},i.prototype.getCurrentPageFromSearch=function(){return+this.search().page||1},i.prototype.updateQuery=function(e,t){this.areSearchesDifferent(e,t)&&(this.query=this.buildCustomQuery&&this.buildCustomQuery(e)||this.createQuery(e),this.locationChange||this.resetPage(),this.lastSearchQueryString=this.getSearchQueryString(),this.executeQueries())},i.prototype.resetPage=function(){var e=this.search();this.pages.current=1,e.page=1,this.search.updateSilently(e,!0)},i.prototype.executeQueries=function(){this.query&&!this.blocked&&(this.locationChange=!1,this.onSearchChange({query:s.copy(this.query),pages:s.copy(this.pages)}).then(function(e){this.pages.total=e}.bind(this)))},i.prototype.createQuery=function(e){return this.searchWidgetUtils.createSearchQueryForSearchWidget(e,this.arrayTypes,this.variableTypes)},i.prototype.areSearchesDifferent=function(e,t){var n=r(e),i=r(t);return!s.equals(n,i)}},{"camunda-commons-ui/vendor/angular":127}],236:[function(e,t,n){"use strict";t.exports=["$scope","search","paginationUtils","exposeScopeProperties",function(e,t,n,i){n.initializePaginationInController(e,t,function(){e.onPaginationChange({pages:e.pages})}),i(e,this,["total","pages"]),e.onPaginationChange({pages:e.pages})}]},{}],237:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular");function r(e,t,n){this.providers=this.getProviders(n,e),this.selected=this.providers[0],this.search=t,this.initializeVars(e),e.$on("$locationChangeSuccess",this.onLocationChange.bind(this)),this.onLocationChange()}function o(e,t){return(t.priority||0)-(e.priority||0)}t.exports=["$scope","search","Views",r],r.prototype.initializeVars=function(e){this.vars=e.vars||{read:["tabsApi"]},e.varsValues&&i.extend(e,e.varsValues)},r.prototype.getProviders=function(e,t){return e.getProviders(t.providerParams).sort(o)},r.prototype.onLocationChange=function(){var t=this.search();this.isTabSelectionChangedInUrl(t)?this.selected=this.providers.filter(function(e){return e.id===t.tab})[0]:t.tab||(this.selected=this.providers[0])},r.prototype.isTabSelectionChangedInUrl=function(e){return i.isString(e.tab)&&(!this.selected||e.tab!==this.selected.id)},r.prototype.selectTab=function(e){var t=this.search(),n={tab:e.id};this.selected=e,this.search.updateSilently(i.extend(t,n))},r.prototype.isSelected=function(e){return this.selected===e}},{"camunda-commons-ui/vendor/angular":127}],238:[function(e,t,n){"use strict";function i(){this._hovered=null,this._listeners=[]}(t.exports=i).prototype.hoverTitle=function(e){this._hovered=e,this._fireListeners()},i.prototype.cleanHover=function(){this._hovered=null,this._fireListeners()},i.prototype.addHoverListener=function(e,t){var n={title:e,listener:t};return this._listeners.push(n),this._fireEntry(n),function(){this._listeners=this._listeners.filter(function(e){return e.listener!==t})}.bind(this)},i.prototype._fireListeners=function(){this._listeners.forEach(this._fireEntry.bind(this))},i.prototype._fireEntry=function(e){e.listener(e.title===this._hovered)}},{}],239:[function(e,t,n){"use strict";t.exports=["readFiles",function(i){return{restrict:"A",scope:{onChange:"&camFile"},link:function(n,e){e[0].addEventListener("change",function(t){n.$apply(function(){i(e[0].files).then(function(e){n.onChange({$event:t,files:e})})})})}}}]},{}],240:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",transclude:!0,scope:!0,controller:"HoverAreaController as HoverArea",link:function(e,t,n,i,r){r(function(e){t.empty(),t.append(e)})}}}},{}],241:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",require:"^camHoverArea",link:function(e,t,n,i){t.on("mouseenter",function(){e.$apply(function(){i.hoverTitle(n.camHoverTrigger)})}),t.on("mouseleave",function(){e.$apply(i.cleanHover.bind(i))})}}}},{}],242:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",require:"^camHoverArea",link:function(e,t,n,i){var r,o=n.hoverClass||"hovered";function a(){r&&r()}n.$observe("camHoverableTitle",function(e){a(),r=i.addHoverListener(e,function(e){e?t.addClass(o):t.removeClass(o)})}),t.on("$destroy",a)}}}},{}],243:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",template:'<span cam-widget-inline-field\n  class="set-value"\n  type="{{type}}"\n  change="onChange()"\n  value="property">\n  <span ng-show="property == null" class="null-value">{{ \'TIME_TO_LIVE_NULL\' | translate }}</span>\n  <span ng-show="property != null">\n    {{format({property: property}) || property}}\n    <button type="button" class="btn btn-link btn-xs" ng-click="remove($event)">\n      <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>\n    </button>\n  </span>\n</span>\n',scope:{property:"=camInlinePanelProperty",format:"&",onChange:"&",onRemove:"&",type:"@"},link:function(t){t.remove=function(e){e.preventDefault(),e.stopPropagation(),t.onRemove()}}}}},{}],244:[function(e,t,n){"use strict";t.exports=function(){return{replace:!1,restrict:"A",scope:{column:"@sortByProperty"},transclude:!0,require:"^^camSortableTableHeader",template:'<span  ng-transclude></span>\n<a ng-click="changeOrder(column)">\n  <span class="glyphicon" ng-class="orderClass(column)"></span>\n</a>',link:function(e,t,n,i){e.orderClass=function(e){var t=i.getSorting();return"glyphicon-"+{none:"minus",desc:"chevron-down",asc:"chevron-up"}[(e=e||t.sortBy)===t.sortBy?t.sortOrder:"none"]},e.changeOrder=function(e){i.changeOrder(e)}}}}},{}],245:[function(e,t,n){"use strict";function s(){}t.exports=function(){return{replace:!1,restrict:"A",scope:{onSortInitialized:"&",onSortChange:"&",sortBy:"@defaultSortBy",sortOrder:"@defaultSortOrder",sortingId:"@"},controller:["$scope","localConf",function(e,t){var n=e.sortingId,i={sortBy:e.sortBy,sortOrder:e.sortOrder},r=e.onSortInitialized||s,o=e.onSortChange||s,a=t.get(n,i);r({sorting:a}),this.changeOrder=function(e){a.sortBy=e,a.sortOrder="desc"===a.sortOrder?"asc":"desc",function(e){t.set(n,e)}(a),o({sorting:a})},this.getSorting=function(){return a}}]}}},{}],246:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",template:'\x3c!-- CE ui/common/scripts/module/external-tasks-common/components/external-task-activity-link.html --\x3e\n<a ng-href="{{Link.getLink()}}">\n  {{Link.getActivityName()}}\n</a>\n\x3c!-- / CE ui/common/scripts/module/external-tasks-common/components/external-task-activity-link.html --\x3e\n',controller:"ExternalTaskActivityLinkController as Link",scope:{activityId:"=externalTaskActivityLink",bpmnElements:"=",searchQueryType:"=?"}}}},{}],247:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",template:'<a ng-href="{{Link.getStacktraceUrl()}}" target="_blank" ng-transclude></a>\n',transclude:!0,controller:"ExternalTaskErrorMessageLinkController as Link",scope:{taskId:"=externalTaskErrorMessageLink",historic:"=?"}}}},{}],248:[function(e,t,n){"use strict";t.exports=function(){return{restrict:"A",template:'\x3c!-- # EE - ui/common/scripts/module/external-tasks-common/components/external-tasks-tab.html --\x3e\n<div cam-widget-loader\n     loading-state="{{ TasksTab.loadingState }}"\n     text-empty="{{ \'PLUGIN_EXTERNAL_TASK_NO_EXTERNAL_TASK_FOR_THIS_PROCESS\' | translate }}">\n\n  \x3c!-- transclustion target --\x3e\n  <div ng-transclude></div>\n  \x3c!-- / transclustion target --\x3e\n\n  <div cam-pagination="TasksTab.onPaginationChange(pages)" total="TasksTab.total" >\n  </div>\n</div>\n\x3c!-- / EE - ui/common/scripts/module/external-tasks-common/components/external-tasks-tab.html --\x3e\n',transclude:!0,controller:"ExternalTasksTabController as TasksTab",scope:{onLoad:"&externalTasksTab",processData:"="}}}},{}],249:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular");function r(e,t,n,i,r,o){t(e,this,["activityId","bpmnElements","searchQueryType"]),this.search=n,this.params=r,this.path=i.path(),this.searchWidgetUtils=o}t.exports=["$scope","exposeScopeProperties","search","$location","params","searchWidgetUtils",r],r.prototype.getLink=function(){var e=i.copy(this.search()),t=JSON.parse(e.searchQuery||"[]");return this.searchQueryType?e.searchQuery=JSON.stringify(this.searchWidgetUtils.replaceActivitiesInSearchQuery(t,this.searchQueryType,[this.activityId])):e.activityIds=this.activityId,"#"+this.path+"?"+this.params(e)},r.prototype.getActivityName=function(){var e=this.activityId;return this.bpmnElements[e]&&this.bpmnElements[e].name?this.bpmnElements[e].name:e}},{"camunda-commons-ui/vendor/angular":127}],250:[function(e,t,n){"use strict";function i(e,t,n){n(e,this,["taskId","historic"]),this.Uri=t}t.exports=["$scope","Uri","exposeScopeProperties",i],i.prototype.getStacktraceUrl=function(){var e="engine://engine/:engine/external-task/"+this.taskId+"/errorDetails";return this.historic&&(e="engine://engine/:engine/history/external-task-log/"+this.taskId+"/error-details"),this.Uri.appUri(e)}},{}],251:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular");function r(e,t,n){t(e,this,["onLoad"]),e.$on("$destroy",function(){n("page",null)}),e.processData.newChild(e).observe("filter",this.onFilterChanged.bind(this))}function o(e){return e&&e.activityIds&&e.activityIds.length?e.activityIds:null}t.exports=["$scope","exposeScopeProperties","search",r],(t.exports.ExternalTasksTabController=r).prototype.onFilterChanged=function(e){this.isFilterChanged(e)&&(this.filter=e,this.pages&&this.loadTasks())},r.prototype.isFilterChanged=function(e){var t=o(this.filter),n=o(e);return!this.filter||!i.equals(t,n)},r.prototype.onPaginationChange=function(e){this.pages=e,this.filter&&this.loadTasks()},r.prototype.loadTasks=function(){this.loadingState="LOADING",this.onLoad({pages:i.copy(this.pages),activityIds:o(this.filter)}).then(function(e){this.total=e.count,e.list?this.loadingState="LOADED":this.loadingState="EMPTY"}.bind(this))}},{"camunda-commons-ui/vendor/angular":127}],252:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./services/observe-bpmn-elements"),o=e("./components/external-task-activity-link"),a=e("./components/external-tasks-tab"),s=e("./components/external-task-error-message-link"),c=e("./controllers/external-task-activity-link-controller"),l=e("./controllers/external-tasks-tab-controller"),u=e("./controllers/external-task-error-message-link-controller"),p=i.module("cam-common.external-tasks-common",[]);p.factory("observeBpmnElements",r),p.directive("externalTaskActivityLink",o),p.directive("externalTasksTab",a),p.directive("externalTaskErrorMessageLink",s),p.controller("ExternalTaskActivityLinkController",c),p.controller("ExternalTasksTabController",l),p.controller("ExternalTaskErrorMessageLinkController",u),t.exports=p},{"./components/external-task-activity-link":246,"./components/external-task-error-message-link":247,"./components/external-tasks-tab":248,"./controllers/external-task-activity-link-controller":249,"./controllers/external-task-error-message-link-controller":250,"./controllers/external-tasks-tab-controller":251,"./services/observe-bpmn-elements":253,"camunda-commons-ui/vendor/angular":127}],253:[function(e,t,n){"use strict";t.exports=function(){return function(e,t){t.processData.newChild(e).observe("bpmnElements",function(e){t.bpmnElements=e})}}},{}],254:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular"),r=e("./services/is-module-available"),o=e("./services/expose-scope-properties"),a=e("./services/loaders"),s=e("./services/integrate-activity-instance-filter"),c=e("./services/params"),l=e("./services/create-list-query-function"),u=e("./services/create-is-search-query-changed-function"),p=e("./services/read-files"),d=e("./services/upload"),f=e("./services/get-deployment-url"),h=e("./services/is-file-upload-supported"),m=e("./services/get"),v=e("./components/cam-toolbar"),g=e("./components/cam-pagination"),y=e("./components/cam-searchable-area"),b=e("./components/cam-tabs"),_=e("./directives/cam-hover-area"),w=e("./directives/cam-hover-trigger"),x=e("./directives/cam-hoverable-title"),E=e("./directives/cam-file"),C=e("./directives/cam-inline-panel-property"),k=e("./directives/cam-sortable-table-header"),S=e("./directives/cam-sortable-table-column"),T=e("./controllers/hover-area"),O=e("./controllers/cam-pagination"),A=e("./controllers/cam-tabs"),I=e("./controllers/cam-pagination-search-integration"),D=e("../util/routeUtil"),P=e("../util/pagination-utils"),R=e("../util/search-widget-utils"),N=e("./external-tasks-common"),M=i.module("cam-common",[N.name]);M.factory("isModuleAvailable",r),M.factory("exposeScopeProperties",o),M.factory("Loaders",a),M.factory("integrateActivityInstanceFilter",s),M.factory("params",c),M.factory("createListQueryFunction",l),M.factory("createIsSearchQueryChangedFunction",u),M.factory("readFiles",p),M.factory("upload",d),M.factory("getDeploymentUrl",f),M.factory("isFileUploadSupported",h),M.factory("get",m),M.directive("camToolbar",v),M.directive("camPagination",g),M.directive("camSearchableArea",y),M.directive("camTabs",b),M.directive("camHoverArea",_),M.directive("camHoverTrigger",w),M.directive("camHoverableTitle",x),M.directive("camFile",E),M.directive("camInlinePanelProperty",C),M.directive("camSortableTableHeader",k),M.directive("camSortableTableColumn",S),M.controller("HoverAreaController",T),M.controller("CamPaginationController",O),M.controller("CamTabsController",A),M.controller("CamPaginationSearchIntegrationController",I),M.value("routeUtil",D),M.value("paginationUtils",P),M.value("searchWidgetUtils",R),t.exports=M},{"../util/pagination-utils":275,"../util/routeUtil":276,"../util/search-widget-utils":277,"./components/cam-pagination":231,"./components/cam-searchable-area":232,"./components/cam-tabs":233,"./components/cam-toolbar":234,"./controllers/cam-pagination":236,"./controllers/cam-pagination-search-integration":235,"./controllers/cam-tabs":237,"./controllers/hover-area":238,"./directives/cam-file":239,"./directives/cam-hover-area":240,"./directives/cam-hover-trigger":241,"./directives/cam-hoverable-title":242,"./directives/cam-inline-panel-property":243,"./directives/cam-sortable-table-column":244,"./directives/cam-sortable-table-header":245,"./external-tasks-common":252,"./services/create-is-search-query-changed-function":255,"./services/create-list-query-function":256,"./services/expose-scope-properties":257,"./services/get":259,"./services/get-deployment-url":258,"./services/integrate-activity-instance-filter":260,"./services/is-file-upload-supported":261,"./services/is-module-available":262,"./services/loaders":263,"./services/params":264,"./services/read-files":265,"./services/upload":266,"camunda-commons-ui/vendor/angular":127}],255:[function(e,t,n){"use strict";t.exports=["search",function(n){return function(){var t=null;return function(){var e=n().searchQuery;if(e!==t&&(t||"[]"!==e))return t=e,!0}}}]},{}],256:[function(e,t,n){"use strict";var l=e("camunda-commons-ui/vendor/angular");t.exports=["$q",function(c){return function(e,s){return function(r,o,a){return e(r).then(function(e){var t=(o.current-1)*o.size,n=e.count,i=l.extend({},r,{firstResult:t,maxResults:o.size},a);return t<n?c.all({count:n,list:s(i)}):e})}}}]},{"camunda-commons-ui/vendor/angular":127}],257:[function(e,t,n){"use strict";t.exports=function(){return function(n,e,t){var i=t.reduce(function(e,t){return e[t]={get:function(){return n[t]},set:function(e){n[t]=e}},e},{});Object.defineProperties(e,i)}}},{}],258:[function(e,t,n){"use strict";t.exports=["$location","routeUtil",function(r,o){return function(e,t){var n={deployment:e.id,deploymentsQuery:JSON.stringify([{type:"id",operator:"eq",value:e.id}])};t&&(n.resourceName=t.name);var i=r.search()||{};return i.deploymentsSortBy&&(n.deploymentsSortBy=i.deploymentsSortBy),i.deploymentsSortOrder&&(n.deploymentsSortOrder=i.deploymentsSortOrder),o.redirectTo("#/repository",n,["deployment","resourceName","deploymentsQuery","deploymentsSortOrder","deploymentsSortBy"])}}]},{}],259:[function(e,t,n){"use strict";t.exports=function(){return function(e,t,n){for(var i,r=e,o=0;o<t.length;o++){if(i=t[o],!r||!r[i])return n;r=r[i]}return r}}},{}],260:[function(e,t,n){"use strict";var g=e("camunda-commons-ui/vendor/angular");t.exports=["search","$location","searchWidgetUtils",function(m,r,v){return function(d,t,f){var h=d.processData,n=d.processInstance;function i(e){var t=m(),n=v.getActivityIdsFromUrlParams("activityInstanceIdIn",t),i=t.activityIds?t.activityIds.split(","):[],r=function(e,t,n){return e&&g.equals(t,e.activityIds)&&!g.equals(n,e.activityInstanceIds)}(e,i,n);return r&&(i=[]),{activityIds:i,activityInstanceIds:n,page:parseInt(t.page,10)||void 0,replace:r||!e}}f=f||{},d.filter=i(),h.provide("filter",i()),h.observe(["filter","instanceIdToInstanceMap","activityIdToInstancesMap"],function(e,i,a){var t,r=e.activityIds||[],s=e.activityInstanceIds||[],n=parseInt(e.page,10)||null,o=e.scrollToBpmnElement,c=e!==d.filter,l=e.replace;if(delete e.replace,g.forEach(s,function(e){var t=i[e]||{},n=t.activityId||t.targetActivityId;-1===r.indexOf(n)&&n&&r.push(n)}),g.forEach(r,function(e){var t=a[e],n=!1,i=[];if(t){for(var r,o=0;r=t[o];o++){if(-1!==s.indexOf(r.id)){n=!0;break}i.push(r.id)}n||(s=s.concat(i))}}),f.shouldRemoveActivityIds)for(var u=0;u<r.length;u++)a[r[u]]||(r.splice(u,1),u--);for(u=0;u<s.length;u++)i[s[u]]||(s.splice(u,1),u--);if(0<r.length){var p=r[r.length-1];p!==o&&(o=p)}t={activityIds:r,activityInstanceIds:s,scrollToBpmnElement:o,page:n},g.equals(t,d.filter)||(d.filter=t,h.set("filter",d.filter));c&&d.filter&&function(e,t){var n=g.isArray(e.activityInstanceIds)?e.activityInstanceIds:[],i=g.isArray(e.activityIds)?e.activityIds:[],r=m(),o=JSON.parse(r.searchQuery||"[]");o=r.searchQuery||n.length||i.length?v.replaceActivitiesInSearchQuery(o,"activityInstanceIdIn",n):null;m.updateSilently({searchQuery:o?JSON.stringify(o):null,activityIds:i.length?i.join(","):null},t),d.filter=e}(d.filter,l)}),d.$on("$locationChangeSuccess",function(){var e=i(d.filter);-1<r.path().indexOf(n.id)&&(v.shouldUpdateFilter(e,d.filter,["activityIds","activityInstanceIds","page"])&&h.set("filter",e),t(d.processInstanceTabs))})}}]},{"camunda-commons-ui/vendor/angular":127}],261:[function(e,t,n){t.exports=["$window",function(t){return function(){var e=t.FileReader;return"function"==typeof e&&"function"==typeof e.prototype.readAsText}}]},{}],262:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/angular");t.exports=function(){return function(e){try{return!!i.module(e)}catch(e){return!1}}}},{"camunda-commons-ui/vendor/angular":127}],263:[function(e,t,n){"use strict";t.exports=["$rootScope",function(e){var n=[],i="LoaderService:active-loaders-changed";return{startLoading:function(){var t=function(){n=n.filter(function(e){return e!==t}),r()};return n.push(t),r(),t},addStatusListener:function(e,t){return t(o()),e.$on(i,function(){var e=o();t(e)})}};function r(){e.$broadcast(i)}function o(){return 0===n.length?"LOADED":"LOADING"}}]},{}],264:[function(e,t,n){t.exports=function(){return function(r){return Object.keys(r).reduce(function(e,t){var n=r[t],i=t+"="+encodeURIComponent(n);return e.length?e+"&"+i:i},"")}}},{}],265:[function(e,t,n){"use strict";t.exports=["$q","$window",function(i,r){return function(e){return i.all(Array.prototype.map.call(e,t))};function t(t){var n=i.defer(),e=new r.FileReader;return e.onload=function(e){n.resolve({file:t,content:e.target.result})},e.onerror=function(e){n.reject(e)},e.readAsText(t),n.promise}}]},{}],266:[function(e,t,n){"use strict";var f=e("camunda-commons-ui/vendor/angular");t.exports=["$window","$q","$rootScope","$cookies",function(l,u,p,d){return function(e,t,n){var i=u.defer();f.isArray(t)||(t=[t]),n=n||{};var r=t.map(function(e,t){return'Content-Disposition: form-data; name="data'+t+'"; filename="'+e.file.name+'"\r\nContent-Type: text/xml\r\n\r\n'+e.content+"\r\n"});r=r.concat(Object.keys(n).map(function(e){return'Content-Disposition: form-data; name="'+e+'"\r\n\r\n'+n[e]+"\r\n"}));var o=new l.XMLHttpRequest;o.onload=function(e){4===e.target.readyState&&(200===e.target.status?i.resolve(JSON.parse(e.target.responseText)):(401===e.target.status&&(p.$broadcast("authentication.changed",null),p.authentication=null,p.$broadcast("authentication.login.required")),i.reject(e)))},o.open("post",e,!0);var a="---------------------------"+Date.now().toString(16);o.setRequestHeader("Content-Type","multipart/form-data; boundary="+a);var s=d.get("XSRF-TOKEN");s&&o.setRequestHeader("X-XSRF-TOKEN",s);var c="--"+a+"\r\n"+r.join("--"+a+"\r\n")+"--"+a+"--\r\n";return o.send(c),i.promise}}]},{"camunda-commons-ui/vendor/angular":127}],267:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/camunda-bpm-sdk-angular");t.exports=["Uri","camAPIHttpClient",function(e,t){return new i.Client({HttpClient:t,apiUri:e.appUri("engine://"),engine:e.appUri(":engine")})}]},{"camunda-commons-ui/vendor/camunda-bpm-sdk-angular":130}],268:[function(e,t,n){"use strict";var r=e("angular"),o={dateFormat:{monthName:"MMMM",day:"DD",abbr:"lll",normal:"LLL",long:"LLLL",short:"LL"},locales:{availableLocales:["en"],fallbackLocale:"en"},skipCustomListeners:{default:!0,hidden:!1},skipIoMappings:{default:!0,hidden:!1},runtimeActivityInstanceMetrics:{display:!0},historicActivityInstanceMetrics:{adjustablePeriod:!0,period:{unit:"day"}},batchOperation:{mode:"filter"}};t.exports=function(t,e){return[function(){var n=window.localStorage,i=JSON.parse(n.getItem("camunda-web")||"{}");this.get=function(e,t){return void 0!==i[e]?i[e]:t},this.set=function(e,t){i[e]=t,n.setItem("camunda-web",JSON.stringify(i))},this.getDateFormat=function(e){return(t.dateFormat||o.dateFormat)[e]||o.dateFormat[e]},this.getFallbackLocale=function(){return t.locales&&t.locales.fallbackLocale?t.locales.fallbackLocale:o.locales.fallbackLocale},this.getAvailableLocales=function(){return t.locales&&t.locales.availableLocales?t.locales.availableLocales:o.locales.availableLocales},this.getDateLocales=function(){return t.camDateLocales},this.getAppVendor=function(){return t.app&&t.app.vendor?t.app.vendor:"Camunda"},this.getAppName=function(){return t.app&&t.app.name?t.app.name:e},this.getSkipCustomListeners=function(){return r.extend({},o.skipCustomListeners,t.skipCustomListeners)},this.getSkipIoMappings=function(){return r.extend({},o.skipIoMappings,t.skipIoMappings)},this.getRuntimeActivityInstanceMetrics=function(){var e="runtimeActivityInstanceMetrics";return r.extend({},o[e],t[e])},this.getActivityInstancePeriod=function(){var e="historicActivityInstanceMetrics";return t[e]&&t[e].period?t[e].period:o[e].period},this.getActivityInstanceAdjustable=function(){var e="historicActivityInstanceMetrics";return t[e]&&t[e].adjustablePeriod?t[e].adjustablePeriod:o[e].adjustablePeriod},this.getBatchOperationMode=function(){var e="batchOperation";return t[e]&&t[e].mode||o[e].mode},this.getBpmnJs=function(){return t.bpmnJs},this.getHistoricProcessInstancesSearch=function(){return(t.defaultFilter||{}).historicProcessDefinitionInstancesSearch},this.$get=function(){return this}}]}},{angular:"angular"}],269:[function(e,t,n){"use strict";t.exports=["Views",function(n){return function(e,t){return!!n.getProviders({component:e}).filter(function(e){return e.id===t}).length}}]},{}],270:[function(e,t,n){"use strict";var a=e("camunda-commons-ui/vendor/moment"),c=e("camunda-commons-ui/vendor/angular"),l=(new Date).getTime();t.exports=function(e,n,o){e.factory("localeLoader",["$q","$http","Notifications","configuration",function(e,o,a,s){return function(t){if(!t||!c.isString(t.prefix)||!c.isString(t.suffix))throw new Error("Couldn't load static files, no prefix or suffix specified!");var n=e.defer(),i=t.prefix+"_locales_data_"+t.key,r=s.get(i);return r&&(r=JSON.parse(r),"function"==typeof t.callback&&t.callback(null,r,t.key),n.resolve(r.labels)),o(c.extend({url:[t.prefix,t.key,t.suffix].join(""),method:"GET",params:{_:l}},t.$http)).then(function(e){s.set(i,JSON.stringify(e.data)),r||("function"==typeof t.callback&&t.callback(null,e.data,t.key),n.resolve(e.data.labels))}).catch(function(e){a.addError({status:"Error in localization configuration",message:'"'+t.key+'" is declared as available locale, but no such locale file exists.'}),r||("function"==typeof t.callback&&t.callback(e.data,null,t.key),n.reject(t.key))}),n.promise}}]),e.config(["$translateProvider","configurationProvider",function(e,t){var i=t.getAvailableLocales(),r=t.getFallbackLocale();e.useLoader("localeLoader",{prefix:n+"/app/"+o+"/locales/",suffix:".json",callback:function(e,t,n){!e&&t&&t.dateLocales&&a.updateLocale(n||r,t.dateLocales)}}),e.registerAvailableLanguageKeys(i),e.fallbackLanguage(r),e.useSanitizeValueStrategy("escapeParameters"),e.determinePreferredLanguage(function(){var e=window.navigator,t=((c.isArray(e.languages)?e.languages[0]:e.language||e.browserLanguage||e.systemLanguage||e.userLanguage)||"").split("-"),n=i.indexOf(t[0].toLowerCase());return-1<n?i[n]:r})}])}},{"camunda-commons-ui/vendor/angular":127,"camunda-commons-ui/vendor/moment":133}],271:[function(e,t,n){"use strict";var s=e("camunda-commons-ui/vendor/angular");t.exports=["$rootScope","$location","camAPI",function(n,t,i){var r={title:"Camunda",breadcrumbs:[]},e=s.element(document.querySelector("head title")),o=e[0].textContent||"Camunda Cockpit";function a(e){e&&e.name?i.resource("user").profile(e.name,function(e,t){if(e)throw n.userFullName=null,e;n.userFullName=t.firstName+" "+t.lastName}):n.userFullName=null}return n.$on("page.title.changed",function(){e.text([o,r.title].join(" | "))}),n.isActivePage=function(e){return 0===t.path().indexOf("/"+e)?"active":""},n.$on("authentication.changed",function(e,t){a(t)}),a(n.authentication),{titleSet:function(e){return r.title=e,n.$broadcast("page.title.changed",r.title),this},titleGet:function(){return r.title},breadcrumbsAdd:function(e){if(s.isArray(e))return s.forEach(e,this.breadcrumbsAdd);s.isFunction(e)&&(e={callback:e});return e.label=e.label||"…",r.breadcrumbs.push(e),n.$broadcast("page.breadcrumbs.changed",r.breadcrumbs),this},breadcrumbsInsertAt:function(e,t){return r.breadcrumbs=r.breadcrumbs.slice(0,e).concat(s.isArray(t)?t:[t]).concat(r.breadcrumbs.slice(e+1)),n.$broadcast("page.breadcrumbs.changed",r.breadcrumbs),this},breadcrumbsGet:function(e){return e?("last"===e&&(e=r.length-1),r.breadcrumbs[e]):r.breadcrumbs},breadcrumbsClear:function(){return r.breadcrumbs=[],n.$broadcast("page.breadcrumbs.changed",r.breadcrumbs),this}}}]},{"camunda-commons-ui/vendor/angular":127}],272:[function(e,t,n){"use strict";var r=e("./../util/routeUtil");t.exports=[function(){return{redirectToRuntime:function(e,t,n){return r.redirectToRuntime(e,t,n)},replaceLastPathFragment:function(e,t,n,i){return r.replaceLastPathFragment(e,t,n,i)},redirectTo:function(e,t,n){return r.redirectTo(e,t,n)}}}]},{"./../util/routeUtil":276}],273:[function(e,t,n){"use strict";var i=e("camunda-commons-ui/vendor/camunda-bpm-sdk").utils.typeUtils;t.exports=function(){return i}},{"camunda-commons-ui/vendor/camunda-bpm-sdk":131}],274:[function(e,t,n){"use strict";t.exports=function(e,t){return-1!==e.indexOf(t)}},{}],275:[function(e,t,n){"use strict";var o=e("camunda-commons-ui/vendor/angular"),a={size:50,total:0,current:1};function s(e){return e().page||1}t.exports={initializePaginationInController:function(e,i,r){var n=e.pages=o.copy(a);return n.current=s(i),e.$watch("pages.current",function(e,t){var n=s(i);e!=t&&e!==n&&(i("page",e&&1!=e?e:null),r(e,t))}),e.$on("$locationChangeSuccess",function(){var e=s(i);if(+n.current!=+e){var t=n.current;n.current=e,r(n.current,t)}}),e.$on("$destroy",function(){i("page",null)}),n}}},{"camunda-commons-ui/vendor/angular":127}],276:[function(e,t,n){"use strict";var o={redirectToRuntime:function(e,t,n){var i=t+"/runtime";return o.redirectTo(i,n,!0)},replaceLastPathFragment:function(e,t,n,i){var r=t.replace(/[^/]*$/,e);return o.redirectTo(r,n,i)},redirectTo:function(e,t,n){var i,r=[];if(t&&n){var o="[object Array]"===Object.prototype.toString.call(n);for(i in t)o&&-1===n.indexOf(i)||r.push(i+"="+encodeURIComponent(t[i]))}return e+(r.length?"?"+r.join("&"):"")}};t.exports=o},{}],277:[function(e,t,n){"use strict";var a=e("camunda-commons-ui/vendor/angular"),s=e("camunda-commons-ui/vendor/moment"),c=e("./includes");function i(e){return encodeURI(e).replace(/#/g,"%23")}function r(e,t){return a.isObject(e)?function(i){return Object.keys(i).reduce(function(e,t){var n=i[t];return null!=n&&(e[t]=n),e},{})}(function(i,r){return Object.keys(i).reduce(function(e,t){var n=i[t];return c(r,t)&&(e[t]=n),e},{})}(e,t)):e}function o(e,t){return t.map(function(e,t){return{type:e,operator:"eq",value:t}}.bind(null,e))}t.exports={getSearchQueryForSearchType:function(e,t){return t=[].concat(t),i("searchQuery="+JSON.stringify(o(e,t)))},getActivityIdsFromUrlParams:function(e,t){var n=JSON.parse(t.searchQuery||"[]");return function(t,e){return e.filter(function(e){return e.type===t}).map(function(e){return e.value})}(e,n)},replaceActivitiesInSearchQuery:function(e,t,n){return function(t,e){return e.filter(function(e){return e.type!==t})}(t,e).concat(o(t,n))},createSearchQueryForSearchWidget:function(e,t,n){return e=a.isArray(e)?e:[],t=a.isArray(t)?t:[],n=a.isArray(n)?n:["variables"],t=t.concat(n),e.reduce(function(e,t,n,i){var r=function(e,t){var n=e.type.value.key,i=e.operator.value.key;return function(e){return-1!==e.indexOf("Date")}(n)&&(n=n.slice(0,-4)),!function(e){return c(["After","Before","Like"],e)}(i)||c(t,n)||(n+=i),n}(i,t),o=function(e){return!!e.basic||function(e,t,n){return"like"!==t.toLowerCase()||/(%)|(_)/.test(e.replace(/(\\%)|(\\_)/g,""))?n.allowDates&&l.test(e)?s(e,s.ISO_8601).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):e:"%"+e+"%"}(e.value.value,e.operator.value.key,e)}(i);return c(t,r)&&(o=function(e,t){return{name:e.name.value,operator:e.operator.value.key,value:function(e){return isNaN(e)||""===e.trim()?"true"===e||"false"!==e&&("NULL"!==e?0!==e.indexOf("'")||e.lastIndexOf("'")!==e.length-1?e:e.substr(1,e.length-2):null):+e}(t)}}(i,o)),c(e,r)?n[r]=function(e,t,n){return a.isArray(e[t])?e[t].concat([n]):[n]}(n,r,o):n[r]=o,n}.bind(null,t,n),{})},shouldUpdateFilter:function(e,t,n){return n=a.isArray(n)?n:[],!a.equals(r(e,n),r(t,n))},createSearchesForActivityIds:o,encodeQuery:i,updateSearchValuesForTypeInCtrlMode:function(e,t,n){var i=function(e,t,n){return e.filter(function(e){return e.type!==n||!c(t,e.value)})}(e,n,t),r=function(e,t,n){var i=t.filter(function(e){return e.type===n}).map(function(e){return e.value});return e.filter(function(e){return!c(i,e)})}(n,e,t);return i.concat(o(t,r))}};var l=/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(|\.[0-9]{0,4})$/},{"./includes":274,"camunda-commons-ui/vendor/angular":127,"camunda-commons-ui/vendor/moment":133}]},{},[155])(155)});